"use strict";(self.webpackChunklibrary_management=self.webpackChunklibrary_management||[]).push([[665],{4665:(rR,kp,X)=>{X.r(kp),X.d(kp,{AuthModule:()=>X1});var J=X(8583),it=X(9759);(function(){var i,e="function"==typeof Object.defineProperties?Object.defineProperty:function(o,u,h){o!=Array.prototype&&o!=Object.prototype&&(o[u]=h.value)},s=function(o){o=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,o];for(var u=0;u<o.length;++u){var h=o[u];if(h&&h.Math==Math)return h}return globalThis}(this);function c(o){var u=0;return function(){return u<o.length?{done:!1,value:o[u++]}:{done:!0}}}function d(o){var u="undefined"!=typeof Symbol&&Symbol.iterator&&o[Symbol.iterator];return u?u.call(o):{next:c(o)}}!function(o,u){if(u){var h=s;o=o.split(".");for(var f=0;f<o.length-1;f++){var g=o[f];g in h||(h[g]={}),h=h[g]}(u=u(f=h[o=o[o.length-1]]))!=f&&null!=u&&e(h,o,{configurable:!0,writable:!0,value:u})}}("Promise",function(o){function u(w){this.b=0,this.c=void 0,this.a=[];var C=this.f();try{w(C.resolve,C.reject)}catch(x){C.reject(x)}}function h(){this.a=null}function f(w){return w instanceof u?w:new u(function(C){C(w)})}if(o)return o;h.prototype.b=function(w){if(null==this.a){this.a=[];var C=this;this.c(function(){C.g()})}this.a.push(w)};var g=s.setTimeout;h.prototype.c=function(w){g(w,0)},h.prototype.g=function(){for(;this.a&&this.a.length;){var w=this.a;this.a=[];for(var C=0;C<w.length;++C){var x=w[C];w[C]=null;try{x()}catch(O){this.f(O)}}}this.a=null},h.prototype.f=function(w){this.c(function(){throw w})},u.prototype.f=function(){function w(O){return function(et){x||(x=!0,O.call(C,et))}}var C=this,x=!1;return{resolve:w(this.m),reject:w(this.g)}},u.prototype.m=function(w){if(w===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(w instanceof u)this.s(w);else{t:switch(typeof w){case"object":var C=null!=w;break t;case"function":C=!0;break t;default:C=!1}C?this.v(w):this.h(w)}},u.prototype.v=function(w){var C=void 0;try{C=w.then}catch(x){return void this.g(x)}"function"==typeof C?this.u(C,w):this.h(w)},u.prototype.g=function(w){this.i(2,w)},u.prototype.h=function(w){this.i(1,w)},u.prototype.i=function(w,C){if(0!=this.b)throw Error("Cannot settle("+w+", "+C+"): Promise already settled in state"+this.b);this.b=w,this.c=C,this.l()},u.prototype.l=function(){if(null!=this.a){for(var w=0;w<this.a.length;++w)y.b(this.a[w]);this.a=null}};var y=new h;return u.prototype.s=function(w){var C=this.f();w.Ra(C.resolve,C.reject)},u.prototype.u=function(w,C){var x=this.f();try{w.call(C,x.resolve,x.reject)}catch(O){x.reject(O)}},u.prototype.then=function(w,C){function x(mt,Qt){return"function"==typeof mt?function(Rn){try{O(mt(Rn))}catch(Tp){et(Tp)}}:Qt}var O,et,yt=new u(function(mt,Qt){O=mt,et=Qt});return this.Ra(x(w,O),x(C,et)),yt},u.prototype.catch=function(w){return this.then(void 0,w)},u.prototype.Ra=function(w,C){function x(){switch(O.b){case 1:w(O.c);break;case 2:C(O.c);break;default:throw Error("Unexpected state: "+O.b)}}var O=this;null==this.a?y.b(x):this.a.push(x)},u.resolve=f,u.reject=function(w){return new u(function(C,x){x(w)})},u.race=function(w){return new u(function(C,x){for(var O=d(w),et=O.next();!et.done;et=O.next())f(et.value).Ra(C,x)})},u.all=function(w){var C=d(w),x=C.next();return x.done?f([]):new u(function(O,et){function yt(Rn){return function(Tp){mt[Rn]=Tp,0==--Qt&&O(mt)}}var mt=[],Qt=0;do{mt.push(void 0),Qt++,f(x.value).Ra(yt(mt.length-1),et),x=C.next()}while(!x.done)})},u});var p=p||{},m=this||self,v=/^[\w+/_-]+[=]{0,2}$/,_=null;function b(o){return(o=o.querySelector&&o.querySelector("script[nonce]"))&&(o=o.nonce||o.getAttribute("nonce"))&&v.test(o)?o:""}function I(){}function k(o){var u=typeof o;return"object"!=u?u:o?Array.isArray(o)?"array":u:"null"}function T(o){var u=k(o);return"array"==u||"object"==u&&"number"==typeof o.length}function E(o){return"function"==k(o)}function M(o){var u=typeof o;return"object"==u&&null!=o||"function"==u}function F(o){return Object.prototype.hasOwnProperty.call(o,Y)&&o[Y]||(o[Y]=++z)}var Y="closure_uid_"+(1e9*Math.random()>>>0),z=0;function ot(o,u,h){return o.call.apply(o.bind,arguments)}function lt(o,u,h){if(!o)throw Error();if(2<arguments.length){var f=Array.prototype.slice.call(arguments,2);return function(){var g=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(g,f),o.apply(u,g)}}return function(){return o.apply(u,arguments)}}function L(o,u,h){return(L=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ot:lt).apply(null,arguments)}function Tt(o,u){var h=Array.prototype.slice.call(arguments,1);return function(){var f=h.slice();return f.push.apply(f,arguments),o.apply(this,f)}}var cs=Date.now;function tt(o,u){function h(){}h.prototype=u.prototype,o.bb=u.prototype,o.prototype=new h,o.prototype.constructor=o}function Nr(o){return o}function D(o,u,h){this.code=ls+o,this.message=u||$1[o]||"",this.a=h||null}function Z_(o){var u=o&&o.code;return u?new D(u.substring(ls.length),o.message,o.serverResponse):null}tt(D,Error),D.prototype.w=function(){var o={code:this.code,message:this.message};return this.a&&(o.serverResponse=this.a),o},D.prototype.toJSON=function(){return this.w()};var ds,ls="auth/",$1={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},Gh={ld:{Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ua:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://securetoken.googleapis.com/v1/token",Xa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ua:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ua:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",$a:"https://test-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function hs(o){for(var u in Gh)if(Gh[u].id===o)return{firebaseEndpoint:(o=Gh[u]).Ua,secureTokenEndpoint:o.$a,identityPlatformEndpoint:o.Xa};return null}function K_(o){if(!o)return!1;try{return!!o.$goog_Thenable}catch(u){return!1}}function Ne(o){if(Error.captureStackTrace)Error.captureStackTrace(this,Ne);else{var u=Error().stack;u&&(this.stack=u)}o&&(this.message=String(o))}function Hh(o,u){for(var h="",f=(o=o.split("%s")).length-1,g=0;g<f;g++)h+=o[g]+(g<u.length?u[g]:"%s");Ne.call(this,h+o[f])}function Pr(o,u){throw new Hh("Failure"+(o?": "+o:""),Array.prototype.slice.call(arguments,1))}function zh(o,u){this.c=o,this.f=u,this.b=0,this.a=null}function J_(o,u){o.f(u),100>o.b&&(o.b++,u.next=o.a,o.a=u)}function Q_(){this.b=this.a=null}ds=hs("__EID__")?"__EID__":void 0,tt(Ne,Error),Ne.prototype.name="CustomError",tt(Hh,Ne),Hh.prototype.name="AssertionError",zh.prototype.get=function(){if(0<this.b){this.b--;var o=this.a;this.a=o.next,o.next=null}else o=this.c();return o};var W_=new zh(function(){return new Zh},function(o){o.reset()});function tA(){var o=T0,u=null;return o.a&&(u=o.a,o.a=o.a.next,o.a||(o.b=null),u.next=null),u}function Zh(){this.next=this.b=this.a=null}Q_.prototype.add=function(o,u){var h=W_.get();h.set(o,u),this.b?this.b.next=h:this.a=h,this.b=h},Zh.prototype.set=function(o,u){this.a=o,this.b=u,this.next=null},Zh.prototype.reset=function(){this.next=this.b=this.a=null};var X_=Array.prototype.indexOf?function(o,u){return Array.prototype.indexOf.call(o,u,void 0)}:function(o,u){if("string"==typeof o)return"string"!=typeof u||1!=u.length?-1:o.indexOf(u,0);for(var h=0;h<o.length;h++)if(h in o&&o[h]===u)return h;return-1},At=Array.prototype.forEach?function(o,u,h){Array.prototype.forEach.call(o,u,h)}:function(o,u,h){for(var f=o.length,g="string"==typeof o?o.split(""):o,y=0;y<f;y++)y in g&&u.call(h,g[y],y,o)},nA=Array.prototype.filter?function(o,u){return Array.prototype.filter.call(o,u,void 0)}:function(o,u){for(var h=o.length,f=[],g=0,y="string"==typeof o?o.split(""):o,w=0;w<h;w++)if(w in y){var C=y[w];u.call(void 0,C,w,o)&&(f[g++]=C)}return f},gu=Array.prototype.map?function(o,u){return Array.prototype.map.call(o,u,void 0)}:function(o,u){for(var h=o.length,f=Array(h),g="string"==typeof o?o.split(""):o,y=0;y<h;y++)y in g&&(f[y]=u.call(void 0,g[y],y,o));return f},iA=Array.prototype.some?function(o,u){return Array.prototype.some.call(o,u,void 0)}:function(o,u){for(var h=o.length,f="string"==typeof o?o.split(""):o,g=0;g<h;g++)if(g in f&&u.call(void 0,f[g],g,o))return!0;return!1};function En(o,u){return 0<=X_(o,u)}function vu(o,u){var h;return(h=0<=(u=X_(o,u)))&&Array.prototype.splice.call(o,u,1),h}function Ke(o,u){!function(o,u){for(var h="string"==typeof o?o.split(""):o,f=o.length-1;0<=f;--f)f in h&&u.call(void 0,h[f],f,o)}(o,function(f,g){u.call(void 0,f,g,o)&&Array.prototype.splice.call(o,g,1)})}function Kh(o){return Array.prototype.concat.apply([],arguments)}function Mi(o){var u=o.length;if(0<u){for(var h=Array(u),f=0;f<u;f++)h[f]=o[f];return h}return[]}var Fr,$_=String.prototype.trim?function(o){return o.trim()}:function(o){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(o)[1]},oA=/&/g,sA=/</g,aA=/>/g,uA=/"/g,cA=/'/g,lA=/\x00/g,hA=/[\x00&<>"']/;function bt(o,u){return-1!=o.indexOf(u)}function Jh(o,u){return o<u?-1:o>u?1:0}t:{var t0=m.navigator;if(t0){var e0=t0.userAgent;if(e0){Fr=e0;break t}}Fr=""}function Gt(o){return bt(Fr,o)}function n0(o,u){for(var h in o)u.call(void 0,o[h],h,o)}function Oi(o){for(var u in o)return!1;return!0}function Wn(o){var h,u={};for(h in o)u[h]=o[h];return u}var r0="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Se(o,u){for(var h,f,g=1;g<arguments.length;g++){for(h in f=arguments[g])o[h]=f[h];for(var y=0;y<r0.length;y++)h=r0[y],Object.prototype.hasOwnProperty.call(f,h)&&(o[h]=f[h])}}function o0(o,u){t:{try{var h=o&&o.ownerDocument,f=h&&(h.defaultView||h.parentWindow);if((f=f||m).Element&&f.Location){var g=f;break t}}catch(w){}g=null}if(g&&void 0!==g[u]&&(!o||!(o instanceof g[u])&&(o instanceof g.Location||o instanceof g.Element))){if(M(o))try{var y=o.constructor.displayName||o.constructor.name||Object.prototype.toString.call(o)}catch(w){y="<object could not be stringified>"}else y=void 0===o?"undefined":null===o?"null":typeof o;Pr("Argument is not a %s (or a non-Element, non-Location mock); got: %s",u,y)}}function un(o,u){this.a=o===yu&&u||"",this.b=s0}function Qh(o){return o instanceof un&&o.constructor===un&&o.b===s0?o.a:(Pr("expected object of type Const, got '"+o+"'"),"type_error:Const")}un.prototype.ta=!0,un.prototype.sa=function(){return this.a},un.prototype.toString=function(){return"Const{"+this.a+"}"};var _u,s0={},yu={};function a0(){if(void 0===_u){var o=null,u=m.trustedTypes;if(u&&u.createPolicy){try{o=u.createPolicy("goog#html",{createHTML:Nr,createScript:Nr,createScriptURL:Nr})}catch(h){m.console&&m.console.error(h.message)}_u=o}else _u=o}return _u}function Lr(o,u){this.a=u===c0?o:""}function u0(o){return o instanceof Lr&&o.constructor===Lr?o.a:(Pr("expected object of type TrustedResourceUrl, got '"+o+"' of type "+k(o)),"type_error:TrustedResourceUrl")}function Wh(o,u){var h=Qh(o);if(!fA.test(h))throw Error("Invalid TrustedResourceUrl format: "+h);return function(o){var u=a0();return new Lr(o=u?u.createScriptURL(o):o,c0)}(o=h.replace(dA,function(f,g){if(!Object.prototype.hasOwnProperty.call(u,g))throw Error('Found marker, "'+g+'", in format string, "'+h+'", but no valid label mapping found in args: '+JSON.stringify(u));return(f=u[g])instanceof un?Qh(f):encodeURIComponent(String(f))}))}Lr.prototype.ta=!0,Lr.prototype.sa=function(){return this.a.toString()},Lr.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var dA=/%{(\w+)}/g,fA=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,c0={};function Ie(o,u){this.a=u===fs?o:""}function wu(o){return o instanceof Ie&&o.constructor===Ie?o.a:(Pr("expected object of type SafeUrl, got '"+o+"' of type "+k(o)),"type_error:SafeUrl")}Ie.prototype.ta=!0,Ie.prototype.sa=function(){return this.a.toString()},Ie.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var mA=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,gA=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,l0=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function h0(o){if(o instanceof Ie)return o;if(o="object"==typeof o&&o.ta?o.sa():String(o),l0.test(o))o=new Ie(o,fs);else{var u=(o=(o=String(o)).replace(/(%0A|%0D)/g,"")).match(gA);o=u&&mA.test(u[1])?new Ie(o,fs):null}return o}function d0(o){return o instanceof Ie?o:(o="object"==typeof o&&o.ta?o.sa():String(o),l0.test(o)||(o="about:invalid#zClosurez"),new Ie(o,fs))}var fs={},f0=new Ie("about:invalid#zClosurez",fs);function Vr(o,u,h){this.a=h===p0?o:""}Vr.prototype.ta=!0,Vr.prototype.sa=function(){return this.a.toString()},Vr.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var p0={};function m0(o,u,h,f){return o=o instanceof Ie?o:d0(o),u=u||m,h=h instanceof un?Qh(h):h||"",u.open(wu(o),h,f,void 0)}function g0(o,u){for(var h=o.split("%s"),f="",g=Array.prototype.slice.call(arguments,1);g.length&&1<h.length;)f+=h.shift()+g.shift();return f+h.join("%s")}function Xh(o){return hA.test(o)&&(-1!=o.indexOf("&")&&(o=o.replace(oA,"&amp;")),-1!=o.indexOf("<")&&(o=o.replace(sA,"&lt;")),-1!=o.indexOf(">")&&(o=o.replace(aA,"&gt;")),-1!=o.indexOf('"')&&(o=o.replace(uA,"&quot;")),-1!=o.indexOf("'")&&(o=o.replace(cA,"&#39;")),-1!=o.indexOf("\0")&&(o=o.replace(lA,"&#0;"))),o}function $h(o){return $h[" "](o),o}$h[" "]=I;var bu,o,wA=Gt("Opera"),Je=Gt("Trident")||Gt("MSIE"),v0=Gt("Edge"),bA=v0||Je,y0=Gt("Gecko")&&!(bt(Fr.toLowerCase(),"webkit")&&!Gt("Edge"))&&!(Gt("Trident")||Gt("MSIE"))&&!Gt("Edge"),SA=bt(Fr.toLowerCase(),"webkit")&&!Gt("Edge");function _0(){var o=m.document;return o?o.documentMode:void 0}t:{var td="",ed=(o=Fr,y0?/rv:([^\);]+)(\)|;)/.exec(o):v0?/Edge\/([\d\.]+)/.exec(o):Je?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(o):SA?/WebKit\/(\S+)/.exec(o):wA?/(?:Version)[ \/]?(\S+)/.exec(o):void 0);if(ed&&(td=ed?ed[1]:""),Je){var nd=_0();if(null!=nd&&nd>parseFloat(td)){bu=String(nd);break t}}bu=td}var IA={};function w0(o){return function(o,u){var h=IA;return Object.prototype.hasOwnProperty.call(h,o)?h[o]:h[o]=u()}(o,function(){for(var u=0,h=$_(String(bu)).split("."),f=$_(String(o)).split("."),g=Math.max(h.length,f.length),y=0;0==u&&y<g;y++){var w=h[y]||"",C=f[y]||"";do{if(w=/(\d*)(\D*)(.*)/.exec(w)||["","","",""],C=/(\d*)(\D*)(.*)/.exec(C)||["","","",""],0==w[0].length&&0==C[0].length)break;u=Jh(0==w[1].length?0:parseInt(w[1],10),0==C[1].length?0:parseInt(C[1],10))||Jh(0==w[2].length,0==C[2].length)||Jh(w[2],C[2]),w=w[3],C=C[3]}while(0==u)}return 0<=u})}var Xn=m.document&&Je&&(_0()||parseInt(bu,10))||void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(o){}var CA=!Je||9<=Number(Xn);function ps(o){var u=document;return"string"==typeof o?u.getElementById(o):o}function S0(o,u){n0(u,function(h,f){h&&"object"==typeof h&&h.ta&&(h=h.sa()),"style"==f?o.style.cssText=h:"class"==f?o.className=h:"for"==f?o.htmlFor=h:I0.hasOwnProperty(f)?o.setAttribute(I0[f],h):0==f.lastIndexOf("aria-",0)||0==f.lastIndexOf("data-",0)?o.setAttribute(f,h):o[f]=h})}var rd,Cu,I0={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function kA(o,u,h){function f(C){C&&u.appendChild("string"==typeof C?o.createTextNode(C):C)}for(var g=2;g<h.length;g++){var y=h[g];if(!T(y)||M(y)&&0<y.nodeType)f(y);else{t:{if(y&&"number"==typeof y.length){if(M(y)){var w="function"==typeof y.item||"string"==typeof y.item;break t}if(E(y)){w="function"==typeof y.item;break t}}w=!1}At(w?Mi(y):y,f)}}}function Su(o,u){return u=String(u),"application/xhtml+xml"===o.contentType&&(u=u.toLowerCase()),o.createElement(u)}function C0(o){m.setTimeout(function(){throw o},0)}function Iu(o,u){Cu||function(){if(m.Promise&&m.Promise.resolve){var o=m.Promise.resolve(void 0);Cu=function(){o.then(k0)}}else Cu=function(){var u=k0;!E(m.setImmediate)||m.Window&&m.Window.prototype&&!Gt("Edge")&&m.Window.prototype.setImmediate==m.setImmediate?(rd||(rd=function(){var o=m.MessageChannel;if(void 0===o&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!Gt("Presto")&&(o=function(){var g=Su(document,"IFRAME");g.style.display="none",document.documentElement.appendChild(g);var y=g.contentWindow;(g=y.document).open(),g.close();var w="callImmediate"+Math.random(),C="file:"==y.location.protocol?"*":y.location.protocol+"//"+y.location.host;g=L(function(x){("*"==C||x.origin==C)&&x.data==w&&this.port1.onmessage()},this),y.addEventListener("message",g,!1),this.port1={},this.port2={postMessage:function(){y.postMessage(w,C)}}}),void 0!==o&&!Gt("Trident")&&!Gt("MSIE")){var u=new o,h={},f=h;return u.port1.onmessage=function(){if(void 0!==h.next){var g=(h=h.next).Hb;h.Hb=null,g()}},function(g){f.next={Hb:g},f=f.next,u.port2.postMessage(0)}}return function(g){m.setTimeout(g,0)}}()),rd(u)):m.setImmediate(u)}}(),od||(Cu(),od=!0),T0.add(o,u)}var od=!1,T0=new Q_;function k0(){for(var o;o=tA();){try{o.a.call(o.b)}catch(u){C0(u)}J_(W_,o)}od=!1}function ut(o,u){if(this.a=Ri,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,o!=I)try{var h=this;o.call(u,function(f){Ni(h,ms,f)},function(f){if(!(f instanceof Br))try{throw f instanceof Error?f:Error("Promise rejected.")}catch(g){}Ni(h,An,f)})}catch(f){Ni(this,An,f)}}var Ri=0,ms=2,An=3;function D0(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}D0.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var E0=new zh(function(){return new D0},function(o){o.reset()});function sd(o,u,h){var f=E0.get();return f.g=o,f.b=u,f.f=h,f}function K(o){if(o instanceof ut)return o;var u=new ut(I);return Ni(u,ms,o),u}function kt(o){return new ut(function(u,h){h(o)})}function A0(o,u,h){R0(o,u,h,null)||Iu(Tt(u,o))}function x0(o){return new ut(function(u){var h=o.length,f=[];if(h)for(var g=function(C,x,O){h--,f[C]=x?{Qb:!0,value:O}:{Qb:!1,reason:O},0==h&&u(f)},y=0;y<o.length;y++)A0(o[y],Tt(g,y,!0),Tt(g,y,!1));else u(f)})}function M0(o,u){if(o.a==Ri)if(o.c){var h=o.c;if(h.b){for(var f=0,g=null,y=null,w=h.b;w&&(w.c||(f++,w.a==o&&(g=w),!(g&&1<f)));w=w.next)g||(y=w);g&&(h.a==Ri&&1==f?M0(h,u):(y?((f=y).next==h.f&&(h.f=f),f.next=f.next.next):P0(h),F0(h,g,An,u)))}o.c=null}else Ni(o,An,u)}function ad(o,u){o.b||o.a!=ms&&o.a!=An||N0(o),o.f?o.f.next=u:o.b=u,o.f=u}function O0(o,u,h,f){var g=sd(null,null,null);return g.a=new ut(function(y,w){g.g=u?function(C){try{var x=u.call(f,C);y(x)}catch(O){w(O)}}:y,g.b=h?function(C){try{var x=h.call(f,C);void 0===x&&C instanceof Br?w(C):y(x)}catch(O){w(O)}}:w}),g.a.c=o,ad(o,g),g.a}function Ni(o,u,h){o.a==Ri&&(o===h&&(u=An,h=new TypeError("Promise cannot resolve to itself")),o.a=1,R0(h,o.$c,o.ad,o)||(o.i=h,o.a=u,o.c=null,N0(o),u!=An||h instanceof Br||function(o,u){o.g=!0,Iu(function(){o.g&&V0.call(null,u)})}(o,h)))}function R0(o,u,h,f){if(o instanceof ut)return ad(o,sd(u||I,h||null,f)),!0;if(K_(o))return o.then(u,h,f),!0;if(M(o))try{var g=o.then;if(E(g))return function(o,u,h,f,g){function y(x){C||(C=!0,f.call(g,x))}var C=!1;try{u.call(o,function(x){C||(C=!0,h.call(g,x))},y)}catch(x){y(x)}}(o,g,u,h,f),!0}catch(y){return h.call(f,y),!0}return!1}function N0(o){o.h||(o.h=!0,Iu(o.gc,o))}function P0(o){var u=null;return o.b&&(o.b=(u=o.b).next,u.next=null),o.b||(o.f=null),u}function F0(o,u,h,f){if(h==An&&u.b&&!u.c)for(;o&&o.g;o=o.c)o.g=!1;if(u.a)u.a.c=null,L0(u,h,f);else try{u.c?u.g.call(u.f):L0(u,h,f)}catch(g){V0.call(null,g)}J_(E0,u)}function L0(o,u,h){u==ms?o.g.call(o.f,h):o.b&&o.b.call(o.f,h)}ut.prototype.then=function(o,u,h){return O0(this,E(o)?o:null,E(u)?u:null,h)},ut.prototype.$goog_Thenable=!0,(i=ut.prototype).oa=function(o,u){return(o=sd(o,o,u)).c=!0,ad(this,o),this},i.o=function(o,u){return O0(this,null,o,u)},i.cancel=function(o){if(this.a==Ri){var u=new Br(o);Iu(function(){M0(this,u)},this)}},i.$c=function(o){this.a=Ri,Ni(this,ms,o)},i.ad=function(o){this.a=Ri,Ni(this,An,o)},i.gc=function(){for(var o;o=P0(this);)F0(this,o,this.a,this.i);this.h=!1};var V0=C0;function Br(o){Ne.call(this,o)}function Tu(){0!=ud&&(B0[F(this)]=this),this.ya=this.ya,this.pa=this.pa}tt(Br,Ne),Br.prototype.name="cancel";var ud=0,B0={};function q0(o){if(!o.ya&&(o.ya=!0,o.Da(),0!=ud)){var u=F(o);if(0!=ud&&o.pa&&0<o.pa.length)throw Error(o+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete B0[u]}}Tu.prototype.ya=!1,Tu.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var OA=Object.freeze||function(o){return o},U0=!Je||9<=Number(Xn),RA=Je&&!w0("9"),NA=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var o=!1,u=Object.defineProperty({},"passive",{get:function(){o=!0}});try{m.addEventListener("test",I,u),m.removeEventListener("test",I,u)}catch(h){}return o}();function Ce(o,u){this.type=o,this.b=this.target=u,this.defaultPrevented=!1}function Pi(o,u){if(Ce.call(this,o?o.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,o){var h=this.type=o.type,f=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.b=u,u=o.relatedTarget){if(y0){t:{try{$h(u.nodeName);var g=!0;break t}catch(y){}g=!1}g||(u=null)}}else"mouseover"==h?u=o.fromElement:"mouseout"==h&&(u=o.toElement);this.relatedTarget=u,f?(this.clientX=void 0!==f.clientX?f.clientX:f.pageX,this.clientY=void 0!==f.clientY?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0):(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType="string"==typeof o.pointerType?o.pointerType:PA[o.pointerType]||"",this.a=o,o.defaultPrevented&&this.preventDefault()}}Ce.prototype.preventDefault=function(){this.defaultPrevented=!0},tt(Pi,Ce);var PA=OA({2:"touch",3:"pen",4:"mouse"});Pi.prototype.preventDefault=function(){Pi.bb.preventDefault.call(this);var o=this.a;if(o.preventDefault)o.preventDefault();else if(o.returnValue=!1,RA)try{(o.ctrlKey||112<=o.keyCode&&123>=o.keyCode)&&(o.keyCode=-1)}catch(u){}},Pi.prototype.g=function(){return this.a};var gs="closure_listenable_"+(1e6*Math.random()|0),FA=0;function LA(o,u,h,f,g){this.listener=o,this.proxy=null,this.src=u,this.type=h,this.capture=!!f,this.Wa=g,this.key=++FA,this.wa=this.Qa=!1}function ku(o){o.wa=!0,o.listener=null,o.proxy=null,o.src=null,o.Wa=null}function Du(o){this.src=o,this.a={},this.b=0}function cd(o,u){var h=u.type;h in o.a&&vu(o.a[h],u)&&(ku(u),0==o.a[h].length&&(delete o.a[h],o.b--))}function ld(o,u,h,f){for(var g=0;g<o.length;++g){var y=o[g];if(!y.wa&&y.listener==u&&y.capture==!!h&&y.Wa==f)return g}return-1}Du.prototype.add=function(o,u,h,f,g){var y=o.toString();(o=this.a[y])||(o=this.a[y]=[],this.b++);var w=ld(o,u,f,g);return-1<w?(u=o[w],h||(u.Qa=!1)):((u=new LA(u,this.src,y,!!f,g)).Qa=h,o.push(u)),u};var hd="closure_lm_"+(1e6*Math.random()|0),dd={};function Ue(o,u,h,f,g){if(f&&f.once)fd(o,u,h,f,g);else if(Array.isArray(u))for(var y=0;y<u.length;y++)Ue(o,u[y],h,f,g);else h=md(h),o&&o[gs]?K0(o,u,h,M(f)?!!f.capture:!!f,g):Y0(o,u,h,!1,f,g)}function Y0(o,u,h,f,g,y){if(!u)throw Error("Invalid event type");var w=M(g)?!!g.capture:!!g,C=Eu(o);if(C||(o[hd]=C=new Du(o)),!(h=C.add(u,h,f,w,y)).proxy)if(f=function(){var o=BA,u=U0?function(h){return o.call(u.src,u.listener,h)}:function(h){if(!(h=o.call(u.src,u.listener,h)))return h};return u}(),h.proxy=f,f.src=o,f.listener=h,o.addEventListener)NA||(g=w),void 0===g&&(g=!1),o.addEventListener(u.toString(),f,g);else if(o.attachEvent)o.attachEvent(H0(u.toString()),f);else{if(!o.addListener||!o.removeListener)throw Error("addEventListener and attachEvent are unavailable.");o.addListener(f)}}function fd(o,u,h,f,g){if(Array.isArray(u))for(var y=0;y<u.length;y++)fd(o,u[y],h,f,g);else h=md(h),o&&o[gs]?gd(o,u,h,M(f)?!!f.capture:!!f,g):Y0(o,u,h,!0,f,g)}function Pe(o,u,h,f,g){if(Array.isArray(u))for(var y=0;y<u.length;y++)Pe(o,u[y],h,f,g);else f=M(f)?!!f.capture:!!f,h=md(h),o&&o[gs]?(o=o.v,(u=String(u).toString())in o.a&&-1<(h=ld(y=o.a[u],h,f,g))&&(ku(y[h]),Array.prototype.splice.call(y,h,1),0==y.length&&(delete o.a[u],o.b--))):o&&(o=Eu(o))&&(u=o.a[u.toString()],o=-1,u&&(o=ld(u,h,f,g)),(h=-1<o?u[o]:null)&&G0(h))}function G0(o){if("number"!=typeof o&&o&&!o.wa){var u=o.src;if(u&&u[gs])cd(u.v,o);else{var h=o.type,f=o.proxy;u.removeEventListener?u.removeEventListener(h,f,o.capture):u.detachEvent?u.detachEvent(H0(h),f):u.addListener&&u.removeListener&&u.removeListener(f),(h=Eu(u))?(cd(h,o),0==h.b&&(h.src=null,u[hd]=null)):ku(o)}}}function H0(o){return o in dd?dd[o]:dd[o]="on"+o}function z0(o,u,h,f){var g=!0;if((o=Eu(o))&&(u=o.a[u.toString()]))for(u=u.concat(),o=0;o<u.length;o++){var y=u[o];y&&y.capture==h&&!y.wa&&(y=Z0(y,f),g=g&&!1!==y)}return g}function Z0(o,u){var h=o.listener,f=o.Wa||o.src;return o.Qa&&G0(o),h.call(f,u)}function BA(o,u){if(o.wa)return!0;if(!U0){if(!u)t:{u=["window","event"];for(var h=m,f=0;f<u.length;f++)if(null==(h=h[u[f]])){u=null;break t}u=h}if(u=new Pi(f=u,this),h=!0,!(0>f.keyCode||null!=f.returnValue)){t:{var g=!1;if(0==f.keyCode)try{f.keyCode=-1;break t}catch(w){g=!0}(g||null==f.returnValue)&&(f.returnValue=!0)}for(f=[],g=u.b;g;g=g.parentNode)f.push(g);for(o=o.type,g=f.length-1;0<=g;g--){u.b=f[g];var y=z0(f[g],o,!0,u);h=h&&y}for(g=0;g<f.length;g++)u.b=f[g],y=z0(f[g],o,!1,u),h=h&&y}return h}return Z0(o,new Pi(u,this))}function Eu(o){return(o=o[hd])instanceof Du?o:null}var pd="__closure_events_fn_"+(1e9*Math.random()>>>0);function md(o){return E(o)?o:(o[pd]||(o[pd]=function(u){return o.handleEvent(u)}),o[pd])}function me(){Tu.call(this),this.v=new Du(this),this.bc=this,this.hb=null}function K0(o,u,h,f,g){o.v.add(String(u),h,!1,f,g)}function gd(o,u,h,f,g){o.v.add(String(u),h,!0,f,g)}function Au(o,u,h,f){if(!(u=o.v.a[String(u)]))return!0;u=u.concat();for(var g=!0,y=0;y<u.length;++y){var w=u[y];if(w&&!w.wa&&w.capture==h){var C=w.listener,x=w.Wa||w.src;w.Qa&&cd(o.v,w),g=!1!==C.call(x,f)&&g}}return g&&!f.defaultPrevented}function vd(o,u,h){if(E(o))h&&(o=L(o,h));else{if(!o||"function"!=typeof o.handleEvent)throw Error("Invalid listener argument");o=L(o.handleEvent,o)}return 2147483647<Number(u)?-1:m.setTimeout(o,u||0)}function qr(o){var u=null;return new ut(function(h,f){-1==(u=vd(function(){h(void 0)},o))&&f(Error("Failed to schedule timer."))}).o(function(h){throw m.clearTimeout(u),h})}function J0(o){if(o.X&&"function"==typeof o.X)return o.X();if("string"==typeof o)return o.split("");if(T(o)){for(var u=[],h=o.length,f=0;f<h;f++)u.push(o[f]);return u}for(f in u=[],h=0,o)u[h++]=o[f];return u}function Q0(o){if(o.Y&&"function"==typeof o.Y)return o.Y();if(!o.X||"function"!=typeof o.X){if(T(o)||"string"==typeof o){var u=[];o=o.length;for(var h=0;h<o;h++)u.push(h);return u}for(var f in u=[],h=0,o)u[h++]=f;return u}}function Ur(o,u){this.b={},this.a=[],this.c=0;var h=arguments.length;if(1<h){if(h%2)throw Error("Uneven number of arguments");for(var f=0;f<h;f+=2)this.set(arguments[f],arguments[f+1])}else if(o)if(o instanceof Ur)for(h=o.Y(),f=0;f<h.length;f++)this.set(h[f],o.get(h[f]));else for(f in o)this.set(f,o[f])}function yd(o){if(o.c!=o.a.length){for(var u=0,h=0;u<o.a.length;){var f=o.a[u];Fi(o.b,f)&&(o.a[h++]=f),u++}o.a.length=h}if(o.c!=o.a.length){var g={};for(h=u=0;u<o.a.length;)Fi(g,f=o.a[u])||(o.a[h++]=f,g[f]=1),u++;o.a.length=h}}function Fi(o,u){return Object.prototype.hasOwnProperty.call(o,u)}tt(me,Tu),me.prototype[gs]=!0,me.prototype.addEventListener=function(o,u,h,f){Ue(this,o,u,h,f)},me.prototype.removeEventListener=function(o,u,h,f){Pe(this,o,u,h,f)},me.prototype.dispatchEvent=function(o){var u,h=this.hb;if(h)for(u=[];h;h=h.hb)u.push(h);h=this.bc;var f=o.type||o;if("string"==typeof o)o=new Ce(o,h);else if(o instanceof Ce)o.target=o.target||h;else{var g=o;Se(o=new Ce(f,h),g)}if(g=!0,u)for(var y=u.length-1;0<=y;y--){var w=o.b=u[y];g=Au(w,f,!0,o)&&g}if(g=Au(w=o.b=h,f,!0,o)&&g,g=Au(w,f,!1,o)&&g,u)for(y=0;y<u.length;y++)g=Au(w=o.b=u[y],f,!1,o)&&g;return g},me.prototype.Da=function(){if(me.bb.Da.call(this),this.v){var h,o=this.v;for(h in o.a){for(var f=o.a[h],g=0;g<f.length;g++)ku(f[g]);delete o.a[h],o.b--}}this.hb=null},(i=Ur.prototype).X=function(){yd(this);for(var o=[],u=0;u<this.a.length;u++)o.push(this.b[this.a[u]]);return o},i.Y=function(){return yd(this),this.a.concat()},i.clear=function(){this.b={},this.c=this.a.length=0},i.get=function(o,u){return Fi(this.b,o)?this.b[o]:u},i.set=function(o,u){Fi(this.b,o)||(this.c++,this.a.push(o)),this.b[o]=u},i.forEach=function(o,u){for(var h=this.Y(),f=0;f<h.length;f++){var g=h[f],y=this.get(g);o.call(u,y,g,this)}};var W0=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function $n(o,u){var h;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,o instanceof $n?(this.i=void 0!==u?u:o.i,vs(this,o.c),this.l=o.l,this.a=o.a,ys(this,o.g),this.f=o.f,_d(this,ew(o.b)),this.h=o.h):o&&(h=String(o).match(W0))?(this.i=!!u,vs(this,h[1]||"",!0),this.l=_s(h[2]||""),this.a=_s(h[3]||"",!0),ys(this,h[4]),this.f=_s(h[5]||"",!0),_d(this,h[6]||"",!0),this.h=_s(h[7]||"")):(this.i=!!u,this.b=new Li(null,this.i))}function vs(o,u,h){o.c=h?_s(u,!0):u,o.c&&(o.c=o.c.replace(/:$/,""))}function ys(o,u){if(u){if(u=Number(u),isNaN(u)||0>u)throw Error("Bad port number "+u);o.g=u}else o.g=null}function _d(o,u,h){u instanceof Li?(o.b=u,function(o,u){u&&!o.f&&(ti(o),o.c=null,o.a.forEach(function(h,f){var g=f.toLowerCase();f!=g&&(cn(this,f),tw(this,g,h))},o)),o.f=u}(o.b,o.i)):(h||(u=ws(u,HA)),o.b=new Li(u,o.i))}function Nt(o,u,h){o.b.set(u,h)}function je(o,u){return o.b.get(u)}function Te(o){return o instanceof $n?new $n(o):new $n(o,void 0)}function xu(o,u,h,f){var g=new $n(null,void 0);return o&&vs(g,o),u&&(g.a=u),h&&ys(g,h),f&&(g.f=f),g}function _s(o,u){return o?u?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function ws(o,u,h){return"string"==typeof o?(o=encodeURI(o).replace(u,jA),h&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function jA(o){return"%"+((o=o.charCodeAt(0))>>4&15).toString(16)+(15&o).toString(16)}$n.prototype.toString=function(){var o=[],u=this.c;u&&o.push(ws(u,X0,!0),":");var h=this.a;return(h||"file"==u)&&(o.push("//"),(u=this.l)&&o.push(ws(u,X0,!0),"@"),o.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(h=this.g)&&o.push(":",String(h))),(h=this.f)&&(this.a&&"/"!=h.charAt(0)&&o.push("/"),o.push(ws(h,"/"==h.charAt(0)?GA:YA,!0))),(h=this.b.toString())&&o.push("?",h),(h=this.h)&&o.push("#",ws(h,zA)),o.join("")},$n.prototype.resolve=function(o){var u=new $n(this),h=!!o.c;h?vs(u,o.c):h=!!o.l,h?u.l=o.l:h=!!o.a,h?u.a=o.a:h=null!=o.g;var f=o.f;if(h)ys(u,o.g);else if(h=!!o.f){if("/"!=f.charAt(0))if(this.a&&!this.f)f="/"+f;else{var g=u.f.lastIndexOf("/");-1!=g&&(f=u.f.substr(0,g+1)+f)}if(".."==(g=f)||"."==g)f="";else if(bt(g,"./")||bt(g,"/.")){f=0==g.lastIndexOf("/",0),g=g.split("/");for(var y=[],w=0;w<g.length;){var C=g[w++];"."==C?f&&w==g.length&&y.push(""):".."==C?((1<y.length||1==y.length&&""!=y[0])&&y.pop(),f&&w==g.length&&y.push("")):(y.push(C),f=!0)}f=y.join("/")}else f=g}return h?u.f=f:h=""!==o.b.toString(),h?_d(u,ew(o.b)):h=!!o.h,h&&(u.h=o.h),u};var X0=/[#\/\?@]/g,YA=/[#\?:]/g,GA=/[#\?]/g,HA=/[#\?@]/g,zA=/#/g;function Li(o,u){this.b=this.a=null,this.c=o||null,this.f=!!u}function ti(o){o.a||(o.a=new Ur,o.b=0,o.c&&function(o,u){if(o){o=o.split("&");for(var h=0;h<o.length;h++){var f=o[h].indexOf("="),g=null;if(0<=f){var y=o[h].substring(0,f);g=o[h].substring(f+1)}else y=o[h];u(y,g?decodeURIComponent(g.replace(/\+/g," ")):"")}}}(o.c,function(u,h){o.add(decodeURIComponent(u.replace(/\+/g," ")),h)}))}function $0(o){var u=Q0(o);if(void 0===u)throw Error("Keys are undefined");var h=new Li(null,void 0);o=J0(o);for(var f=0;f<u.length;f++){var g=u[f],y=o[f];Array.isArray(y)?tw(h,g,y):h.add(g,y)}return h}function cn(o,u){ti(o),u=jr(o,u),Fi(o.a.b,u)&&(o.c=null,o.b-=o.a.get(u).length,Fi((o=o.a).b,u)&&(delete o.b[u],o.c--,o.a.length>2*o.c&&yd(o)))}function wd(o,u){return ti(o),u=jr(o,u),Fi(o.a.b,u)}function tw(o,u,h){cn(o,u),0<h.length&&(o.c=null,o.a.set(jr(o,u),Mi(h)),o.b+=h.length)}function ew(o){var u=new Li;return u.c=o.c,o.a&&(u.a=new Ur(o.a),u.b=o.b),u}function jr(o,u){return u=String(u),o.f&&(u=u.toLowerCase()),u}function nw(o){var u=[];return bd(new KA,o,u),u.join("")}function KA(){}function bd(o,u,h){if(null==u)h.push("null");else{if("object"==typeof u){if(Array.isArray(u)){var f=u;u=f.length,h.push("[");for(var g="",y=0;y<u;y++)h.push(g),bd(o,f[y],h),g=",";return void h.push("]")}if(!(u instanceof String||u instanceof Number||u instanceof Boolean)){for(f in h.push("{"),g="",u)Object.prototype.hasOwnProperty.call(u,f)&&"function"!=typeof(y=u[f])&&(h.push(g),rw(f,h),h.push(":"),bd(o,y,h),g=",");return void h.push("}")}u=u.valueOf()}switch(typeof u){case"string":rw(u,h);break;case"number":h.push(isFinite(u)&&!isNaN(u)?String(u):"null");break;case"boolean":h.push(String(u));break;case"function":h.push("null");break;default:throw Error("Unknown type: "+typeof u)}}}(i=Li.prototype).add=function(o,u){ti(this),this.c=null,o=jr(this,o);var h=this.a.get(o);return h||this.a.set(o,h=[]),h.push(u),this.b+=1,this},i.clear=function(){this.a=this.c=null,this.b=0},i.forEach=function(o,u){ti(this),this.a.forEach(function(h,f){At(h,function(g){o.call(u,g,f,this)},this)},this)},i.Y=function(){ti(this);for(var o=this.a.X(),u=this.a.Y(),h=[],f=0;f<u.length;f++)for(var g=o[f],y=0;y<g.length;y++)h.push(u[f]);return h},i.X=function(o){ti(this);var u=[];if("string"==typeof o)wd(this,o)&&(u=Kh(u,this.a.get(jr(this,o))));else{o=this.a.X();for(var h=0;h<o.length;h++)u=Kh(u,o[h])}return u},i.set=function(o,u){return ti(this),this.c=null,wd(this,o=jr(this,o))&&(this.b-=this.a.get(o).length),this.a.set(o,[u]),this.b+=1,this},i.get=function(o,u){return o&&0<(o=this.X(o)).length?String(o[0]):u},i.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var o=[],u=this.a.Y(),h=0;h<u.length;h++){var f=u[h],g=encodeURIComponent(String(f));f=this.X(f);for(var y=0;y<f.length;y++){var w=g;""!==f[y]&&(w+="="+encodeURIComponent(String(f[y]))),o.push(w)}}return this.c=o.join("&")};var iw={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},JA=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function rw(o,u){u.push('"',o.replace(JA,function(h){var f=iw[h];return f||(f="\\u"+(65536|h.charCodeAt(0)).toString(16).substr(1),iw[h]=f),f}),'"')}function Sd(){var o=ie();return Je&&!!Xn&&11==Xn||/Edge\/\d+/.test(o)}function bs(){return m.window&&m.window.location.href||self&&self.location&&self.location.href||""}function ow(o,u){u=u||m.window;var h="about:blank";o&&(h=wu(h0(o)||f0)),u.location.href=h}function sw(o,u){var f,h=[];for(f in o)f in u?typeof o[f]!=typeof u[f]?h.push(f):"object"==typeof o[f]&&null!=o[f]&&null!=u[f]?0<sw(o[f],u[f]).length&&h.push(f):o[f]!==u[f]&&h.push(f):h.push(f);for(f in u)f in o||h.push(f);return h}function aw(o){return!!((o=(o||ie()).toLowerCase()).match(/android/)||o.match(/webos/)||o.match(/iphone|ipad|ipod/)||o.match(/blackberry/)||o.match(/windows phone/)||o.match(/iemobile/))}function Vi(o){o=o||m.window;try{o.close()}catch(u){}}function uw(o,u,h){var f=Math.floor(1e9*Math.random()).toString();u=u||500,h=h||600;var g=(window.screen.availHeight-h)/2,y=(window.screen.availWidth-u)/2;for(w in u={width:u,height:h,top:0<g?g:0,left:0<y?y:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},h=ie().toLowerCase(),f&&(u.target=f,bt(h,"crios/")&&(u.target="_blank")),Yr(ie())==Td&&(o=o||"http://localhost",u.scrollbars=!0),h=o||"",(o=u)||(o={}),f=window,u=h instanceof Ie?h:h0(void 0!==h.href?h.href:String(h))||f0,h=o.target||h.target,g=[],o)switch(w){case"width":case"height":case"top":case"left":g.push(w+"="+o[w]);break;case"target":case"noopener":case"noreferrer":break;default:g.push(w+"="+(o[w]?1:0))}var w=g.join(",");if((Gt("iPhone")&&!Gt("iPod")&&!Gt("iPad")||Gt("iPad")||Gt("iPod"))&&f.navigator&&f.navigator.standalone&&h&&"_self"!=h?(o0(w=Su(document,"A"),"HTMLAnchorElement"),u=u instanceof Ie?u:d0(u),w.href=wu(u),w.setAttribute("target",h),o.noreferrer&&w.setAttribute("rel","noreferrer"),(o=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,f,1),w.dispatchEvent(o),w={}):o.noreferrer?(w=m0("",f,h,w),o=wu(u),w&&(bA&&bt(o,";")&&(o="'"+o.replace(/'/g,"%27")+"'"),w.opener=null,o='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Xh(o)+'">',o=new Vr(o=(f=a0())?f.createHTML(o):o,null,p0),f=w.document)&&(f.write(function(o){return o instanceof Vr&&o.constructor===Vr?o.a:(Pr("expected object of type SafeHtml, got '"+o+"' of type "+k(o)),"type_error:SafeHtml")}(o)),f.close())):(w=m0(u,f,h,w))&&o.noopener&&(w.opener=null),w)try{w.focus()}catch(C){}return w}var XA=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,$A=/^[^@]+@[^@]+$/;function Mu(){var o=null;return new ut(function(u){"complete"==m.document.readyState?u():(o=function(){u()},fd(window,"load",o))}).o(function(u){throw Pe(window,"load",o),u})}function Id(o){return o=o||ie(),!("file:"!==Hr()&&"ionic:"!==Hr()||!o.toLowerCase().match(/iphone|ipad|ipod|android/))}function Cd(){var o=m.window;try{return!(!o||o==o.top)}catch(u){return!1}}function Qe(){return void 0!==m.WorkerGlobalScope&&"function"==typeof m.importScripts}function ln(){return it.Z.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":it.Z.INTERNAL.hasOwnProperty("node")?"Node":Qe()?"Worker":"Browser"}function cw(){var o=ln();return"ReactNative"===o||"Node"===o}var Td="Firefox";function Yr(o){var u=o.toLowerCase();return bt(u,"opera/")||bt(u,"opr/")||bt(u,"opios/")?"Opera":bt(u,"iemobile")?"IEMobile":bt(u,"msie")||bt(u,"trident/")?"IE":bt(u,"edge/")?"Edge":bt(u,"firefox/")?Td:bt(u,"silk/")?"Silk":bt(u,"blackberry")?"Blackberry":bt(u,"webos")?"Webos":!bt(u,"safari/")||bt(u,"chrome/")||bt(u,"crios/")||bt(u,"android")?!bt(u,"chrome/")&&!bt(u,"crios/")||bt(u,"edge/")?bt(u,"android")?"Android":(o=o.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==o.length?o[1]:"Other":"Chrome":"Safari"}var hw={md:"FirebaseCore-web",od:"FirebaseUI-web"};function Gr(o,u){u=u||[];var g,h=[],f={};for(g in hw)f[hw[g]]=!0;for(g=0;g<u.length;g++)void 0!==f[u[g]]&&(delete f[u[g]],h.push(u[g]));return h.sort(),(u=h).length||(u=["FirebaseCore-web"]),"Browser"===(h=ln())?h=Yr(f=ie()):"Worker"===h&&(h=Yr(f=ie())+"-"+h),h+"/JsCore/"+o+"/"+u.join(",")}function ie(){return m.navigator&&m.navigator.userAgent||""}function Dt(o,u){o=o.split("."),u=u||m;for(var h=0;h<o.length&&"object"==typeof u&&null!=u;h++)u=u[o[h]];return h!=o.length&&(u=void 0),u}function kd(){try{var o=m.localStorage,u=qi();if(o)return o.setItem(u,"1"),o.removeItem(u),!Sd()||!!m.indexedDB}catch(h){return Qe()&&!!m.indexedDB}return!1}function Bi(){return(Ou()||"chrome-extension:"===Hr()||Id())&&!cw()&&kd()&&!Qe()}function Ou(){return"http:"===Hr()||"https:"===Hr()}function Hr(){return m.location&&m.location.protocol||null}function Ss(o){return!(aw(o=o||ie())||Yr(o)==Td)}function Is(o){return void 0===o?null:nw(o)}function dw(o){var h,u={};for(h in o)o.hasOwnProperty(h)&&null!=o[h]&&(u[h]=o[h]);return u}function zr(o){if(null!==o)return JSON.parse(o)}function qi(o){return o||Math.floor(1e9*Math.random()).toString()}function fw(o){return!("Safari"==Yr(o=o||ie())||o.toLowerCase().match(/iphone|ipad|ipod/))}function pw(){var o=m.___jsl;if(o&&o.H)for(var u in o.H)if(o.H[u].r=o.H[u].r||[],o.H[u].L=o.H[u].L||[],o.H[u].r=o.H[u].L.concat(),o.CP)for(var h=0;h<o.CP.length;h++)o.CP[h]=null}function ei(o,u){if(o>u)throw Error("Short delay should be less than long delay!");this.a=o,this.c=u,o=ie(),u=ln(),this.b=aw(o)||"ReactNative"===u}function Dd(){var o=m.document;return!o||void 0===o.visibilityState||"visible"==o.visibilityState}function Cs(o){try{var u=new Date(parseInt(o,10));if(!isNaN(u.getTime())&&!/[^0-9]/.test(o))return u.toUTCString()}catch(h){}return null}function mw(){return!(!Dt("fireauth.oauthhelper",m)&&!Dt("fireauth.iframe",m))}ei.prototype.get=function(){var o=m.navigator;return!o||"boolean"!=typeof o.onLine||!Ou()&&"chrome-extension:"!==Hr()&&void 0===o.connection||o.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Ad,gw={};function Ed(o){gw[o]||(gw[o]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(o))}try{var xd={};Object.defineProperty(xd,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(xd,"abcd",{configurable:!0,enumerable:!0,value:2}),Ad=2==xd.abcd}catch(o){Ad=!1}function j(o,u,h){Ad?Object.defineProperty(o,u,{configurable:!0,enumerable:!0,value:h}):o[u]=h}function ge(o,u){if(u)for(var h in u)u.hasOwnProperty(h)&&j(o,h,u[h])}function hn(o){var u={};return ge(u,o),u}function Md(o){var u=o;if("object"==typeof o&&null!=o)for(var h in u="length"in o?[]:{},o)j(u,h,Md(o[h]));return u}function Od(o){var u=o&&(o[Fd]?"phone":null);if(!(u&&o&&o[Pd]))throw new D("internal-error","Internal assert: invalid MultiFactorInfo object");j(this,"uid",o[Pd]),j(this,"displayName",o[vw]||null);var h=null;o[Nd]&&(h=new Date(o[Nd]).toUTCString()),j(this,"enrollmentTime",h),j(this,"factorId",u)}function Rd(o){try{var u=new Ts(o)}catch(h){u=null}return u}Od.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var vw="displayName",Nd="enrolledAt",Pd="mfaEnrollmentId",Fd="phoneInfo";function Ts(o){Od.call(this,o),j(this,"phoneNumber",o[Fd])}function ax(o){var u={},h=o[ux],f=o[lx],g=o[hx];if(o=Rd(o[cx]),!g||g!=Ru&&g!=ks&&!h||g==ks&&!f||g==Ld&&!o)throw Error("Invalid checkActionCode response!");g==ks?(u[_w]=h||null,u[ww]=h||null,u[yw]=f):(u[_w]=f||null,u[ww]=f||null,u[yw]=h||null),u[dx]=o||null,j(this,px,g),j(this,fx,Md(u))}tt(Ts,Od),Ts.prototype.w=function(){var o=Ts.bb.w.call(this);return o.phoneNumber=this.phoneNumber,o};var Ld="REVERT_SECOND_FACTOR_ADDITION",Ru="EMAIL_SIGNIN",ks="VERIFY_AND_CHANGE_EMAIL",ux="email",cx="mfaInfo",lx="newEmail",hx="requestType",yw="email",_w="fromEmail",dx="multiFactorInfo",ww="previousEmail",fx="data",px="operation";function Vd(o){var u=je(o=Te(o),bw)||null,h=je(o,Sw)||null,f=je(o,Iw)||null;if(f=f&&yx[f]||null,!u||!h||!f)throw new D("argument-error",bw+", "+Sw+"and "+Iw+" are required in a valid action code URL.");ge(this,{apiKey:u,operation:f,code:h,continueUrl:je(o,mx)||null,languageCode:je(o,gx)||null,tenantId:je(o,vx)||null})}var bw="apiKey",Sw="oobCode",mx="continueUrl",gx="languageCode",Iw="mode",vx="tenantId",yx={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:Ld,signIn:Ru,verifyAndChangeEmail:ks,verifyEmail:"VERIFY_EMAIL"};function Cw(o){try{return new Vd(o)}catch(u){return null}}function Nu(o){var u=o[_x];if(void 0===u)throw new D("missing-continue-uri");if("string"!=typeof u||"string"==typeof u&&!u.length)throw new D("invalid-continue-uri");this.h=u,this.b=this.a=null,this.g=!1;var h=o[Tw];if(h&&"object"==typeof h){u=h[xw];var f=h[Ew];if(h=h[Aw],"string"==typeof u&&u.length){if(this.a=u,void 0!==f&&"boolean"!=typeof f)throw new D("argument-error",Ew+" property must be a boolean when specified.");if(this.g=!!f,void 0!==h&&("string"!=typeof h||"string"==typeof h&&!h.length))throw new D("argument-error",Aw+" property must be a non empty string when specified.");this.b=h||null}else{if(void 0!==u)throw new D("argument-error",xw+" property must be a non empty string when specified.");if(void 0!==f||void 0!==h)throw new D("missing-android-pkg-name")}}else if(void 0!==h)throw new D("argument-error",Tw+" property must be a non null object when specified.");if(this.f=null,(u=o[Dw])&&"object"==typeof u){if("string"==typeof(u=u[Mw])&&u.length)this.f=u;else if(void 0!==u)throw new D("argument-error",Mw+" property must be a non empty string when specified.")}else if(void 0!==u)throw new D("argument-error",Dw+" property must be a non null object when specified.");if(void 0!==(u=o[Bd])&&"boolean"!=typeof u)throw new D("argument-error",Bd+" property must be a boolean when specified.");if(this.c=!!u,void 0!==(o=o[kw])&&("string"!=typeof o||"string"==typeof o&&!o.length))throw new D("argument-error",kw+" property must be a non empty string when specified.");this.i=o||null}var Tw="android",kw="dynamicLinkDomain",Bd="handleCodeInApp",Dw="iOS",_x="url",Ew="installApp",Aw="minimumVersion",xw="packageName",Mw="bundleId";function Pu(o){var u={};for(var h in u.continueUrl=o.h,u.canHandleCodeInApp=o.c,(u.androidPackageName=o.a)&&(u.androidMinimumVersion=o.b,u.androidInstallApp=o.g),u.iOSBundleId=o.f,u.dynamicLinkDomain=o.i,u)null===u[h]&&delete u[h];return u}var Ds=null;function Fu(o){var u=Ow(o);if(!(u&&u.sub&&u.iss&&u.aud&&u.exp))throw Error("Invalid JWT");this.h=o,this.a=u.exp,this.i=u.sub,o=Date.now()/1e3,this.g=u.iat||(o>this.a?this.a:o),this.b=u.provider_id||u.firebase&&u.firebase.sign_in_provider||null,this.f=u.firebase&&u.firebase.tenant||null,this.c=!!u.is_anonymous||"anonymous"==this.b}function Lu(o){try{return new Fu(o)}catch(u){return null}}function Ow(o){if(!o||3!=(o=o.split(".")).length)return null;for(var u=(4-(o=o[1]).length%4)%4,h=0;h<u;h++)o+=".";try{var f=function(o){var u=[];return function(o,u){function h(x){for(;f<o.length;){var O=o.charAt(f++),et=Ds[O];if(null!=et)return et;if(!/^[\s\xa0]*$/.test(O))throw Error("Unknown base64 encoding at char: "+O)}return x}!function(){if(!Ds){Ds={};for(var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),u=["+/=","+/","-_=","-_.","-_"],h=0;5>h;h++)for(var f=o.concat(u[h].split("")),g=0;g<f.length;g++){var y=f[g];void 0===Ds[y]&&(Ds[y]=g)}}}();for(var f=0;;){var g=h(-1),y=h(0),w=h(64),C=h(64);if(64===C&&-1===g)break;u(g<<2|y>>4),64!=w&&(u(y<<4&240|w>>2),64!=C&&u(w<<6&192|C))}}(o,function(h){u.push(h)}),u}(o);for(o=[],h=u=0;u<f.length;){var g=f[u++];if(128>g)o[h++]=String.fromCharCode(g);else if(191<g&&224>g){var y=f[u++];o[h++]=String.fromCharCode((31&g)<<6|63&y)}else if(239<g&&365>g){y=f[u++];var w=f[u++],x=((7&g)<<18|(63&y)<<12|(63&w)<<6|63&f[u++])-65536;o[h++]=String.fromCharCode(55296+(x>>10)),o[h++]=String.fromCharCode(56320+(1023&x))}else y=f[u++],w=f[u++],o[h++]=String.fromCharCode((15&g)<<12|(63&y)<<6|63&w)}return JSON.parse(o.join(""))}catch(O){}return null}Fu.prototype.T=function(){return this.f},Fu.prototype.l=function(){return this.c},Fu.prototype.toString=function(){return this.h};var Rw="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Vu=["client_id","response_type","scope","redirect_uri","state"],qd={nd:{Ja:"locale",va:700,ua:600,fa:"facebook.com",Ya:Vu},pd:{Ja:null,va:500,ua:750,fa:"github.com",Ya:Vu},qd:{Ja:"hl",va:515,ua:680,fa:"google.com",Ya:Vu},wd:{Ja:"lang",va:485,ua:705,fa:"twitter.com",Ya:Rw},kd:{Ja:"locale",va:640,ua:600,fa:"apple.com",Ya:[]}};function Ud(o){for(var u in qd)if(qd[u].fa==o)return qd[u];return null}function Nw(o){var u={};u["facebook.com"]=Fw,u["google.com"]=Vw,u["github.com"]=Lw,u["twitter.com"]=Bw;var h=o&&o[Pw];try{if(h)return u[h]?new u[h](o):new dn(o);if(void 0!==o[jd])return new Yd(o)}catch(f){}return null}var jd="idToken",Pw="providerId";function Yd(o){var u=o[Pw];if(!u&&o[jd]){var h=Lu(o[jd]);h&&h.b&&(u=h.b)}if(!u)throw Error("Invalid additional user info!");("anonymous"==u||"custom"==u)&&(u=null),h=!1,void 0!==o.isNewUser?h=!!o.isNewUser:"identitytoolkit#SignupNewUserResponse"===o.kind&&(h=!0),j(this,"providerId",u),j(this,"isNewUser",h)}function dn(o){Yd.call(this,o),j(this,"profile",Md((o=zr(o.rawUserInfo||"{}"))||{}))}function Fw(o){if(dn.call(this,o),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function Lw(o){if(dn.call(this,o),"github.com"!=this.providerId)throw Error("Invalid provider ID!");j(this,"username",this.profile&&this.profile.login||null)}function Vw(o){if(dn.call(this,o),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function Bw(o){if(dn.call(this,o),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");j(this,"username",o.screenName||null)}function qw(o){var u=Te(o),h=je(u,"link"),f=je(Te(h),"link");return u=je(u,"deep_link_id"),je(Te(u),"link")||u||f||h||o}function Bu(o,u){if(!o&&!u)throw new D("internal-error","Internal assert: no raw session string available");if(o&&u)throw new D("internal-error","Internal assert: unable to determine the session type");this.a=o||null,this.b=u||null,this.type=this.a?Es:qu}tt(dn,Yd),tt(Fw,dn),tt(Lw,dn),tt(Vw,dn),tt(Bw,dn);var Es="enroll",qu="signin";function Zr(){}function Kr(o,u){return o.then(function(h){if(h[$e]){var f=Lu(h[$e]);if(!f||u!=f.i)throw new D("user-mismatch");return h}throw new D("user-mismatch")}).o(function(h){throw h&&h.code&&h.code==ls+"user-not-found"?new D("user-mismatch"):h})}function Ui(o,u){if(!u)throw new D("internal-error","failed to construct a credential");this.a=u,j(this,"providerId",o),j(this,"signInMethod",o)}function Gd(o){return{pendingToken:o.a,requestUri:"http://localhost"}}function Cx(o){if(o&&o.providerId&&o.signInMethod&&0==o.providerId.indexOf("saml.")&&o.pendingToken)try{return new Ui(o.providerId,o.pendingToken)}catch(u){}return null}function xn(o,u,h){if(this.a=null,u.idToken||u.accessToken)u.idToken&&j(this,"idToken",u.idToken),u.accessToken&&j(this,"accessToken",u.accessToken),u.nonce&&!u.pendingToken&&j(this,"nonce",u.nonce),u.pendingToken&&(this.a=u.pendingToken);else{if(!u.oauthToken||!u.oauthTokenSecret)throw new D("internal-error","failed to construct a credential");j(this,"accessToken",u.oauthToken),j(this,"secret",u.oauthTokenSecret)}j(this,"providerId",o),j(this,"signInMethod",h)}function Hd(o){var u={};return o.idToken&&(u.id_token=o.idToken),o.accessToken&&(u.access_token=o.accessToken),o.secret&&(u.oauth_token_secret=o.secret),u.providerId=o.providerId,o.nonce&&!o.a&&(u.nonce=o.nonce),u={postBody:$0(u).toString(),requestUri:"http://localhost"},o.a&&(delete u.postBody,u.pendingToken=o.a),u}function Tx(o){if(o&&o.providerId&&o.signInMethod){var u={idToken:o.oauthIdToken,accessToken:o.oauthTokenSecret?null:o.oauthAccessToken,oauthTokenSecret:o.oauthTokenSecret,oauthToken:o.oauthTokenSecret&&o.oauthAccessToken,nonce:o.nonce,pendingToken:o.pendingToken};try{return new xn(o.providerId,u,o.signInMethod)}catch(h){}}return null}function ji(o,u){this.Qc=u||[],ge(this,{providerId:o,isOAuthProvider:!0}),this.Jb={},this.qb=(Ud(o)||{}).Ja||null,this.pb=null}function Uw(o){if("string"!=typeof o||0!=o.indexOf("saml."))throw new D("argument-error",'SAML provider IDs must be prefixed with "saml."');ji.call(this,o,[])}function Fe(o){ji.call(this,o,Vu),this.a=[]}function Yi(){Fe.call(this,"facebook.com")}function jw(o){if(!o)throw new D("argument-error","credential failed: expected 1 argument (the OAuth access token).");var u=o;return M(o)&&(u=o.accessToken),(new Yi).credential({accessToken:u})}function Gi(){Fe.call(this,"github.com")}function Yw(o){if(!o)throw new D("argument-error","credential failed: expected 1 argument (the OAuth access token).");var u=o;return M(o)&&(u=o.accessToken),(new Gi).credential({accessToken:u})}function Hi(){Fe.call(this,"google.com"),this.Ca("profile")}function Gw(o,u){var h=o;return M(o)&&(h=o.idToken,u=o.accessToken),(new Hi).credential({idToken:h,accessToken:u})}function Jr(){ji.call(this,"twitter.com",Rw)}function Hw(o,u){var h=o;if(M(h)||(h={oauthToken:o,oauthTokenSecret:u}),!h.oauthToken||!h.oauthTokenSecret)throw new D("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new xn("twitter.com",h,"twitter.com")}function ni(o,u,h){this.a=o,this.f=u,j(this,"providerId","password"),j(this,"signInMethod",h===Ye.EMAIL_LINK_SIGN_IN_METHOD?Ye.EMAIL_LINK_SIGN_IN_METHOD:Ye.EMAIL_PASSWORD_SIGN_IN_METHOD)}function kx(o){return o&&o.email&&o.password?new ni(o.email,o.password,o.signInMethod):null}function Ye(){ge(this,{providerId:"password",isOAuthProvider:!1})}function zw(o,u){if(!(u=zd(u)))throw new D("argument-error","Invalid email link!");return new ni(o,u.code,Ye.EMAIL_LINK_SIGN_IN_METHOD)}function zd(o){return(o=Cw(o=qw(o)))&&o.operation===Ru?o:null}function ii(o){if(!(o.fb&&o.eb||o.La&&o.ea))throw new D("internal-error");this.a=o,j(this,"providerId","phone"),this.fa="phone",j(this,"signInMethod","phone")}function Dx(o){if(o&&"phone"===o.providerId&&(o.verificationId&&o.verificationCode||o.temporaryProof&&o.phoneNumber)){var u={};return At(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(h){o[h]&&(u[h]=o[h])}),new ii(u)}return null}function As(o){return o.a.La&&o.a.ea?{temporaryProof:o.a.La,phoneNumber:o.a.ea}:{sessionInfo:o.a.fb,code:o.a.eb}}function Mn(o){try{this.a=o||it.Z.auth()}catch(u){throw new D("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}ge(this,{providerId:"phone",isOAuthProvider:!1})}function Zw(o,u){if(!o)throw new D("missing-verification-id");if(!u)throw new D("missing-verification-code");return new ii({fb:o,eb:u})}function Zd(o){if(o.temporaryProof&&o.phoneNumber)return new ii({La:o.temporaryProof,ea:o.phoneNumber});var u=o&&o.providerId;if(!u||"password"===u)return null;var h=o&&o.oauthAccessToken,f=o&&o.oauthTokenSecret,g=o&&o.nonce,y=o&&o.oauthIdToken,w=o&&o.pendingToken;try{switch(u){case"google.com":return Gw(y,h);case"facebook.com":return jw(h);case"github.com":return Yw(h);case"twitter.com":return Hw(h,f);default:return h||f||y||w?w?0==u.indexOf("saml.")?new Ui(u,w):new xn(u,{pendingToken:w,idToken:o.oauthIdToken,accessToken:o.oauthAccessToken},u):new Fe(u).credential({idToken:y,accessToken:h,rawNonce:g}):null}}catch(C){return null}}function Kd(o){if(!o.isOAuthProvider)throw new D("invalid-oauth-provider")}function We(o,u,h,f,g,y,w){if(this.c=o,this.b=u||null,this.g=h||null,this.f=f||null,this.i=y||null,this.h=w||null,this.a=g||null,!this.g&&!this.a)throw new D("invalid-auth-event");if(this.g&&this.a)throw new D("invalid-auth-event");if(this.g&&!this.f)throw new D("invalid-auth-event")}function Kw(o){return(o=o||{}).type?new We(o.type,o.eventId,o.urlResponse,o.sessionId,o.error&&Z_(o.error),o.postBody,o.tenantId):null}function Ex(){this.b=null,this.a=[]}Bu.prototype.Ha=function(){return K(this.a?this.a:this.b)},Bu.prototype.w=function(){return this.type==Es?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},Zr.prototype.ka=function(){},Zr.prototype.b=function(){},Zr.prototype.c=function(){},Zr.prototype.w=function(){},Ui.prototype.ka=function(o){return pf(o,Gd(this))},Ui.prototype.b=function(o,u){var h=Gd(this);return h.idToken=u,mf(o,h)},Ui.prototype.c=function(o,u){return Kr(gf(o,Gd(this)),u)},Ui.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},xn.prototype.ka=function(o){return pf(o,Hd(this))},xn.prototype.b=function(o,u){var h=Hd(this);return h.idToken=u,mf(o,h)},xn.prototype.c=function(o,u){return Kr(gf(o,Hd(this)),u)},xn.prototype.w=function(){var o={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(o.oauthIdToken=this.idToken),this.accessToken&&(o.oauthAccessToken=this.accessToken),this.secret&&(o.oauthTokenSecret=this.secret),this.nonce&&(o.nonce=this.nonce),this.a&&(o.pendingToken=this.a),o},ji.prototype.Ka=function(o){return this.Jb=Wn(o),this},tt(Uw,ji),tt(Fe,ji),Fe.prototype.Ca=function(o){return En(this.a,o)||this.a.push(o),this},Fe.prototype.Rb=function(){return Mi(this.a)},Fe.prototype.credential=function(o,u){var h;if(!(h=M(o)?{idToken:o.idToken||null,accessToken:o.accessToken||null,nonce:o.rawNonce||null}:{idToken:o||null,accessToken:u||null}).idToken&&!h.accessToken)throw new D("argument-error","credential failed: must provide the ID token and/or the access token.");return new xn(this.providerId,h,this.providerId)},tt(Yi,Fe),j(Yi,"PROVIDER_ID","facebook.com"),j(Yi,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),tt(Gi,Fe),j(Gi,"PROVIDER_ID","github.com"),j(Gi,"GITHUB_SIGN_IN_METHOD","github.com"),tt(Hi,Fe),j(Hi,"PROVIDER_ID","google.com"),j(Hi,"GOOGLE_SIGN_IN_METHOD","google.com"),tt(Jr,ji),j(Jr,"PROVIDER_ID","twitter.com"),j(Jr,"TWITTER_SIGN_IN_METHOD","twitter.com"),ni.prototype.ka=function(o){return this.signInMethod==Ye.EMAIL_LINK_SIGN_IN_METHOD?ht(o,lM,{email:this.a,oobCode:this.f}):ht(o,_b,{email:this.a,password:this.f})},ni.prototype.b=function(o,u){return this.signInMethod==Ye.EMAIL_LINK_SIGN_IN_METHOD?ht(o,hM,{idToken:u,email:this.a,oobCode:this.f}):ht(o,yb,{idToken:u,email:this.a,password:this.f})},ni.prototype.c=function(o,u){return Kr(this.ka(o),u)},ni.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},ge(Ye,{PROVIDER_ID:"password"}),ge(Ye,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),ge(Ye,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),ii.prototype.ka=function(o){return o.gb(As(this))},ii.prototype.b=function(o,u){var h=As(this);return h.idToken=u,ht(o,MM,h)},ii.prototype.c=function(o,u){var h=As(this);return h.operation="REAUTH",Kr(o=ht(o,OM,h),u)},ii.prototype.w=function(){var o={providerId:"phone"};return this.a.fb&&(o.verificationId=this.a.fb),this.a.eb&&(o.verificationCode=this.a.eb),this.a.La&&(o.temporaryProof=this.a.La),this.a.ea&&(o.phoneNumber=this.a.ea),o},Mn.prototype.gb=function(o,u){var h=this.a.a;return K(u.verify()).then(function(f){if("string"!=typeof f)throw new D("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(u.type){case"recaptcha":var g=M(o)?o.session:null,y=M(o)?o.phoneNumber:o;return(g&&g.type==Es?g.Ha().then(function(C){return function(o,u){return ht(o,CM,u).then(function(h){return h.phoneSessionInfo.sessionInfo})}(h,{idToken:C,phoneEnrollmentInfo:{phoneNumber:y,recaptchaToken:f}})}):g&&g.type==qu?g.Ha().then(function(C){return function(o,u){return ht(o,TM,u).then(function(h){return h.phoneResponseInfo.sessionInfo})}(h,{mfaPendingCredential:C,mfaEnrollmentId:o.multiFactorHint&&o.multiFactorHint.uid||o.multiFactorUid,phoneSignInInfo:{recaptchaToken:f}})}):function(o,u){return ht(o,SM,u)}(h,{phoneNumber:y,recaptchaToken:f})).then(function(C){return"function"==typeof u.reset&&u.reset(),C},function(C){throw"function"==typeof u.reset&&u.reset(),C});default:throw new D("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})},ge(Mn,{PROVIDER_ID:"phone"}),ge(Mn,{PHONE_SIGN_IN_METHOD:"phone"}),We.prototype.getUid=function(){var o=[];return o.push(this.c),this.b&&o.push(this.b),this.f&&o.push(this.f),this.h&&o.push(this.h),o.join("-")},We.prototype.T=function(){return this.h},We.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Wd,Jd=null;function Qd(o){var u="unauthorized-domain",h=void 0,f=Te(o);o=f.a,"chrome-extension"==(f=f.c)?h=g0("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",o):"http"==f||"https"==f?h=g0("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",o):u="operation-not-supported-in-this-environment",D.call(this,u,h)}function xs(o,u,h){D.call(this,o,h),(o=u||{}).Kb&&j(this,"email",o.Kb),o.ea&&j(this,"phoneNumber",o.ea),o.credential&&j(this,"credential",o.credential),o.$b&&j(this,"tenantId",o.$b)}function Uu(o){if(o.code){var u=o.code||"";0==u.indexOf(ls)&&(u=u.substring(ls.length));var h={credential:Zd(o),$b:o.tenantId};if(o.email)h.Kb=o.email;else if(o.phoneNumber)h.ea=o.phoneNumber;else if(!h.credential)return new D(u,o.message||void 0);return new xs(u,h,o.message)}return null}function Ms(){}function ju(){}function Qw(o){if(!o.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var u=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],h=0;h<u.length;h++){var f=u[h];try{return new ActiveXObject(f),o.f=f}catch(g){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return o.f}function Yu(){}function Ww(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=L(this.qc,this),this.a.onerror=L(this.Tb,this),this.a.onprogress=L(this.rc,this),this.a.ontimeout=L(this.vc,this)}function Xd(o,u){o.readyState=u,o.onreadystatechange&&o.onreadystatechange()}function $d(o,u,h){this.reset(o,u,h,void 0,void 0)}function tf(o){this.f=o,this.b=this.c=this.a=null}function Os(o,u){this.name=o,this.value=u}tt(Qd,D),tt(xs,D),xs.prototype.w=function(){var o={code:this.code,message:this.message};this.email&&(o.email=this.email),this.phoneNumber&&(o.phoneNumber=this.phoneNumber),this.tenantId&&(o.tenantId=this.tenantId);var u=this.credential&&this.credential.w();return u&&Se(o,u),o},xs.prototype.toJSON=function(){return this.w()},Ms.prototype.c=null,tt(ju,Ms),ju.prototype.a=function(){var o=Qw(this);return o?new ActiveXObject(o):new XMLHttpRequest},ju.prototype.b=function(){var o={};return Qw(this)&&(o[0]=!0,o[1]=!0),o},Wd=new ju,tt(Yu,Ms),Yu.prototype.a=function(){var o=new XMLHttpRequest;if("withCredentials"in o)return o;if("undefined"!=typeof XDomainRequest)return new Ww;throw Error("Unsupported browser")},Yu.prototype.b=function(){return{}},(i=Ww.prototype).open=function(o,u,h){if(null!=h&&!h)throw Error("Only async requests are supported.");this.a.open(o,u)},i.send=function(o){if(o){if("string"!=typeof o)throw Error("Only string data is supported");this.a.send(o)}else this.a.send()},i.abort=function(){this.a.abort()},i.setRequestHeader=function(){},i.getResponseHeader=function(o){return"content-type"==o.toLowerCase()?this.a.contentType:""},i.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Xd(this,4)},i.Tb=function(){this.status=500,this.response=this.responseText="",Xd(this,4)},i.vc=function(){this.Tb()},i.rc=function(){this.status=200,Xd(this,1)},i.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},$d.prototype.a=null,$d.prototype.reset=function(o,u,h,f,g){f||cs(),delete this.a},Os.prototype.toString=function(){return this.name};var Xw=new Os("SEVERE",1e3),ef=new Os("WARNING",900),Mx=new Os("CONFIG",700),Ox=new Os("FINE",500);function $w(o){return o.c?o.c:o.a?$w(o.a):(Pr("Root logger has no level set."),null)}tf.prototype.log=function(o,u,h){if(o.value>=$w(this).value)for(E(u)&&(u=u()),o=new $d(o,String(u),this.f),h&&(o.a=h),h=this;h;)h=h.a};var nf={},Gu=null;function rf(o){var u;if(Gu||(Gu=new tf(""),nf[""]=Gu,Gu.c=Mx),!(u=nf[o])){u=new tf(o);var h=o.lastIndexOf("."),f=o.substr(h+1);(h=rf(o.substr(0,h))).b||(h.b={}),h.b[f]=u,u.a=h,nf[o]=u}return u}function Ge(o,u){o&&o.log(Ox,u,void 0)}function Hu(o){this.f=o}function zu(o){me.call(this),this.u=o,this.h=void 0,this.readyState=of,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=rf("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}tt(Hu,Ms),Hu.prototype.a=function(){return new zu(this.f)},Hu.prototype.b=function(o){return function(){return o}}({}),tt(zu,me);var of=0;function tb(o){o.c.read().then(o.pc.bind(o)).catch(o.Va.bind(o))}function Rs(o){o.readyState=4,o.g=null,o.c=null,o.m=null,Ns(o)}function Ns(o){o.onreadystatechange&&o.onreadystatechange.call(o)}function Ps(o){me.call(this),this.headers=new Ur,this.D=o||null,this.c=!1,this.C=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.J=!1,this.g=0,this.s=null,this.m=eb,this.u=this.S=!1}(i=zu.prototype).open=function(o,u){if(this.readyState!=of)throw this.abort(),Error("Error reopening a connection");this.s=o,this.f=u,this.readyState=1,Ns(this)},i.send=function(o){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var u={headers:this.l,method:this.s,credentials:this.h,cache:void 0};o&&(u.body=o),this.u.fetch(new Request(this.f,u)).then(this.uc.bind(this),this.Va.bind(this))},i.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,Rs(this)),this.readyState=of},i.uc=function(o){this.a&&(this.g=o,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=o.headers,this.readyState=2,Ns(this)),this.a&&(this.readyState=3,Ns(this),this.a&&("arraybuffer"===this.responseType?o.arrayBuffer().then(this.sc.bind(this),this.Va.bind(this)):void 0!==m.ReadableStream&&"body"in o?(this.response=this.responseText="",this.c=o.body.getReader(),this.m=new TextDecoder,tb(this)):o.text().then(this.tc.bind(this),this.Va.bind(this)))))},i.pc=function(o){if(this.a){var u=this.m.decode(o.value?o.value:new Uint8Array(0),{stream:!o.done});u&&(this.response=this.responseText+=u),o.done?Rs(this):Ns(this),3==this.readyState&&tb(this)}},i.tc=function(o){this.a&&(this.response=this.responseText=o,Rs(this))},i.sc=function(o){this.a&&(this.response=o,Rs(this))},i.Va=function(o){var u=this.i;u&&u.log(ef,"Failed to fetch url "+this.f,o instanceof Error?o:Error(o)),this.a&&Rs(this)},i.setRequestHeader=function(o,u){this.l.append(o,u)},i.getResponseHeader=function(o){return this.b?this.b.get(o.toLowerCase())||"":((o=this.i)&&o.log(ef,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},i.getAllResponseHeaders=function(){if(!this.b){var o=this.i;return o&&o.log(ef,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}o=[];for(var u=this.b.entries(),h=u.next();!h.done;)o.push((h=h.value)[0]+": "+h[1]),h=u.next();return o.join("\r\n")},Object.defineProperty(zu.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(o){this.h=o?"include":"same-origin"}}),tt(Ps,me);var eb="";Ps.prototype.b=rf("goog.net.XhrIo");var Rx=/^https?$/i,Nx=["POST","PUT"];function Lx(o){return"content-type"==o.toLowerCase()}function nb(o,u){o.c=!1,o.a&&(o.f=!0,o.a.abort(),o.f=!1),o.h=u,ib(o),Zu(o)}function ib(o){o.J||(o.J=!0,o.dispatchEvent("complete"),o.dispatchEvent("error"))}function rb(o){if(o.c&&void 0!==p)if(o.C[1]&&4==Fs(o)&&2==Ku(o))Ge(o.b,On(o,"Local request error detected and ignored"));else if(o.i&&4==Fs(o))vd(o.Wb,0,o);else if(o.dispatchEvent("readystatechange"),4==Fs(o)){Ge(o.b,On(o,"Request complete")),o.c=!1;try{var f,u=Ku(o);t:switch(u){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break t;default:h=!1}if(!(f=h)){var g;if(g=0===u){var y=String(o.l).match(W0)[1]||null;if(!y&&m.self&&m.self.location){var w=m.self.location.protocol;y=w.substr(0,w.length-1)}g=!Rx.test(y?y.toLowerCase():"")}f=g}if(f)o.dispatchEvent("complete"),o.dispatchEvent("success");else{try{var C=2<Fs(o)?o.a.statusText:""}catch(x){Ge(o.b,"Can not get status: "+x.message),C=""}o.h=C+" ["+Ku(o)+"]",ib(o)}}finally{Zu(o)}}}function Zu(o,u){if(o.a){ob(o);var h=o.a,f=o.C[0]?I:null;o.a=null,o.C=null,u||o.dispatchEvent("ready");try{h.onreadystatechange=f}catch(g){(o=o.b)&&o.log(Xw,"Problem encountered resetting onreadystatechange: "+g.message,void 0)}}}function ob(o){o.a&&o.u&&(o.a.ontimeout=null),o.s&&(m.clearTimeout(o.s),o.s=null)}function Fs(o){return o.a?o.a.readyState:0}function Ku(o){try{return 2<Fs(o)?o.a.status:-1}catch(u){return-1}}function On(o,u){return u+" ["+o.P+" "+o.l+" "+Ku(o)+"]"}function zi(o){var u=Ux;this.g=[],this.u=u,this.s=o||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function Ls(o,u,h){o.a=!0,o.c=h,o.f=!u,ab(o)}function Ju(o){if(o.a){if(!o.v)throw new Qu(o);o.v=!1}}function sf(o,u,h,f){o.g.push([u,h,f]),o.a&&ab(o)}function sb(o){return iA(o.g,function(u){return E(u[1])})}function ab(o){if(o.h&&o.a&&sb(o)){var u=o.h,h=Wu[u];h&&(m.clearTimeout(h.a),delete Wu[u]),o.h=0}o.b&&(o.b.l--,delete o.b),u=o.c;for(var f=h=!1;o.g.length&&!o.i;){var g=o.g.shift(),y=g[0],w=g[1];if(g=g[2],y=o.f?w:y)try{var C=y.call(g||o.s,u);void 0!==C&&(o.f=o.f&&(C==u||C instanceof Error),o.c=u=C),(K_(u)||"function"==typeof m.Promise&&u instanceof m.Promise)&&(f=!0,o.i=!0)}catch(x){u=x,o.f=!0,sb(o)||(h=!0)}}o.c=u,f&&(C=L(o.m,o,!0),f=L(o.m,o,!1),u instanceof zi?(sf(u,C,f),u.C=!0):u.then(C,f)),h&&(u=new ub(u),Wu[u.a]=u,o.h=u.a)}function Qu(){Ne.call(this)}function Vs(){Ne.call(this)}function ub(o){this.a=m.setTimeout(L(this.c,this),0),this.b=o}(i=Ps.prototype).Ma=function(){void 0!==p&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",Ge(this.b,On(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},i.abort=function(){this.a&&this.c&&(Ge(this.b,On(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Zu(this))},i.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Zu(this,!0)),Ps.bb.Da.call(this)},i.Wb=function(){this.ya||(this.N||this.i||this.f?rb(this):this.Jc())},i.Jc=function(){rb(this)},i.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case eb:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var o=this.b;return o&&o.log(Xw,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(u){return Ge(this.b,"Can not get response: "+u.message),null}},zi.prototype.cancel=function(o){if(this.a)this.c instanceof zi&&this.c.cancel();else{if(this.b){var u=this.b;delete this.b,o?u.cancel(o):(u.l--,0>=u.l&&u.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(o=new Vs(this),Ju(this),Ls(this,!1,o))}},zi.prototype.m=function(o,u){this.i=!1,Ls(this,o,u)},zi.prototype.then=function(o,u,h){var f,g,y=new ut(function(w,C){f=w,g=C});return sf(this,f,function(w){w instanceof Vs?y.cancel():g(w)}),y.then(o,u,h)},zi.prototype.$goog_Thenable=!0,tt(Qu,Ne),Qu.prototype.message="Deferred has already fired",Qu.prototype.name="AlreadyCalledError",tt(Vs,Ne),Vs.prototype.message="Deferred was canceled",Vs.prototype.name="CanceledError",ub.prototype.c=function(){throw delete Wu[this.a],this.b};var Wu={};function af(o){var u={},h=u.document||document,f=u0(o).toString(),g=Su(document,"SCRIPT"),y={Xb:g,Ma:void 0},w=new zi(y),C=null,x=null!=u.timeout?u.timeout:5e3;return 0<x&&(C=window.setTimeout(function(){Xu(g,!0);var O=new uf(Yx,"Timeout reached for loading script "+f);Ju(w),Ls(w,!1,O)},x),y.Ma=C),g.onload=g.onreadystatechange=function(){g.readyState&&"loaded"!=g.readyState&&"complete"!=g.readyState||(Xu(g,u.xd||!1,C),Ju(w),Ls(w,!0,null))},g.onerror=function(){Xu(g,!0,C);var O=new uf(jx,"Error while loading script "+f);Ju(w),Ls(w,!1,O)},Se(y=u.attributes||{},{type:"text/javascript",charset:"UTF-8"}),S0(g,y),function(o,u){o0(o,"HTMLScriptElement"),o.src=u0(u),(u=o.ownerDocument&&o.ownerDocument.defaultView)&&u!=m?u=b(u.document):(null===_&&(_=b(m.document)),u=_),u&&o.setAttribute("nonce",u)}(g,o),function(o){var u;return(u=(o||document).getElementsByTagName("HEAD"))&&0!=u.length?u[0]:o.documentElement}(h).appendChild(g),w}function Ux(){if(this&&this.Xb){var o=this.Xb;o&&"SCRIPT"==o.tagName&&Xu(o,!0,this.Ma)}}function Xu(o,u,h){null!=h&&m.clearTimeout(h),o.onload=I,o.onerror=I,o.onreadystatechange=I,u&&window.setTimeout(function(){o&&o.parentNode&&o.parentNode.removeChild(o)},0)}var jx=0,Yx=1;function uf(o,u){var h="Jsloader error (code #"+o+")";u&&(h+=": "+u),Ne.call(this,h),this.code=o}function $u(o){this.f=o}function Xe(o,u,h){if(this.c=o,this.l=(o=u||{}).secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=o.secureTokenTimeout||Gx,this.g=Wn(o.secureTokenHeaders||Hx),this.h=o.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=o.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=o.firebaseTimeout||zx,this.a=Wn(o.firebaseHeaders||Zx),h&&(this.a["X-Client-Version"]=h,this.g["X-Client-Version"]=h),h="Node"==ln(),!(h=m.XMLHttpRequest||h&&it.Z.INTERNAL.node&&it.Z.INTERNAL.node.XMLHttpRequest)&&!Qe())throw new D("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,this.f=Qe()?new Hu(self):cw()?new $u(h):new Yu,this.b=null}tt(uf,Ne),tt($u,Ms),$u.prototype.a=function(){return new this.f},$u.prototype.b=function(){return{}};var cf,$e="idToken",Gx=new ei(3e4,6e4),Hx={"Content-Type":"application/x-www-form-urlencoded"},zx=new ei(3e4,6e4),Zx={"Content-Type":"application/json"};function cb(o,u){u?o.a["X-Firebase-Locale"]=u:delete o.a["X-Firebase-Locale"]}function tc(o,u){u&&(o.l=lf("https://securetoken.googleapis.com/v1/token",u),o.h=lf("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",u),o.i=lf("https://identitytoolkit.googleapis.com/v2/",u))}function lf(o,u){return o=Te(o),u=Te(u.url),o.f=o.a+o.f,vs(o,u.c),o.a=u.a,ys(o,u.g),o.toString()}function lb(o,u){u?(o.a["X-Client-Version"]=u,o.g["X-Client-Version"]=u):(delete o.a["X-Client-Version"],delete o.g["X-Client-Version"])}function hb(o,u,h,f,g,y,w){(function(){var o=ie();return!((o="Chrome"!=Yr(o)?null:(o=o.match(/\sChrome\/(\d+)/i))&&2==o.length?parseInt(o[1],10):null)&&30>o||Je&&Xn&&!(9<Xn))})()||Qe()?o=L(o.u,o):(cf||(cf=new ut(function(C,x){!function(o,u){((window.gapi||{}).client||{}).request?o():(m[db]=function(){((window.gapi||{}).client||{}).request?o():u(Error("CORS_UNSUPPORTED"))},function(o,u){sf(o,null,u,void 0)}(af(Wh(Kx,{onload:db})),function(){u(Error("CORS_UNSUPPORTED"))}))}(C,x)})),o=L(o.s,o)),o(u,h,f,g,y,w)}Xe.prototype.T=function(){return this.b},Xe.prototype.u=function(o,u,h,f,g,y){if(Qe()&&(void 0===m.fetch||void 0===m.Headers||void 0===m.Request))throw new D("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var w=new Ps(this.f);if(y){w.g=Math.max(0,y);var C=setTimeout(function(){w.dispatchEvent("timeout")},y)}K0(w,"complete",function(){C&&clearTimeout(C);var x=null;try{x=JSON.parse(function(o){try{return o.a?o.a.responseText:""}catch(u){return Ge(o.b,"Can not get responseText: "+u.message),""}}(this))||null}catch(O){x=null}u&&u(x)}),gd(w,"ready",function(){C&&clearTimeout(C),q0(this)}),gd(w,"timeout",function(){C&&clearTimeout(C),q0(this),u&&u(null)}),function(o,u,h,f,g){if(o.a)throw Error("[goog.net.XhrIo] Object is active with another request="+o.l+"; newUri="+u);h=h?h.toUpperCase():"GET",o.l=u,o.h="",o.P=h,o.J=!1,o.c=!0,o.a=o.D?o.D.a():Wd.a(),o.C=function(o){return o.c||(o.c=o.b())}(o.D?o.D:Wd),o.a.onreadystatechange=L(o.Wb,o);try{Ge(o.b,On(o,"Opening Xhr")),o.N=!0,o.a.open(h,String(u),!0),o.N=!1}catch(w){return Ge(o.b,On(o,"Error opening Xhr: "+w.message)),void nb(o,w)}u=f||"";var y=new Ur(o.headers);g&&function(o,u){if(o.forEach&&"function"==typeof o.forEach)o.forEach(u,void 0);else if(T(o)||"string"==typeof o)At(o,u,void 0);else for(var h=Q0(o),f=J0(o),g=f.length,y=0;y<g;y++)u.call(void 0,f[y],h&&h[y],o)}(g,function(w,C){y.set(C,w)}),g=function(o){t:{for(var u=Lx,h=o.length,f="string"==typeof o?o.split(""):o,g=0;g<h;g++)if(g in f&&u.call(void 0,f[g],g,o)){u=g;break t}u=-1}return 0>u?null:"string"==typeof o?o.charAt(u):o[u]}(y.Y()),f=m.FormData&&u instanceof m.FormData,!En(Nx,h)||g||f||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),y.forEach(function(w,C){this.a.setRequestHeader(C,w)},o),o.m&&(o.a.responseType=o.m),"withCredentials"in o.a&&o.a.withCredentials!==o.S&&(o.a.withCredentials=o.S);try{ob(o),0<o.g&&(o.u=function(o){return Je&&w0(9)&&"number"==typeof o.timeout&&void 0!==o.ontimeout}(o.a),Ge(o.b,On(o,"Will abort after "+o.g+"ms if incomplete, xhr2 "+o.u)),o.u?(o.a.timeout=o.g,o.a.ontimeout=L(o.Ma,o)):o.s=vd(o.Ma,o.g,o)),Ge(o.b,On(o,"Sending request")),o.i=!0,o.a.send(u),o.i=!1}catch(w){Ge(o.b,On(o,"Send error: "+w.message)),nb(o,w)}}(w,o,h,f,g)};var Kx=new un(yu,"https://apis.google.com/js/client.js?onload=%{onload}"),db="__fcb"+Math.floor(1e6*Math.random()).toString();function Zi(o){if("string"!=typeof(o=o.email)||!$A.test(o))throw new D("invalid-email")}function pb(o){"email"in o&&Zi(o)}function ke(o){if(!o[$e])throw o.mfaPendingCredential?new D("multi-factor-auth-required",null,Wn(o)):new D("internal-error")}function hf(o){if(o.phoneNumber||o.temporaryProof){if(!o.phoneNumber||!o.temporaryProof)throw new D("internal-error")}else{if(!o.sessionInfo)throw new D("missing-verification-id");if(!o.code)throw new D("missing-verification-code")}}Xe.prototype.s=function(o,u,h,f,g){var y=this;cf.then(function(){window.gapi.client.setApiKey(y.c);var w=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:o,method:h,body:f,headers:g,authType:"none",callback:function(C){window.gapi.auth.setToken(w),u&&u(C)}})}).o(function(w){u&&u({error:{message:w&&w.message||"CORS_UNSUPPORTED"}})})},Xe.prototype.Ab=function(){return ht(this,IM,{})},Xe.prototype.Cb=function(o,u){return ht(this,vb,{idToken:o,email:u})},Xe.prototype.Db=function(o,u){return ht(this,yb,{idToken:o,password:u})};var $x={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function mb(o){if(!o.phoneVerificationInfo)throw new D("internal-error");if(!o.phoneVerificationInfo.sessionInfo)throw new D("missing-verification-id");if(!o.phoneVerificationInfo.code)throw new D("missing-verification-code")}function df(o){if(!o.requestUri||!o.sessionId&&!o.postBody&&!o.pendingToken)throw new D("internal-error")}function ff(o,u){return u.oauthIdToken&&u.providerId&&0==u.providerId.indexOf("oidc.")&&!u.pendingToken&&(o.sessionId?u.nonce=o.sessionId:o.postBody&&wd(o=new Li(o.postBody),"nonce")&&(u.nonce=o.get("nonce"))),u}function gb(o){var u=null;if(o.needConfirmation?(o.code="account-exists-with-different-credential",u=Uu(o)):"FEDERATED_USER_ID_ALREADY_LINKED"==o.errorMessage?(o.code="credential-already-in-use",u=Uu(o)):"EMAIL_EXISTS"==o.errorMessage?(o.code="email-already-in-use",u=Uu(o)):o.errorMessage&&(u=wb(o.errorMessage)),u)throw u;ke(o)}function pf(o,u){return u.returnIdpCredential=!0,ht(o,kM,u)}function mf(o,u){return u.returnIdpCredential=!0,ht(o,EM,u)}function gf(o,u){return u.returnIdpCredential=!0,u.autoCreate=!1,ht(o,DM,u)}function vf(o){if(!o.oobCode)throw new D("invalid-action-code")}(i=Xe.prototype).Eb=function(o,u){var h={idToken:o},f=[];return n0($x,function(g,y){var w=u[y];null===w?f.push(g):y in u&&(h[y]=w)}),f.length&&(h.deleteAttribute=f),ht(this,vb,h)},i.wb=function(o,u){return Se(o={requestType:"PASSWORD_RESET",email:o},u),ht(this,yM,o)},i.xb=function(o,u){return Se(o={requestType:"EMAIL_SIGNIN",email:o},u),ht(this,mM,o)},i.vb=function(o,u){return Se(o={requestType:"VERIFY_EMAIL",idToken:o},u),ht(this,gM,o)},i.Fb=function(o,u,h){return Se(o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:o,newEmail:u},h),ht(this,vM,o)},i.gb=function(o){return ht(this,xM,o)},i.ob=function(o,u){return ht(this,bM,{oobCode:o,newPassword:u})},i.Sa=function(o){return ht(this,oM,{oobCode:o})},i.kb=function(o){return ht(this,rM,{oobCode:o})};var rM={endpoint:"setAccountInfo",A:vf,Z:"email",B:!0},oM={endpoint:"resetPassword",A:vf,G:function(o){var u=o.requestType;if(!u||!o.email&&"EMAIL_SIGNIN"!=u&&"VERIFY_AND_CHANGE_EMAIL"!=u)throw new D("internal-error")},B:!0},sM={endpoint:"signupNewUser",A:function(o){if(Zi(o),!o.password)throw new D("weak-password")},G:ke,V:!0,B:!0},aM={endpoint:"createAuthUri",B:!0},uM={endpoint:"deleteAccount",O:["idToken"]},cM={endpoint:"setAccountInfo",O:["idToken","deleteProvider"],A:function(o){if(!Array.isArray(o.deleteProvider))throw new D("internal-error")}},lM={endpoint:"emailLinkSignin",O:["email","oobCode"],A:Zi,G:ke,V:!0,B:!0},hM={endpoint:"emailLinkSignin",O:["idToken","email","oobCode"],A:Zi,G:ke,V:!0},dM={endpoint:"accounts/mfaEnrollment:finalize",O:["idToken","phoneVerificationInfo"],A:mb,G:ke,B:!0,Na:!0},fM={endpoint:"accounts/mfaSignIn:finalize",O:["mfaPendingCredential","phoneVerificationInfo"],A:mb,G:ke,B:!0,Na:!0},pM={endpoint:"getAccountInfo"},mM={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(o){if("EMAIL_SIGNIN"!=o.requestType)throw new D("internal-error");Zi(o)},Z:"email",B:!0},gM={endpoint:"getOobConfirmationCode",O:["idToken","requestType"],A:function(o){if("VERIFY_EMAIL"!=o.requestType)throw new D("internal-error")},Z:"email",B:!0},vM={endpoint:"getOobConfirmationCode",O:["idToken","newEmail","requestType"],A:function(o){if("VERIFY_AND_CHANGE_EMAIL"!=o.requestType)throw new D("internal-error")},Z:"email",B:!0},yM={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(o){if("PASSWORD_RESET"!=o.requestType)throw new D("internal-error");Zi(o)},Z:"email",B:!0},_M={mb:!0,endpoint:"getProjectConfig",Vb:"GET"},wM={mb:!0,endpoint:"getRecaptchaParam",Vb:"GET",G:function(o){if(!o.recaptchaSiteKey)throw new D("internal-error")}},bM={endpoint:"resetPassword",A:vf,Z:"email",B:!0},SM={endpoint:"sendVerificationCode",O:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},vb={endpoint:"setAccountInfo",O:["idToken"],A:pb,V:!0},yb={endpoint:"setAccountInfo",O:["idToken"],A:function(o){if(pb(o),!o.password)throw new D("weak-password")},G:ke,V:!0},IM={endpoint:"signupNewUser",G:ke,V:!0,B:!0},CM={endpoint:"accounts/mfaEnrollment:start",O:["idToken","phoneEnrollmentInfo"],A:function(o){if(!o.phoneEnrollmentInfo)throw new D("internal-error");if(!o.phoneEnrollmentInfo.phoneNumber)throw new D("missing-phone-number");if(!o.phoneEnrollmentInfo.recaptchaToken)throw new D("missing-app-credential")},G:function(o){if(!o.phoneSessionInfo||!o.phoneSessionInfo.sessionInfo)throw new D("internal-error")},B:!0,Na:!0},TM={endpoint:"accounts/mfaSignIn:start",O:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(o){if(!o.phoneSignInInfo||!o.phoneSignInInfo.recaptchaToken)throw new D("missing-app-credential")},G:function(o){if(!o.phoneResponseInfo||!o.phoneResponseInfo.sessionInfo)throw new D("internal-error")},B:!0,Na:!0},kM={endpoint:"verifyAssertion",A:df,Za:ff,G:gb,V:!0,B:!0},DM={endpoint:"verifyAssertion",A:df,Za:ff,G:function(o){if(o.errorMessage&&"USER_NOT_FOUND"==o.errorMessage)throw new D("user-not-found");if(o.errorMessage)throw wb(o.errorMessage);ke(o)},V:!0,B:!0},EM={endpoint:"verifyAssertion",A:function(o){if(df(o),!o.idToken)throw new D("internal-error")},Za:ff,G:gb,V:!0},AM={endpoint:"verifyCustomToken",A:function(o){if(!o.token)throw new D("invalid-custom-token")},G:ke,V:!0,B:!0},_b={endpoint:"verifyPassword",A:function(o){if(Zi(o),!o.password)throw new D("wrong-password")},G:ke,V:!0,B:!0},xM={endpoint:"verifyPhoneNumber",A:hf,G:ke,B:!0},MM={endpoint:"verifyPhoneNumber",A:function(o){if(!o.idToken)throw new D("internal-error");hf(o)},G:function(o){if(o.temporaryProof)throw o.code="credential-already-in-use",Uu(o);ke(o)}},OM={Ib:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:hf,G:ke,B:!0},RM={endpoint:"accounts/mfaEnrollment:withdraw",O:["idToken","mfaEnrollmentId"],G:function(o){if(!!o[$e]^!!o.refreshToken)throw new D("internal-error")},B:!0,Na:!0};function ht(o,u,h){if(!function(o,u){if(!u||!u.length)return!0;if(!o)return!1;for(var h=0;h<u.length;h++){var f=o[u[h]];if(null==f||""===f)return!1}return!0}(h,u.O))return kt(new D("internal-error"));var y,f=!!u.Na,g=u.Vb||"POST";return K(h).then(u.A).then(function(){return u.V&&(h.returnSecureToken=!0),u.B&&o.b&&void 0===h.tenantId&&(h.tenantId=o.b),function(o,u,h,f,g,y,w){var C=Te(u+h);Nt(C,"key",o.c),w&&Nt(C,"cb",Date.now().toString());var x="GET"==f;if(x)for(var O in g)g.hasOwnProperty(O)&&Nt(C,O,g[O]);return new ut(function(et,yt){hb(o,C.toString(),function(mt){mt?mt.error?yt(yf(mt,y||{})):et(mt):yt(new D("network-request-failed"))},f,x?void 0:nw(dw(g)),o.a,o.v.get())})}(o,f?o.i:o.h,u.endpoint,g,h,u.Ib,u.mb||!1)}).then(function(w){return y=w,u.Za?u.Za(h,y):y}).then(u.G).then(function(){if(!u.Z)return y;if(!(u.Z in y))throw new D("internal-error");return y[u.Z]})}function wb(o){return yf({error:{errors:[{message:o}],code:400,message:o}})}function yf(o,u){var h=(o.error&&o.error.errors&&o.error.errors[0]||{}).reason||"",f={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(h=f[h]?new D(f[h]):null)return h;for(var g in h=o.error&&o.error.message||"",Se(f={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},u||{}),u=(u=h.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<u.length?u[1]:void 0,f)if(0===h.indexOf(g))return new D(f[g],u);return!u&&o&&(u=Is(o)),new D("internal-error",u)}function NM(o){this.b=o,this.a=null,this.sb=function(o){return(ec||(ec=new ut(function(o,u){function h(){pw(),Dt("gapi.load")("gapi.iframes",{callback:o,ontimeout:function(){pw(),u(Error("Network Error"))},timeout:BM.get()})}if(Dt("gapi.iframes.Iframe"))o();else if(Dt("gapi.load"))h();else{var f="__iframefcb"+Math.floor(1e6*Math.random()).toString();m[f]=function(){Dt("gapi.load")?h():u(Error("Network Error"))},K(af(f=Wh(VM,{onload:f}))).o(function(){u(Error("Network Error"))})}}).o(function(o){throw ec=null,o}))).then(function(){return new ut(function(u,h){Dt("gapi.iframes.getContext")().open({where:document.body,url:o.b,messageHandlersFilter:Dt("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(f){function g(){clearTimeout(y),u()}o.a=f,o.a.restyle({setHideOnLeave:!1});var y=setTimeout(function(){h(Error("Network Error"))},qM.get());f.ping(g).then(g,function(){h(Error("Network Error"))})})})})}(this)}var VM=new un(yu,"https://apis.google.com/js/api.js?onload=%{onload}"),BM=new ei(3e4,6e4),qM=new ei(5e3,15e3),ec=null;function bb(o,u,h,f){this.l=o,this.h=u,this.i=h,this.g=f,this.f=null,o=this.g?xu((o=Te(this.g.url)).c,o.a,o.g,"/emulator/auth/iframe"):xu("https",this.l,null,"/__/auth/iframe"),this.a=o,Nt(this.a,"apiKey",this.h),Nt(this.a,"appName",this.i),this.b=null,this.c=[]}function _f(o,u,h,f,g,y){this.u=o,this.s=u,this.c=h,this.m=f,this.v=y,this.i=this.g=this.l=null,this.a=g,this.h=this.f=null}function wf(o){try{return it.Z.app(o).auth().Ga()}catch(u){return[]}}function Sb(o,u,h,f,g,y){this.s=o,this.g=u,this.b=h,this.f=y,this.c=f||null,this.i=g||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function Ib(o){var u=bs();return function(o){return ht(o,_M,{}).then(function(u){return u.authorizedDomains||[]})}(o).then(function(h){t:{var f=Te(u),g=f.c;f=f.a;for(var y=0;y<h.length;y++){var w=h[y],C=f,x=g;if(0==w.indexOf("chrome-extension://")?C=Te(w).a==C&&"chrome-extension"==x:"http"!=x&&"https"!=x?C=!1:XA.test(w)?C=C==w:(w=w.split(".").join("\\."),C=new RegExp("^(.+\\."+w+"|"+w+")$","i").test(C)),C){h=!0;break t}}h=!1}if(!h)throw new Qd(bs())})}function Cb(o){return o.m||(o.m=Mu().then(function(){if(!o.u){var u=o.c,h=o.i,f=wf(o.b),g=new bb(o.s,o.g,o.b,o.f);g.f=u,g.b=h,g.c=Mi(f||[]),o.u=g.toString()}o.v=new NM(o.u),function(o){if(!o.v)throw Error("IfcHandler must be initialized!");!function(o,u){o.sb.then(function(){o.a.register("authEvent",u,Dt("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}(o.v,function(u){var h={};if(u&&u.authEvent){var f=!1;for(u=Kw(u.authEvent),h=0;h<o.h.length;h++)f=o.h[h](u)||f;return(h={}).status=f?"ACK":"ERROR",K(h)}return h.status="ERROR",K(h)})}(o)})),o.m}function Tb(o){return o.l||(o.C=o.c?Gr(o.c,wf(o.b)):null,o.l=new Xe(o.g,hs(o.i),o.C),o.f&&tc(o.l,o.f)),o.l}function Bs(o,u,h,f,g,y,w,C,x,O,et,yt){return(o=new _f(o,u,h,f,g,yt)).l=y,o.g=w,o.i=C,o.b=Wn(x||null),o.f=O,o.zb(et).toString()}function kb(o){if(this.a=o||it.Z.INTERNAL.reactNative&&it.Z.INTERNAL.reactNative.AsyncStorage,!this.a)throw new D("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function Db(o){this.b=o,this.a={},this.f=L(this.c,this)}bb.prototype.toString=function(){return this.f?Nt(this.a,"v",this.f):cn(this.a.b,"v"),this.b?Nt(this.a,"eid",this.b):cn(this.a.b,"eid"),this.c.length?Nt(this.a,"fw",this.c.join(",")):cn(this.a.b,"fw"),this.a.toString()},_f.prototype.zb=function(o){return this.h=o,this},_f.prototype.toString=function(){if(this.v){var o=Te(this.v.url);o=xu(o.c,o.a,o.g,"/emulator/auth/handler")}else o=xu("https",this.u,null,"/__/auth/handler");if(Nt(o,"apiKey",this.s),Nt(o,"appName",this.c),Nt(o,"authType",this.m),this.a.isOAuthProvider){var u=this.a;try{var h=it.Z.app(this.c).auth().la()}catch(C){h=null}for(var f in u.pb=h,Nt(o,"providerId",this.a.providerId),u=dw((h=this.a).Jb))u[f]=u[f].toString();f=h.Qc,u=Wn(u);for(var g=0;g<f.length;g++){var y=f[g];y in u&&delete u[y]}h.qb&&h.pb&&!u[h.qb]&&(u[h.qb]=h.pb),Oi(u)||Nt(o,"customParameters",Is(u))}if("function"==typeof this.a.Rb&&(h=this.a.Rb()).length&&Nt(o,"scopes",h.join(",")),this.l?Nt(o,"redirectUrl",this.l):cn(o.b,"redirectUrl"),this.g?Nt(o,"eventId",this.g):cn(o.b,"eventId"),this.i?Nt(o,"v",this.i):cn(o.b,"v"),this.b)for(var w in this.b)this.b.hasOwnProperty(w)&&!je(o,w)&&Nt(o,w,this.b[w]);return this.h?Nt(o,"tid",this.h):cn(o.b,"tid"),this.f?Nt(o,"eid",this.f):cn(o.b,"eid"),(w=wf(this.c)).length&&Nt(o,"fw",w.join(",")),o.toString()},(i=Sb.prototype).Pb=function(o,u,h){var f=new D("popup-closed-by-user"),g=new D("web-storage-unsupported"),y=this,w=!1;return this.ma().then(function(){(function(o){var u={type:"webStorageSupport"};return Cb(o).then(function(){return function(o,u){return o.sb.then(function(){return new ut(function(h){o.a.send(u.type,u,h,Dt("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}(o.v,u)}).then(function(h){if(h&&h.length&&void 0!==h[0].webStorageSupport)return h[0].webStorageSupport;throw Error()})})(y).then(function(C){C||(o&&Vi(o),u(g),w=!0)})}).o(function(){}).then(function(){if(!w)return function(o){return new ut(function(u){return function h(){qr(2e3).then(function(){if(o&&!o.closed)return h();u()})}()})}(o)}).then(function(){if(!w)return qr(h).then(function(){u(f)})})},i.Yb=function(){var o=ie();return!Ss(o)&&!fw(o)},i.Ub=function(){return!1},i.Nb=function(o,u,h,f,g,y,w,C){if(!o)return kt(new D("popup-blocked"));if(w&&!Ss())return this.ma().o(function(O){Vi(o),g(O)}),f(),K();this.a||(this.a=Ib(Tb(this)));var x=this;return this.a.then(function(){var O=x.ma().o(function(et){throw Vi(o),g(et),et});return f(),O}).then(function(){Kd(h),w||ow(Bs(x.s,x.g,x.b,u,h,null,y,x.c,void 0,x.i,C,x.f),o)}).o(function(O){throw"auth/network-request-failed"==O.code&&(x.a=null),O})},i.Ob=function(o,u,h,f){this.a||(this.a=Ib(Tb(this)));var g=this;return this.a.then(function(){Kd(u),ow(Bs(g.s,g.g,g.b,o,u,bs(),h,g.c,void 0,g.i,f,g.f))}).o(function(y){throw"auth/network-request-failed"==y.code&&(g.a=null),y})},i.ma=function(){var o=this;return Cb(this).then(function(){return o.v.sb}).o(function(){throw o.a=null,new D("network-request-failed")})},i.ac=function(){return!0},i.Ea=function(o){this.h.push(o)},i.Ta=function(o){Ke(this.h,function(u){return u==o})},(i=kb.prototype).get=function(o){return K(this.a.getItem(o)).then(function(u){return u&&zr(u)})},i.set=function(o,u){return K(this.a.setItem(o,Is(u)))},i.U=function(o){return K(this.a.removeItem(o))},i.ca=function(){},i.ia=function(){};var Sf,Eb=[];function Ab(o,u,h){Oi(o.a)&&o.b.addEventListener("message",o.f),void 0===o.a[u]&&(o.a[u]=[]),o.a[u].push(h)}function xb(o){this.a=o}function Mb(o){this.c=o,this.b=!1,this.a=[]}function Ob(o,u,h,f){var g,w,C,x,y=h||{},O=null;if(o.b)return kt(Error("connection_unavailable"));var et=f?800:50,yt="undefined"!=typeof MessageChannel?new MessageChannel:null;return new ut(function(mt,Qt){yt?(g=Math.floor(Math.random()*Math.pow(10,20)).toString(),yt.port1.start(),C=setTimeout(function(){Qt(Error("unsupported_event"))},et),o.a.push(O={messageChannel:yt,onMessage:w=function(Rn){Rn.data.eventId===g&&("ack"===Rn.data.status?(clearTimeout(C),x=setTimeout(function(){Qt(Error("timeout"))},3e3)):"done"===Rn.data.status?(clearTimeout(x),void 0!==Rn.data.response?mt(Rn.data.response):Qt(Error("unknown_error"))):(clearTimeout(C),clearTimeout(x),Qt(Error("invalid_response"))))}}),yt.port1.addEventListener("message",w),o.c.postMessage({eventType:u,eventId:g,data:y},[yt.port2])):Qt(Error("connection_unavailable"))}).then(function(mt){return bf(o,O),mt}).o(function(mt){throw bf(o,O),mt})}function bf(o,u){if(u){var h=u.messageChannel;h&&(h.port1.removeEventListener("message",u.onMessage),h.port1.close()),Ke(o.a,function(g){return g==u})}}function Rb(){if(!Cf())throw new D("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=m.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var o=this;Qe()&&self?(this.v=function(){var o=Qe()?self:null;if(At(Eb,function(h){h.b==o&&(u=h)}),!u){var u=new Db(o);Eb.push(u)}return u}(),Ab(this.v,"keyChanged",function(u,h){return Fb(o).then(function(f){return 0<f.length&&At(o.a,function(g){g(f)}),{keyProcessed:En(f,h.key)}})}),Ab(this.v,"ping",function(){return K(["keyChanged"])})):function(){var o=m.navigator;return o&&o.serviceWorker?K().then(function(){return o.serviceWorker.ready}).then(function(u){return u.active||null}).o(function(){return null}):K(null)}().then(function(u){(o.h=u)&&(o.g=new Mb(new xb(u)),Ob(o.g,"ping",null,!0).then(function(h){h[0].fulfilled&&En(h[0].value,"keyChanged")&&(o.s=!0)}).o(function(){}))})}function Nb(o){return new ut(function(u,h){var f=o.m.open("firebaseLocalStorageDb",1);f.onerror=function(g){try{g.preventDefault()}catch(y){}h(Error(g.target.error))},f.onupgradeneeded=function(g){g=g.target.result;try{g.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(y){h(y)}},f.onsuccess=function(g){(g=g.target.result).objectStoreNames.contains("firebaseLocalStorage")?u(g):function(o){return new ut(function(u,h){var f=o.m.deleteDatabase("firebaseLocalStorageDb");f.onsuccess=function(){u()},f.onerror=function(g){h(Error(g.target.error))}})}(o).then(function(){return Nb(o)}).then(function(y){u(y)}).o(function(y){h(y)})}})}function If(o){return o.i||(o.i=Nb(o)),o.i}function nc(o,u){var f=0;return new ut(function h(g,y){If(o).then(u).then(g).o(function(w){if(!(3<++f))return If(o).then(function(C){return C.close(),o.i=void 0,h(g,y)}).o(function(C){y(C)});y(w)})})}function Cf(){try{return!!m.indexedDB}catch(o){return!1}}function qs(o){return o.objectStore("firebaseLocalStorage")}function Us(o,u){return o.transaction(["firebaseLocalStorage"],u?"readwrite":"readonly")}function Qr(o){return new ut(function(u,h){o.onsuccess=function(f){f&&f.target?u(f.target.result):u()},o.onerror=function(f){h(f.target.error)}})}function Pb(o,u){return o.g&&o.h&&function(){var o=m.navigator;return o&&o.serviceWorker&&o.serviceWorker.controller||null}()===o.h?Ob(o.g,"keyChanged",{key:u},o.s).then(function(){}).o(function(){}):K()}function Fb(o){return If(o).then(function(u){var h=qs(Us(u,!1));return h.getAll?Qr(h.getAll()):new ut(function(f,g){var y=[],w=h.openCursor();w.onsuccess=function(C){(C=C.target.result)?(y.push(C.value),C.continue()):f(y)},w.onerror=function(C){g(C.target.error)}})}).then(function(u){var h={},f=[];if(0==o.b){for(f=0;f<u.length;f++)h[u[f].fbase_key]=u[f].value;f=sw(o.c,h),o.c=h}return f})}function Lb(o){o.l&&o.l.cancel("STOP_EVENT"),o.f&&(clearTimeout(o.f),o.f=null)}function Vb(o){var u=this,h=null;this.a=[],this.type="indexedDB",this.c=o,this.b=K().then(function(){if(Cf()){var f=qi(),g="__sak"+f;return Sf||(Sf=new Rb),(h=Sf).set(g,f).then(function(){return h.get(g)}).then(function(y){if(y!==f)throw Error("indexedDB not supported!");return h.U(g)}).then(function(){return h}).o(function(){return u.c})}return u.c}).then(function(f){return u.type=f.type,f.ca(function(g){At(u.a,function(y){y(g)})}),f})}function js(){this.a={},this.type="inMemory"}function ic(){if(!function(){var o="Node"==ln();if(!(o=Bb()||o&&it.Z.INTERNAL.node&&it.Z.INTERNAL.node.localStorage))return!1;try{return o.setItem("__sak","1"),o.removeItem("__sak"),!0}catch(u){return!1}}())throw"Node"==ln()?new D("internal-error","The LocalStorage compatibility library was not found."):new D("web-storage-unsupported");this.a=Bb()||it.Z.INTERNAL.node.localStorage,this.type="localStorage"}function Bb(){try{var o=m.localStorage,u=qi();return o&&(o.setItem(u,"1"),o.removeItem(u)),o}catch(h){return null}}function Tf(){this.type="nullStorage"}function kf(){if(!function(){var o="Node"==ln();if(!(o=qb()||o&&it.Z.INTERNAL.node&&it.Z.INTERNAL.node.sessionStorage))return!1;try{return o.setItem("__sak","1"),o.removeItem("__sak"),!0}catch(u){return!1}}())throw"Node"==ln()?new D("internal-error","The SessionStorage compatibility library was not found."):new D("web-storage-unsupported");this.a=qb()||it.Z.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function qb(){try{var o=m.sessionStorage,u=qi();return o&&(o.setItem(u,"1"),o.removeItem(u)),o}catch(h){return null}}function JM(){var o={};o.Browser=QM,o.Node=WM,o.ReactNative=XM,o.Worker=$M,this.a=o[ln()]}Db.prototype.c=function(o){var u=o.data.eventType,h=o.data.eventId,f=this.a[u];if(f&&0<f.length){o.ports[0].postMessage({status:"ack",eventId:h,eventType:u,response:null});var g=[];At(f,function(y){g.push(K().then(function(){return y(o.origin,o.data.data)}))}),x0(g).then(function(y){var w=[];At(y,function(C){w.push({fulfilled:C.Qb,value:C.value,reason:C.reason?C.reason.message:void 0})}),At(w,function(C){for(var x in C)void 0===C[x]&&delete C[x]}),o.ports[0].postMessage({status:"done",eventId:h,eventType:u,response:w})})}},xb.prototype.postMessage=function(o,u){this.a.postMessage(o,u)},Mb.prototype.close=function(){for(;0<this.a.length;)bf(this,this.a[0]);this.b=!0},(i=Rb.prototype).set=function(o,u){var h=this,f=!1;return nc(this,function(g){return Qr((g=qs(Us(g,!0))).get(o))}).then(function(g){return nc(h,function(y){if(y=qs(Us(y,!0)),g)return g.value=u,Qr(y.put(g));h.b++,f=!0;var w={};return w.fbase_key=o,w.value=u,Qr(y.add(w))})}).then(function(){return h.c[o]=u,Pb(h,o)}).oa(function(){f&&h.b--})},i.get=function(o){return nc(this,function(u){return Qr(qs(Us(u,!1)).get(o))}).then(function(u){return u&&u.value})},i.U=function(o){var u=this,h=!1;return nc(this,function(f){return h=!0,u.b++,Qr(qs(Us(f,!0)).delete(o))}).then(function(){return delete u.c[o],Pb(u,o)}).oa(function(){h&&u.b--})},i.ca=function(o){0==this.a.length&&function(o){Lb(o),function u(){o.f=setTimeout(function(){o.l=Fb(o).then(function(h){0<h.length&&At(o.a,function(f){f(h)})}).then(function(){u()}).o(function(h){"STOP_EVENT"!=h.message&&u()})},800)}()}(this),this.a.push(o)},i.ia=function(o){Ke(this.a,function(u){return u==o}),0==this.a.length&&Lb(this)},(i=Vb.prototype).get=function(o){return this.b.then(function(u){return u.get(o)})},i.set=function(o,u){return this.b.then(function(h){return h.set(o,u)})},i.U=function(o){return this.b.then(function(u){return u.U(o)})},i.ca=function(o){this.a.push(o)},i.ia=function(o){Ke(this.a,function(u){return u==o})},(i=js.prototype).get=function(o){return K(this.a[o])},i.set=function(o,u){return this.a[o]=u,K()},i.U=function(o){return delete this.a[o],K()},i.ca=function(){},i.ia=function(){},(i=ic.prototype).get=function(o){var u=this;return K().then(function(){return zr(u.a.getItem(o))})},i.set=function(o,u){var h=this;return K().then(function(){var f=Is(u);null===f?h.U(o):h.a.setItem(o,f)})},i.U=function(o){var u=this;return K().then(function(){u.a.removeItem(o)})},i.ca=function(o){m.window&&Ue(m.window,"storage",o)},i.ia=function(o){m.window&&Pe(m.window,"storage",o)},(i=Tf.prototype).get=function(){return K(null)},i.set=function(){return K()},i.U=function(){return K()},i.ca=function(){},i.ia=function(){},(i=kf.prototype).get=function(o){var u=this;return K().then(function(){return zr(u.a.getItem(o))})},i.set=function(o,u){var h=this;return K().then(function(){var f=Is(u);null===f?h.U(o):h.a.setItem(o,f)})},i.U=function(o){var u=this;return K().then(function(){u.a.removeItem(o)})},i.ca=function(){},i.ia=function(){};var Df,Ef,QM={F:ic,cb:kf},WM={F:ic,cb:kf},XM={F:kb,cb:Tf},$M={F:ic,cb:Tf},Wr={rd:"local",NONE:"none",td:"session"};function Ub(){var o=!(fw(ie())||!Cd()),u=Ss(),h=kd();this.m=o,this.h=u,this.l=h,this.a={},Df||(Df=new JM),o=Df;try{this.g=!Sd()&&mw()||!m.indexedDB?new o.a.F:new Vb(Qe()?new js:new o.a.F)}catch(f){this.g=new js,this.h=!0}try{this.i=new o.a.cb}catch(f){this.i=new js}this.v=new js,this.f=L(this.Zb,this),this.b={}}function Ys(){return Ef||(Ef=new Ub),Ef}function Ki(o,u){switch(u){case"session":return o.i;case"none":return o.v;default:return o.g}}function Xr(o,u){return"firebase:"+o.name+(u?":"+u:"")}function $r(o,u,h){return h=Xr(u,h),"local"==u.F&&(o.b[h]=null),Ki(o,u.F).U(h)}function Af(o){o.c&&(clearInterval(o.c),o.c=null)}function iO(o){this.a=o,this.b=Ys()}(i=Ub.prototype).get=function(o,u){return Ki(this,o.F).get(Xr(o,u))},i.set=function(o,u,h){var f=Xr(o,h),g=this,y=Ki(this,o.F);return y.set(f,u).then(function(){return y.get(f)}).then(function(w){"local"==o.F&&(g.b[f]=w)})},i.addListener=function(o,u,h){o=Xr(o,u),this.l&&(this.b[o]=m.localStorage.getItem(o)),Oi(this.a)&&(Ki(this,"local").ca(this.f),this.h||(Sd()||!mw())&&m.indexedDB||!this.l||function(o){Af(o),o.c=setInterval(function(){for(var u in o.a){var h=m.localStorage.getItem(u),f=o.b[u];h!=f&&(o.b[u]=h,h=new Pi({type:"storage",key:u,target:window,oldValue:f,newValue:h,a:!0}),o.Zb(h))}},1e3)}(this)),this.a[o]||(this.a[o]=[]),this.a[o].push(h)},i.removeListener=function(o,u,h){o=Xr(o,u),this.a[o]&&(Ke(this.a[o],function(f){return f==h}),0==this.a[o].length&&delete this.a[o]),Oi(this.a)&&(Ki(this,"local").ia(this.f),Af(this))},i.Zb=function(o){if(o&&o.g){var u=o.a.key;if(null==u)for(var h in this.a){var f=this.b[h];void 0===f&&(f=null);var g=m.localStorage.getItem(h);g!==f&&(this.b[h]=g,this.nb(h))}else if(0==u.indexOf("firebase:")&&this.a[u]){if(void 0!==o.a.a?Ki(this,"local").ia(this.f):Af(this),this.m)if(h=m.localStorage.getItem(u),(f=o.a.newValue)!==h)null!==f?m.localStorage.setItem(u,f):m.localStorage.removeItem(u);else if(this.b[u]===f&&void 0===o.a.a)return;var y=this;h=function(){(void 0!==o.a.a||y.b[u]!==m.localStorage.getItem(u))&&(y.b[u]=m.localStorage.getItem(u),y.nb(u))},Je&&Xn&&10==Xn&&m.localStorage.getItem(u)!==o.a.newValue&&o.a.newValue!==o.a.oldValue?setTimeout(h,10):h()}}else At(o,L(this.nb,this))},i.nb=function(o){this.a[o]&&At(this.a[o],function(u){u()})};var oc,xf={name:"authEvent",F:"local"};function oO(){this.a=Ys()}function rc(o,u){this.b=jb,this.f=m.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=o,this.h=u,this.l=m.Int32Array?new Int32Array(64):Array(64),void 0===oc&&(oc=m.Int32Array?new Int32Array(Hb):Hb),this.reset()}tt(rc,function(){this.b=-1});for(var jb=64,aO=jb-1,Yb=[],Mf=0;Mf<aO;Mf++)Yb[Mf]=0;var Gb=Kh(128,Yb);function Of(o){for(var u=o.f,h=o.l,f=0,g=0;g<u.length;)h[f++]=u[g]<<24|u[g+1]<<16|u[g+2]<<8|u[g+3],g=4*f;for(u=16;64>u;u++){var y=(0|h[u-16])+(((g=0|h[u-15])>>>7|g<<25)^(g>>>18|g<<14)^g>>>3)|0,w=(0|h[u-7])+(((f=0|h[u-2])>>>17|f<<15)^(f>>>19|f<<13)^f>>>10)|0;h[u]=y+w|0}f=0|o.a[0],g=0|o.a[1];var C=0|o.a[2],x=0|o.a[3],O=0|o.a[4],et=0|o.a[5],yt=0|o.a[6];for(y=0|o.a[7],u=0;64>u;u++){var mt=((f>>>2|f<<30)^(f>>>13|f<<19)^(f>>>22|f<<10))+(f&g^f&C^g&C)|0;w=(y=y+((O>>>6|O<<26)^(O>>>11|O<<21)^(O>>>25|O<<7))|0)+((w=(w=O&et^~O&yt)+(0|oc[u])|0)+(0|h[u])|0)|0,y=yt,yt=et,et=O,O=x+w|0,x=C,C=g,g=f,f=w+mt|0}o.a[0]=o.a[0]+f|0,o.a[1]=o.a[1]+g|0,o.a[2]=o.a[2]+C|0,o.a[3]=o.a[3]+x|0,o.a[4]=o.a[4]+O|0,o.a[5]=o.a[5]+et|0,o.a[6]=o.a[6]+yt|0,o.a[7]=o.a[7]+y|0}function Rf(o,u,h){void 0===h&&(h=u.length);var f=0,g=o.c;if("string"==typeof u)for(;f<h;)o.f[g++]=u.charCodeAt(f++),g==o.b&&(Of(o),g=0);else{if(!T(u))throw Error("message must be string or array");for(;f<h;){var y=u[f++];if(!("number"==typeof y&&0<=y&&255>=y&&y==(0|y)))throw Error("message must be a byte array");o.f[g++]=y,g==o.b&&(Of(o),g=0)}}o.c=g,o.g+=h}rc.prototype.reset=function(){this.g=this.c=0,this.a=m.Int32Array?new Int32Array(this.h):Mi(this.h)};var Hb=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function zb(){rc.call(this,8,uO)}tt(zb,rc);var uO=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function Zb(o,u,h,f,g,y){this.v=o,this.i=u,this.l=h,this.m=f||null,this.u=g||null,this.s=y,this.h=u+":"+h,this.C=new oO,this.g=new iO(this.h),this.f=null,this.b=[],this.a=this.c=null}function sc(o){return new D("invalid-cordova-configuration",o)}function Kb(o,u){for(var h=0;h<o.b.length;h++)try{o.b[h](u)}catch(f){}}function Jb(o){return o.f||(o.f=o.ma().then(function(){return new ut(function(u){o.Ea(function h(f){return u(f),o.Ta(h),!1}),function(o){function u(w){f=!0,g&&g.cancel(),Nf(o).then(function(C){var x=h;if(C&&w&&w.url){var O=null;-1!=(x=qw(w.url)).indexOf("/__/auth/callback")&&(O=(O="object"==typeof(O=zr(je(O=Te(x),"firebaseError")||null))?Z_(O):null)?new We(C.c,C.b,null,null,O,null,C.T()):new We(C.c,C.b,x,C.f,null,null,C.T())),x=O||h}Kb(o,x)})}var h=new We("unknown",null,null,null,new D("no-auth-event")),f=!1,g=qr(500).then(function(){return Nf(o).then(function(){f||Kb(o,h)})}),y=m.handleOpenURL;m.handleOpenURL=function(w){if(0==w.toLowerCase().indexOf(Dt("BuildInfo.packageName",m).toLowerCase()+"://")&&u({url:w}),"function"==typeof y)try{y(w)}catch(C){console.error(C)}},Jd||(Jd=new Ex),function(o){var u=Jd;u.a.push(o),u.b||(u.b=function(h){for(var f=0;f<u.a.length;f++)u.a[f](h)},"function"==typeof(o=Dt("universalLinks.subscribe",m))&&o(null,u.b))}(u)}(o)})})),o.f}function Nf(o){var u=null;return function(o){return o.b.get(xf,o.a).then(function(u){return Kw(u)})}(o.g).then(function(h){return u=h,$r((h=o.g).b,xf,h.a)}).then(function(){return u})}function fO(o){this.a=o,this.b=Ys()}(i=Zb.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=(Id(void 0)?Mu().then(function(){return new ut(function(o,u){var h=m.document,f=setTimeout(function(){u(Error("Cordova framework is not ready."))},1e3);h.addEventListener("deviceready",function(){clearTimeout(f),o()},!1)})}):kt(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof Dt("universalLinks.subscribe",m))throw sc("cordova-universal-links-plugin-fix is not installed");if(void 0===Dt("BuildInfo.packageName",m))throw sc("cordova-plugin-buildinfo is not installed");if("function"!=typeof Dt("cordova.plugins.browsertab.openUrl",m))throw sc("cordova-plugin-browsertab is not installed");if("function"!=typeof Dt("cordova.InAppBrowser.open",m))throw sc("cordova-plugin-inappbrowser is not installed")},function(){throw new D("cordova-not-ready")})},i.Pb=function(o,u){return u(new D("operation-not-supported-in-this-environment")),K()},i.Nb=function(){return kt(new D("operation-not-supported-in-this-environment"))},i.ac=function(){return!1},i.Yb=function(){return!0},i.Ub=function(){return!0},i.Ob=function(o,u,h,f){if(this.c)return kt(new D("redirect-operation-pending"));var g=this,y=m.document,w=null,C=null,x=null,O=null;return this.c=K().then(function(){return Kd(u),Jb(g)}).then(function(){return function(o,u,h,f,g){var y=function(){for(var o=20,u=[];0<o;)u.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),o--;return u.join("")}(),w=new We(u,f,null,y,new D("no-auth-event"),null,g),C=Dt("BuildInfo.packageName",m);if("string"!=typeof C)throw new D("invalid-cordova-configuration");var x=Dt("BuildInfo.displayName",m),O={};if(ie().toLowerCase().match(/iphone|ipad|ipod/))O.ibi=C;else{if(!ie().toLowerCase().match(/android/))return kt(new D("operation-not-supported-in-this-environment"));O.apn=C}x&&(O.appDisplayName=x),y=function(o){var u=new zb;Rf(u,o),o=[];var h=8*u.g;Rf(u,Gb,56>u.c?56-u.c:u.b-(u.c-56));for(var f=63;56<=f;f--)u.f[f]=255&h,h/=256;for(Of(u),f=h=0;f<u.i;f++)for(var g=24;0<=g;g-=8)o[h++]=u.a[f]>>g&255;return function(o){return gu(o,function(u){return 1<(u=u.toString(16)).length?u:"0"+u}).join("")}(o)}(y),O.sessionId=y;var et=Bs(o.v,o.i,o.l,u,h,null,f,o.m,O,o.u,g,o.s);return o.ma().then(function(){var yt=o.h;return o.C.a.set(xf,w.w(),yt)}).then(function(){var yt=Dt("cordova.plugins.browsertab.isAvailable",m);if("function"!=typeof yt)throw new D("invalid-cordova-configuration");var mt=null;yt(function(Qt){if(Qt){if("function"!=typeof(mt=Dt("cordova.plugins.browsertab.openUrl",m)))throw new D("invalid-cordova-configuration");mt(et)}else{if("function"!=typeof(mt=Dt("cordova.InAppBrowser.open",m)))throw new D("invalid-cordova-configuration");Qt=ie(),o.a=mt(et,Qt.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||Qt.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}(g,o,u,h,f)}).then(function(){return new ut(function(et,yt){C=function(){var mt=Dt("cordova.plugins.browsertab.close",m);return et(),"function"==typeof mt&&mt(),g.a&&"function"==typeof g.a.close&&(g.a.close(),g.a=null),!1},g.Ea(C),O=function(){Dd()&&x()},y.addEventListener("resume",x=function(){w||(w=qr(2e3).then(function(){yt(new D("redirect-cancelled-by-user"))}))},!1),ie().toLowerCase().match(/android/)||y.addEventListener("visibilitychange",O,!1)}).o(function(et){return Nf(g).then(function(){throw et})})}).oa(function(){x&&y.removeEventListener("resume",x,!1),O&&y.removeEventListener("visibilitychange",O,!1),w&&w.cancel(),C&&g.Ta(C),g.c=null})},i.Ea=function(o){this.b.push(o),Jb(this).o(function(u){"auth/invalid-cordova-configuration"===u.code&&(u=new We("unknown",null,null,null,new D("no-auth-event")),o(u))})},i.Ta=function(o){Ke(this.b,function(u){return u==o})};var Pf={name:"pendingRedirect",F:"session"};function Ff(o){return $r(o.b,Pf,o.a)}function ac(o,u,h,f){this.i={},this.u=0,this.D=o,this.v=u,this.m=h,this.J=f,this.h=[],this.f=!1,this.l=L(this.s,this),this.b=new cc,this.C=new oS,this.g=new fO(nS(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=Qb(this.D,this.v,this.m,ds,this.J)}function Qb(o,u,h,f,g){var y=it.Z.SDK_VERSION||null;return Id()?new Zb(o,u,h,y,f,g):new Sb(o,u,h,y,f,g)}function Wb(o){o.f||(o.f=!0,o.a.Ea(o.l));var u=o.a;return o.a.ma().o(function(h){throw o.a==u&&o.reset(),h})}function Xb(o){o.a.Yb()&&Wb(o).o(function(u){var h=new We("unknown",null,null,null,new D("operation-not-supported-in-this-environment"));Vf(u)&&o.s(h)}),o.a.Ub()||iS(o.b)}function uc(o,u){En(o.h,u)||o.h.push(u),o.f||function(o){return o.b.get(Pf,o.a).then(function(u){return"pending"==u})}(o.g).then(function(h){h?Ff(o.g).then(function(){Wb(o).o(function(f){var g=new We("unknown",null,null,null,new D("operation-not-supported-in-this-environment"));Vf(f)&&o.s(g)})}):Xb(o)}).o(function(){Xb(o)})}function Lf(o,u){Ke(o.h,function(h){return h==u})}ac.prototype.reset=function(){this.f=!1,this.a.Ta(this.l),this.a=Qb(this.D,this.v,this.m,null,this.J),this.i={}},ac.prototype.s=function(o){if(!o)throw new D("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),o&&o.getUid()&&this.i.hasOwnProperty(o.getUid()))return!1;for(var u=!1,h=0;h<this.h.length;h++){var f=this.h[h];if(f.Gb(o.c,o.b)){(u=this.c[o.c])&&(u.h(o,f),o&&(o.f||o.b)&&(this.i[o.getUid()]=!0,this.u=Date.now())),u=!0;break}}return iS(this.b),u};var gO=new ei(2e3,1e4),vO=new ei(3e4,6e4);function $b(o,u,h,f,g,y,w){return o.a.Nb(u,h,f,function(){o.f||(o.f=!0,o.a.Ea(o.l))},function(){o.reset()},g,y,w)}function Vf(o){return!(!o||"auth/cordova-not-ready"!=o.code)}function tS(o,u,h,f,g){var y;return function(o){return o.b.set(Pf,"pending",o.a)}(o.g).then(function(){return o.a.Ob(u,h,f,g).o(function(w){if(Vf(w))throw new D("operation-not-supported-in-this-environment");return y=w,Ff(o.g).then(function(){throw y})}).then(function(){return o.a.ac()?new ut(function(){}):Ff(o.g).then(function(){return o.ra()}).then(function(){}).o(function(){})})})}function eS(o,u,h,f,g){return o.a.Pb(f,function(y){u.na(h,null,y,g)},gO.get())}ac.prototype.ra=function(){return this.b.ra()};var Bf={};function nS(o,u,h){return o=o+":"+u,h&&(o=o+":"+h.url),o}function qf(o,u,h,f){var g=nS(u,h,f);return Bf[g]||(Bf[g]=new ac(o,u,h,f)),Bf[g]}function cc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function iS(o){o.g||(o.g=!0,Ji(o,!1,null,null))}function lc(o){o.g&&!o.i&&Ji(o,!1,null,null)}function rS(o,u){if(o.b=function(){return K(u)},o.f.length)for(var h=0;h<o.f.length;h++)o.f[h](u)}function Ji(o,u,h,f){u?f?function(o,u){if(o.b=function(){return kt(u)},o.c.length)for(var h=0;h<o.c.length;h++)o.c[h](u)}(o,f):rS(o,h):rS(o,{user:null}),o.f=[],o.c=[]}function oS(){}function sS(){this.jb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.jb},set:function(o){this.jb=o},enumerable:!1})}function Uf(o,u){this.a=u,j(this,"verificationId",o)}function jf(o,u,h,f){return new Mn(o).gb(u,h).then(function(g){return new Uf(g,f)})}function SO(o){var u=Ow(o);if(!(u&&u.exp&&u.auth_time&&u.iat))throw new D("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");ge(this,{token:o,expirationTime:Cs(1e3*u.exp),authTime:Cs(1e3*u.auth_time),issuedAtTime:Cs(1e3*u.iat),signInProvider:u.firebase&&u.firebase.sign_in_provider?u.firebase.sign_in_provider:null,signInSecondFactor:u.firebase&&u.firebase.sign_in_second_factor?u.firebase.sign_in_second_factor:null,claims:u})}function Yf(o,u,h){var f=u&&u[uS];if(!f)throw new D("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=o,this.f=Wn(u),this.g=h,this.c=new Bu(null,f),this.b=[];var g=this;At(u[aS]||[],function(y){(y=Rd(y))&&g.b.push(y)}),j(this,"auth",this.a),j(this,"session",this.c),j(this,"hints",this.b)}cc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},cc.prototype.h=function(o,u){if(o){this.reset(),this.g=!0;var h=o.c,f=o.b,g=o.a&&"auth/web-storage-unsupported"==o.a.code,y=o.a&&"auth/operation-not-supported-in-this-environment"==o.a.code;this.i=!(!g&&!y),"unknown"!=h||g||y?o.a?(Ji(this,!0,null,o.a),K()):u.Fa(h,f)?function(o,u,h){h=h.Fa(u.c,u.b);var f=u.g,g=u.f,y=u.i,w=u.T(),C=!!u.c.match(/Redirect$/);h(f,g,w,y).then(function(x){Ji(o,C,x,null)}).o(function(x){Ji(o,C,null,x)})}(this,o,u):kt(new D("invalid-auth-event")):(Ji(this,!1,null,null),K())}else kt(new D("invalid-auth-event"))},cc.prototype.ra=function(){var o=this;return new ut(function(u,h){o.b?o.b().then(u,h):(o.f.push(u),o.c.push(h),function(o){var u=new D("timeout");o.a&&o.a.cancel(),o.a=qr(vO.get()).then(function(){o.b||(o.g=!0,Ji(o,!0,null,u))})}(o))})},oS.prototype.h=function(o,u){if(o){var h=o.c,f=o.b;o.a?(u.na(o.c,null,o.a,o.b),K()):u.Fa(h,f)?function(o,u){var h=o.b,f=o.c;u.Fa(f,h)(o.g,o.f,o.T(),o.i).then(function(g){u.na(f,g,null,h)}).o(function(g){u.na(f,null,g,h)})}(o,u):kt(new D("invalid-auth-event"))}else kt(new D("invalid-auth-event"))},Uf.prototype.confirm=function(o){return o=Zw(this.verificationId,o),this.a(o)};var aS="mfaInfo",uS="mfaPendingCredential";function Gf(o,u,h,f){D.call(this,"multi-factor-auth-required",f,u),this.b=new Yf(o,u,h),j(this,"resolver",this.b)}function cS(o,u,h){if(o&&M(o.serverResponse)&&"auth/multi-factor-auth-required"===o.code)try{return new Gf(u,o.serverResponse,h,o.message)}catch(f){}return null}function lS(){}function Hf(o){j(this,"factorId",o.fa),this.a=o}function hS(o){if(Hf.call(this,o),this.a.fa!=Mn.PROVIDER_ID)throw new D("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function to(o,u){for(var h in Ce.call(this,o),u)this[h]=u[h]}function zf(o,u){this.a=o,this.b=[],this.c=L(this.yc,this),Ue(this.a,"userReloaded",this.c);var h=[];u&&u.multiFactor&&u.multiFactor.enrolledFactors&&At(u.multiFactor.enrolledFactors,function(f){var g=null,y={};if(f){f.uid&&(y[Pd]=f.uid),f.displayName&&(y[vw]=f.displayName),f.enrollmentTime&&(y[Nd]=new Date(f.enrollmentTime).toISOString()),f.phoneNumber&&(y[Fd]=f.phoneNumber);try{g=new Ts(y)}catch(w){}f=g}else f=null;f&&h.push(f)}),hc(this,h)}function hc(o,u){o.b=u,j(o,"enrolledFactors",u)}function Zf(o,u,h){if(this.h=o,this.i=u,this.g=h,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function Kf(o,u){o.stop(),o.b=qr(function(o,u){return u?(o.a=o.c,o.g()):(u=o.a,o.a*=2,o.a>o.f&&(o.a=o.f),u)}(o,u)).then(function(){return function(){var o=m.document,u=null;return Dd()||!o?K():new ut(function(h){u=function(){Dd()&&(o.removeEventListener("visibilitychange",u,!1),h())},o.addEventListener("visibilitychange",u,!1)}).o(function(h){throw o.removeEventListener("visibilitychange",u,!1),h})}()}).then(function(){return o.h()}).then(function(){Kf(o,!0)}).o(function(h){o.i(h)&&Kf(o,!1)})}function Jf(o){this.f=o,this.b=this.a=null,this.c=Date.now()}function dS(o,u){void 0===u&&(u=o.b?(u=o.b).a-u.g:0),o.c=Date.now()+1e3*u}function fS(o,u){o.b=Lu(u[$e]||""),o.a=u.refreshToken,dS(o,void 0!==(u=u.expiresIn)?Number(u):void 0)}function dc(o,u){this.a=o||null,this.b=u||null,ge(this,{lastSignInTime:Cs(u||null),creationTime:Cs(o||null)})}function xO(o,u,h,f,g,y){ge(this,{uid:o,displayName:f||null,photoURL:g||null,email:h||null,phoneNumber:y||null,providerId:u})}function Le(o,u,h){this.N=[],this.l=o.apiKey,this.m=o.appName,this.s=o.authDomain||null;var f=it.Z.SDK_VERSION?Gr(it.Z.SDK_VERSION):null;this.a=new Xe(this.l,hs(ds),f),(this.u=o.emulatorConfig||null)&&tc(this.a,this.u),this.h=new Jf(this.a),np(this,u[$e]),fS(this.h,u),j(this,"refreshToken",this.h.a),mS(this,h||{}),me.call(this),this.P=!1,this.s&&Bi()&&(this.b=qf(this.s,this.l,this.m,this.u)),this.W=[],this.i=null,this.D=function(o){return new Zf(function(){return o.I(!0)},function(u){return!(!u||"auth/network-request-failed"!=u.code)},function(){var u=o.h.c-Date.now()-3e5;return 0<u?u:0})}(this),this.ba=L(this.ib,this);var g=this;this.za=null,this.Pa=function(y){g.xa(y.h)},this.qa=null,this.Ba=function(y){Qf(g,y.c)},this.$=null,this.aa=[],this.Oa=function(y){Gs(g,y.f)},this.ja=null,this.S=new zf(this,h),j(this,"multiFactor",this.S)}function Qf(o,u){o.u=u,tc(o.a,u),o.b&&(u=o.b,o.b=qf(o.s,o.l,o.m,o.u),o.P&&(Lf(u,o),uc(o.b,o)))}function Wf(o,u){o.qa&&Pe(o.qa,"languageCodeChanged",o.Pa),(o.qa=u)&&Ue(u,"languageCodeChanged",o.Pa)}function Xf(o,u){o.$&&Pe(o.$,"emulatorConfigChanged",o.Ba),(o.$=u)&&Ue(u,"emulatorConfigChanged",o.Ba)}function Gs(o,u){o.aa=u,lb(o.a,it.Z.SDK_VERSION?Gr(it.Z.SDK_VERSION,o.aa):null)}function $f(o,u){o.ja&&Pe(o.ja,"frameworkChanged",o.Oa),(o.ja=u)&&Ue(u,"frameworkChanged",o.Oa)}function tp(o){try{return it.Z.app(o.m).auth()}catch(u){throw new D("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+o.m+"'!")}}function pS(o){o.J||o.D.b||(o.D.start(),Pe(o,"tokenChanged",o.ba),Ue(o,"tokenChanged",o.ba))}function ep(o){Pe(o,"tokenChanged",o.ba),o.D.stop()}function np(o,u){o.Aa=u,j(o,"_lat",u)}function Qi(o){for(var u=[],h=0;h<o.W.length;h++)u.push(o.W[h](o));return x0(u).then(function(){return o})}function Hs(o){o.b&&!o.P&&(o.P=!0,uc(o.b,o))}function mS(o,u){ge(o,{uid:u.uid,displayName:u.displayName||null,photoURL:u.photoURL||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,isAnonymous:u.isAnonymous||!1,tenantId:u.tenantId||null,metadata:new dc(u.createdAt,u.lastLoginAt),providerData:[]}),o.a.b=o.tenantId}function gS(){}function ip(o){return K().then(function(){if(o.J)throw new D("app-deleted")})}function rp(o){return gu(o.providerData,function(u){return u.providerId})}function op(o,u){u&&(vS(o,u.providerId),o.providerData.push(u))}function vS(o,u){Ke(o.providerData,function(h){return h.providerId==u})}function ri(o,u,h){("uid"!=u||h)&&o.hasOwnProperty(u)&&j(o,u,h)}function fc(o,u){o!=u&&(ge(o,{uid:u.uid,displayName:u.displayName,photoURL:u.photoURL,email:u.email,emailVerified:u.emailVerified,phoneNumber:u.phoneNumber,isAnonymous:u.isAnonymous,tenantId:u.tenantId,providerData:[]}),j(o,"metadata",u.metadata?function(o){return new dc(o.a,o.b)}(u.metadata):new dc),At(u.providerData,function(h){op(o,h)}),function(o,u){o.b=u.b,o.a=u.a,o.c=u.c}(o.h,u.h),j(o,"refreshToken",o.h.a),hc(o.S,u.S.b))}function sp(o){return o.I().then(function(u){var h=o.isAnonymous;return function(o,u){return ht(o.a,pM,{idToken:u}).then(L(o.Kc,o))}(o,u).then(function(){return h||ri(o,"isAnonymous",!1),u})})}function fn(o,u){u[$e]&&o.Aa!=u[$e]&&(fS(o.h,u),o.dispatchEvent(new to("tokenChanged")),np(o,u[$e]),ri(o,"refreshToken",o.h.a))}function pc(o,u){return sp(o).then(function(){if(En(rp(o),u))return Qi(o).then(function(){throw new D("provider-already-linked")})})}function zs(o,u,h){return hn({user:o,credential:Zd(u),additionalUserInfo:u=Nw(u),operationType:h})}function yS(o,u){return fn(o,u),o.reload().then(function(){return o})}function _S(o,u,h,f,g){if(!Bi())return kt(new D("operation-not-supported-in-this-environment"));if(o.i&&!g)return kt(o.i);var y=Ud(h.providerId),w=qi(o.uid+":::"),C=null;(!Ss()||Cd())&&o.s&&h.isOAuthProvider&&(C=Bs(o.s,o.l,o.m,u,h,null,w,it.Z.SDK_VERSION||null,null,null,o.tenantId,o.u));var x=uw(C,y&&y.va,y&&y.ua);return f=f().then(function(){if(bS(o),!g)return o.I().then(function(){})}).then(function(){return $b(o.b,x,u,h,w,!!C,o.tenantId)}).then(function(){return new ut(function(O,et){o.na(u,null,new D("cancelled-popup-request"),o.g||null),o.f=O,o.C=et,o.g=w,o.c=eS(o.b,o,u,x,w)})}).then(function(O){return x&&Vi(x),O?hn(O):null}).o(function(O){throw x&&Vi(x),O}),Ht(o,f,g)}function wS(o,u,h,f,g){if(!Bi())return kt(new D("operation-not-supported-in-this-environment"));if(o.i&&!g)return kt(o.i);var y=null,w=qi(o.uid+":::");return f=f().then(function(){if(bS(o),!g)return o.I().then(function(){})}).then(function(){return o.ga=w,Qi(o)}).then(function(C){return o.ha&&(C=(C=o.ha).b.set(ap,o.w(),C.a)),C}).then(function(){return tS(o.b,u,h,w,o.tenantId)}).o(function(C){if(y=C,o.ha)return IS(o.ha);throw y}).then(function(){if(y)throw y}),Ht(o,f,g)}function bS(o){if(!o.b||!o.P)throw new D(o.b&&!o.P?"internal-error":"auth-domain-config-required")}function Ht(o,u,h){var f=function(o,u,h){return o.i&&!h?(u.cancel(),kt(o.i)):u.o(function(f){throw!f||"auth/user-disabled"!=f.code&&"auth/user-token-expired"!=f.code||(o.i||o.dispatchEvent(new to("userInvalidated")),o.i=f),f})}(o,u,h);return o.N.push(f),f.oa(function(){vu(o.N,f)}),f.o(function(g){var y=null;throw g&&"auth/multi-factor-auth-required"===g.code&&(y=cS(g.w(),tp(o),L(o.jc,o))),y||g})}function SS(o){if(!o.apiKey)return null;var u={apiKey:o.apiKey,authDomain:o.authDomain,appName:o.appName,emulatorConfig:o.emulatorConfig},h={};if(!o.stsTokenManager||!o.stsTokenManager.accessToken)return null;h[$e]=o.stsTokenManager.accessToken,h.refreshToken=o.stsTokenManager.refreshToken||null;var f=o.stsTokenManager.expirationTime;f&&(h.expiresIn=(f-Date.now())/1e3);var g=new Le(u,h,o);return o.providerData&&At(o.providerData,function(y){y&&op(g,hn(y))}),o.redirectEventId&&(g.ga=o.redirectEventId),g}function VO(o){this.a=o,this.b=Ys()}Yf.prototype.Rc=function(o){var u=this;return o.tb(this.a.a,this.c).then(function(h){var f=Wn(u.f);return delete f[aS],delete f[uS],Se(f,h),u.g(f)})},tt(Gf,D),lS.prototype.tb=function(o,u,h){return u.type==Es?function(o,u,h,f){return h.Ha().then(function(g){return g={idToken:g},void 0!==f&&(g.displayName=f),Se(g,{phoneVerificationInfo:As(o.a)}),ht(u,dM,g)})}(this,o,u,h):function(o,u,h){return h.Ha().then(function(f){return Se(f={mfaPendingCredential:f},{phoneVerificationInfo:As(o.a)}),ht(u,fM,f)})}(this,o,u)},tt(Hf,lS),tt(hS,Hf),tt(to,Ce),(i=zf.prototype).yc=function(o){hc(this,function(o){var u=[];return At(o.mfaInfo||[],function(h){(h=Rd(h))&&u.push(h)}),u}(o.hd))},i.Sb=function(){return this.a.I().then(function(o){return new Bu(o,null)})},i.fc=function(o,u){var h=this,f=this.a.a;return this.Sb().then(function(g){return o.tb(f,g,u)}).then(function(g){return fn(h.a,g),h.a.reload()})},i.bd=function(o){var u=this,h="string"==typeof o?o:o.uid,f=this.a.a;return this.a.I().then(function(g){return ht(f,RM,{idToken:g,mfaEnrollmentId:h})}).then(function(g){var y=nA(u.b,function(w){return w.uid!=h});return hc(u,y),fn(u.a,g),u.a.reload().o(function(w){if("auth/user-token-expired"!=w.code)throw w})})},i.w=function(){return{multiFactor:{enrolledFactors:gu(this.b,function(o){return o.w()})}}},Zf.prototype.start=function(){this.a=this.c,Kf(this,!0)},Zf.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},Jf.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},Jf.prototype.getToken=function(o){return o=!!o,this.b&&!this.a?kt(new D("user-token-expired")):o||!this.b||Date.now()>this.c-3e4?this.a?function(o,u){return function(o,u){return new ut(function(h,f){"refresh_token"==u.grant_type&&u.refresh_token||"authorization_code"==u.grant_type&&u.code?hb(o,o.l+"?key="+encodeURIComponent(o.c),function(g){g?g.error?f(yf(g)):g.access_token&&g.refresh_token?h(g):f(new D("internal-error")):f(new D("network-request-failed"))},"POST",$0(u).toString(),o.g,o.m.get()):f(new D("internal-error"))})}(o.f,u).then(function(h){return o.b=Lu(h.access_token),o.a=h.refresh_token,dS(o,h.expires_in),{accessToken:o.b.toString(),refreshToken:o.a}}).o(function(h){throw"auth/user-token-expired"==h.code&&(o.a=null),h})}(this,{grant_type:"refresh_token",refresh_token:this.a}):K(null):K({accessToken:this.b.toString(),refreshToken:this.a})},dc.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},tt(Le,me),Le.prototype.xa=function(o){this.za=o,cb(this.a,o)},Le.prototype.la=function(){return this.za},Le.prototype.Ga=function(){return Mi(this.aa)},Le.prototype.ib=function(){this.D.b&&(this.D.stop(),this.D.start())},j(Le.prototype,"providerId","firebase"),(i=Le.prototype).reload=function(){var o=this;return Ht(this,ip(this).then(function(){return sp(o).then(function(){return Qi(o)}).then(gS)}))},i.oc=function(o){return this.I(o).then(function(u){return new SO(u)})},i.I=function(o){var u=this;return Ht(this,ip(this).then(function(){return u.h.getToken(o)}).then(function(h){if(!h)throw new D("internal-error");return h.accessToken!=u.Aa&&(np(u,h.accessToken),u.dispatchEvent(new to("tokenChanged"))),ri(u,"refreshToken",h.refreshToken),h.accessToken}))},i.Kc=function(o){if(!(o=o.users)||!o.length)throw new D("internal-error");mS(this,{uid:(o=o[0]).localId,displayName:o.displayName,photoURL:o.photoUrl,email:o.email,emailVerified:!!o.emailVerified,phoneNumber:o.phoneNumber,lastLoginAt:o.lastLoginAt,createdAt:o.createdAt,tenantId:o.tenantId});for(var u=function(o){return(o=o.providerUserInfo)&&o.length?gu(o,function(u){return new xO(u.rawId,u.providerId,u.email,u.displayName,u.photoUrl,u.phoneNumber)}):[]}(o),h=0;h<u.length;h++)op(this,u[h]);ri(this,"isAnonymous",!(this.email&&o.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new to("userReloaded",{hd:o}))},i.Lc=function(o){return Ed("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.ub(o)},i.ub=function(o){var u=this,h=null;return Ht(this,o.c(this.a,this.uid).then(function(f){return fn(u,f),h=zs(u,f,"reauthenticate"),u.i=null,u.reload()}).then(function(){return h}),!0)},i.Cc=function(o){return Ed("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.rb(o)},i.rb=function(o){var u=this,h=null;return Ht(this,pc(this,o.providerId).then(function(){return u.I()}).then(function(f){return o.b(u.a,f)}).then(function(f){return h=zs(u,f,"link"),yS(u,f)}).then(function(){return h}))},i.Dc=function(o,u){var h=this;return Ht(this,pc(this,"phone").then(function(){return jf(tp(h),o,u,L(h.rb,h))}))},i.Mc=function(o,u){var h=this;return Ht(this,K().then(function(){return jf(tp(h),o,u,L(h.ub,h))}),!0)},i.Cb=function(o){var u=this;return Ht(this,this.I().then(function(h){return u.a.Cb(h,o)}).then(function(h){return fn(u,h),u.reload()}))},i.ed=function(o){var u=this;return Ht(this,this.I().then(function(h){return o.b(u.a,h)}).then(function(h){return fn(u,h),u.reload()}))},i.Db=function(o){var u=this;return Ht(this,this.I().then(function(h){return u.a.Db(h,o)}).then(function(h){return fn(u,h),u.reload()}))},i.Eb=function(o){if(void 0===o.displayName&&void 0===o.photoURL)return ip(this);var u=this;return Ht(this,this.I().then(function(h){return u.a.Eb(h,{displayName:o.displayName,photoUrl:o.photoURL})}).then(function(h){return fn(u,h),ri(u,"displayName",h.displayName||null),ri(u,"photoURL",h.photoUrl||null),At(u.providerData,function(f){"password"===f.providerId&&(j(f,"displayName",u.displayName),j(f,"photoURL",u.photoURL))}),Qi(u)}).then(gS))},i.cd=function(o){var u=this;return Ht(this,sp(this).then(function(h){return En(rp(u),o)?function(o,u,h){return ht(o,cM,{idToken:u,deleteProvider:h})}(u.a,h,[o]).then(function(f){var g={};return At(f.providerUserInfo||[],function(y){g[y.providerId]=!0}),At(rp(u),function(y){g[y]||vS(u,y)}),g[Mn.PROVIDER_ID]||j(u,"phoneNumber",null),Qi(u)}):Qi(u).then(function(){throw new D("no-such-provider")})}))},i.delete=function(){var o=this;return Ht(this,this.I().then(function(u){return ht(o.a,uM,{idToken:u})}).then(function(){o.dispatchEvent(new to("userDeleted"))})).then(function(){for(var u=0;u<o.N.length;u++)o.N[u].cancel("app-deleted");Wf(o,null),Xf(o,null),$f(o,null),o.N=[],o.J=!0,ep(o),j(o,"refreshToken",null),o.b&&Lf(o.b,o)})},i.Gb=function(o,u){return!!("linkViaPopup"==o&&(this.g||null)==u&&this.f||"reauthViaPopup"==o&&(this.g||null)==u&&this.f||"linkViaRedirect"==o&&(this.ga||null)==u||"reauthViaRedirect"==o&&(this.ga||null)==u)},i.na=function(o,u,h,f){"linkViaPopup"!=o&&"reauthViaPopup"!=o||f!=(this.g||null)||(h&&this.C?this.C(h):u&&!h&&this.f&&this.f(u),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},i.Fa=function(o,u){return"linkViaPopup"==o&&u==(this.g||null)?L(this.Lb,this):"reauthViaPopup"==o&&u==(this.g||null)?L(this.Mb,this):"linkViaRedirect"==o&&(this.ga||null)==u?L(this.Lb,this):"reauthViaRedirect"==o&&(this.ga||null)==u?L(this.Mb,this):null},i.Ec=function(o){var u=this;return _S(this,"linkViaPopup",o,function(){return pc(u,o.providerId).then(function(){return Qi(u)})},!1)},i.Nc=function(o){return _S(this,"reauthViaPopup",o,function(){return K()},!0)},i.Fc=function(o){var u=this;return wS(this,"linkViaRedirect",o,function(){return pc(u,o.providerId)},!1)},i.Oc=function(o){return wS(this,"reauthViaRedirect",o,function(){return K()},!0)},i.Lb=function(o,u,h,f){var g=this;this.c&&(this.c.cancel(),this.c=null);var y=null;return Ht(this,this.I().then(function(w){return mf(g.a,{requestUri:o,postBody:f,sessionId:u,idToken:w})}).then(function(w){return y=zs(g,w,"link"),yS(g,w)}).then(function(){return y}))},i.Mb=function(o,u,h,f){var g=this;this.c&&(this.c.cancel(),this.c=null);var y=null;return Ht(this,K().then(function(){return Kr(gf(g.a,{requestUri:o,sessionId:u,postBody:f,tenantId:h}),g.uid)}).then(function(C){return y=zs(g,C,"reauthenticate"),fn(g,C),g.i=null,g.reload()}).then(function(){return y}),!0)},i.vb=function(o){var u=this,h=null;return Ht(this,this.I().then(function(f){return h=f,void 0===o||Oi(o)?{}:Pu(new Nu(o))}).then(function(f){return u.a.vb(h,f)}).then(function(f){if(u.email!=f)return u.reload()}).then(function(){}))},i.Fb=function(o,u){var h=this,f=null;return Ht(this,this.I().then(function(g){return f=g,void 0===u||Oi(u)?{}:Pu(new Nu(u))}).then(function(g){return h.a.Fb(f,o,g)}).then(function(g){if(h.email!=g)return h.reload()}).then(function(){}))},i.jc=function(o){var u=null,h=this;return Ht(this,o=Kr(K(o),h.uid).then(function(f){return u=zs(h,f,"reauthenticate"),fn(h,f),h.i=null,h.reload()}).then(function(){return u}),!0)},i.toJSON=function(){return this.w()},i.w=function(){var o={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.h.w(),redirectEventId:this.ga||null};return this.metadata&&Se(o,this.metadata.w()),At(this.providerData,function(u){o.providerData.push(function(o){var h,u={};for(h in o)o.hasOwnProperty(h)&&(u[h]=o[h]);return u}(u))}),Se(o,this.S.w()),o};var ap={name:"redirectUser",F:"session"};function IS(o){return $r(o.b,ap,o.a)}function up(o){this.a=o,this.b=Ys(),this.c=null,this.f=function(o){var u=pn("local"),h=pn("session"),f=pn("none");return function(o,u,h){var f=Xr(u,h),g=Ki(o,u.F);return o.get(u,h).then(function(y){var w=null;try{w=zr(m.localStorage.getItem(f))}catch(C){}if(w&&!y)return m.localStorage.removeItem(f),o.set(u,w,h);w&&y&&"localStorage"!=g.type&&m.localStorage.removeItem(f)})}(o.b,u,o.a).then(function(){return o.b.get(h,o.a)}).then(function(g){return g?h:o.b.get(f,o.a).then(function(y){return y?f:o.b.get(u,o.a).then(function(w){return w?u:o.b.get(lp,o.a).then(function(C){return C?pn(C):u})})})}).then(function(g){return o.c=g,cp(o,g.F)}).o(function(){o.c||(o.c=u)})}(this),this.b.addListener(pn("local"),this.a,L(this.g,this))}function cp(o,u){var f,h=[];for(f in Wr)Wr[f]!==u&&h.push($r(o.b,pn(Wr[f]),o.a));return h.push($r(o.b,lp,o.a)),function(o){return new ut(function(u,h){var f=o.length,g=[];if(f)for(var y=function(O,et){f--,g[O]=et,0==f&&u(g)},w=function(O){h(O)},C=0;C<o.length;C++)A0(o[C],Tt(y,C),w);else u(g)})}(h)}up.prototype.g=function(){var o=this,u=pn("local");eo(this,function(){return K().then(function(){return o.c&&"local"!=o.c.F?o.b.get(u,o.a):null}).then(function(h){if(h)return cp(o,"local").then(function(){o.c=u})})})};var lp={name:"persistence",F:"session"};function pn(o){return{name:"authUser",F:o}}function CS(o,u){return eo(o,function(){return o.b.set(o.c,u.w(),o.a)})}function TS(o){return eo(o,function(){return $r(o.b,o.c,o.a)})}function kS(o,u,h){return eo(o,function(){return o.b.get(o.c,o.a).then(function(f){return f&&u&&(f.authDomain=u),f&&h&&(f.emulatorConfig=h),SS(f||{})})})}function eo(o,u){return o.f=o.f.then(u,u),o.f}function tn(o){if(this.l=!1,j(this,"settings",new sS),j(this,"app",o),!_t(this).options||!_t(this).options.apiKey)throw new D("invalid-api-key");o=it.Z.SDK_VERSION?Gr(it.Z.SDK_VERSION):null,this.a=new Xe(_t(this).options&&_t(this).options.apiKey,hs(ds),o),this.P=[],this.s=[],this.N=[],this.Pa=it.Z.INTERNAL.createSubscribe(L(this.zc,this)),this.W=void 0,this.ib=it.Z.INTERNAL.createSubscribe(L(this.Ac,this)),no(this,null),this.i=new up(_t(this).options.apiKey+":"+_t(this).name),this.D=new VO(_t(this).options.apiKey+":"+_t(this).name),this.$=Ot(this,function(o){var u=_t(o).options.authDomain,h=function(o){var u=function(o,u){return o.b.get(ap,o.a).then(function(h){return h&&u&&(h.authDomain=u),SS(h||{})})}(o.D,_t(o).options.authDomain).then(function(h){return(o.m=h)&&(h.ha=o.D),IS(o.D)});return Ot(o,u)}(o).then(function(){return kS(o.i,u,o.R)}).then(function(f){return f?(f.ha=o.D,o.m&&(o.m.ga||null)==(f.ga||null)?f:f.reload().then(function(){return CS(o.i,f).then(function(){return f})}).o(function(g){return"auth/network-request-failed"==g.code?f:TS(o.i)})):null}).then(function(f){no(o,f||null)});return Ot(o,h)}(this)),this.h=Ot(this,function(o){return o.$.then(function(){return xS(o)}).o(function(){}).then(function(){if(!o.l)return o.ja()}).o(function(){}).then(function(){if(!o.l){o.ba=!0;var u=o.i;u.b.addListener(pn("local"),u.a,o.ja)}})}(this)),this.ba=!1,this.ja=L(this.Zc,this),this.Ba=L(this.da,this),this.qa=L(this.mc,this),this.za=L(this.wc,this),this.Aa=L(this.xc,this),this.b=null,function(o){var u=_t(o).options.authDomain,h=_t(o).options.apiKey;u&&Bi()&&(o.Oa=o.$.then(function(){if(!o.l){if(o.b=qf(u,h,_t(o).name,o.R),uc(o.b,o),rt(o)&&Hs(rt(o)),o.m){Hs(o.m);var f=o.m;f.xa(o.la()),Wf(f,o),Gs(f=o.m,o.J),$f(f,o),Qf(f=o.m,o.R),Xf(f,o),o.m=null}return o.b}}))}(this),this.INTERNAL={},this.INTERNAL.delete=L(this.delete,this),this.INTERNAL.logFramework=L(this.Gc,this),this.u=0,me.call(this),function(o){Object.defineProperty(o,"lc",{get:function(){return this.la()},set:function(u){this.xa(u)},enumerable:!1}),o.aa=null,Object.defineProperty(o,"ti",{get:function(){return this.T()},set:function(u){this.zb(u)},enumerable:!1}),o.S=null,Object.defineProperty(o,"emulatorConfig",{get:function(){if(this.R){var u=Te(this.R.url);u=hn({protocol:u.c,host:u.a,port:u.g,options:hn({disableWarnings:this.R.ec})})}else u=null;return u},enumerable:!1})}(this),this.J=[],this.R=null}function DS(o){Ce.call(this,"languageCodeChanged"),this.h=o}function ES(o){Ce.call(this,"emulatorConfigChanged"),this.c=o}function AS(o){Ce.call(this,"frameworkChanged"),this.f=o}function hp(o){return o.Oa||kt(new D("auth-domain-config-required"))}function xS(o){if(!Bi())return kt(new D("operation-not-supported-in-this-environment"));var u=hp(o).then(function(){return o.b.ra()}).then(function(h){return h?hn(h):null});return Ot(o,u)}function no(o,u){rt(o)&&(function(o,u){Ke(o.W,function(h){return h==u})}(rt(o),o.Ba),Pe(rt(o),"tokenChanged",o.qa),Pe(rt(o),"userDeleted",o.za),Pe(rt(o),"userInvalidated",o.Aa),ep(rt(o))),u&&(u.W.push(o.Ba),Ue(u,"tokenChanged",o.qa),Ue(u,"userDeleted",o.za),Ue(u,"userInvalidated",o.Aa),0<o.u&&pS(u)),j(o,"currentUser",u),u&&(u.xa(o.la()),Wf(u,o),Gs(u,o.J),$f(u,o),Qf(u,o.R),Xf(u,o))}function Wi(o,u){var h=null,f=null;return Ot(o,u.then(function(g){return h=Zd(g),f=Nw(g),function(o,u){var h={};return h.apiKey=_t(o).options.apiKey,h.authDomain=_t(o).options.authDomain,h.appName=_t(o).name,o.R&&(h.emulatorConfig=o.R),o.$.then(function(){return function(o,u,h,f){var g=new Le(o,u);return h&&(g.ha=h),f&&Gs(g,f),g.reload().then(function(){return g})}(h,u,o.D,o.Ga())}).then(function(f){return rt(o)&&f.uid==rt(o).uid?(fc(rt(o),f),o.da(f)):(no(o,f),Hs(f),o.da(f))}).then(function(){Zs(o)})}(o,g)},function(g){var y=null;throw g&&"auth/multi-factor-auth-required"===g.code&&(y=cS(g.w(),o,L(o.kc,o))),y||g}).then(function(){return hn({user:rt(o),credential:h,additionalUserInfo:f,operationType:"signIn"})}))}function _t(o){return o.app}function rt(o){return o.currentUser}function mc(o){return rt(o)&&rt(o)._lat||null}function Zs(o){if(o.ba){for(var u=0;u<o.s.length;u++)o.s[u]&&o.s[u](mc(o));if(o.W!==o.getUid()&&o.N.length)for(o.W=o.getUid(),u=0;u<o.N.length;u++)o.N[u]&&o.N[u](mc(o))}}function Ot(o,u){return o.P.push(u),u.oa(function(){vu(o.P,u)}),u}function Ks(){}function io(){this.a={},this.b=1e12}up.prototype.yb=function(o){var u=null,h=this;return function(o){var u=new D("invalid-persistence-type"),h=new D("unsupported-persistence-type");t:{for(f in Wr)if(Wr[f]==o){var f=!0;break t}f=!1}if(!f||"string"!=typeof o)throw u;switch(ln()){case"ReactNative":if("session"===o)throw h;break;case"Node":if("none"!==o)throw h;break;case"Worker":if("session"===o||!Cf()&&"none"!==o)throw h;break;default:if(!kd()&&"none"!==o)throw h}}(o),eo(this,function(){return o!=h.c.F?h.b.get(h.c,h.a).then(function(f){return u=f,cp(h,o)}).then(function(){if(h.c=pn(o),u)return h.b.set(h.c,u,h.a)}):K()})},tt(tn,me),tt(DS,Ce),tt(ES,Ce),tt(AS,Ce),(i=tn.prototype).yb=function(o){return Ot(this,o=this.i.yb(o))},i.xa=function(o){this.aa===o||this.l||(this.aa=o,cb(this.a,this.aa),this.dispatchEvent(new DS(this.la())))},i.la=function(){return this.aa},i.fd=function(){var o=m.navigator;this.xa(o&&(o.languages&&o.languages[0]||o.language||o.userLanguage)||null)},i.gd=function(o,u){if(!this.R){if(!/^https?:\/\//.test(o))throw new D("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");(function(o){"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),m.document&&!o&&Mu().then(function(){var u=m.document.createElement("div");u.innerText="Running in emulator mode. Do not use with production credentials.",u.style.position="fixed",u.style.width="100%",u.style.backgroundColor="#ffffff",u.style.border=".1em solid #000000",u.style.color="#b50000",u.style.bottom="0px",u.style.left="0px",u.style.margin="0px",u.style.zIndex=1e4,u.style.textAlign="center",u.classList.add("firebase-emulator-warning"),m.document.body.appendChild(u)})})(u=!!u&&!!u.disableWarnings),this.R={url:o,ec:u},this.settings.jb=!0,tc(this.a,this.R),this.dispatchEvent(new ES(this.R))}},i.Gc=function(o){this.J.push(o),lb(this.a,it.Z.SDK_VERSION?Gr(it.Z.SDK_VERSION,this.J):null),this.dispatchEvent(new AS(this.J))},i.Ga=function(){return Mi(this.J)},i.zb=function(o){this.S===o||this.l||(this.S=o,this.a.b=this.S)},i.T=function(){return this.S},i.toJSON=function(){return{apiKey:_t(this).options.apiKey,authDomain:_t(this).options.authDomain,appName:_t(this).name,currentUser:rt(this)&&rt(this).w()}},i.Gb=function(o,u){switch(o){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==u&&!!this.f;default:return!1}},i.na=function(o,u,h,f){"signInViaPopup"==o&&this.g==f&&(h&&this.C?this.C(h):u&&!h&&this.f&&this.f(u),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},i.Fa=function(o,u){return"signInViaRedirect"==o||"signInViaPopup"==o&&this.g==u&&this.f?L(this.ic,this):null},i.ic=function(o,u,h,f){var g=this,y={requestUri:o,postBody:f,sessionId:u,tenantId:h};return this.c&&(this.c.cancel(),this.c=null),g.$.then(function(){return Wi(g,pf(g.a,y))})},i.Xc=function(o){if(!Bi())return kt(new D("operation-not-supported-in-this-environment"));var u=this,h=Ud(o.providerId),f=qi(),g=null;(!Ss()||Cd())&&_t(this).options.authDomain&&o.isOAuthProvider&&(g=Bs(_t(this).options.authDomain,_t(this).options.apiKey,_t(this).name,"signInViaPopup",o,null,f,it.Z.SDK_VERSION||null,null,null,this.T(),this.R));var y=uw(g,h&&h.va,h&&h.ua);return Ot(this,h=hp(this).then(function(w){return $b(w,y,"signInViaPopup",o,f,!!g,u.T())}).then(function(){return new ut(function(w,C){u.na("signInViaPopup",null,new D("cancelled-popup-request"),u.g),u.f=w,u.C=C,u.g=f,u.c=eS(u.b,u,"signInViaPopup",y,f)})}).then(function(w){return y&&Vi(y),w?hn(w):null}).o(function(w){throw y&&Vi(y),w}))},i.Yc=function(o){if(!Bi())return kt(new D("operation-not-supported-in-this-environment"));var u=this;return Ot(this,hp(this).then(function(){return function(o){return eo(o,function(){return o.b.set(lp,o.c.F,o.a)})}(u.i)}).then(function(){return tS(u.b,"signInViaRedirect",o,void 0,u.T())}))},i.ra=function(){var o=this;return xS(this).then(function(u){return o.b&&lc(o.b.b),u}).o(function(u){throw o.b&&lc(o.b.b),u})},i.dd=function(o){if(!o)return kt(new D("null-user"));if(this.S!=o.tenantId)return kt(new D("tenant-id-mismatch"));var u=this,h={};h.apiKey=_t(this).options.apiKey,h.authDomain=_t(this).options.authDomain,h.appName=_t(this).name;var f=function(o,u,h,f){var g=o.h,y={};return y[$e]=g.b&&g.b.toString(),y.refreshToken=g.a,u=new Le(u||{apiKey:o.l,authDomain:o.s,appName:o.m},y),h&&(u.ha=h),f&&Gs(u,f),fc(u,o),u}(o,h,u.D,u.Ga());return Ot(this,this.h.then(function(){if(_t(u).options.apiKey!=o.l)return f.reload()}).then(function(){return rt(u)&&o.uid==rt(u).uid?(fc(rt(u),o),u.da(o)):(no(u,f),Hs(f),u.da(f))}).then(function(){Zs(u)}))},i.Bb=function(){var o=this;return Ot(this,this.h.then(function(){return o.b&&lc(o.b.b),rt(o)?(no(o,null),TS(o.i).then(function(){Zs(o)})):K()}))},i.Zc=function(){var o=this;return kS(this.i,_t(this).options.authDomain).then(function(u){if(!o.l){var h;if(h=rt(o)&&u){h=rt(o).uid;var f=u.uid;h=null!=h&&""!==h&&null!=f&&""!==f&&h==f}if(h)return fc(rt(o),u),rt(o).I();(rt(o)||u)&&(no(o,u),u&&(Hs(u),u.ha=o.D),o.b&&uc(o.b,o),Zs(o))}})},i.da=function(o){return CS(this.i,o)},i.mc=function(){Zs(this),this.da(rt(this))},i.wc=function(){this.Bb()},i.xc=function(){this.Bb()},i.kc=function(o){var u=this;return this.h.then(function(){return Wi(u,K(o))})},i.zc=function(o){var u=this;this.addAuthTokenListener(function(){o.next(rt(u))})},i.Ac=function(o){var u=this;!function(o,u){o.N.push(u),Ot(o,o.h.then(function(){!o.l&&En(o.N,u)&&o.W!==o.getUid()&&(o.W=o.getUid(),u(mc(o)))}))}(this,function(){o.next(rt(u))})},i.Ic=function(o,u,h){var f=this;return this.ba&&Promise.resolve().then(function(){"function"==typeof o?o(rt(f)):"function"==typeof o.next&&o.next(rt(f))}),this.Pa(o,u,h)},i.Hc=function(o,u,h){var f=this;return this.ba&&Promise.resolve().then(function(){f.W=f.getUid(),"function"==typeof o?o(rt(f)):"function"==typeof o.next&&o.next(rt(f))}),this.ib(o,u,h)},i.nc=function(o){var u=this;return Ot(this,this.h.then(function(){return rt(u)?rt(u).I(o).then(function(f){return{accessToken:f}}):null}))},i.Tc=function(o){var u=this;return this.h.then(function(){return Wi(u,ht(u.a,AM,{token:o}))}).then(function(h){var f=h.user;return ri(f,"isAnonymous",!1),u.da(f),h})},i.Uc=function(o,u){var h=this;return this.h.then(function(){return Wi(h,ht(h.a,_b,{email:o,password:u}))})},i.dc=function(o,u){var h=this;return this.h.then(function(){return Wi(h,ht(h.a,sM,{email:o,password:u}))})},i.ab=function(o){var u=this;return this.h.then(function(){return Wi(u,o.ka(u.a))})},i.Sc=function(o){return Ed("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.ab(o)},i.Ab=function(){var o=this;return this.h.then(function(){var u=rt(o);if(u&&u.isAnonymous){var h=hn({providerId:null,isNewUser:!1});return hn({user:u,credential:null,additionalUserInfo:h,operationType:"signIn"})}return Wi(o,o.a.Ab()).then(function(f){var g=f.user;return ri(g,"isAnonymous",!0),o.da(g),f})})},i.getUid=function(){return rt(this)&&rt(this).uid||null},i.cc=function(o){this.addAuthTokenListener(o),this.u++,0<this.u&&rt(this)&&pS(rt(this))},i.Pc=function(o){var u=this;At(this.s,function(h){h==o&&u.u--}),0>this.u&&(this.u=0),0==this.u&&rt(this)&&ep(rt(this)),this.removeAuthTokenListener(o)},i.addAuthTokenListener=function(o){var u=this;this.s.push(o),Ot(this,this.h.then(function(){u.l||En(u.s,o)&&o(mc(u))}))},i.removeAuthTokenListener=function(o){Ke(this.s,function(u){return u==o})},i.delete=function(){this.l=!0;for(var o=0;o<this.P.length;o++)this.P[o].cancel("app-deleted");return this.P=[],this.i&&(o=this.i).b.removeListener(pn("local"),o.a,this.ja),this.b&&(Lf(this.b,this),lc(this.b.b)),Promise.resolve()},i.hc=function(o){return Ot(this,function(o,u){return ht(o,aM,{identifier:u,continueUri:Ou()?bs():"http://localhost"}).then(function(h){return h.signinMethods||[]})}(this.a,o))},i.Bc=function(o){return!!zd(o)},i.xb=function(o,u){var h=this;return Ot(this,K().then(function(){var f=new Nu(u);if(!f.c)throw new D("argument-error",Bd+" must be true when sending sign in link to email");return Pu(f)}).then(function(f){return h.a.xb(o,f)}).then(function(){}))},i.jd=function(o){return this.Sa(o).then(function(u){return u.data.email})},i.ob=function(o,u){return Ot(this,this.a.ob(o,u).then(function(){}))},i.Sa=function(o){return Ot(this,this.a.Sa(o).then(function(u){return new ax(u)}))},i.kb=function(o){return Ot(this,this.a.kb(o).then(function(){}))},i.wb=function(o,u){var h=this;return Ot(this,K().then(function(){return void 0===u||Oi(u)?{}:Pu(new Nu(u))}).then(function(f){return h.a.wb(o,f)}).then(function(){}))},i.Wc=function(o,u){return Ot(this,jf(this,o,u,L(this.ab,this)))},i.Vc=function(o,u){var h=this;return Ot(this,K().then(function(){var f=u||bs(),g=zw(o,f);if(!(f=zd(f)))throw new D("argument-error","Invalid email link!");if(f.tenantId!==h.T())throw new D("tenant-id-mismatch");return h.ab(g)}))},Ks.prototype.render=function(){},Ks.prototype.reset=function(){},Ks.prototype.getResponse=function(){},Ks.prototype.execute=function(){};var dp=null;function fp(o,u){return(u=MS(u))&&o.a[u]||null}function MS(o){return(o=void 0===o?1e12:o)?o.toString():null}function gc(o,u){this.g=!1,this.c=u,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=ps(o);var h=this;this.i=function(){h.execute()},this.h?this.execute():Ue(this.f,"click",this.i)}function pp(o){if(o.g)throw Error("reCAPTCHA mock was already deleted!")}function mp(){}function gp(){}io.prototype.render=function(o,u){return this.a[this.b.toString()]=new gc(o,u),this.b++},io.prototype.reset=function(o){var u=fp(this,o);o=MS(o),u&&o&&(u.delete(),delete this.a[o])},io.prototype.getResponse=function(o){return(o=fp(this,o))?o.getResponse():null},io.prototype.execute=function(o){(o=fp(this,o))&&o.execute()},gc.prototype.getResponse=function(){return pp(this),this.b},gc.prototype.execute=function(){pp(this);var o=this;this.a||(this.a=setTimeout(function(){o.b=function(){for(var o=50,u=[];0<o;)u.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),o--;return u.join("")}();var u=o.c.callback,h=o.c["expired-callback"];if(u)try{u(o.b)}catch(f){}o.a=setTimeout(function(){if(o.a=null,o.b=null,h)try{h()}catch(f){}o.h&&o.execute()},6e4)},500))},gc.prototype.delete=function(){pp(this),this.g=!0,clearTimeout(this.a),this.a=null,Pe(this.f,"click",this.i)},j(mp,"FACTOR_ID","phone"),gp.prototype.g=function(){return dp||(dp=new io),K(dp)},gp.prototype.c=function(){};var vp=null;function yp(){this.b=m.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var QO=new un(yu,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),WO=new ei(3e4,6e4);yp.prototype.g=function(o){var u=this;return new ut(function(h,f){var g=setTimeout(function(){f(new D("network-request-failed"))},WO.get());!m.grecaptcha||o!==u.f&&!u.b?(m[u.a]=function(){if(m.grecaptcha){u.f=o;var w=m.grecaptcha.render;m.grecaptcha.render=function(C,x){return C=w(C,x),u.b++,C},clearTimeout(g),h(m.grecaptcha)}else clearTimeout(g),f(new D("internal-error"));delete m[u.a]},K(af(Wh(QO,{onload:u.a,hl:o||""}))).o(function(){clearTimeout(g),f(new D("internal-error","Unable to load external reCAPTCHA dependencies!"))})):(clearTimeout(g),h(m.grecaptcha))})},yp.prototype.c=function(){this.b--};var _p=null;function wp(o,u,h,f,g,y,w){if(j(this,"type","recaptcha"),this.c=this.f=null,this.J=!1,this.v=u,this.g=null,w?(vp||(vp=new gp),w=vp):(_p||(_p=new yp),w=_p),this.m=w,this.a=h||{theme:"light",type:"image"},this.h=[],this.a[NS])throw new D("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[XO],!m.document)throw new D("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!ps(u)||!this.i&&ps(u).hasChildNodes())throw new D("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Xe(o,y||null,g||null),this.u=f||function(){return null};var C=this;this.l=[];var x=this.a[OS];this.a[OS]=function(et){if(PS(C,et),"function"==typeof x)x(et);else if("string"==typeof x){var yt=Dt(x,m);"function"==typeof yt&&yt(et)}};var O=this.a[RS];this.a[RS]=function(){if(PS(C,null),"function"==typeof O)O();else if("string"==typeof O){var et=Dt(O,m);"function"==typeof et&&et()}}}var OS="callback",RS="expired-callback",NS="sitekey",XO="size";function PS(o,u){for(var h=0;h<o.l.length;h++)try{o.l[h](u)}catch(f){}}function bp(o,u){return o.h.push(u),u.oa(function(){vu(o.h,u)}),u}function vc(o){if(o.J)throw new D("internal-error","RecaptchaVerifier instance has been destroyed.")}function Sp(o,u,h){var f=!1;try{this.b=h||it.Z.app()}catch(w){throw new D("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new D("invalid-api-key");h=this.b.options.apiKey;var g=this,y=null;try{y=this.b.auth().Ga()}catch(w){}try{f=this.b.auth().settings.appVerificationDisabledForTesting}catch(w){}y=it.Z.SDK_VERSION?Gr(it.Z.SDK_VERSION,y):null,wp.call(this,h,o,u,function(){try{var w=g.b.auth().la()}catch(C){w=null}return w},y,hs(ds),f)}function FS(o,u,h,f){t:{h=Array.prototype.slice.call(h);for(var g=0,y=!1,w=0;w<u.length;w++)if(u[w].optional)y=!0;else{if(y)throw new D("internal-error","Argument validator encountered a required argument after an optional argument.");g++}if(y=u.length,h.length<g||y<h.length)f="Expected "+(g==y?1==g?"1 argument":g+" arguments":g+"-"+y+" arguments")+" but got "+h.length+".";else{for(g=0;g<h.length;g++)if(y=u[g].optional&&void 0===h[g],!u[g].M(h[g])&&!y){if(u=u[g],0>g||g>=LS.length)throw new D("internal-error","Argument validator received an unsupported number of arguments.");h=LS[g],f=(f?"":h+" argument ")+(u.name?'"'+u.name+'" ':"")+"must be "+u.K+".";break t}f=null}}if(f)throw new D("argument-error",o+" failed: "+f)}(i=wp.prototype).Ia=function(){var o=this;return this.f?this.f:this.f=bp(this,K().then(function(){if(Ou()&&!Qe())return Mu();throw new D("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return o.m.g(o.u())}).then(function(u){return o.g=u,ht(o.s,wM,{})}).then(function(u){o.a[NS]=u.recaptchaSiteKey}).o(function(u){throw o.f=null,u}))},i.render=function(){vc(this);var o=this;return bp(this,this.Ia().then(function(){if(null===o.c){var u=o.v;if(!o.i){var h=ps(u);u=function(o,u,h){var f=arguments,g=document,y=String(f[0]),w=f[1];if(!CA&&w&&(w.name||w.type)){if(y=["<",y],w.name&&y.push(' name="',Xh(w.name),'"'),w.type){y.push(' type="',Xh(w.type),'"');var C={};Se(C,w),delete C.type,w=C}y.push(">"),y=y.join("")}return y=Su(g,y),w&&("string"==typeof w?y.className=w:Array.isArray(w)?y.className=w.join(" "):S0(y,w)),2<f.length&&kA(g,y,f),y}("DIV"),h.appendChild(u)}o.c=o.g.render(u,o.a)}return o.c}))},i.verify=function(){vc(this);var o=this;return bp(this,this.render().then(function(u){return new ut(function(h){var f=o.g.getResponse(u);if(f)h(f);else{var g=function(y){y&&(function(o,u){Ke(o.l,function(h){return h==u})}(o,g),h(y))};o.l.push(g),o.i&&o.g.execute(o.c)}})}))},i.reset=function(){vc(this),null!==this.c&&this.g.reset(this.c)},i.clear=function(){vc(this),this.J=!0,this.m.c();for(var o=0;o<this.h.length;o++)this.h[o].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){o=ps(this.v);for(var u;u=o.firstChild;)o.removeChild(u)}},tt(Sp,wp);var LS="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function U(o,u){return{name:o||"",K:"a valid string",optional:!!u,M:function(h){return"string"==typeof h}}}function Ip(o,u){return{name:o||"",K:"a boolean",optional:!!u,M:function(h){return"boolean"==typeof h}}}function Ut(o,u){return{name:o||"",K:"a valid object",optional:!!u,M}}function ro(o,u){return{name:o||"",K:"a function",optional:!!u,M:function(h){return"function"==typeof h}}}function mn(o,u){return{name:o||"",K:"null",optional:!!u,M:function(h){return null===h}}}function oi(o){return{name:o?o+"Credential":"credential",K:o?"a valid "+o+" credential":"a valid credential",optional:!1,M:function(u){return!!u&&!(!u.ka||o&&u.providerId!==o)}}}function Cp(o,u){return M(o)&&"string"==typeof o.type&&o.type===u&&"function"==typeof o.Ha}function BS(o){return M(o)&&"string"==typeof o.uid}function Pt(o,u,h,f){return{name:h||"",K:o.K+" or "+u.K,optional:!!f,M:function(g){return o.M(g)||u.M(g)}}}function xt(o,u){for(var h in u){var f=u[h].name;o[f]=US(f,o[h],u[h].j)}}function qS(o,u){for(var h in u){var f=u[h].name;f!==h&&Object.defineProperty(o,f,{get:Tt(function(g){return this[g]},h),set:Tt(function(g,y,w,C){FS(g,[w],[C],!0),this[y]=C},f,h,u[h].lb),enumerable:!0})}}function Ft(o,u,h,f){o[u]=US(u,h,f)}function US(o,u,h){function f(){var w=Array.prototype.slice.call(arguments);return FS(g,h,w),u.apply(this,w)}if(!h)return u;var y,g=function(o){return(o=o.split("."))[o.length-1]}(o);for(y in u)f[y]=u[y];for(y in u.prototype)f.prototype[y]=u.prototype[y];return f}xt(tn.prototype,{kb:{name:"applyActionCode",j:[U("code")]},Sa:{name:"checkActionCode",j:[U("code")]},ob:{name:"confirmPasswordReset",j:[U("code"),U("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[U("email"),U("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[U("email")]},ra:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[U("emailLink")]},Hc:{name:"onAuthStateChanged",j:[Pt(Ut(),ro(),"nextOrObserver"),ro("opt_error",!0),ro("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[Pt(Ut(),ro(),"nextOrObserver"),ro("opt_error",!0),ro("opt_completed",!0)]},wb:{name:"sendPasswordResetEmail",j:[U("email"),Pt(Ut("opt_actionCodeSettings",!0),mn(null,!0),"opt_actionCodeSettings",!0)]},xb:{name:"sendSignInLinkToEmail",j:[U("email"),Ut("actionCodeSettings")]},yb:{name:"setPersistence",j:[U("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[oi()]},Ab:{name:"signInAnonymously",j:[]},ab:{name:"signInWithCredential",j:[oi()]},Tc:{name:"signInWithCustomToken",j:[U("token")]},Uc:{name:"signInWithEmailAndPassword",j:[U("email"),U("password")]},Vc:{name:"signInWithEmailLink",j:[U("email"),U("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[U("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(o){return!(!o||"string"!=typeof o.type||"function"!=typeof o.verify)}}]},Xc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(o){return!!(o&&o.providerId&&o.hasOwnProperty&&o.hasOwnProperty("isOAuthProvider"))}}]},Yc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(o){return!!(o&&o.providerId&&o.hasOwnProperty&&o.hasOwnProperty("isOAuthProvider"))}}]},dd:{name:"updateCurrentUser",j:[Pt({name:"user",K:"an instance of Firebase User",optional:!1,M:function(u){return!!(u&&u instanceof Le)}},mn(),"user")]},Bb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[U(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[U("url"),Ut("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[U("code")]}}),qS(tn.prototype,{lc:{name:"languageCode",lb:Pt(U(),mn(),"languageCode")},ti:{name:"tenantId",lb:Pt(U(),mn(),"tenantId")}}),(tn.Persistence=Wr).LOCAL="local",tn.Persistence.SESSION="session",tn.Persistence.NONE="none",xt(Le.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[Ip("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Ip("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[oi()]},rb:{name:"linkWithCredential",j:[oi()]},Dc:{name:"linkWithPhoneNumber",j:[U("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(o){return!(!o||"string"!=typeof o.type||"function"!=typeof o.verify)}}]},Ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(o){return!!(o&&o.providerId&&o.hasOwnProperty&&o.hasOwnProperty("isOAuthProvider"))}}]},Fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(o){return!!(o&&o.providerId&&o.hasOwnProperty&&o.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[oi()]},ub:{name:"reauthenticateWithCredential",j:[oi()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[U("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(o){return!(!o||"string"!=typeof o.type||"function"!=typeof o.verify)}}]},Nc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(o){return!!(o&&o.providerId&&o.hasOwnProperty&&o.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(o){return!!(o&&o.providerId&&o.hasOwnProperty&&o.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},vb:{name:"sendEmailVerification",j:[Pt(Ut("opt_actionCodeSettings",!0),mn(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[U(null,!0)]},cd:{name:"unlink",j:[U("provider")]},Cb:{name:"updateEmail",j:[U("email")]},Db:{name:"updatePassword",j:[U("password")]},ed:{name:"updatePhoneNumber",j:[oi("phone")]},Eb:{name:"updateProfile",j:[Ut("profile")]},Fb:{name:"verifyBeforeUpdateEmail",j:[U("email"),Pt(Ut("opt_actionCodeSettings",!0),mn(null,!0),"opt_actionCodeSettings",!0)]}}),xt(io.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),xt(Ks.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),xt(ut.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),qS(sS.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",lb:Ip("appVerificationDisabledForTesting")}}),xt(Uf.prototype,{confirm:{name:"confirm",j:[U("verificationCode")]}}),Ft(Zr,"fromJSON",function(o){o="string"==typeof o?JSON.parse(o):o;for(var u,h=[Tx,kx,Dx,Cx],f=0;f<h.length;f++)if(u=h[f](o))return u;return null},[Pt(U(),Ut(),"json")]),Ft(Ye,"credential",function(o,u){return new ni(o,u)},[U("email"),U("password")]),xt(ni.prototype,{w:{name:"toJSON",j:[U(null,!0)]}}),xt(Yi.prototype,{Ca:{name:"addScope",j:[U("scope")]},Ka:{name:"setCustomParameters",j:[Ut("customOAuthParameters")]}}),Ft(Yi,"credential",jw,[Pt(U(),Ut(),"token")]),Ft(Ye,"credentialWithLink",zw,[U("email"),U("emailLink")]),xt(Gi.prototype,{Ca:{name:"addScope",j:[U("scope")]},Ka:{name:"setCustomParameters",j:[Ut("customOAuthParameters")]}}),Ft(Gi,"credential",Yw,[Pt(U(),Ut(),"token")]),xt(Hi.prototype,{Ca:{name:"addScope",j:[U("scope")]},Ka:{name:"setCustomParameters",j:[Ut("customOAuthParameters")]}}),Ft(Hi,"credential",Gw,[Pt(U(),Pt(Ut(),mn()),"idToken"),Pt(U(),mn(),"accessToken",!0)]),xt(Jr.prototype,{Ka:{name:"setCustomParameters",j:[Ut("customOAuthParameters")]}}),Ft(Jr,"credential",Hw,[Pt(U(),Ut(),"token"),U("secret",!0)]),xt(Fe.prototype,{Ca:{name:"addScope",j:[U("scope")]},credential:{name:"credential",j:[Pt(U(),Pt(Ut(),mn()),"optionsOrIdToken"),Pt(U(),mn(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Ut("customOAuthParameters")]}}),xt(xn.prototype,{w:{name:"toJSON",j:[U(null,!0)]}}),xt(Ui.prototype,{w:{name:"toJSON",j:[U(null,!0)]}}),Ft(Mn,"credential",Zw,[U("verificationId"),U("verificationCode")]),xt(Mn.prototype,{gb:{name:"verifyPhoneNumber",j:[Pt(U(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(h){return!!h&&(h.session&&h.phoneNumber?Cp(h.session,Es)&&"string"==typeof h.phoneNumber:h.session&&h.multiFactorHint?Cp(h.session,qu)&&BS(h.multiFactorHint):h.session&&h.multiFactorUid?Cp(h.session,qu)&&"string"==typeof h.multiFactorUid:!!h.phoneNumber&&"string"==typeof h.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(o){return!(!o||"string"!=typeof o.type||"function"!=typeof o.verify)}}]}}),xt(ii.prototype,{w:{name:"toJSON",j:[U(null,!0)]}}),xt(D.prototype,{toJSON:{name:"toJSON",j:[U(null,!0)]}}),xt(xs.prototype,{toJSON:{name:"toJSON",j:[U(null,!0)]}}),xt(Qd.prototype,{toJSON:{name:"toJSON",j:[U(null,!0)]}}),xt(Gf.prototype,{toJSON:{name:"toJSON",j:[U(null,!0)]}}),xt(Yf.prototype,{Rc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(o){return!!o&&!!o.tb}}]}}),xt(zf.prototype,{Sb:{name:"getSession",j:[]},fc:{name:"enroll",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(o){return!!o&&!!o.tb}},U("displayName",!0)]},bd:{name:"unenroll",j:[Pt({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:BS},U(),"multiFactorInfoIdentifier")]}}),xt(Sp.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Ft(Vd,"parseLink",Cw,[U("link")]),Ft(mp,"assertion",function(o){return new hS(o)},[oi("phone")]),function(){if(void 0===it.Z||!it.Z.INTERNAL||!it.Z.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var o={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Ru,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:Ld,VERIFY_AND_CHANGE_EMAIL:ks,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:tn,AuthCredential:Zr,Error:D};Ft(o,"EmailAuthProvider",Ye,[]),Ft(o,"FacebookAuthProvider",Yi,[]),Ft(o,"GithubAuthProvider",Gi,[]),Ft(o,"GoogleAuthProvider",Hi,[]),Ft(o,"TwitterAuthProvider",Jr,[]),Ft(o,"OAuthProvider",Fe,[U("providerId")]),Ft(o,"SAMLAuthProvider",Uw,[U("providerId")]),Ft(o,"PhoneAuthProvider",Mn,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(o){return!!(o&&o instanceof tn)}}]),Ft(o,"RecaptchaVerifier",Sp,[Pt(U(),{name:"",K:"an HTML element",optional:!1,M:function(o){return!!(o&&o instanceof Element)}},"recaptchaContainer"),Ut("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(o){return!!(o&&o instanceof it.Z.app.App)}}]),Ft(o,"ActionCodeURL",Vd,[]),Ft(o,"PhoneMultiFactorGenerator",mp,[]),it.Z.INTERNAL.registerComponent({name:"auth",instanceFactory:function(u){return new tn(u=u.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:o,instantiationMode:"LAZY",type:"PUBLIC",onInstanceCreated:function(u){u.getProvider("auth-internal").initialize()}}),it.Z.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(u){return{getUid:L((u=u.getProvider("auth").getImmediate()).getUid,u),getToken:L(u.nc,u),addAuthTokenListener:L(u.cc,u),removeAuthTokenListener:L(u.Pc,u)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),it.Z.registerVersion("@firebase/auth","0.16.8"),it.Z.INTERNAL.extendNamespace({User:Le})}()}).apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var S=X(4762),gt=X(4685),si=X(300),_c=function(i,e){return(_c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a])})(i,e)};function Dp(i){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&i[e],s=0;if(t)return t.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var q,YS="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},wc=wc||{},nt=YS||self;function Js(){}function bc(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function so(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var Sc="closure_uid_"+(1e9*Math.random()>>>0),HS=0;function zS(i,e,t){return i.call.apply(i.bind,arguments)}function ZS(i,e,t){if(!i)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var a=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(a,s),i.apply(e,a)}}return function(){return i.apply(e,arguments)}}function Wt(i,e,t){return(Wt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?zS:ZS).apply(null,arguments)}function Qs(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var s=t.slice();return s.push.apply(s,arguments),i.apply(this,s)}}function Xt(i,e){function t(){}t.prototype=e.prototype,i.Z=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.Vb=function(s,a,c){for(var d=Array(arguments.length-2),p=2;p<arguments.length;p++)d[p-2]=arguments[p];return e.prototype[a].apply(s,d)}}function Nn(){this.s=this.s,this.o=this.o}var JS={};Nn.prototype.s=!1,Nn.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var i=function(i){return Object.prototype.hasOwnProperty.call(i,Sc)&&i[Sc]||(i[Sc]=++HS)}(this);delete JS[i]}},Nn.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Ep=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(var t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1},Ap=Array.prototype.forEach?function(i,e,t){Array.prototype.forEach.call(i,e,t)}:function(i,e,t){for(var s=i.length,a="string"==typeof i?i.split(""):i,c=0;c<s;c++)c in a&&e.call(t,a[c],c,i)};function xp(i){return Array.prototype.concat.apply([],arguments)}function Ic(i){var e=i.length;if(0<e){for(var t=Array(e),s=0;s<e;s++)t[s]=i[s];return t}return[]}function Ws(i){return/^[\s\xa0]*$/.test(i)}var he,Mp=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function le(i,e){return-1!=i.indexOf(e)}function Cc(i,e){return i<e?-1:i>e?1:0}t:{var Op=nt.navigator;if(Op){var Rp=Op.userAgent;if(Rp){he=Rp;break t}}he=""}function Tc(i,e,t){for(var s in i)e.call(t,i[s],s,i)}function Np(i){var e={};for(var t in i)e[t]=i[t];return e}var Pp="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Fp(i,e){for(var t,s,a=1;a<arguments.length;a++){for(t in s=arguments[a])i[t]=s[t];for(var c=0;c<Pp.length;c++)t=Pp[c],Object.prototype.hasOwnProperty.call(s,t)&&(i[t]=s[t])}}function kc(i){return kc[" "](i),i}kc[" "]=Js;var Xs,i,XS=le(he,"Opera"),Xi=le(he,"Trident")||le(he,"MSIE"),Lp=le(he,"Edge"),Dc=Lp||Xi,Vp=le(he,"Gecko")&&!(le(he.toLowerCase(),"webkit")&&!le(he,"Edge"))&&!(le(he,"Trident")||le(he,"MSIE"))&&!le(he,"Edge"),$S=le(he.toLowerCase(),"webkit")&&!le(he,"Edge");function Bp(){var i=nt.document;return i?i.documentMode:void 0}t:{var Ec="",Ac=(i=he,Vp?/rv:([^\);]+)(\)|;)/.exec(i):Lp?/Edge\/([\d\.]+)/.exec(i):Xi?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):$S?/WebKit\/(\S+)/.exec(i):XS?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(Ac&&(Ec=Ac?Ac[1]:""),Xi){var xc=Bp();if(null!=xc&&xc>parseFloat(Ec)){Xs=String(xc);break t}}Xs=Ec}var tI={};function eI(){return e=tI,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){for(var i=0,e=Mp(String(Xs)).split("."),t=Mp("9").split("."),s=Math.max(e.length,t.length),a=0;0==i&&a<s;a++){var c=e[a]||"",d=t[a]||"";do{if(c=/(\d*)(\D*)(.*)/.exec(c)||["","","",""],d=/(\d*)(\D*)(.*)/.exec(d)||["","","",""],0==c[0].length&&0==d[0].length)break;i=Cc(0==c[1].length?0:parseInt(c[1],10),0==d[1].length?0:parseInt(d[1],10))||Cc(0==c[2].length,0==d[2].length)||Cc(c[2],d[2]),c=c[3],d=d[3]}while(0==i)}return 0<=i}();var e}var nI=nt.document&&Xi&&(Bp()||parseInt(Xs,10))||void 0,iI=function(){if(!nt.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{nt.addEventListener("test",Js,e),nt.removeEventListener("test",Js,e)}catch(t){}return i}();function re(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}function ao(i,e){if(re.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,s=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(Vp){t:{try{kc(e.nodeName);var a=!0;break t}catch(c){}a=!1}a||(e=null)}}else"mouseover"==t?e=i.fromElement:"mouseout"==t&&(e=i.toElement);this.relatedTarget=e,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:rI[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&ao.Z.h.call(this)}}re.prototype.h=function(){this.defaultPrevented=!0},Xt(ao,re);var rI={2:"touch",3:"pen",4:"mouse"};ao.prototype.h=function(){ao.Z.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var uo="closure_listenable_"+(1e6*Math.random()|0),oI=0;function sI(i,e,t,s,a){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!s,this.ia=a,this.key=++oI,this.ca=this.fa=!1}function $s(i){i.ca=!0,i.listener=null,i.proxy=null,i.src=null,i.ia=null}function ta(i){this.src=i,this.g={},this.h=0}function Oc(i,e){var t=e.type;if(t in i.g){var c,s=i.g[t],a=Ep(s,e);(c=0<=a)&&Array.prototype.splice.call(s,a,1),c&&($s(e),0==i.g[t].length&&(delete i.g[t],i.h--))}}function Rc(i,e,t,s){for(var a=0;a<i.length;++a){var c=i[a];if(!c.ca&&c.listener==e&&c.capture==!!t&&c.ia==s)return a}return-1}ta.prototype.add=function(i,e,t,s,a){var c=i.toString();(i=this.g[c])||(i=this.g[c]=[],this.h++);var d=Rc(i,e,s,a);return-1<d?(e=i[d],t||(e.fa=!1)):((e=new sI(e,this.src,c,!!s,a)).fa=t,i.push(e)),e};var Nc="closure_lm_"+(1e6*Math.random()|0),Pc={};function Up(i,e,t,s,a){if(s&&s.once)return Yp(i,e,t,s,a);if(Array.isArray(e)){for(var c=0;c<e.length;c++)Up(i,e[c],t,s,a);return null}return t=Bc(t),i&&i[uo]?i.N(e,t,so(s)?!!s.capture:!!s,a):jp(i,e,t,!1,s,a)}function jp(i,e,t,s,a,c){if(!e)throw Error("Invalid event type");var d=so(a)?!!a.capture:!!a,p=Lc(i);if(p||(i[Nc]=p=new ta(i)),(t=p.add(e,t,s,d,c)).proxy)return t;if(s=function(){var e=uI;return function i(t){return e.call(i.src,i.listener,t)}}(),t.proxy=s,s.src=i,s.listener=t,i.addEventListener)iI||(a=d),void 0===a&&(a=!1),i.addEventListener(e.toString(),s,a);else if(i.attachEvent)i.attachEvent(Hp(e.toString()),s);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(s)}return t}function Yp(i,e,t,s,a){if(Array.isArray(e)){for(var c=0;c<e.length;c++)Yp(i,e[c],t,s,a);return null}return t=Bc(t),i&&i[uo]?i.O(e,t,so(s)?!!s.capture:!!s,a):jp(i,e,t,!0,s,a)}function Gp(i,e,t,s,a){if(Array.isArray(e))for(var c=0;c<e.length;c++)Gp(i,e[c],t,s,a);else s=so(s)?!!s.capture:!!s,t=Bc(t),i&&i[uo]?(i=i.i,(e=String(e).toString())in i.g&&-1<(t=Rc(c=i.g[e],t,s,a))&&($s(c[t]),Array.prototype.splice.call(c,t,1),0==c.length&&(delete i.g[e],i.h--))):i&&(i=Lc(i))&&(e=i.g[e.toString()],i=-1,e&&(i=Rc(e,t,s,a)),(t=-1<i?e[i]:null)&&Fc(t))}function Fc(i){if("number"!=typeof i&&i&&!i.ca){var e=i.src;if(e&&e[uo])Oc(e.i,i);else{var t=i.type,s=i.proxy;e.removeEventListener?e.removeEventListener(t,s,i.capture):e.detachEvent?e.detachEvent(Hp(t),s):e.addListener&&e.removeListener&&e.removeListener(s),(t=Lc(e))?(Oc(t,i),0==t.h&&(t.src=null,e[Nc]=null)):$s(i)}}}function Hp(i){return i in Pc?Pc[i]:Pc[i]="on"+i}function uI(i,e){if(i.ca)i=!0;else{e=new ao(e,this);var t=i.listener,s=i.ia||i.src;i.fa&&Fc(i),i=t.call(s,e)}return i}function Lc(i){return(i=i[Nc])instanceof ta?i:null}var Vc="__closure_events_fn_"+(1e9*Math.random()>>>0);function Bc(i){return"function"==typeof i?i:(i[Vc]||(i[Vc]=function(e){return i.handleEvent(e)}),i[Vc])}function zt(){Nn.call(this),this.i=new ta(this),this.P=this,this.I=null}function $t(i,e){var t,s=i.I;if(s)for(t=[];s;s=s.I)t.push(s);if(i=i.P,s=e.type||e,"string"==typeof e)e=new re(e,i);else if(e instanceof re)e.target=e.target||i;else{var a=e;Fp(e=new re(s,i),a)}if(a=!0,t)for(var c=t.length-1;0<=c;c--){var d=e.g=t[c];a=ea(d,s,!0,e)&&a}if(a=ea(d=e.g=i,s,!0,e)&&a,a=ea(d,s,!1,e)&&a,t)for(c=0;c<t.length;c++)a=ea(d=e.g=t[c],s,!1,e)&&a}function ea(i,e,t,s){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var a=!0,c=0;c<e.length;++c){var d=e[c];if(d&&!d.ca&&d.capture==t){var p=d.listener,m=d.ia||d.src;d.fa&&Oc(i.i,d),a=!1!==p.call(m,s)&&a}}return a&&!s.defaultPrevented}Xt(zt,Nn),zt.prototype[uo]=!0,zt.prototype.removeEventListener=function(i,e,t,s){Gp(this,i,e,t,s)},zt.prototype.M=function(){if(zt.Z.M.call(this),this.i){var e,i=this.i;for(e in i.g){for(var t=i.g[e],s=0;s<t.length;s++)$s(t[s]);delete i.g[e],i.h--}}this.I=null},zt.prototype.N=function(i,e,t,s){return this.i.add(String(i),e,!1,t,s)},zt.prototype.O=function(i,e,t,s){return this.i.add(String(i),e,!0,t,s)};var qc=nt.JSON.stringify;function cI(){var i=Zp,e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var jc,lI=function(){function i(){this.h=this.g=null}return i.prototype.add=function(e,t){var s=zp.get();s.set(e,t),this.h?this.h.next=s:this.g=s,this.h=s},i}(),zp=new(function(){function i(e,t){this.i=e,this.j=t,this.h=0,this.g=null}return i.prototype.get=function(){var e;return 0<this.h?(this.h--,this.g=(e=this.g).next,e.next=null):e=this.i(),e},i}())(function(){return new hI},function(i){return i.reset()}),hI=function(){function i(){this.next=this.g=this.h=null}return i.prototype.set=function(e,t){this.h=e,this.g=t,this.next=null},i.prototype.reset=function(){this.next=this.g=this.h=null},i}();function dI(i){nt.setTimeout(function(){throw i},0)}function Uc(i,e){jc||function(){var i=nt.Promise.resolve(void 0);jc=function(){i.then(pI)}}(),Yc||(jc(),Yc=!0),Zp.add(i,e)}var Yc=!1,Zp=new lI;function pI(){for(var i;i=cI();){try{i.h.call(i.g)}catch(t){dI(t)}var e=zp;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}Yc=!1}function na(i,e){zt.call(this),this.h=i||1,this.g=e||nt,this.j=Wt(this.kb,this),this.l=Date.now()}function Gc(i){i.da=!1,i.S&&(i.g.clearTimeout(i.S),i.S=null)}function Hc(i,e,t){if("function"==typeof i)t&&(i=Wt(i,t));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=Wt(i.handleEvent,i)}return 2147483647<Number(e)?-1:nt.setTimeout(i,e||0)}function Kp(i){i.g=Hc(function(){i.g=null,i.i&&(i.i=!1,Kp(i))},i.j);var e=i.h;i.h=null,i.m.apply(null,e)}Xt(na,zt),(q=na.prototype).da=!1,q.S=null,q.kb=function(){if(this.da){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-i):(this.S&&(this.g.clearTimeout(this.S),this.S=null),$t(this,"tick"),this.da&&(Gc(this),this.start()))}},q.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},q.M=function(){na.Z.M.call(this),Gc(this),delete this.g};var mI=function(i){function e(t,s){var a=i.call(this)||this;return a.m=t,a.j=s,a.h=null,a.i=!1,a.g=null,a}return function(i,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function t(){this.constructor=i}_c(i,e),i.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}(e,i),e.prototype.l=function(t){this.h=arguments,this.g?this.i=!0:Kp(this)},e.prototype.M=function(){i.prototype.M.call(this),this.g&&(nt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},e}(Nn);function co(i){Nn.call(this),this.h=i,this.g={}}Xt(co,Nn);var Jp=[];function Qp(i,e,t,s){Array.isArray(t)||(t&&(Jp[0]=t.toString()),t=Jp);for(var a=0;a<t.length;a++){var c=Up(e,t[a],s||i.handleEvent,!1,i.h||i);if(!c)break;i.g[c.key]=c}}function Wp(i){Tc(i.g,function(e,t){this.g.hasOwnProperty(t)&&Fc(e)},i),i.g={}}function ia(){this.g=!0}function $i(i,e,t,s){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var s=t[i];if(!(2>s.length)){var a=s[1];if(Array.isArray(a)&&!(1>a.length)){var c=a[0];if("noop"!=c&&"stop"!=c&&"close"!=c)for(var d=1;d<a.length;d++)a[d]=""}}}return qc(t)}catch(p){return e}}(i,t)+(s?" "+s:"")})}co.prototype.M=function(){co.Z.M.call(this),Wp(this)},co.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ia.prototype.Aa=function(){this.g=!1},ia.prototype.info=function(){};var ai={},Xp=null;function ra(){return Xp=Xp||new zt}function $p(i){re.call(this,ai.Ma,i)}function lo(i){var e=ra();$t(e,new $p(e,i))}function tm(i,e){re.call(this,ai.STAT_EVENT,i),this.stat=e}function de(i){var e=ra();$t(e,new tm(e,i))}function em(i,e){re.call(this,ai.Na,i),this.size=e}function ho(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return nt.setTimeout(function(){i()},e)}ai.Ma="serverreachability",Xt($p,re),ai.STAT_EVENT="statevent",Xt(tm,re),ai.Na="timingevent",Xt(em,re);var oa={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},nm={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function zc(){}function rm(){}zc.prototype.h=null;var Jc,fo={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Zc(){re.call(this,"d")}function Kc(){re.call(this,"c")}function sa(){}function po(i,e,t,s){this.l=i,this.j=e,this.m=t,this.X=s||1,this.V=new co(this),this.P=wI,this.W=new na(i=Dc?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new om}function om(){this.i=null,this.g="",this.h=!1}Xt(Zc,re),Xt(Kc,re),Xt(sa,zc),sa.prototype.g=function(){return new XMLHttpRequest},sa.prototype.i=function(){return{}},Jc=new sa;var wI=45e3,Qc={},aa={};function Wc(i,e,t){i.K=1,i.v=da(gn(e)),i.s=t,i.U=!0,sm(i,null)}function sm(i,e){i.F=Date.now(),mo(i),i.A=gn(i.v);var t=i.A,s=i.X;Array.isArray(s)||(s=[String(s)]),mm(t.h,"t",s),i.C=0,t=i.l.H,i.h=new om,i.g=Vm(i.l,t?e:null,!i.s),0<i.O&&(i.L=new mI(Wt(i.Ia,i,i.g),i.O)),Qp(i.V,i.g,"readystatechange",i.gb),e=i.H?Np(i.H):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.ea(i.A,i.u,i.s,e)):(i.u="GET",i.g.ea(i.A,i.u,null,e)),lo(1),function(i,e,t,s,a,c){i.info(function(){if(i.g)if(c)for(var d="",p=c.split("&"),m=0;m<p.length;m++){var v=p[m].split("=");if(1<v.length){var _=v[0];v=v[1];var b=_.split("_");d=2<=b.length&&"type"==b[1]?d+(_+"=")+v+"&":d+(_+"=redacted&")}}else d=null;else d=c;return"XMLHTTP REQ ("+s+") [attempt "+a+"]: "+e+"\n"+t+"\n"+d})}(i.j,i.u,i.A,i.m,i.X,i.s)}function am(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Ba}function um(i,e,t){for(var a,s=!0;!i.I&&i.C<t.length;){if((a=bI(i,t))==aa){4==e&&(i.o=4,de(14),s=!1),$i(i.j,i.m,null,"[Incomplete Response]");break}if(a==Qc){i.o=4,de(15),$i(i.j,i.m,t,"[Invalid Chunk]"),s=!1;break}$i(i.j,i.m,a,null),Xc(i,a)}am(i)&&a!=aa&&a!=Qc&&(i.h.g="",i.C=0),4!=e||0!=t.length||i.h.h||(i.o=1,de(16),s=!1),i.i=i.i&&s,s?0<t.length&&!i.aa&&(i.aa=!0,(e=i.l).g==i&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),cl(e),e.L=!0,de(11))):($i(i.j,i.m,t,"[Invalid Chunked Response]"),ui(i),go(i))}function bI(i,e){var t=i.C,s=e.indexOf("\n",t);return-1==s?aa:(t=Number(e.substring(t,s)),isNaN(t)?Qc:(s+=1)+t>e.length?aa:(e=e.substr(s,t),i.C=s+t,e))}function mo(i){i.Y=Date.now()+i.P,cm(i,i.P)}function cm(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=ho(Wt(i.eb,i),e)}function ua(i){i.B&&(nt.clearTimeout(i.B),i.B=null)}function go(i){0==i.l.G||i.I||Nm(i.l,i)}function ui(i){ua(i);var e=i.L;e&&"function"==typeof e.na&&e.na(),i.L=null,Gc(i.W),Wp(i.V),i.g&&(e=i.g,i.g=null,e.abort(),e.na())}function Xc(i,e){try{var t=i.l;if(0!=t.G&&(t.g==i||el(t.i,i)))if(t.I=i.N,!i.J&&el(t.i,i)&&3==t.G){try{var s=t.Ca.g.parse(e)}catch(M){s=null}if(Array.isArray(s)&&3==s.length){var a=s;if(0==a[0])t:if(t.u)t.ta=a[1],0<t.ta-t.U&&37500>a[2]&&t.N&&0==t.A&&!t.v&&(t.v=ho(Wt(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<i.F))break t;ya(t),ga(t)}ul(t),de(18)}if(1>=ym(t.i)&&t.ka){try{t.ka()}catch(M){}t.ka=void 0}}else hi(t,11)}else if((i.J||t.g==i)&&ya(t),!Ws(e))for(a=t.Ca.g.parse(e),e=0;e<a.length;e++){var c=a[e];if(t.U=c[0],c=c[1],2==t.G)if("c"==c[0]){t.J=c[1],t.la=c[2];var d=c[3];null!=d&&(t.ma=d,t.h.info("VER="+t.ma));var p=c[4];null!=p&&(t.za=p,t.h.info("SVER="+t.za));var m=c[5];null!=m&&"number"==typeof m&&0<m&&(t.K=s=1.5*m,t.h.info("backChannelRequestTimeoutMs_="+s)),s=t;var v=i.g;if(v){var _=v.g?v.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_){var b=s.i;!b.g&&(le(_,"spdy")||le(_,"quic")||le(_,"h2"))&&(b.j=b.l,b.g=new Set,b.h&&(nl(b,b.h),b.h=null))}if(s.D){var I=v.g?v.g.getResponseHeader("X-HTTP-Session-Id"):null;I&&(s.sa=I,It(s.F,s.D,I))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-i.F,t.h.info("Handshake RTT: "+t.O+"ms"));var k=i;if((s=t).oa=Lm(s,s.H?s.la:null,s.W),k.J){_m(s.i,k);var T=k,E=s.K;E&&T.setTimeout(E),T.B&&(ua(T),mo(T)),s.g=k}else Om(s);0<t.l.length&&va(t)}else"stop"!=c[0]&&"close"!=c[0]||hi(t,7);else 3==t.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?hi(t,7):sl(t):"noop"!=c[0]&&t.j&&t.j.wa(c),t.A=0)}lo(4)}catch(M){}}function $c(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(bc(i)||"string"==typeof i)Ap(i,e,void 0);else{if(i.T&&"function"==typeof i.T)var t=i.T();else if(i.R&&"function"==typeof i.R)t=void 0;else if(bc(i)||"string"==typeof i){t=[];for(var s=i.length,a=0;a<s;a++)t.push(a)}else for(a in t=[],s=0,i)t[s++]=a;a=(s=function(i){if(i.R&&"function"==typeof i.R)return i.R();if("string"==typeof i)return i.split("");if(bc(i)){for(var e=[],t=i.length,s=0;s<t;s++)e.push(i[s]);return e}for(s in e=[],t=0,i)e[t++]=i[s];return e}(i)).length;for(var c=0;c<a;c++)e.call(void 0,s[c],t&&t[c],i)}}function tr(i,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var s=0;s<t;s+=2)this.set(arguments[s],arguments[s+1])}else if(i)if(i instanceof tr)for(t=i.T(),s=0;s<t.length;s++)this.set(t[s],i.get(t[s]));else for(s in i)this.set(s,i[s])}function tl(i){if(i.i!=i.g.length){for(var e=0,t=0;e<i.g.length;){var s=i.g[e];ci(i.h,s)&&(i.g[t++]=s),e++}i.g.length=t}if(i.i!=i.g.length){var a={};for(t=e=0;e<i.g.length;)ci(a,s=i.g[e])||(i.g[t++]=s,a[s]=1),e++;i.g.length=t}}function ci(i,e){return Object.prototype.hasOwnProperty.call(i,e)}(q=po.prototype).setTimeout=function(i){this.P=i},q.gb=function(i){i=i.target;var e=this.L;e&&3==vn(i)?e.l():this.Ia(i)},q.Ia=function(i){try{if(i==this.g)t:{var e=vn(this.g),t=this.g.Da(),s=this.g.ba();if(!(3>e)&&(3!=e||Dc||this.g&&(this.h.h||this.g.ga()||Dm(this.g)))){this.I||4!=e||7==t||lo(8==t||0>=s?3:2),ua(this);var a=this.g.ba();this.N=a;e:if(am(this)){var c=Dm(this.g);i="";var d=c.length,p=4==vn(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){ui(this),go(this);var m="";break e}this.h.i=new nt.TextDecoder}for(t=0;t<d;t++)this.h.h=!0,i+=this.h.i.decode(c[t],{stream:p&&t==d-1});c.splice(0,d),this.h.g+=i,this.C=0,m=this.h.g}else m=this.g.ga();if(this.i=200==a,function(i,e,t,s,a,c,d){i.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+a+"]: "+e+"\n"+t+"\n"+c+" "+d})}(this.j,this.u,this.A,this.m,this.X,e,a),this.i){if(this.$&&!this.J){e:{if(this.g){var v,_=this.g;if((v=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ws(v)){var b=v;break e}}b=null}if(!(a=b)){this.i=!1,this.o=3,de(12),ui(this),go(this);break t}$i(this.j,this.m,a,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Xc(this,a)}this.U?(um(this,e,m),Dc&&this.i&&3==e&&(Qp(this.V,this.W,"tick",this.fb),this.W.start())):($i(this.j,this.m,m,null),Xc(this,m)),4==e&&ui(this),this.i&&!this.I&&(4==e?Nm(this.l,this):(this.i=!1,mo(this)))}else 400==a&&0<m.indexOf("Unknown SID")?(this.o=3,de(12)):(this.o=0,de(13)),ui(this),go(this)}}}catch(I){}},q.fb=function(){if(this.g){var i=vn(this.g),e=this.g.ga();this.C<e.length&&(ua(this),um(this,i,e),this.i&&4!=i&&mo(this))}},q.cancel=function(){this.I=!0,ui(this)},q.eb=function(){this.B=null;var i=Date.now();0<=i-this.Y?(function(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(lo(3),de(17)),ui(this),this.o=2,go(this)):cm(this,this.Y-i)},(q=tr.prototype).R=function(){tl(this);for(var i=[],e=0;e<this.g.length;e++)i.push(this.h[this.g[e]]);return i},q.T=function(){return tl(this),this.g.concat()},q.get=function(i,e){return ci(this.h,i)?this.h[i]:e},q.set=function(i,e){ci(this.h,i)||(this.i++,this.g.push(i)),this.h[i]=e},q.forEach=function(i,e){for(var t=this.T(),s=0;s<t.length;s++){var a=t[s],c=this.get(a);i.call(e,c,a,this)}};var lm=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function li(i,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,i instanceof li){this.g=void 0!==e?e:i.g,ca(this,i.j),this.s=i.s,la(this,i.i),ha(this,i.m),this.l=i.l,e=i.h;var t=new _o;t.i=e.i,e.g&&(t.g=new tr(e.g),t.h=e.h),hm(this,t),this.o=i.o}else i&&(t=String(i).match(lm))?(this.g=!!e,ca(this,t[1]||"",!0),this.s=vo(t[2]||""),la(this,t[3]||"",!0),ha(this,t[4]),this.l=vo(t[5]||"",!0),hm(this,t[6]||"",!0),this.o=vo(t[7]||"")):(this.g=!!e,this.h=new _o(null,this.g))}function gn(i){return new li(i)}function ca(i,e,t){i.j=t?vo(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function la(i,e,t){i.i=t?vo(e,!0):e}function ha(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function hm(i,e,t){e instanceof _o?(i.h=e,function(i,e){e&&!i.j&&(Pn(i),i.i=null,i.g.forEach(function(t,s){var a=s.toLowerCase();s!=a&&(fm(this,s),mm(this,a,t))},i)),i.j=e}(i.h,i.g)):(t||(e=yo(e,AI)),i.h=new _o(e,i.g))}function It(i,e,t){i.h.set(e,t)}function da(i){return It(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function vo(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function yo(i,e,t){return"string"==typeof i?(i=encodeURI(i).replace(e,kI),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function kI(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}li.prototype.toString=function(){var i=[],e=this.j;e&&i.push(yo(e,dm,!0),":");var t=this.i;return(t||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(yo(e,dm,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&i.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&i.push("/"),i.push(yo(t,"/"==t.charAt(0)?EI:DI,!0))),(t=this.h.toString())&&i.push("?",t),(t=this.o)&&i.push("#",yo(t,xI)),i.join("")};var dm=/[#\/\?@]/g,DI=/[#\?:]/g,EI=/[#\?]/g,AI=/[#\?@]/g,xI=/#/g;function _o(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function Pn(i){i.g||(i.g=new tr,i.h=0,i.i&&function(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var s=i[t].indexOf("="),a=null;if(0<=s){var c=i[t].substring(0,s);a=i[t].substring(s+1)}else c=i[t];e(c,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function fm(i,e){Pn(i),e=er(i,e),ci(i.g.h,e)&&(i.i=null,i.h-=i.g.get(e).length,ci((i=i.g).h,e)&&(delete i.h[e],i.i--,i.g.length>2*i.i&&tl(i)))}function pm(i,e){return Pn(i),e=er(i,e),ci(i.g.h,e)}function mm(i,e,t){fm(i,e),0<t.length&&(i.i=null,i.g.set(er(i,e),Ic(t)),i.h+=t.length)}function er(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}(q=_o.prototype).add=function(i,e){Pn(this),this.i=null,i=er(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this},q.forEach=function(i,e){Pn(this),this.g.forEach(function(t,s){Ap(t,function(a){i.call(e,a,s,this)},this)},this)},q.T=function(){Pn(this);for(var i=this.g.R(),e=this.g.T(),t=[],s=0;s<e.length;s++)for(var a=i[s],c=0;c<a.length;c++)t.push(e[s]);return t},q.R=function(i){Pn(this);var e=[];if("string"==typeof i)pm(this,i)&&(e=xp(e,this.g.get(er(this,i))));else{i=this.g.R();for(var t=0;t<i.length;t++)e=xp(e,i[t])}return e},q.set=function(i,e){return Pn(this),this.i=null,pm(this,i=er(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},q.get=function(i,e){return i&&0<(i=this.R(i)).length?String(i[0]):e},q.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var i=[],e=this.g.T(),t=0;t<e.length;t++){var s=e[t],a=encodeURIComponent(String(s));s=this.R(s);for(var c=0;c<s.length;c++){var d=a;""!==s[c]&&(d+="="+encodeURIComponent(String(s[c]))),i.push(d)}}return this.i=i.join("&")};var OI=function(e,t){this.h=e,this.g=t};function gm(i){this.l=i||RI,i=nt.PerformanceNavigationTiming?0<(i=nt.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(nt.g&&nt.g.Ea&&nt.g.Ea()&&nt.g.Ea().Zb),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var RI=10;function vm(i){return!!i.h||!!i.g&&i.g.size>=i.j}function ym(i){return i.h?1:i.g?i.g.size:0}function el(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function nl(i,e){i.g?i.g.add(e):i.h=e}function _m(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function wm(i){var e,t;if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){var s=i.i;try{for(var a=Dp(i.g.values()),c=a.next();!c.done;c=a.next())s=s.concat(c.value.D)}catch(p){e={error:p}}finally{try{c&&!c.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return s}return Ic(i.i)}function il(){}function NI(){this.g=new il}function PI(i,e,t){var s=t||"";try{$c(i,function(a,c){var d=a;so(a)&&(d=qc(a)),e.push(s+c+"="+encodeURIComponent(d))})}catch(a){throw e.push(s+"type="+encodeURIComponent("_badmap")),a}}function fa(i,e,t,s,a){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,a(s)}catch(c){}}function wo(i){this.l=i.$b||null,this.j=i.ib||!1}function pa(i,e){zt.call(this),this.D=i,this.u=e,this.m=void 0,this.readyState=rl,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}gm.prototype.cancel=function(){var i,e;if(this.i=wm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var t=Dp(this.g.values()),s=t.next();!s.done;s=t.next())s.value.cancel()}catch(c){i={error:c}}finally{try{s&&!s.done&&(e=t.return)&&e.call(t)}finally{if(i)throw i.error}}this.g.clear()}},il.prototype.stringify=function(i){return nt.JSON.stringify(i,void 0)},il.prototype.parse=function(i){return nt.JSON.parse(i,void 0)},Xt(wo,zc),wo.prototype.g=function(){return new pa(this.l,this.j)},wo.prototype.i=function(i){return function(){return i}}({}),Xt(pa,zt);var rl=0;function bm(i){i.j.read().then(i.Sa.bind(i)).catch(i.ha.bind(i))}function bo(i){i.readyState=4,i.l=null,i.j=null,i.A=null,So(i)}function So(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(q=pa.prototype).open=function(i,e){if(this.readyState!=rl)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,So(this)},q.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.D||nt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},q.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,bo(this)),this.readyState=rl},q.Va=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,So(this)),this.g&&(this.readyState=3,So(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==nt.ReadableStream&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;bm(this)}else i.text().then(this.Ua.bind(this),this.ha.bind(this))},q.Sa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?bo(this):So(this),3==this.readyState&&bm(this)}},q.Ua=function(i){this.g&&(this.response=this.responseText=i,bo(this))},q.Ta=function(i){this.g&&(this.response=i,bo(this))},q.ha=function(){this.g&&bo(this)},q.setRequestHeader=function(i,e){this.v.append(i,e)},q.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},q.getAllResponseHeaders=function(){if(!this.h)return"";for(var i=[],e=this.h.entries(),t=e.next();!t.done;)i.push((t=t.value)[0]+": "+t[1]),t=e.next();return i.join("\r\n")},Object.defineProperty(pa.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var LI=nt.JSON.parse;function Lt(i){zt.call(this),this.headers=new tr,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Sm,this.K=this.L=!1}Xt(Lt,zt);var Sm="",VI=/^https?$/i,BI=["POST","PUT"];function UI(i){return"content-type"==i.toLowerCase()}function Im(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,Cm(i),ma(i)}function Cm(i){i.D||(i.D=!0,$t(i,"complete"),$t(i,"error"))}function Tm(i){if(i.h&&void 0!==wc&&(!i.C[1]||4!=vn(i)||2!=i.ba()))if(i.v&&4==vn(i))Hc(i.Fa,0,i);else if($t(i,"readystatechange"),4==vn(i)){i.h=!1;try{var s,e=i.ba();t:switch(e){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break t;default:t=!1}if(!(s=t)){var a;if(a=0===e){var c=String(i.H).match(lm)[1]||null;if(!c&&nt.self&&nt.self.location){var d=nt.self.location.protocol;c=d.substr(0,d.length-1)}a=!VI.test(c?c.toLowerCase():"")}s=a}if(s)$t(i,"complete"),$t(i,"success");else{i.m=6;try{var p=2<vn(i)?i.g.statusText:""}catch(m){p=""}i.j=p+" ["+i.ba()+"]",Cm(i)}}finally{ma(i)}}}function ma(i,e){if(i.g){km(i);var t=i.g,s=i.C[0]?Js:null;i.g=null,i.C=null,e||$t(i,"ready");try{t.onreadystatechange=s}catch(a){}}}function km(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(nt.clearTimeout(i.A),i.A=null)}function vn(i){return i.g?i.g.readyState:0}function Dm(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case Sm:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch(e){return null}}function ol(i,e,t){t:{for(s in t){var s=!1;break t}s=!0}s||(t=function(i){var e="";return Tc(i,function(t,s){e+=s,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof i?null!=t&&encodeURIComponent(String(t)):It(i,e,t))}function Io(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function Em(i){this.za=0,this.l=[],this.h=new ia,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Io("failFast",!1,i),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Io("baseRetryDelayMs",5e3,i),this.$a=Io("retryDelaySeedMs",1e4,i),this.Ya=Io("forwardChannelMaxRetries",2,i),this.ra=Io("forwardChannelRequestTimeoutMs",2e4,i),this.qa=i&&i.xmlHttpFactory||void 0,this.Ba=i&&i.Yb||!1,this.K=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.J="",this.i=new gm(i&&i.concurrentRequestLimit),this.Ca=new NI,this.ja=i&&i.fastHandshake||!1,this.Ra=i&&i.Wb||!1,i&&i.Aa&&this.h.Aa(),i&&i.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&i&&i.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!i||!1!==i.Xb}function sl(i){if(Am(i),3==i.G){var e=i.V++,t=gn(i.F);It(t,"SID",i.J),It(t,"RID",e),It(t,"TYPE","terminate"),Co(i,t),(e=new po(i,i.h,e,void 0)).K=2,e.v=da(gn(t)),t=!1,nt.navigator&&nt.navigator.sendBeacon&&(t=nt.navigator.sendBeacon(e.v.toString(),"")),!t&&nt.Image&&((new Image).src=e.v,t=!0),t||(e.g=Vm(e.l,null),e.g.ea(e.v)),e.F=Date.now(),mo(e)}Fm(i)}function ga(i){i.g&&(cl(i),i.g.cancel(),i.g=null)}function Am(i){ga(i),i.u&&(nt.clearTimeout(i.u),i.u=null),ya(i),i.i.cancel(),i.m&&("number"==typeof i.m&&nt.clearTimeout(i.m),i.m=null)}function al(i,e){i.l.push(new OI(i.Za++,e)),3==i.G&&va(i)}function va(i){vm(i.i)||i.m||(i.m=!0,Uc(i.Ha,i),i.C=0)}function xm(i,e){var t;t=e?e.m:i.V++;var s=gn(i.F);It(s,"SID",i.J),It(s,"RID",t),It(s,"AID",i.U),Co(i,s),i.o&&i.s&&ol(s,i.o,i.s),t=new po(i,i.h,t,i.C+1),null===i.o&&(t.H=i.s),e&&(i.l=e.D.concat(i.l)),e=Mm(i,t,1e3),t.setTimeout(Math.round(.5*i.ra)+Math.round(.5*i.ra*Math.random())),nl(i.i,t),Wc(t,s,e)}function Co(i,e){i.j&&$c({},function(t,s){It(e,s,t)})}function Mm(i,e,t){t=Math.min(i.l.length,t);var s=i.j?Wt(i.j.Oa,i.j,i):null;t:for(var a=i.l,c=-1;;){var d=["count="+t];-1==c?0<t?d.push("ofs="+(c=a[0].h)):c=0:d.push("ofs="+c);for(var p=!0,m=0;m<t;m++){var v=a[m].h,_=a[m].g;if(0>(v-=c))c=Math.max(0,a[m].h-100),p=!1;else try{PI(_,d,"req"+v+"_")}catch(b){s&&s(_)}}if(p){s=d.join("&");break t}}return i=i.l.splice(0,t),e.D=i,s}function Om(i){i.g||i.u||(i.Y=1,Uc(i.Ga,i),i.A=0)}function ul(i){return!(i.g||i.u||3<=i.A||(i.Y++,i.u=ho(Wt(i.Ga,i),Pm(i,i.A)),i.A++,0))}function cl(i){null!=i.B&&(nt.clearTimeout(i.B),i.B=null)}function Rm(i){i.g=new po(i,i.h,"rpc",i.Y),null===i.o&&(i.g.H=i.s),i.g.O=0;var e=gn(i.oa);It(e,"RID","rpc"),It(e,"SID",i.J),It(e,"CI",i.N?"0":"1"),It(e,"AID",i.U),Co(i,e),It(e,"TYPE","xmlhttp"),i.o&&i.s&&ol(e,i.o,i.s),i.K&&i.g.setTimeout(i.K);var t=i.g;i=i.la,t.K=1,t.v=da(gn(e)),t.s=null,t.U=!0,sm(t,i)}function ya(i){null!=i.v&&(nt.clearTimeout(i.v),i.v=null)}function Nm(i,e){var t=null;if(i.g==e){ya(i),cl(i),i.g=null;var s=2}else{if(!el(i.i,e))return;t=e.D,_m(i.i,e),s=1}if(i.I=e.N,0!=i.G)if(e.i)if(1==s){t=e.s?e.s.length:0,e=Date.now()-e.F;var a=i.C;$t(s=ra(),new em(s,t,e,a)),va(i)}else Om(i);else if(3==(a=e.o)||0==a&&0<i.I||!(1==s&&function(i,e){return!(ym(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.l=e.D.concat(i.l),0):1==i.G||2==i.G||i.C>=(i.Xa?0:i.Ya)||(i.m=ho(Wt(i.Ha,i,e),Pm(i,i.C)),i.C++,0)))}(i,e)||2==s&&ul(i)))switch(t&&0<t.length&&(e=i.i,e.i=e.i.concat(t)),a){case 1:hi(i,5);break;case 4:hi(i,10);break;case 3:hi(i,6);break;default:hi(i,2)}}function Pm(i,e){var t=i.Pa+Math.floor(Math.random()*i.$a);return i.j||(t*=2),t*e}function hi(i,e){if(i.h.info("Error code "+e),2==e){var t=null;i.j&&(t=null);var s=Wt(i.jb,i);t||(t=new li("//www.google.com/images/cleardot.gif"),nt.location&&"http"==nt.location.protocol||ca(t,"https"),da(t)),function(i,e){var t=new ia;if(nt.Image){var s=new Image;s.onload=Qs(fa,t,s,"TestLoadImage: loaded",!0,e),s.onerror=Qs(fa,t,s,"TestLoadImage: error",!1,e),s.onabort=Qs(fa,t,s,"TestLoadImage: abort",!1,e),s.ontimeout=Qs(fa,t,s,"TestLoadImage: timeout",!1,e),nt.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=i}else e(!1)}(t.toString(),s)}else de(2);i.G=0,i.j&&i.j.va(e),Fm(i),Am(i)}function Fm(i){i.G=0,i.I=-1,i.j&&((0!=wm(i.i).length||0!=i.l.length)&&(i.i.i.length=0,Ic(i.l),i.l.length=0),i.j.ua())}function Lm(i,e,t){var s=function(i){return i instanceof li?gn(i):new li(i,void 0)}(t);if(""!=s.i)e&&la(s,e+"."+s.i),ha(s,s.m);else{var a=nt.location;s=function(i,e,t,s){var a=new li(null,void 0);return i&&ca(a,i),e&&la(a,e),t&&ha(a,t),s&&(a.l=s),a}(a.protocol,e?e+"."+a.hostname:a.hostname,+a.port,t)}return i.aa&&Tc(i.aa,function(c,d){It(s,d,c)}),t=i.sa,(e=i.D)&&t&&It(s,e,t),It(s,"VER",i.ma),Co(i,s),s}function Vm(i,e,t){if(e&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Lt(t&&i.Ba&&!i.qa?new wo({ib:!0}):i.qa)).L=i.H,e}function Bm(){}function _a(){if(Xi&&!(10<=Number(nI)))throw Error("Environmental error: no available transport.")}function De(i,e){zt.call(this),this.g=new Em(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(i?i["X-WebChannel-Client-Profile"]=e.ya:i={"X-WebChannel-Client-Profile":e.ya}),this.g.P=i,(i=e&&e.httpHeadersOverwriteParam)&&!Ws(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ws(e)&&(this.g.D=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new nr(this)}function qm(i){Zc.call(this);var e=i.__sm__;if(e){t:{for(var t in e){i=t;break t}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function Um(){Kc.call(this),this.status=1}function nr(i){this.g=i}(q=Lt.prototype).ea=function(i,e,t,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);e=e?e.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Jc.g(),this.C=function(i){return i.h||(i.h=i.i())}(this.u?this.u:Jc),this.g.onreadystatechange=Wt(this.Fa,this);try{this.F=!0,this.g.open(e,String(i),!0),this.F=!1}catch(c){return void Im(this,c)}i=t||"";var a=new tr(this.headers);s&&$c(s,function(c,d){a.set(d,c)}),s=function(i){t:{for(var e=UI,t=i.length,s="string"==typeof i?i.split(""):i,a=0;a<t;a++)if(a in s&&e.call(void 0,s[a],a,i)){e=a;break t}e=-1}return 0>e?null:"string"==typeof i?i.charAt(e):i[e]}(a.T()),t=nt.FormData&&i instanceof nt.FormData,!(0<=Ep(BI,e))||s||t||a.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),a.forEach(function(c,d){this.g.setRequestHeader(d,c)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{km(this),0<this.B&&((this.K=function(i){return Xi&&eI()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Wt(this.pa,this)):this.A=Hc(this.pa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(c){Im(this,c)}},q.pa=function(){void 0!==wc&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,$t(this,"timeout"),this.abort(8))},q.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,$t(this,"complete"),$t(this,"abort"),ma(this))},q.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ma(this,!0)),Lt.Z.M.call(this)},q.Fa=function(){this.s||(this.F||this.v||this.l?Tm(this):this.cb())},q.cb=function(){Tm(this)},q.ba=function(){try{return 2<vn(this)?this.g.status:-1}catch(i){return-1}},q.ga=function(){try{return this.g?this.g.responseText:""}catch(i){return""}},q.Qa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),LI(e)}},q.Da=function(){return this.m},q.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(q=Em.prototype).ma=8,q.G=1,q.hb=function(i){try{this.h.info("Origin Trials invoked: "+i)}catch(e){}},q.Ha=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.V=Math.floor(1e5*Math.random()),i=this.V++;var e=new po(this,this.h,i,void 0),t=this.s;if(this.P&&(t?Fp(t=Np(t),this.P):t=this.P),null===this.o&&(e.H=t),this.ja)t:{for(var s=0,a=0;a<this.l.length;a++){var c=this.l[a];if(void 0===(c="__data__"in c.g&&"string"==typeof(c=c.g.__data__)?c.length:void 0))break;if(4096<(s+=c)){s=a;break t}if(4096===s||a===this.l.length-1){s=a+1;break t}}s=1e3}else s=1e3;s=Mm(this,e,s),It(a=gn(this.F),"RID",i),It(a,"CVER",22),this.D&&It(a,"X-HTTP-Session-Id",this.D),Co(this,a),this.o&&t&&ol(a,this.o,t),nl(this.i,e),this.Ra&&It(a,"TYPE","init"),this.ja?(It(a,"$req",s),It(a,"SID","null"),e.$=!0,Wc(e,a,null)):Wc(e,a,s),this.G=2}}else 3==this.G&&(i?xm(this,i):0==this.l.length||vm(this.i)||xm(this))},q.Ga=function(){if(this.u=null,Rm(this),this.$&&!(this.L||null==this.g||0>=this.O)){var i=2*this.O;this.h.info("BP detection timer enabled: "+i),this.B=ho(Wt(this.bb,this),i)}},q.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,de(10),ga(this),Rm(this))},q.ab=function(){null!=this.v&&(this.v=null,ga(this),ul(this),de(19))},q.jb=function(i){i?(this.h.info("Successfully pinged google.com"),de(2)):(this.h.info("Failed to ping google.com"),de(1))},(q=Bm.prototype).xa=function(){},q.wa=function(){},q.va=function(){},q.ua=function(){},q.Oa=function(){},_a.prototype.g=function(i,e){return new De(i,e)},Xt(De,zt),De.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var i=this.g,e=this.l,t=this.h||void 0;i.Wa&&(i.h.info("Origin Trials enabled."),Uc(Wt(i.hb,i,e))),de(0),i.W=e,i.aa=t||{},i.N=i.X,i.F=Lm(i,null,i.W),va(i)},De.prototype.close=function(){sl(this.g)},De.prototype.u=function(i){if("string"==typeof i){var e={};e.__data__=i,al(this.g,e)}else this.v?((e={}).__data__=qc(i),al(this.g,e)):al(this.g,i)},De.prototype.M=function(){this.g.j=null,delete this.j,sl(this.g),delete this.g,De.Z.M.call(this)},Xt(qm,Zc),Xt(Um,Kc),Xt(nr,Bm),nr.prototype.xa=function(){$t(this.g,"a")},nr.prototype.wa=function(i){$t(this.g,new qm(i))},nr.prototype.va=function(i){$t(this.g,new Um(i))},nr.prototype.ua=function(){$t(this.g,"b")},_a.prototype.createWebChannel=_a.prototype.g,De.prototype.send=De.prototype.u,De.prototype.open=De.prototype.m,De.prototype.close=De.prototype.close,oa.NO_ERROR=0,oa.TIMEOUT=8,oa.HTTP_ERROR=6,nm.COMPLETE="complete",rm.EventType=fo,fo.OPEN="a",fo.CLOSE="b",fo.ERROR="c",fo.MESSAGE="d",zt.prototype.listen=zt.prototype.N,Lt.prototype.listenOnce=Lt.prototype.O,Lt.prototype.getLastError=Lt.prototype.La,Lt.prototype.getLastErrorCode=Lt.prototype.Da,Lt.prototype.getStatus=Lt.prototype.ba,Lt.prototype.getResponseJson=Lt.prototype.Qa,Lt.prototype.getResponseText=Lt.prototype.ga,Lt.prototype.send=Lt.prototype.ea;var wa=oa,Gm=nm,Hm=ai,ll_PROXY=10,ll_NOPROXY=11,zm=wo,To=rm,Zm=Lt,Ee=function(){function i(e,t){var s=this;this.previousValue=e,t&&(t.sequenceNumberHandler=function(a){return s.t(a)},this.i=function(a){return t.writeSequenceNumber(a)})}return i.prototype.t=function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue},i.prototype.next=function(){var e=++this.previousValue;return this.i&&this.i(e),e},i}();Ee.o=-1;var A={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},R=function(i){function e(t,s){var a=this;return(a=i.call(this,s)||this).code=t,a.message=s,a.name="FirebaseError",a.toString=function(){return a.name+": [code="+a.code+"]: "+a.message},a}return(0,S.ZT)(e,i),e}(Error),He=new si.Yd("@firebase/firestore");function hl(){return He.logLevel}function P(i){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];if(He.logLevel<=si.in.DEBUG){var s=e.map(dl);He.debug.apply(He,(0,S.ev)(["Firestore (8.10.0): "+i],s))}}function Vt(i){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];if(He.logLevel<=si.in.ERROR){var s=e.map(dl);He.error.apply(He,(0,S.ev)(["Firestore (8.10.0): "+i],s))}}function ko(i){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];if(He.logLevel<=si.in.WARN){var s=e.map(dl);He.warn.apply(He,(0,S.ev)(["Firestore (8.10.0): "+i],s))}}function dl(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch(t){return i}}function G(i){void 0===i&&(i="Unexpected state");var e="FIRESTORE (8.10.0) INTERNAL ASSERTION FAILED: "+i;throw Vt(e),new Error(e)}function $(i,e){i||G()}function V(i,e){return i}function GI(i){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(var s=0;s<i;s++)t[s]=Math.floor(256*Math.random());return t}var Km=function(){function i(){}return i.u=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,s="";s.length<20;)for(var a=GI(40),c=0;c<a.length;++c)s.length<20&&a[c]<t&&(s+=e.charAt(a[c]%e.length));return s},i}();function ct(i,e){return i<e?-1:i>e?1:0}function ir(i,e,t){return i.length===e.length&&i.every(function(s,a){return t(s,e[a])})}function Jm(i){return i+"\0"}var ve=function(){function i(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new R(A.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new R(A.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new R(A.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new R(A.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}return i.now=function(){return i.fromMillis(Date.now())},i.fromDate=function(e){return i.fromMillis(e.getTime())},i.fromMillis=function(e){var t=Math.floor(e/1e3);return new i(t,Math.floor(1e6*(e-1e3*t)))},i.prototype.toDate=function(){return new Date(this.toMillis())},i.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},i.prototype._compareTo=function(e){return this.seconds===e.seconds?ct(this.nanoseconds,e.nanoseconds):ct(this.seconds,e.seconds)},i.prototype.isEqual=function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds},i.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},i.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},i.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},i}(),st=function(){function i(e){this.timestamp=e}return i.fromTimestamp=function(e){return new i(e)},i.min=function(){return new i(new ve(0,0))},i.prototype.compareTo=function(e){return this.timestamp._compareTo(e.timestamp)},i.prototype.isEqual=function(e){return this.timestamp.isEqual(e.timestamp)},i.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},i.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},i.prototype.toTimestamp=function(){return this.timestamp},i}();function Qm(i){var e=0;for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function di(i,e){for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function Wm(i){for(var e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}var Xm=function(){function i(e,t,s){void 0===t?t=0:t>e.length&&G(),void 0===s?s=e.length-t:s>e.length-t&&G(),this.segments=e,this.offset=t,this.len=s}return Object.defineProperty(i.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),i.prototype.isEqual=function(e){return 0===i.comparator(this,e)},i.prototype.child=function(e){var t=this.segments.slice(this.offset,this.limit());return e instanceof i?e.forEach(function(s){t.push(s)}):t.push(e),this.construct(t)},i.prototype.limit=function(){return this.offset+this.length},i.prototype.popFirst=function(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)},i.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},i.prototype.firstSegment=function(){return this.segments[this.offset]},i.prototype.lastSegment=function(){return this.get(this.length-1)},i.prototype.get=function(e){return this.segments[this.offset+e]},i.prototype.isEmpty=function(){return 0===this.length},i.prototype.isPrefixOf=function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},i.prototype.isImmediateParentOf=function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},i.prototype.forEach=function(e){for(var t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])},i.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},i.comparator=function(e,t){for(var s=Math.min(e.length,t.length),a=0;a<s;a++){var c=e.get(a),d=t.get(a);if(c<d)return-1;if(c>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0},i}(),ft=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return(0,S.ZT)(e,i),e.prototype.construct=function(t,s,a){return new e(t,s,a)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];for(var a=[],c=0,d=t;c<d.length;c++){var p=d[c];if(p.indexOf("//")>=0)throw new R(A.INVALID_ARGUMENT,"Invalid segment ("+p+"). Paths must not contain // in them.");a.push.apply(a,p.split("/").filter(function(m){return m.length>0}))}return new e(a)},e.emptyPath=function(){return new e([])},e}(Xm),HI=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ze=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return(0,S.ZT)(e,i),e.prototype.construct=function(t,s,a){return new e(t,s,a)},e.isValidIdentifier=function(t){return HI.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var s=[],a="",c=0,d=function(){if(0===a.length)throw new R(A.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");s.push(a),a=""},p=!1;c<t.length;){var m=t[c];if("\\"===m){if(c+1===t.length)throw new R(A.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var v=t[c+1];if("\\"!==v&&"."!==v&&"`"!==v)throw new R(A.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);a+=v,c+=2}else"`"===m?(p=!p,c++):"."!==m||p?(a+=m,c++):(d(),c++)}if(d(),p)throw new R(A.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(s)},e.emptyPath=function(){return new e([])},e}(Xm),rr=function(){function i(e){this.fields=e,e.sort(ze.comparator)}return i.prototype.covers=function(e){for(var t=0,s=this.fields;t<s.length;t++)if(s[t].isPrefixOf(e))return!0;return!1},i.prototype.isEqual=function(e){return ir(this.fields,e.fields,function(t,s){return t.isEqual(s)})},i}(),fe=function(){function i(e){this.binaryString=e}return i.fromBase64String=function(e){return new i(atob(e))},i.fromUint8Array=function(e){return new i(function(t){for(var s="",a=0;a<t.length;++a)s+=String.fromCharCode(t[a]);return s}(e))},i.prototype.toBase64=function(){return btoa(this.binaryString)},i.prototype.toUint8Array=function(){return function(e){for(var t=new Uint8Array(e.length),s=0;s<e.length;s++)t[s]=e.charCodeAt(s);return t}(this.binaryString)},i.prototype.approximateByteSize=function(){return 2*this.binaryString.length},i.prototype.compareTo=function(e){return ct(this.binaryString,e.binaryString)},i.prototype.isEqual=function(e){return this.binaryString===e.binaryString},i}();fe.EMPTY_BYTE_STRING=new fe("");var zI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fn(i){if($(!!i),"string"==typeof i){var e=0,t=zI.exec(i);if($(!!t),t[1]){var s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}var a=new Date(i);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:Bt(i.seconds),nanos:Bt(i.nanos)}}function Bt(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function or(i){return"string"==typeof i?fe.fromBase64String(i):fe.fromUint8Array(i)}function fl(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==i?void 0:i.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function $m(i){var e=i.mapValue.fields.__previous_value__;return fl(e)?$m(e):e}function Do(i){var e=Fn(i.mapValue.fields.__local_write_time__.timestampValue);return new ve(e.seconds,e.nanos)}function fi(i){return null==i}function ba(i){return 0===i&&1/i==-1/0}function tg(i){return"number"==typeof i&&Number.isInteger(i)&&!ba(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}var H=function(){function i(e){this.path=e}return i.fromPath=function(e){return new i(ft.fromString(e))},i.fromName=function(e){return new i(ft.fromString(e).popFirst(5))},i.prototype.hasCollectionId=function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e},i.prototype.isEqual=function(e){return null!==e&&0===ft.comparator(this.path,e.path)},i.prototype.toString=function(){return this.path.toString()},i.comparator=function(e,t){return ft.comparator(e.path,t.path)},i.isDocumentKey=function(e){return e.length%2==0},i.fromSegments=function(e){return new i(new ft(e.slice()))},i}();function pi(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?fl(i)?4:10:G()}function en(i,e){var a,t=pi(i);if(t!==pi(e))return!1;switch(t){case 0:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Do(i).isEqual(Do(e));case 3:return function(s,a){if("string"==typeof s.timestampValue&&"string"==typeof a.timestampValue&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;var c=Fn(s.timestampValue),d=Fn(a.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return a=e,or(i.bytesValue).isEqual(or(a.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(s,a){return Bt(s.geoPointValue.latitude)===Bt(a.geoPointValue.latitude)&&Bt(s.geoPointValue.longitude)===Bt(a.geoPointValue.longitude)}(i,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return Bt(s.integerValue)===Bt(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){var c=Bt(s.doubleValue),d=Bt(a.doubleValue);return c===d?ba(c)===ba(d):isNaN(c)&&isNaN(d)}return!1}(i,e);case 9:return ir(i.arrayValue.values||[],e.arrayValue.values||[],en);case 10:return function(s,a){var c=s.mapValue.fields||{},d=a.mapValue.fields||{};if(Qm(c)!==Qm(d))return!1;for(var p in c)if(c.hasOwnProperty(p)&&(void 0===d[p]||!en(c[p],d[p])))return!1;return!0}(i,e);default:return G()}}function Eo(i,e){return void 0!==(i.values||[]).find(function(t){return en(t,e)})}function sr(i,e){var a,c,d,p,t=pi(i),s=pi(e);if(t!==s)return ct(t,s);switch(t){case 0:return 0;case 1:return ct(i.booleanValue,e.booleanValue);case 2:return c=e,(d=Bt((a=i).integerValue||a.doubleValue))<(p=Bt(c.integerValue||c.doubleValue))?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1;case 3:return eg(i.timestampValue,e.timestampValue);case 4:return eg(Do(i),Do(e));case 5:return ct(i.stringValue,e.stringValue);case 6:return function(a,c){var d=or(a),p=or(c);return d.compareTo(p)}(i.bytesValue,e.bytesValue);case 7:return function(a,c){for(var d=a.split("/"),p=c.split("/"),m=0;m<d.length&&m<p.length;m++){var v=ct(d[m],p[m]);if(0!==v)return v}return ct(d.length,p.length)}(i.referenceValue,e.referenceValue);case 8:return function(a,c){var d=ct(Bt(a.latitude),Bt(c.latitude));return 0!==d?d:ct(Bt(a.longitude),Bt(c.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(a,c){for(var d=a.values||[],p=c.values||[],m=0;m<d.length&&m<p.length;++m){var v=sr(d[m],p[m]);if(v)return v}return ct(d.length,p.length)}(i.arrayValue,e.arrayValue);case 10:return function(a,c){var d=a.fields||{},p=Object.keys(d),m=c.fields||{},v=Object.keys(m);p.sort(),v.sort();for(var _=0;_<p.length&&_<v.length;++_){var b=ct(p[_],v[_]);if(0!==b)return b;var I=sr(d[p[_]],m[v[_]]);if(0!==I)return I}return ct(p.length,v.length)}(i.mapValue,e.mapValue);default:throw G()}}function eg(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return ct(i,e);var t=Fn(i),s=Fn(e),a=ct(t.seconds,s.seconds);return 0!==a?a:ct(t.nanos,s.nanos)}function pl(i){return ml(i)}function ml(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?"time("+(a=Fn(i.timestampValue)).seconds+","+a.nanos+")":"stringValue"in i?i.stringValue:"bytesValue"in i?or(i.bytesValue).toBase64():"referenceValue"in i?H.fromName(i.referenceValue).toString():"geoPointValue"in i?"geo("+(e=i.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in i?function(s){for(var a="[",c=!0,d=0,p=s.values||[];d<p.length;d++)c?c=!1:a+=",",a+=ml(p[d]);return a+"]"}(i.arrayValue):"mapValue"in i?function(s){for(var a="{",c=!0,d=0,p=Object.keys(s.fields||{}).sort();d<p.length;d++){var m=p[d];c?c=!1:a+=",",a+=m+":"+ml(s.fields[m])}return a+"}"}(i.mapValue):G();var a,e}function Sa(i,e){return{referenceValue:"projects/"+i.projectId+"/databases/"+i.database+"/documents/"+e.path.canonicalString()}}function gl(i){return!!i&&"integerValue"in i}function vl(i){return!!i&&"arrayValue"in i}function ng(i){return!!i&&"nullValue"in i}function ig(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Ia(i){return!!i&&"mapValue"in i}function Ao(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){var e={mapValue:{fields:{}}};return di(i.mapValue.fields,function(a,c){return e.mapValue.fields[a]=Ao(c)}),e}if(i.arrayValue){for(var t={arrayValue:{values:[]}},s=0;s<(i.arrayValue.values||[]).length;++s)t.arrayValue.values[s]=Ao(i.arrayValue.values[s]);return t}return Object.assign({},i)}var Ae=function(){function i(e){this.value=e}return i.empty=function(){return new i({mapValue:{}})},i.prototype.field=function(e){if(e.isEmpty())return this.value;for(var t=this.value,s=0;s<e.length-1;++s)if(!Ia(t=(t.mapValue.fields||{})[e.get(s)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null},i.prototype.set=function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ao(t)},i.prototype.setAll=function(e){var t=this,s=ze.emptyPath(),a={},c=[];e.forEach(function(p,m){if(!s.isImmediateParentOf(m)){var v=t.getFieldsMap(s);t.applyChanges(v,a,c),a={},c=[],s=m.popLast()}p?a[m.lastSegment()]=Ao(p):c.push(m.lastSegment())});var d=this.getFieldsMap(s);this.applyChanges(d,a,c)},i.prototype.delete=function(e){var t=this.field(e.popLast());Ia(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]},i.prototype.isEqual=function(e){return en(this.value,e.value)},i.prototype.getFieldsMap=function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var s=0;s<e.length;++s){var a=t.mapValue.fields[e.get(s)];Ia(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields},i.prototype.applyChanges=function(e,t,s){di(t,function(p,m){return e[p]=m});for(var a=0,c=s;a<c.length;a++)delete e[c[a]]},i.prototype.clone=function(){return new i(Ao(this.value))},i}();function rg(i){var e=[];return di(i.fields,function(t,s){var a=new ze([t]);if(Ia(s)){var c=rg(s.mapValue).fields;if(0===c.length)e.push(a);else for(var d=0,p=c;d<p.length;d++)e.push(a.child(p[d]))}else e.push(a)}),new rr(e)}var te=function(){function i(e,t,s,a,c){this.key=e,this.documentType=t,this.version=s,this.data=a,this.documentState=c}return i.newInvalidDocument=function(e){return new i(e,0,st.min(),Ae.empty(),0)},i.newFoundDocument=function(e,t,s){return new i(e,1,t,s,0)},i.newNoDocument=function(e,t){return new i(e,2,t,Ae.empty(),0)},i.newUnknownDocument=function(e,t){return new i(e,3,t,Ae.empty(),2)},i.prototype.convertToFoundDocument=function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this},i.prototype.convertToNoDocument=function(e){return this.version=e,this.documentType=2,this.data=Ae.empty(),this.documentState=0,this},i.prototype.convertToUnknownDocument=function(e){return this.version=e,this.documentType=3,this.data=Ae.empty(),this.documentState=2,this},i.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},i.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(i.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),i.prototype.isValidDocument=function(){return 0!==this.documentType},i.prototype.isFoundDocument=function(){return 1===this.documentType},i.prototype.isNoDocument=function(){return 2===this.documentType},i.prototype.isUnknownDocument=function(){return 3===this.documentType},i.prototype.isEqual=function(e){return e instanceof i&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},i.prototype.clone=function(){return new i(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},i.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},i}(),ZI=function(i,e,t,s,a,c,d){void 0===e&&(e=null),void 0===t&&(t=[]),void 0===s&&(s=[]),void 0===a&&(a=null),void 0===c&&(c=null),void 0===d&&(d=null),this.path=i,this.collectionGroup=e,this.orderBy=t,this.filters=s,this.limit=a,this.startAt=c,this.endAt=d,this.h=null};function og(i,e,t,s,a,c,d){return void 0===e&&(e=null),void 0===t&&(t=[]),void 0===s&&(s=[]),void 0===a&&(a=null),void 0===c&&(c=null),void 0===d&&(d=null),new ZI(i,e,t,s,a,c,d)}function xo(i){var e=V(i);if(null===e.h){var t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(function(s){return(a=s).field.canonicalString()+a.op.toString()+pl(a.value);var a}).join(","),t+="|ob:",t+=e.orderBy.map(function(s){return(a=s).field.canonicalString()+a.dir;var a}).join(","),fi(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=ka(e.startAt)),e.endAt&&(t+="|ub:",t+=ka(e.endAt)),e.h=t}return e.h}function Ca(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(var t=0;t<i.orderBy.length;t++)if(!eC(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(var s=0;s<i.filters.length;s++)if((a=i.filters[s]).op!==(c=e.filters[s]).op||!a.field.isEqual(c.field)||!en(a.value,c.value))return!1;var a,c;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!ug(i.startAt,e.startAt)&&ug(i.endAt,e.endAt)}function Ta(i){return H.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}var xe=function(i){function e(t,s,a){var c=this;return(c=i.call(this)||this).field=t,c.op=s,c.value=a,c}return(0,S.ZT)(e,i),e.create=function(t,s,a){return t.isKeyField()?"in"===s||"not-in"===s?this.l(t,s,a):new KI(t,s,a):"array-contains"===s?new WI(t,a):"in"===s?new XI(t,a):"not-in"===s?new $I(t,a):"array-contains-any"===s?new tC(t,a):new e(t,s,a)},e.l=function(t,s,a){return"in"===s?new JI(t,a):new QI(t,a)},e.prototype.matches=function(t){var s=t.data.field(this.field);return"!="===this.op?null!==s&&this.m(sr(s,this.value)):null!==s&&pi(this.value)===pi(s)&&this.m(sr(s,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return G()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),KI=function(i){function e(t,s,a){var c=this;return(c=i.call(this,t,s,a)||this).key=H.fromName(a.referenceValue),c}return(0,S.ZT)(e,i),e.prototype.matches=function(t){var s=H.comparator(t.key,this.key);return this.m(s)},e}(xe),JI=function(i){function e(t,s){var a=this;return(a=i.call(this,t,"in",s)||this).keys=sg(0,s),a}return(0,S.ZT)(e,i),e.prototype.matches=function(t){return this.keys.some(function(s){return s.isEqual(t.key)})},e}(xe),QI=function(i){function e(t,s){var a=this;return(a=i.call(this,t,"not-in",s)||this).keys=sg(0,s),a}return(0,S.ZT)(e,i),e.prototype.matches=function(t){return!this.keys.some(function(s){return s.isEqual(t.key)})},e}(xe);function sg(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(function(s){return H.fromName(s.referenceValue)})}var WI=function(i){function e(t,s){return i.call(this,t,"array-contains",s)||this}return(0,S.ZT)(e,i),e.prototype.matches=function(t){var s=t.data.field(this.field);return vl(s)&&Eo(s.arrayValue,this.value)},e}(xe),XI=function(i){function e(t,s){return i.call(this,t,"in",s)||this}return(0,S.ZT)(e,i),e.prototype.matches=function(t){var s=t.data.field(this.field);return null!==s&&Eo(this.value.arrayValue,s)},e}(xe),$I=function(i){function e(t,s){return i.call(this,t,"not-in",s)||this}return(0,S.ZT)(e,i),e.prototype.matches=function(t){if(Eo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var s=t.data.field(this.field);return null!==s&&!Eo(this.value.arrayValue,s)},e}(xe),tC=function(i){function e(t,s){return i.call(this,t,"array-contains-any",s)||this}return(0,S.ZT)(e,i),e.prototype.matches=function(t){var s=this,a=t.data.field(this.field);return!(!vl(a)||!a.arrayValue.values)&&a.arrayValue.values.some(function(c){return Eo(s.value.arrayValue,c)})},e}(xe),Mo=function(i,e){this.position=i,this.before=e};function ka(i){return(i.before?"b":"a")+":"+i.position.map(function(e){return pl(e)}).join(",")}var ar=function(i,e){void 0===e&&(e="asc"),this.field=i,this.dir=e};function eC(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}function ag(i,e,t){for(var s=0,a=0;a<i.position.length;a++){var c=e[a],d=i.position[a];if(s=c.field.isKeyField()?H.comparator(H.fromName(d.referenceValue),t.key):sr(d,t.data.field(c.field)),"desc"===c.dir&&(s*=-1),0!==s)break}return i.before?s<=0:s<0}function ug(i,e){if(null===i)return null===e;if(null===e||i.before!==e.before||i.position.length!==e.position.length)return!1;for(var t=0;t<i.position.length;t++)if(!en(i.position[t],e.position[t]))return!1;return!0}var yn=function(i,e,t,s,a,c,d,p){void 0===e&&(e=null),void 0===t&&(t=[]),void 0===s&&(s=[]),void 0===a&&(a=null),void 0===c&&(c="F"),void 0===d&&(d=null),void 0===p&&(p=null),this.path=i,this.collectionGroup=e,this.explicitOrderBy=t,this.filters=s,this.limit=a,this.limitType=c,this.startAt=d,this.endAt=p,this.p=null,this.T=null};function cg(i,e,t,s,a,c,d,p){return new yn(i,e,t,s,a,c,d,p)}function ur(i){return new yn(i)}function Da(i){return!fi(i.limit)&&"F"===i.limitType}function Ea(i){return!fi(i.limit)&&"L"===i.limitType}function yl(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function _l(i){for(var e=0,t=i.filters;e<t.length;e++){var s=t[e];if(s.g())return s.field}return null}function wl(i){return null!==i.collectionGroup}function cr(i){var e=V(i);if(null===e.p){e.p=[];var t=_l(e),s=yl(e);if(null!==t&&null===s)t.isKeyField()||e.p.push(new ar(t)),e.p.push(new ar(ze.keyField(),"asc"));else{for(var a=!1,c=0,d=e.explicitOrderBy;c<d.length;c++){var p=d[c];e.p.push(p),p.field.isKeyField()&&(a=!0)}if(!a){var m=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new ar(ze.keyField(),m))}}}return e.p}function Ve(i){var e=V(i);if(!e.T)if("F"===e.limitType)e.T=og(e.path,e.collectionGroup,cr(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var t=[],s=0,a=cr(e);s<a.length;s++){var c=a[s];t.push(new ar(c.field,"desc"===c.dir?"asc":"desc"))}var p=e.endAt?new Mo(e.endAt.position,!e.endAt.before):null,m=e.startAt?new Mo(e.startAt.position,!e.startAt.before):null;e.T=og(e.path,e.collectionGroup,t,e.filters,e.limit,p,m)}return e.T}function lg(i,e,t){return new yn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function Oo(i,e){return Ca(Ve(i),Ve(e))&&i.limitType===e.limitType}function hg(i){return xo(Ve(i))+"|lt:"+i.limitType}function bl(i){return"Query(target="+(t=(e=Ve(i)).path.canonicalString(),null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: ["+e.filters.map(function(s){return(a=s).field.canonicalString()+" "+a.op+" "+pl(a.value);var a}).join(", ")+"]"),fi(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: ["+e.orderBy.map(function(s){return(a=s).field.canonicalString()+" ("+a.dir+")";var a}).join(", ")+"]"),e.startAt&&(t+=", startAt: "+ka(e.startAt)),e.endAt&&(t+=", endAt: "+ka(e.endAt)),"Target("+t+"); limitType=")+i.limitType+")";var e,t}function Ro(i,e){return e.isFoundDocument()&&(a=(s=e).key.path,null!==(t=i).collectionGroup?s.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(a):H.isDocumentKey(t.path)?t.path.isEqual(a):t.path.isImmediateParentOf(a))&&function(t,s){for(var a=0,c=t.explicitOrderBy;a<c.length;a++){var d=c[a];if(!d.field.isKeyField()&&null===s.data.field(d.field))return!1}return!0}(i,e)&&function(t,s){for(var a=0,c=t.filters;a<c.length;a++)if(!c[a].matches(s))return!1;return!0}(i,e)&&function(t,s){return!(t.startAt&&!ag(t.startAt,cr(t),s)||t.endAt&&ag(t.endAt,cr(t),s))}(i,e);var t,s,a}function dg(i){return function(e,t){for(var s=!1,a=0,c=cr(i);a<c.length;a++){var d=c[a],p=nC(d,e,t);if(0!==p)return p;s=s||d.field.isKeyField()}return 0}}function nC(i,e,t){var a,d,p,m,s=i.field.isKeyField()?H.comparator(e.key,t.key):(d=t,p=e.data.field(a=i.field),m=d.data.field(a),null!==p&&null!==m?sr(p,m):G());switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return G()}}function fg(i,e){if(i.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ba(e)?"-0":e}}function pg(i){return{integerValue:""+i}}function mg(i,e){return tg(e)?pg(e):fg(i,e)}var Aa=function(){this._=void 0};function iC(i,e,t){return i instanceof lr?(c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:(s=t).seconds,nanos:s.nanoseconds}}}},(a=e)&&(c.fields.__previous_value__=a),{mapValue:c}):i instanceof mi?vg(i,e):i instanceof gi?yg(i,e):function(s,a){var c=gg(s,a),d=_g(c)+_g(s.A);return gl(c)&&gl(s.A)?pg(d):fg(s.R,d)}(i,e);var s,a,c}function rC(i,e,t){return i instanceof mi?vg(i,e):i instanceof gi?yg(i,e):t}function gg(i,e){return i instanceof hr?gl(t=e)||(s=t)&&"doubleValue"in s?e:{integerValue:0}:null;var s,t}var lr=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return(0,S.ZT)(e,i),e}(Aa),mi=function(i){function e(t){var s=this;return(s=i.call(this)||this).elements=t,s}return(0,S.ZT)(e,i),e}(Aa);function vg(i,e){for(var t=wg(e),s=function(d){t.some(function(p){return en(p,d)})||t.push(d)},a=0,c=i.elements;a<c.length;a++)s(c[a]);return{arrayValue:{values:t}}}var gi=function(i){function e(t){var s=this;return(s=i.call(this)||this).elements=t,s}return(0,S.ZT)(e,i),e}(Aa);function yg(i,e){for(var t=wg(e),s=function(d){t=t.filter(function(p){return!en(p,d)})},a=0,c=i.elements;a<c.length;a++)s(c[a]);return{arrayValue:{values:t}}}var hr=function(i){function e(t,s){var a=this;return(a=i.call(this)||this).R=t,a.A=s,a}return(0,S.ZT)(e,i),e}(Aa);function _g(i){return Bt(i.integerValue||i.doubleValue)}function wg(i){return vl(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}var No=function(i,e){this.field=i,this.transform=e},oC=function(i,e){this.version=i,this.transformResults=e},oe=function(){function i(e,t){this.updateTime=e,this.exists=t}return i.none=function(){return new i},i.exists=function(e){return new i(void 0,e)},i.updateTime=function(e){return new i(e)},Object.defineProperty(i.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),i.prototype.isEqual=function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)},i}();function xa(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}var Ma=function(){};function sC(i,e,t){var s,a,c,d,p;i instanceof Po?(a=e,c=t,d=(s=i).value.clone(),p=Cg(s.fieldTransforms,a,c.transformResults),d.setAll(p),a.convertToFoundDocument(c.version,d).setHasCommittedMutations()):i instanceof Ln?function(s,a,c){if(xa(s.precondition,a)){var d=Cg(s.fieldTransforms,a,c.transformResults),p=a.data;p.setAll(Ig(s)),p.setAll(d),a.convertToFoundDocument(c.version,p).setHasCommittedMutations()}else a.convertToUnknownDocument(c.version)}(i,e,t):function(s,a,c){a.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function Sl(i,e,t){var a;i instanceof Po?function(s,a,c){if(xa(s.precondition,a)){var d=s.value.clone(),p=Tg(s.fieldTransforms,c,a);d.setAll(p),a.convertToFoundDocument(Sg(a),d).setHasLocalMutations()}}(i,e,t):i instanceof Ln?function(s,a,c){if(xa(s.precondition,a)){var d=Tg(s.fieldTransforms,c,a),p=a.data;p.setAll(Ig(s)),p.setAll(d),a.convertToFoundDocument(Sg(a),p).setHasLocalMutations()}}(i,e,t):xa(i.precondition,a=e)&&a.convertToNoDocument(st.min())}function aC(i,e){for(var t=null,s=0,a=i.fieldTransforms;s<a.length;s++){var c=a[s],d=e.data.field(c.field),p=gg(c.transform,d||null);null!=p&&(null==t&&(t=Ae.empty()),t.set(c.field,p))}return t||null}function bg(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(s=e.fieldTransforms,!!(void 0===(t=i.fieldTransforms)&&void 0===s||t&&s&&ir(t,s,function(a,c){return(d=a).field.isEqual((p=c).field)&&(v=p.transform,(m=d.transform)instanceof mi&&v instanceof mi||m instanceof gi&&v instanceof gi?ir(m.elements,v.elements,en):m instanceof hr&&v instanceof hr?en(m.A,v.A):m instanceof lr&&v instanceof lr);var d,p,m,v})))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var t,s}function Sg(i){return i.isFoundDocument()?i.version:st.min()}var Po=function(i){function e(t,s,a,c){void 0===c&&(c=[]);var d=this;return(d=i.call(this)||this).key=t,d.value=s,d.precondition=a,d.fieldTransforms=c,d.type=0,d}return(0,S.ZT)(e,i),e}(Ma),Ln=function(i){function e(t,s,a,c,d){void 0===d&&(d=[]);var p=this;return(p=i.call(this)||this).key=t,p.data=s,p.fieldMask=a,p.precondition=c,p.fieldTransforms=d,p.type=1,p}return(0,S.ZT)(e,i),e}(Ma);function Ig(i){var e=new Map;return i.fieldMask.fields.forEach(function(t){if(!t.isEmpty()){var s=i.data.field(t);e.set(t,s)}}),e}function Cg(i,e,t){var s=new Map;$(i.length===t.length);for(var a=0;a<t.length;a++){var c=i[a],d=c.transform,p=e.data.field(c.field);s.set(c.field,rC(d,p,t[a]))}return s}function Tg(i,e,t){for(var s=new Map,a=0,c=i;a<c.length;a++){var d=c[a],p=d.transform,m=t.data.field(d.field);s.set(d.field,iC(p,m,e))}return s}var qt,dt,Fo=function(i){function e(t,s){var a=this;return(a=i.call(this)||this).key=t,a.precondition=s,a.type=2,a.fieldTransforms=[],a}return(0,S.ZT)(e,i),e}(Ma),Il=function(i){function e(t,s){var a=this;return(a=i.call(this)||this).key=t,a.precondition=s,a.type=3,a.fieldTransforms=[],a}return(0,S.ZT)(e,i),e}(Ma),uC=function(i){this.count=i};function kg(i){switch(i){case A.OK:return G();case A.CANCELLED:case A.UNKNOWN:case A.DEADLINE_EXCEEDED:case A.RESOURCE_EXHAUSTED:case A.INTERNAL:case A.UNAVAILABLE:case A.UNAUTHENTICATED:return!1;case A.INVALID_ARGUMENT:case A.NOT_FOUND:case A.ALREADY_EXISTS:case A.PERMISSION_DENIED:case A.FAILED_PRECONDITION:case A.ABORTED:case A.OUT_OF_RANGE:case A.UNIMPLEMENTED:case A.DATA_LOSS:return!0;default:return G()}}function Dg(i){if(void 0===i)return Vt("GRPC error has no .code"),A.UNKNOWN;switch(i){case qt.OK:return A.OK;case qt.CANCELLED:return A.CANCELLED;case qt.UNKNOWN:return A.UNKNOWN;case qt.DEADLINE_EXCEEDED:return A.DEADLINE_EXCEEDED;case qt.RESOURCE_EXHAUSTED:return A.RESOURCE_EXHAUSTED;case qt.INTERNAL:return A.INTERNAL;case qt.UNAVAILABLE:return A.UNAVAILABLE;case qt.UNAUTHENTICATED:return A.UNAUTHENTICATED;case qt.INVALID_ARGUMENT:return A.INVALID_ARGUMENT;case qt.NOT_FOUND:return A.NOT_FOUND;case qt.ALREADY_EXISTS:return A.ALREADY_EXISTS;case qt.PERMISSION_DENIED:return A.PERMISSION_DENIED;case qt.FAILED_PRECONDITION:return A.FAILED_PRECONDITION;case qt.ABORTED:return A.ABORTED;case qt.OUT_OF_RANGE:return A.OUT_OF_RANGE;case qt.UNIMPLEMENTED:return A.UNIMPLEMENTED;case qt.DATA_LOSS:return A.DATA_LOSS;default:return G()}}(dt=qt||(qt={}))[dt.OK=0]="OK",dt[dt.CANCELLED=1]="CANCELLED",dt[dt.UNKNOWN=2]="UNKNOWN",dt[dt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",dt[dt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",dt[dt.NOT_FOUND=5]="NOT_FOUND",dt[dt.ALREADY_EXISTS=6]="ALREADY_EXISTS",dt[dt.PERMISSION_DENIED=7]="PERMISSION_DENIED",dt[dt.UNAUTHENTICATED=16]="UNAUTHENTICATED",dt[dt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",dt[dt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",dt[dt.ABORTED=10]="ABORTED",dt[dt.OUT_OF_RANGE=11]="OUT_OF_RANGE",dt[dt.UNIMPLEMENTED=12]="UNIMPLEMENTED",dt[dt.INTERNAL=13]="INTERNAL",dt[dt.UNAVAILABLE=14]="UNAVAILABLE",dt[dt.DATA_LOSS=15]="DATA_LOSS";var se=function(){function i(e,t){this.comparator=e,this.root=t||Vn.EMPTY}return i.prototype.insert=function(e,t){return new i(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Vn.BLACK,null,null))},i.prototype.remove=function(e){return new i(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Vn.BLACK,null,null))},i.prototype.get=function(e){for(var t=this.root;!t.isEmpty();){var s=this.comparator(e,t.key);if(0===s)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null},i.prototype.indexOf=function(e){for(var t=0,s=this.root;!s.isEmpty();){var a=this.comparator(e,s.key);if(0===a)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1},i.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(i.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),i.prototype.minKey=function(){return this.root.minKey()},i.prototype.maxKey=function(){return this.root.maxKey()},i.prototype.inorderTraversal=function(e){return this.root.inorderTraversal(e)},i.prototype.forEach=function(e){this.inorderTraversal(function(t,s){return e(t,s),!1})},i.prototype.toString=function(){var e=[];return this.inorderTraversal(function(t,s){return e.push(t+":"+s),!1}),"{"+e.join(", ")+"}"},i.prototype.reverseTraversal=function(e){return this.root.reverseTraversal(e)},i.prototype.getIterator=function(){return new Oa(this.root,null,this.comparator,!1)},i.prototype.getIteratorFrom=function(e){return new Oa(this.root,e,this.comparator,!1)},i.prototype.getReverseIterator=function(){return new Oa(this.root,null,this.comparator,!0)},i.prototype.getReverseIteratorFrom=function(e){return new Oa(this.root,e,this.comparator,!0)},i}(),Oa=function(){function i(e,t,s,a){this.isReverse=a,this.nodeStack=[];for(var c=1;!e.isEmpty();)if(c=t?s(e.key,t):1,a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(0===c){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}return i.prototype.getNext=function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t},i.prototype.hasNext=function(){return this.nodeStack.length>0},i.prototype.peek=function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}},i}(),Vn=function(){function i(e,t,s,a,c){this.key=e,this.value=t,this.color=null!=s?s:i.RED,this.left=null!=a?a:i.EMPTY,this.right=null!=c?c:i.EMPTY,this.size=this.left.size+1+this.right.size}return i.prototype.copy=function(e,t,s,a,c){return new i(null!=e?e:this.key,null!=t?t:this.value,null!=s?s:this.color,null!=a?a:this.left,null!=c?c:this.right)},i.prototype.isEmpty=function(){return!1},i.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},i.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},i.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},i.prototype.minKey=function(){return this.min().key},i.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},i.prototype.insert=function(e,t,s){var a=this,c=s(e,a.key);return(a=c<0?a.copy(null,null,null,a.left.insert(e,t,s),null):0===c?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s))).fixUp()},i.prototype.removeMin=function(){if(this.left.isEmpty())return i.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},i.prototype.remove=function(e,t){var s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),0===t(e,a.key)){if(a.right.isEmpty())return i.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()},i.prototype.isRed=function(){return this.color},i.prototype.fixUp=function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e},i.prototype.moveRedLeft=function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e},i.prototype.moveRedRight=function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e},i.prototype.rotateLeft=function(){var e=this.copy(null,null,i.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},i.prototype.rotateRight=function(){var e=this.copy(null,null,i.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},i.prototype.colorFlip=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},i.prototype.checkMaxDepth=function(){var e=this.check();return Math.pow(2,e)<=this.size+1},i.prototype.check=function(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw G();var e=this.left.check();if(e!==this.right.check())throw G();return e+(this.isRed()?0:1)},i}();Vn.EMPTY=null,Vn.RED=!0,Vn.BLACK=!1,Vn.EMPTY=new(function(){function i(){this.size=0}return Object.defineProperty(i.prototype,"key",{get:function(){throw G()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"value",{get:function(){throw G()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"color",{get:function(){throw G()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"left",{get:function(){throw G()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"right",{get:function(){throw G()},enumerable:!1,configurable:!0}),i.prototype.copy=function(e,t,s,a,c){return this},i.prototype.insert=function(e,t,s){return new Vn(e,t)},i.prototype.remove=function(e,t){return this},i.prototype.isEmpty=function(){return!0},i.prototype.inorderTraversal=function(e){return!1},i.prototype.reverseTraversal=function(e){return!1},i.prototype.minKey=function(){return null},i.prototype.maxKey=function(){return null},i.prototype.isRed=function(){return!1},i.prototype.checkMaxDepth=function(){return!0},i.prototype.check=function(){return 0},i}());var jt=function(){function i(e){this.comparator=e,this.data=new se(this.comparator)}return i.prototype.has=function(e){return null!==this.data.get(e)},i.prototype.first=function(){return this.data.minKey()},i.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(i.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),i.prototype.indexOf=function(e){return this.data.indexOf(e)},i.prototype.forEach=function(e){this.data.inorderTraversal(function(t,s){return e(t),!1})},i.prototype.forEachInRange=function(e,t){for(var s=this.data.getIteratorFrom(e[0]);s.hasNext();){var a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}},i.prototype.forEachWhile=function(e,t){var s;for(s=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return},i.prototype.firstAfterOrEqual=function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null},i.prototype.getIterator=function(){return new Eg(this.data.getIterator())},i.prototype.getIteratorFrom=function(e){return new Eg(this.data.getIteratorFrom(e))},i.prototype.add=function(e){return this.copy(this.data.remove(e).insert(e,!0))},i.prototype.delete=function(e){return this.has(e)?this.copy(this.data.remove(e)):this},i.prototype.isEmpty=function(){return this.data.isEmpty()},i.prototype.unionWith=function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach(function(s){t=t.add(s)}),t},i.prototype.isEqual=function(e){if(!(e instanceof i)||this.size!==e.size)return!1;for(var t=this.data.getIterator(),s=e.data.getIterator();t.hasNext();){var a=t.getNext().key,c=s.getNext().key;if(0!==this.comparator(a,c))return!1}return!0},i.prototype.toArray=function(){var e=[];return this.forEach(function(t){e.push(t)}),e},i.prototype.toString=function(){var e=[];return this.forEach(function(t){return e.push(t)}),"SortedSet("+e.toString()+")"},i.prototype.copy=function(e){var t=new i(this.comparator);return t.data=e,t},i}(),Eg=function(){function i(e){this.iter=e}return i.prototype.getNext=function(){return this.iter.getNext().key},i.prototype.hasNext=function(){return this.iter.hasNext()},i}(),cC=new se(H.comparator);function Be(){return cC}var lC=new se(H.comparator);function Cl(){return lC}var hC=new se(H.comparator);function Ag(){return hC}var dC=new jt(H.comparator);function vt(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];for(var t=dC,s=0,a=i;s<a.length;s++){var c=a[s];t=t.add(c)}return t}var fC=new jt(ct);function Ra(){return fC}var Tl=function(){function i(e,t,s,a,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=c}return i.createSynthesizedRemoteEventForCurrentChange=function(e,t){var s=new Map;return s.set(e,kl.createSynthesizedTargetChangeForCurrentChange(e,t)),new i(st.min(),s,Ra(),Be(),vt())},i}(),kl=function(){function i(e,t,s,a,c){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=c}return i.createSynthesizedTargetChangeForCurrentChange=function(e,t){return new i(fe.EMPTY_BYTE_STRING,t,vt(),vt(),vt())},i}(),Na=function(i,e,t,s){this.v=i,this.removedTargetIds=e,this.key=t,this.P=s},xg=function(i,e){this.targetId=i,this.V=e},Mg=function(i,e,t,s){void 0===t&&(t=fe.EMPTY_BYTE_STRING),void 0===s&&(s=null),this.state=i,this.targetIds=e,this.resumeToken=t,this.cause=s},Og=function(){function i(){this.S=0,this.D=Ng(),this.C=fe.EMPTY_BYTE_STRING,this.N=!1,this.k=!0}return Object.defineProperty(i.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"F",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"$",{get:function(){return this.k},enumerable:!1,configurable:!0}),i.prototype.O=function(e){e.approximateByteSize()>0&&(this.k=!0,this.C=e)},i.prototype.M=function(){var e=vt(),t=vt(),s=vt();return this.D.forEach(function(a,c){switch(c){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:G()}}),new kl(this.C,this.N,e,t,s)},i.prototype.L=function(){this.k=!1,this.D=Ng()},i.prototype.B=function(e,t){this.k=!0,this.D=this.D.insert(e,t)},i.prototype.q=function(e){this.k=!0,this.D=this.D.remove(e)},i.prototype.U=function(){this.S+=1},i.prototype.K=function(){this.S-=1},i.prototype.j=function(){this.k=!0,this.N=!0},i}(),pC=function(){function i(e){this.W=e,this.G=new Map,this.H=Be(),this.J=Rg(),this.Y=new jt(ct)}return i.prototype.X=function(e){for(var t=0,s=e.v;t<s.length;t++){var a=s[t];e.P&&e.P.isFoundDocument()?this.Z(a,e.P):this.tt(a,e.key,e.P)}for(var c=0,d=e.removedTargetIds;c<d.length;c++)this.tt(a=d[c],e.key,e.P)},i.prototype.et=function(e){var t=this;this.forEachTarget(e,function(s){var a=t.nt(s);switch(e.state){case 0:t.st(s)&&a.O(e.resumeToken);break;case 1:a.K(),a.F||a.L(),a.O(e.resumeToken);break;case 2:a.K(),a.F||t.removeTarget(s);break;case 3:t.st(s)&&(a.j(),a.O(e.resumeToken));break;case 4:t.st(s)&&(t.it(s),a.O(e.resumeToken));break;default:G()}})},i.prototype.forEachTarget=function(e,t){var s=this;e.targetIds.length>0?e.targetIds.forEach(t):this.G.forEach(function(a,c){s.st(c)&&t(c)})},i.prototype.rt=function(e){var t=e.targetId,s=e.V.count,a=this.ot(t);if(a){var c=a.target;if(Ta(c))if(0===s){var d=new H(c.path);this.tt(t,d,te.newNoDocument(d,st.min()))}else $(1===s);else this.ct(t)!==s&&(this.it(t),this.Y=this.Y.add(t))}},i.prototype.ut=function(e){var t=this,s=new Map;this.G.forEach(function(d,p){var m=t.ot(p);if(m){if(d.current&&Ta(m.target)){var v=new H(m.target.path);null!==t.H.get(v)||t.at(p,v)||t.tt(p,v,te.newNoDocument(v,e))}d.$&&(s.set(p,d.M()),d.L())}});var a=vt();this.J.forEach(function(d,p){var m=!0;p.forEachWhile(function(v){var _=t.ot(v);return!_||2===_.purpose||(m=!1,!1)}),m&&(a=a.add(d))});var c=new Tl(e,s,this.Y,this.H,a);return this.H=Be(),this.J=Rg(),this.Y=new jt(ct),c},i.prototype.Z=function(e,t){if(this.st(e)){var s=this.at(e,t.key)?2:0;this.nt(e).B(t.key,s),this.H=this.H.insert(t.key,t),this.J=this.J.insert(t.key,this.ht(t.key).add(e))}},i.prototype.tt=function(e,t,s){if(this.st(e)){var a=this.nt(e);this.at(e,t)?a.B(t,1):a.q(t),this.J=this.J.insert(t,this.ht(t).delete(e)),s&&(this.H=this.H.insert(t,s))}},i.prototype.removeTarget=function(e){this.G.delete(e)},i.prototype.ct=function(e){var t=this.nt(e).M();return this.W.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size},i.prototype.U=function(e){this.nt(e).U()},i.prototype.nt=function(e){var t=this.G.get(e);return t||(t=new Og,this.G.set(e,t)),t},i.prototype.ht=function(e){var t=this.J.get(e);return t||(t=new jt(ct),this.J=this.J.insert(e,t)),t},i.prototype.st=function(e){var t=null!==this.ot(e);return t||P("WatchChangeAggregator","Detected inactive target",e),t},i.prototype.ot=function(e){var t=this.G.get(e);return t&&t.F?null:this.W.lt(e)},i.prototype.it=function(e){var t=this;this.G.set(e,new Og),this.W.getRemoteKeysForTarget(e).forEach(function(s){t.tt(e,s,null)})},i.prototype.at=function(e,t){return this.W.getRemoteKeysForTarget(e).has(t)},i}();function Rg(){return new se(H.comparator)}function Ng(){return new se(H.comparator)}var mC={asc:"ASCENDING",desc:"DESCENDING"},gC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},vC=function(i,e){this.databaseId=i,this.I=e};function Lo(i,e){return i.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Pg(i,e){return i.I?e.toBase64():e.toUint8Array()}function yC(i,e){return Lo(i,e.toTimestamp())}function Zt(i){return $(!!i),st.fromTimestamp((t=Fn(i),new ve(t.seconds,t.nanos)));var t}function Dl(i,e){return(t=i,new ft(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Fg(i){var e=ft.fromString(i);return $(Kg(e)),e}function Vo(i,e){return Dl(i.databaseId,e.path)}function nn(i,e){var t=Fg(e);if(t.get(1)!==i.databaseId.projectId)throw new R(A.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new R(A.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new H(Vg(t))}function El(i,e){return Dl(i.databaseId,e)}function Lg(i){var e=Fg(i);return 4===e.length?ft.emptyPath():Vg(e)}function Bo(i){return new ft(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Vg(i){return $(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function Bg(i,e,t){return{name:Vo(i,e),fields:t.value.mapValue.fields}}function qg(i,e,t){var s=nn(i,e.name),a=Zt(e.updateTime),c=new Ae({mapValue:{fields:e.fields}}),d=te.newFoundDocument(s,a,c);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function Pa(i,e){var t,a;if(e instanceof Po)t={update:Bg(i,e.key,e.value)};else if(e instanceof Fo)t={delete:Vo(i,e.key)};else if(e instanceof Ln)t={update:Bg(i,e.key,e.data),updateMask:IC(e.fieldMask)};else{if(!(e instanceof Il))return G();t={verify:Vo(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(function(s){return function(a,c){var d=c.transform;if(d instanceof lr)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof mi)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof gi)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof hr)return{fieldPath:c.field.canonicalString(),increment:d.A};throw G()}(0,s)})),e.precondition.isNone||(t.currentDocument=void 0!==(a=e.precondition).updateTime?{updateTime:yC(i,a.updateTime)}:void 0!==a.exists?{exists:a.exists}:G()),t}function Ug(i,e){var v,t=e.currentDocument?void 0!==(v=e.currentDocument).updateTime?oe.updateTime(Zt(v.updateTime)):void 0!==v.exists?oe.exists(v.exists):oe.none():oe.none(),s=e.updateTransforms?e.updateTransforms.map(function(v){return function(_,b){var I=null;"setToServerValue"in b?($("REQUEST_TIME"===b.setToServerValue),I=new lr):"appendMissingElements"in b?I=new mi(b.appendMissingElements.values||[]):"removeAllFromArray"in b?I=new gi(b.removeAllFromArray.values||[]):"increment"in b?I=new hr(_,b.increment):G();var E=ze.fromServerFormat(b.fieldPath);return new No(E,I)}(i,v)}):[];if(e.update){var a=nn(i,e.update.name),c=new Ae({mapValue:{fields:e.update.fields}});if(e.updateMask){var d=function(v){return new rr((v.fieldPaths||[]).map(function(b){return ze.fromServerFormat(b)}))}(e.updateMask);return new Ln(a,c,d,t,s)}return new Po(a,c,t,s)}if(e.delete){var p=nn(i,e.delete);return new Fo(p,t)}if(e.verify){var m=nn(i,e.verify);return new Il(m,t)}return G()}function jg(i,e){return{documents:[El(i,e.path)]}}function Yg(i,e){var t={structuredQuery:{}},s=e.path;null!==e.collectionGroup?(t.parent=El(i,s),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=El(i,s.popLast()),t.structuredQuery.from=[{collectionId:s.lastSegment()}]);var a=function(p){if(0!==p.length){var m=p.map(function(v){return function(_){if("=="===_.op){if(ig(_.value))return{unaryFilter:{field:dr(_.field),op:"IS_NAN"}};if(ng(_.value))return{unaryFilter:{field:dr(_.field),op:"IS_NULL"}}}else if("!="===_.op){if(ig(_.value))return{unaryFilter:{field:dr(_.field),op:"IS_NOT_NAN"}};if(ng(_.value))return{unaryFilter:{field:dr(_.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:dr(_.field),op:wC(_.op),value:_.value}}}(v)});return 1===m.length?m[0]:{compositeFilter:{op:"AND",filters:m}}}}(e.filters);a&&(t.structuredQuery.where=a);var c=function(p){if(0!==p.length)return p.map(function(m){return{field:dr((v=m).field),direction:_C(v.dir)};var v})}(e.orderBy);c&&(t.structuredQuery.orderBy=c);var m,d=(m=e.limit,i.I||fi(m)?m:{value:m});return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=zg(e.startAt)),e.endAt&&(t.structuredQuery.endAt=zg(e.endAt)),t}function Gg(i){var e=Lg(i.parent),t=i.structuredQuery,s=t.from?t.from.length:0,a=null;if(s>0){$(1===s);var c=t.from[0];c.allDescendants?a=c.collectionId:e=e.child(c.collectionId)}var d=[];t.where&&(d=Hg(t.where));var p=[];t.orderBy&&(p=t.orderBy.map(function(b){return new ar(fr((I=b).field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction));var I}));var b,I,m=null;t.limit&&(m=fi(I="object"==typeof(b=t.limit)?b.value:b)?null:I);var v=null;t.startAt&&(v=Zg(t.startAt));var _=null;return t.endAt&&(_=Zg(t.endAt)),cg(e,a,p,d,m,"F",v,_)}function Hg(i){return i?void 0!==i.unaryFilter?[SC(i)]:void 0!==i.fieldFilter?[bC(i)]:void 0!==i.compositeFilter?i.compositeFilter.filters.map(function(e){return Hg(e)}).reduce(function(e,t){return e.concat(t)}):G():[]}function zg(i){return{before:i.before,values:i.position}}function Zg(i){return new Mo(i.values||[],!!i.before)}function _C(i){return mC[i]}function wC(i){return gC[i]}function dr(i){return{fieldPath:i.canonicalString()}}function fr(i){return ze.fromServerFormat(i.fieldPath)}function bC(i){return xe.create(fr(i.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return G()}}(i.fieldFilter.op),i.fieldFilter.value)}function SC(i){switch(i.unaryFilter.op){case"IS_NAN":var e=fr(i.unaryFilter.field);return xe.create(e,"==",{doubleValue:NaN});case"IS_NULL":var t=fr(i.unaryFilter.field);return xe.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var s=fr(i.unaryFilter.field);return xe.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var a=fr(i.unaryFilter.field);return xe.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return G()}}function IC(i){var e=[];return i.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}}function Kg(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function Ze(i){for(var e="",t=0;t<i.length;t++)e.length>0&&(e=Jg(e)),e=CC(i.get(t),e);return Jg(e)}function CC(i,e){for(var t=e,s=i.length,a=0;a<s;a++){var c=i.charAt(a);switch(c){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=c}}return t}function Jg(i){return i+"\x01\x01"}function _n(i){var e=i.length;if($(e>=2),2===e)return $("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),ft.emptyPath();for(var t=e-2,s=[],a="",c=0;c<e;){var d=i.indexOf("\x01",c);switch((d<0||d>t)&&G(),i.charAt(d+1)){case"\x01":var p=i.substring(c,d),m=void 0;0===a.length?m=p:(m=a+=p,a=""),s.push(m);break;case"\x10":a+=i.substring(c,d),a+="\0";break;case"\x11":a+=i.substring(c,d+1);break;default:G()}c=d+2}return new ft(s)}var TC=function(i,e){this.seconds=i,this.nanoseconds=e},Me=function(i,e,t){this.ownerId=i,this.allowTabSynchronization=e,this.leaseTimestampMs=t};Me.store="owner",Me.key="owner";var Bn=function(i,e,t){this.userId=i,this.lastAcknowledgedBatchId=e,this.lastStreamToken=t};Bn.store="mutationQueues",Bn.keyPath="userId";var St=function(i,e,t,s,a){this.userId=i,this.batchId=e,this.localWriteTimeMs=t,this.baseMutations=s,this.mutations=a};St.store="mutations",St.keyPath="batchId",St.userMutationsIndex="userMutationsIndex",St.userMutationsKeyPath=["userId","batchId"];var ae=function(){function i(){}return i.prefixForUser=function(e){return[e]},i.prefixForPath=function(e,t){return[e,Ze(t)]},i.key=function(e,t,s){return[e,Ze(t),s]},i}();ae.store="documentMutations",ae.PLACEHOLDER=new ae;var kC=function(i,e){this.path=i,this.readTime=e},DC=function(i,e){this.path=i,this.version=e},Mt=function(i,e,t,s,a,c){this.unknownDocument=i,this.noDocument=e,this.document=t,this.hasCommittedMutations=s,this.readTime=a,this.parentPath=c};Mt.store="remoteDocuments",Mt.readTimeIndex="readTimeIndex",Mt.readTimeIndexPath="readTime",Mt.collectionReadTimeIndex="collectionReadTimeIndex",Mt.collectionReadTimeIndexPath=["parentPath","readTime"];var rn=function(i){this.byteSize=i};rn.store="remoteDocumentGlobal",rn.key="remoteDocumentGlobalKey";var ye=function(i,e,t,s,a,c,d){this.targetId=i,this.canonicalId=e,this.readTime=t,this.resumeToken=s,this.lastListenSequenceNumber=a,this.lastLimboFreeSnapshotVersion=c,this.query=d};ye.store="targets",ye.keyPath="targetId",ye.queryTargetsIndexName="queryTargetsIndex",ye.queryTargetsKeyPath=["canonicalId","targetId"];var ee=function(i,e,t){this.targetId=i,this.path=e,this.sequenceNumber=t};ee.store="targetDocuments",ee.keyPath=["targetId","path"],ee.documentTargetsIndex="documentTargetsIndex",ee.documentTargetsKeyPath=["path","targetId"];var Oe=function(i,e,t,s){this.highestTargetId=i,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=t,this.targetCount=s};Oe.key="targetGlobalKey",Oe.store="targetGlobal";var vi=function(i,e){this.collectionId=i,this.parent=e};vi.store="collectionParents",vi.keyPath=["collectionId","parent"];var wn=function(i,e,t,s){this.clientId=i,this.updateTimeMs=e,this.networkEnabled=t,this.inForeground=s};wn.store="clientMetadata",wn.keyPath="clientId";var pr=function(i,e,t){this.bundleId=i,this.createTime=e,this.version=t};pr.store="bundles",pr.keyPath="bundleId";var mr=function(i,e,t){this.name=i,this.readTime=e,this.bundledQuery=t};mr.store="namedQueries",mr.keyPath="name";var EC=(0,S.ev)((0,S.ev)([],(0,S.ev)((0,S.ev)([],(0,S.ev)((0,S.ev)([],(0,S.ev)((0,S.ev)([],[Bn.store,St.store,ae.store,Mt.store,ye.store,Me.store,Oe.store,ee.store]),[wn.store])),[rn.store])),[vi.store])),[pr.store,mr.store]),Qg="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Wg=function(){function i(){this.onCommittedListeners=[]}return i.prototype.addOnCommittedListener=function(e){this.onCommittedListeners.push(e)},i.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(e){return e()})},i}(),ue=function(){var i=this;this.promise=new Promise(function(e,t){i.resolve=e,i.reject=t})},N=function(){function i(e){var t=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(function(s){t.isDone=!0,t.result=s,t.nextCallback&&t.nextCallback(s)},function(s){t.isDone=!0,t.error=s,t.catchCallback&&t.catchCallback(s)})}return i.prototype.catch=function(e){return this.next(void 0,e)},i.prototype.next=function(e,t){var s=this;return this.callbackAttached&&G(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new i(function(a,c){s.nextCallback=function(d){s.wrapSuccess(e,d).next(a,c)},s.catchCallback=function(d){s.wrapFailure(t,d).next(a,c)}})},i.prototype.toPromise=function(){var e=this;return new Promise(function(t,s){e.next(t,s)})},i.prototype.wrapUserFunction=function(e){try{var t=e();return t instanceof i?t:i.resolve(t)}catch(s){return i.reject(s)}},i.prototype.wrapSuccess=function(e,t){return e?this.wrapUserFunction(function(){return e(t)}):i.resolve(t)},i.prototype.wrapFailure=function(e,t){return e?this.wrapUserFunction(function(){return e(t)}):i.reject(t)},i.resolve=function(e){return new i(function(t,s){t(e)})},i.reject=function(e){return new i(function(t,s){s(e)})},i.waitFor=function(e){return new i(function(t,s){var a=0,c=0,d=!1;e.forEach(function(p){++a,p.next(function(){++c,d&&c===a&&t()},function(m){return s(m)})}),d=!0,c===a&&t()})},i.or=function(e){for(var t=i.resolve(!1),s=function(d){t=t.next(function(p){return p?i.resolve(p):d()})},a=0,c=e;a<c.length;a++)s(c[a]);return t},i.forEach=function(e,t){var s=this,a=[];return e.forEach(function(c,d){a.push(t.call(s,c,d))}),this.waitFor(a)},i}(),Xg=function(){function i(e,t){var s=this;this.action=e,this.transaction=t,this.aborted=!1,this.ft=new ue,this.transaction.oncomplete=function(){s.ft.resolve()},this.transaction.onabort=function(){t.error?s.ft.reject(new qo(e,t.error)):s.ft.resolve()},this.transaction.onerror=function(a){var c=Al(a.target.error);s.ft.reject(new qo(e,c))}}return i.open=function(e,t,s,a){try{return new i(t,e.transaction(a,s))}catch(c){throw new qo(t,c)}},Object.defineProperty(i.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),i.prototype.abort=function(e){e&&this.ft.reject(e),this.aborted||(P("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},i.prototype.store=function(e){var t=this.transaction.objectStore(e);return new xC(t)},i}(),gr=function(){function i(e,t,s){this.name=e,this.version=t,this.wt=s,12.2===i._t((0,gt.z$)())&&Vt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return i.delete=function(e){return P("SimpleDb","Removing database:",e),_i(window.indexedDB.deleteDatabase(e)).toPromise()},i.yt=function(){if("undefined"==typeof indexedDB)return!1;if(i.gt())return!0;var e=(0,gt.z$)(),t=i._t(e),s=0<t&&t<10,a=i.Et(e),c=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||c)},i.gt=function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Tt)},i.It=function(e,t){return e.store(t)},i._t=function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(s)},i.Et=function(e){var t=e.match(/Android ([\d.]+)/i),s=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(s)},i.prototype.At=function(e){return(0,S.mG)(this,void 0,void 0,function(){var t,s=this;return(0,S.Jh)(this,function(a){switch(a.label){case 0:return this.db?[3,2]:(P("SimpleDb","Opening database:",this.name),t=this,[4,new Promise(function(c,d){var p=indexedDB.open(s.name,s.version);p.onsuccess=function(m){c(m.target.result)},p.onblocked=function(){d(new qo(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},p.onerror=function(m){var v=m.target.error;d("VersionError"===v.name?new R(A.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new qo(e,v))},p.onupgradeneeded=function(m){P("SimpleDb",'Database "'+s.name+'" requires upgrade from version:',m.oldVersion),s.wt.Rt(m.target.result,p.transaction,m.oldVersion,s.version).next(function(){P("SimpleDb","Database upgrade to version "+s.version+" complete")})}})]);case 1:t.db=a.sent(),a.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(c){return s.bt(c)}),this.db)]}})})},i.prototype.vt=function(e){this.bt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})},i.prototype.runTransaction=function(e,t,s,a){return(0,S.mG)(this,void 0,void 0,function(){var c,d,p,m,v;return(0,S.Jh)(this,function(_){switch(_.label){case 0:c="readonly"===t,d=0,p=function(){var b,I,k,T,E;return(0,S.Jh)(this,function(M){switch(M.label){case 0:++d,M.label=1;case 1:return M.trys.push([1,4,,5]),[4,m.At(e)];case 2:return m.db=M.sent(),b=Xg.open(m.db,e,c?"readonly":"readwrite",s),I=a(b).catch(function(F){return b.abort(F),N.reject(F)}).toPromise(),k={},I.catch(function(){}),[4,b.dt];case 3:return[2,(k.value=(M.sent(),I),k)];case 4:return P("SimpleDb","Transaction failed with error:",(T=M.sent()).message,"Retrying:",E="FirebaseError"!==T.name&&d<3),m.close(),E?[3,5]:[2,{value:Promise.reject(T)}];case 5:return[2]}})},m=this,_.label=1;case 1:return[5,p()];case 2:if("object"==typeof(v=_.sent()))return[2,v.value];_.label=3;case 3:return[3,1];case 4:return[2]}})})},i.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},i}(),AC=function(){function i(e){this.Pt=e,this.Vt=!1,this.St=null}return Object.defineProperty(i.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cursor",{set:function(e){this.Pt=e},enumerable:!1,configurable:!0}),i.prototype.done=function(){this.Vt=!0},i.prototype.Ct=function(e){this.St=e},i.prototype.delete=function(){return _i(this.Pt.delete())},i}(),qo=function(i){function e(t,s){var a=this;return(a=i.call(this,A.UNAVAILABLE,"IndexedDB transaction '"+t+"' failed: "+s)||this).name="IndexedDbTransactionError",a}return(0,S.ZT)(e,i),e}(R);function yi(i){return"IndexedDbTransactionError"===i.name}var xC=function(){function i(e){this.store=e}return i.prototype.put=function(e,t){var s;return void 0!==t?(P("SimpleDb","PUT",this.store.name,e,t),s=this.store.put(t,e)):(P("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),_i(s)},i.prototype.add=function(e){return P("SimpleDb","ADD",this.store.name,e,e),_i(this.store.add(e))},i.prototype.get=function(e){var t=this;return _i(this.store.get(e)).next(function(s){return void 0===s&&(s=null),P("SimpleDb","GET",t.store.name,e,s),s})},i.prototype.delete=function(e){return P("SimpleDb","DELETE",this.store.name,e),_i(this.store.delete(e))},i.prototype.count=function(){return P("SimpleDb","COUNT",this.store.name),_i(this.store.count())},i.prototype.Nt=function(e,t){var s=this.cursor(this.options(e,t)),a=[];return this.xt(s,function(c,d){a.push(d)}).next(function(){return a})},i.prototype.kt=function(e,t){P("SimpleDb","DELETE ALL",this.store.name);var s=this.options(e,t);s.Ft=!1;var a=this.cursor(s);return this.xt(a,function(c,d,p){return p.delete()})},i.prototype.$t=function(e,t){var s;t?s=e:(s={},t=e);var a=this.cursor(s);return this.xt(a,t)},i.prototype.Ot=function(e){var t=this.cursor({});return new N(function(s,a){t.onerror=function(c){var d=Al(c.target.error);a(d)},t.onsuccess=function(c){var d=c.target.result;d?e(d.primaryKey,d.value).next(function(p){p?d.continue():s()}):s()}})},i.prototype.xt=function(e,t){var s=[];return new N(function(a,c){e.onerror=function(d){c(d.target.error)},e.onsuccess=function(d){var p=d.target.result;if(p){var m=new AC(p),v=t(p.primaryKey,p.value,m);if(v instanceof N){var _=v.catch(function(b){return m.done(),N.reject(b)});s.push(_)}m.isDone?a():null===m.Dt?p.continue():p.continue(m.Dt)}else a()}}).next(function(){return N.waitFor(s)})},i.prototype.options=function(e,t){var s;return void 0!==e&&("string"==typeof e?s=e:t=e),{index:s,range:t}},i.prototype.cursor=function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var s=this.store.index(e.index);return e.Ft?s.openKeyCursor(e.range,t):s.openCursor(e.range,t)}return this.store.openCursor(e.range,t)},i}();function _i(i){return new N(function(e,t){i.onsuccess=function(s){e(s.target.result)},i.onerror=function(s){var a=Al(s.target.error);t(a)}})}var $g=!1;function Al(i){var e=gr._t((0,gt.z$)());if(e>=12.2&&e<13){var t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){var s=new R("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+t+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return $g||($g=!0,setTimeout(function(){throw s},0)),s}}return i}var tv=function(i){function e(t,s){var a=this;return(a=i.call(this)||this).Mt=t,a.currentSequenceNumber=s,a}return(0,S.ZT)(e,i),e}(Wg);function _e(i,e){var t=V(i);return gr.It(t.Mt,e)}var xl=function(){function i(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}return i.prototype.applyToRemoteDocument=function(e,t){for(var s=t.mutationResults,a=0;a<this.mutations.length;a++){var c=this.mutations[a];c.key.isEqual(e.key)&&sC(c,e,s[a])}},i.prototype.applyToLocalView=function(e){for(var t=0,s=this.baseMutations;t<s.length;t++)(d=s[t]).key.isEqual(e.key)&&Sl(d,e,this.localWriteTime);for(var a=0,c=this.mutations;a<c.length;a++){var d;(d=c[a]).key.isEqual(e.key)&&Sl(d,e,this.localWriteTime)}},i.prototype.applyToLocalDocumentSet=function(e){var t=this;this.mutations.forEach(function(s){var a=e.get(s.key),c=a;t.applyToLocalView(c),a.isValidDocument()||c.convertToNoDocument(st.min())})},i.prototype.keys=function(){return this.mutations.reduce(function(e,t){return e.add(t.key)},vt())},i.prototype.isEqual=function(e){return this.batchId===e.batchId&&ir(this.mutations,e.mutations,function(t,s){return bg(t,s)})&&ir(this.baseMutations,e.baseMutations,function(t,s){return bg(t,s)})},i}(),MC=function(){function i(e,t,s,a){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=a}return i.from=function(e,t,s){$(e.mutations.length===s.length);for(var a=Ag(),c=e.mutations,d=0;d<c.length;d++)a=a.insert(c[d].key,s[d].version);return new i(e,t,s,a)},i}(),Fa=function(){function i(e,t,s,a,c,d,p){void 0===c&&(c=st.min()),void 0===d&&(d=st.min()),void 0===p&&(p=fe.EMPTY_BYTE_STRING),this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=p}return i.prototype.withSequenceNumber=function(e){return new i(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},i.prototype.withResumeToken=function(e,t){return new i(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)},i.prototype.withLastLimboFreeSnapshotVersion=function(e){return new i(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},i}(),ev=function(i){this.Lt=i};function Ml(i,e){if(e.document)return qg(i.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var t=H.fromSegments(e.noDocument.path),s=yr(e.noDocument.readTime),a=te.newNoDocument(t,s);return e.hasCommittedMutations?a.setHasCommittedMutations():a}if(e.unknownDocument){var c=H.fromSegments(e.unknownDocument.path);return s=yr(e.unknownDocument.version),te.newUnknownDocument(c,s)}return G()}function nv(i,e,t){var b,I,s=Ol(t),a=e.key.path.popLast().toArray();if(e.isFoundDocument()){var c={name:Vo(b=i.Lt,(I=e).key),fields:I.data.value.mapValue.fields,updateTime:Lo(b,I.version.toTimestamp())},d=e.hasCommittedMutations;return new Mt(null,null,c,d,s,a)}if(e.isNoDocument()){var p=e.key.path.toArray(),m=vr(e.version);return d=e.hasCommittedMutations,new Mt(null,new kC(p,m),null,d,s,a)}if(e.isUnknownDocument()){var v=e.key.path.toArray(),_=vr(e.version);return new Mt(new DC(v,_),null,null,!0,s,a)}return G()}function Ol(i){var e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function iv(i){var e=new ve(i[0],i[1]);return st.fromTimestamp(e)}function vr(i){var e=i.toTimestamp();return new TC(e.seconds,e.nanoseconds)}function yr(i){var e=new ve(i.seconds,i.nanoseconds);return st.fromTimestamp(e)}function _r(i,e){for(var t=(e.baseMutations||[]).map(function(m){return Ug(i.Lt,m)}),s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);var d=e.mutations.map(function(m){return Ug(i.Lt,m)}),p=ve.fromMillis(e.localWriteTimeMs);return new xl(e.batchId,p,t,d)}function Uo(i){var e,t,s=yr(i.readTime),a=void 0!==i.lastLimboFreeSnapshotVersion?yr(i.lastLimboFreeSnapshotVersion):st.min();return void 0!==i.query.documents?($(1===(t=i.query).documents.length),e=Ve(ur(Lg(t.documents[0])))):e=Ve(Gg(i.query)),new Fa(e,i.targetId,0,i.lastListenSequenceNumber,s,a,fe.fromBase64String(i.resumeToken))}function rv(i,e){var t,s=vr(e.snapshotVersion),a=vr(e.lastLimboFreeSnapshotVersion);t=Ta(e.target)?jg(i.Lt,e.target):Yg(i.Lt,e.target);var c=e.resumeToken.toBase64();return new ye(e.targetId,xo(e.target),s,c,e.sequenceNumber,a,t)}function Rl(i){var e=Gg({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?lg(e,e.limit,"L"):e}var OC=function(){function i(){}return i.prototype.getBundleMetadata=function(e,t){return ov(e).get(t).next(function(s){if(s)return{id:(a=s).bundleId,createTime:yr(a.createTime),version:a.version};var a})},i.prototype.saveBundleMetadata=function(e,t){return ov(e).put({bundleId:(s=t).id,createTime:vr(Zt(s.createTime)),version:s.version});var s},i.prototype.getNamedQuery=function(e,t){return sv(e).get(t).next(function(s){if(s)return{name:(a=s).name,query:Rl(a.bundledQuery),readTime:yr(a.readTime)};var a})},i.prototype.saveNamedQuery=function(e,t){return sv(e).put({name:(s=t).name,readTime:vr(Zt(s.readTime)),bundledQuery:s.bundledQuery});var s},i}();function ov(i){return _e(i,pr.store)}function sv(i){return _e(i,mr.store)}var RC=function(){function i(){this.Bt=new Nl}return i.prototype.addToCollectionParentIndex=function(e,t){return this.Bt.add(t),N.resolve()},i.prototype.getCollectionParents=function(e,t){return N.resolve(this.Bt.getEntries(t))},i}(),Nl=function(){function i(){this.index={}}return i.prototype.add=function(e){var t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new jt(ft.comparator),c=!a.has(s);return this.index[t]=a.add(s),c},i.prototype.has=function(e){var t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)},i.prototype.getEntries=function(e){return(this.index[e]||new jt(ft.comparator)).toArray()},i}(),NC=function(){function i(){this.qt=new Nl}return i.prototype.addToCollectionParentIndex=function(e,t){var s=this;if(!this.qt.has(t)){var a=t.lastSegment(),c=t.popLast();e.addOnCommittedListener(function(){s.qt.add(t)});var d={collectionId:a,parent:Ze(c)};return av(e).put(d)}return N.resolve()},i.prototype.getCollectionParents=function(e,t){var s=[],a=IDBKeyRange.bound([t,""],[Jm(t),""],!1,!0);return av(e).Nt(a).next(function(c){for(var d=0,p=c;d<p.length;d++){var m=p[d];if(m.collectionId!==t)break;s.push(_n(m.parent))}return s})},i}();function av(i){return _e(i,vi.store)}var uv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},on=function(){function i(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}return i.withCacheSize=function(e){return new i(e,i.DEFAULT_COLLECTION_PERCENTILE,i.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},i}();function cv(i,e,t){var s=i.store(St.store),a=i.store(ae.store),c=[],d=IDBKeyRange.only(t.batchId),p=0,m=s.$t({range:d},function(T,E,M){return p++,M.delete()});c.push(m.next(function(){$(1===p)}));for(var v=[],_=0,b=t.mutations;_<b.length;_++){var I=b[_],k=ae.key(e,I.key.path,t.batchId);c.push(a.delete(k)),v.push(I.key)}return N.waitFor(c).next(function(){return v})}function La(i){if(!i)return 0;var e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw G();e=i.noDocument}return JSON.stringify(e).length}on.DEFAULT_COLLECTION_PERCENTILE=10,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,on.DEFAULT=new on(41943040,on.DEFAULT_COLLECTION_PERCENTILE,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),on.DISABLED=new on(-1,0,0);var PC=function(){function i(e,t,s,a){this.userId=e,this.R=t,this.Ut=s,this.referenceDelegate=a,this.Kt={}}return i.Qt=function(e,t,s,a){return $(""!==e.uid),new i(e.isAuthenticated()?e.uid:"",t,s,a)},i.prototype.checkEmpty=function(e){var t=!0,s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return qn(e).$t({index:St.userMutationsIndex,range:s},function(a,c,d){t=!1,d.done()}).next(function(){return t})},i.prototype.addMutationBatch=function(e,t,s,a){var c=this,d=wr(e),p=qn(e);return p.add({}).next(function(m){$("number"==typeof m);for(var v=new xl(m,t,s,a),_=function(F,Y,z){var ot=z.baseMutations.map(function(L){return Pa(F.Lt,L)}),lt=z.mutations.map(function(L){return Pa(F.Lt,L)});return new St(Y,z.batchId,z.localWriteTime.toMillis(),ot,lt)}(c.R,c.userId,v),b=[],I=new jt(function(F,Y){return ct(F.canonicalString(),Y.canonicalString())}),k=0,T=a;k<T.length;k++){var E=T[k],M=ae.key(c.userId,E.key.path,m);I=I.add(E.key.path.popLast()),b.push(p.put(_)),b.push(d.put(M,ae.PLACEHOLDER))}return I.forEach(function(F){b.push(c.Ut.addToCollectionParentIndex(e,F))}),e.addOnCommittedListener(function(){c.Kt[m]=v.keys()}),N.waitFor(b).next(function(){return v})})},i.prototype.lookupMutationBatch=function(e,t){var s=this;return qn(e).get(t).next(function(a){return a?($(a.userId===s.userId),_r(s.R,a)):null})},i.prototype.jt=function(e,t){var s=this;return this.Kt[t]?N.resolve(this.Kt[t]):this.lookupMutationBatch(e,t).next(function(a){if(a){var c=a.keys();return s.Kt[t]=c,c}return null})},i.prototype.getNextMutationBatchAfterBatchId=function(e,t){var s=this,a=t+1,c=IDBKeyRange.lowerBound([this.userId,a]),d=null;return qn(e).$t({index:St.userMutationsIndex,range:c},function(p,m,v){m.userId===s.userId&&($(m.batchId>=a),d=_r(s.R,m)),v.done()}).next(function(){return d})},i.prototype.getHighestUnacknowledgedBatchId=function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),s=-1;return qn(e).$t({index:St.userMutationsIndex,range:t,reverse:!0},function(a,c,d){s=c.batchId,d.done()}).next(function(){return s})},i.prototype.getAllMutationBatches=function(e){var t=this,s=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return qn(e).Nt(St.userMutationsIndex,s).next(function(a){return a.map(function(c){return _r(t.R,c)})})},i.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var s=this,a=ae.prefixForPath(this.userId,t.path),c=IDBKeyRange.lowerBound(a),d=[];return wr(e).$t({range:c},function(p,m,v){var _=p[0],I=p[2],k=_n(p[1]);if(_===s.userId&&t.path.isEqual(k))return qn(e).get(I).next(function(T){if(!T)throw G();$(T.userId===s.userId),d.push(_r(s.R,T))});v.done()}).next(function(){return d})},i.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var s=this,a=new jt(ct),c=[];return t.forEach(function(d){var p=ae.prefixForPath(s.userId,d.path),m=IDBKeyRange.lowerBound(p),v=wr(e).$t({range:m},function(_,b,I){var k=_[0],E=_[2],M=_n(_[1]);k===s.userId&&d.path.isEqual(M)?a=a.add(E):I.done()});c.push(v)}),N.waitFor(c).next(function(){return s.Wt(e,a)})},i.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var s=this,a=t.path,c=a.length+1,d=ae.prefixForPath(this.userId,a),p=IDBKeyRange.lowerBound(d),m=new jt(ct);return wr(e).$t({range:p},function(v,_,b){var I=v[0],T=v[2],E=_n(v[1]);I===s.userId&&a.isPrefixOf(E)?E.length===c&&(m=m.add(T)):b.done()}).next(function(){return s.Wt(e,m)})},i.prototype.Wt=function(e,t){var s=this,a=[],c=[];return t.forEach(function(d){c.push(qn(e).get(d).next(function(p){if(null===p)throw G();$(p.userId===s.userId),a.push(_r(s.R,p))}))}),N.waitFor(c).next(function(){return a})},i.prototype.removeMutationBatch=function(e,t){var s=this;return cv(e.Mt,this.userId,t).next(function(a){return e.addOnCommittedListener(function(){s.Gt(t.batchId)}),N.forEach(a,function(c){return s.referenceDelegate.markPotentiallyOrphaned(e,c)})})},i.prototype.Gt=function(e){delete this.Kt[e]},i.prototype.performConsistencyCheck=function(e){var t=this;return this.checkEmpty(e).next(function(s){if(!s)return N.resolve();var a=IDBKeyRange.lowerBound(ae.prefixForUser(t.userId)),c=[];return wr(e).$t({range:a},function(d,p,m){if(d[0]===t.userId){var v=_n(d[1]);c.push(v)}else m.done()}).next(function(){$(0===c.length)})})},i.prototype.containsKey=function(e,t){return lv(e,this.userId,t)},i.prototype.zt=function(e){var t=this;return hv(e).get(this.userId).next(function(s){return s||new Bn(t.userId,-1,"")})},i}();function lv(i,e,t){var s=ae.prefixForPath(e,t.path),a=s[1],c=IDBKeyRange.lowerBound(s),d=!1;return wr(i).$t({range:c,Ft:!0},function(p,m,v){p[0]===e&&p[1]===a&&(d=!0),v.done()}).next(function(){return d})}function qn(i){return _e(i,St.store)}function wr(i){return _e(i,ae.store)}function hv(i){return _e(i,Bn.store)}var Va=function(){function i(e){this.Ht=e}return i.prototype.next=function(){return this.Ht+=2,this.Ht},i.Jt=function(){return new i(0)},i.Yt=function(){return new i(-1)},i}(),FC=function(){function i(e,t){this.referenceDelegate=e,this.R=t}return i.prototype.allocateTargetId=function(e){var t=this;return this.Xt(e).next(function(s){var a=new Va(s.highestTargetId);return s.highestTargetId=a.next(),t.Zt(e,s).next(function(){return s.highestTargetId})})},i.prototype.getLastRemoteSnapshotVersion=function(e){return this.Xt(e).next(function(t){return st.fromTimestamp(new ve(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},i.prototype.getHighestSequenceNumber=function(e){return this.Xt(e).next(function(t){return t.highestListenSequenceNumber})},i.prototype.setTargetsMetadata=function(e,t,s){var a=this;return this.Xt(e).next(function(c){return c.highestListenSequenceNumber=t,s&&(c.lastRemoteSnapshotVersion=s.toTimestamp()),t>c.highestListenSequenceNumber&&(c.highestListenSequenceNumber=t),a.Zt(e,c)})},i.prototype.addTargetData=function(e,t){var s=this;return this.te(e,t).next(function(){return s.Xt(e).next(function(a){return a.targetCount+=1,s.ee(t,a),s.Zt(e,a)})})},i.prototype.updateTargetData=function(e,t){return this.te(e,t)},i.prototype.removeTargetData=function(e,t){var s=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next(function(){return br(e).delete(t.targetId)}).next(function(){return s.Xt(e)}).next(function(a){return $(a.targetCount>0),a.targetCount-=1,s.Zt(e,a)})},i.prototype.removeTargets=function(e,t,s){var a=this,c=0,d=[];return br(e).$t(function(p,m){var v=Uo(m);v.sequenceNumber<=t&&null===s.get(v.targetId)&&(c++,d.push(a.removeTargetData(e,v)))}).next(function(){return N.waitFor(d)}).next(function(){return c})},i.prototype.forEachTarget=function(e,t){return br(e).$t(function(s,a){var c=Uo(a);t(c)})},i.prototype.Xt=function(e){return dv(e).get(Oe.key).next(function(t){return $(null!==t),t})},i.prototype.Zt=function(e,t){return dv(e).put(Oe.key,t)},i.prototype.te=function(e,t){return br(e).put(rv(this.R,t))},i.prototype.ee=function(e,t){var s=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,s=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,s=!0),s},i.prototype.getTargetCount=function(e){return this.Xt(e).next(function(t){return t.targetCount})},i.prototype.getTargetData=function(e,t){var s=xo(t),a=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]),c=null;return br(e).$t({range:a,index:ye.queryTargetsIndexName},function(d,p,m){var v=Uo(p);Ca(t,v.target)&&(c=v,m.done())}).next(function(){return c})},i.prototype.addMatchingKeys=function(e,t,s){var a=this,c=[],d=Un(e);return t.forEach(function(p){var m=Ze(p.path);c.push(d.put(new ee(s,m))),c.push(a.referenceDelegate.addReference(e,s,p))}),N.waitFor(c)},i.prototype.removeMatchingKeys=function(e,t,s){var a=this,c=Un(e);return N.forEach(t,function(d){var p=Ze(d.path);return N.waitFor([c.delete([s,p]),a.referenceDelegate.removeReference(e,s,d)])})},i.prototype.removeMatchingKeysForTargetId=function(e,t){var s=Un(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return s.delete(a)},i.prototype.getMatchingKeysForTargetId=function(e,t){var s=IDBKeyRange.bound([t],[t+1],!1,!0),a=Un(e),c=vt();return a.$t({range:s,Ft:!0},function(d,p,m){var v=_n(d[1]),_=new H(v);c=c.add(_)}).next(function(){return c})},i.prototype.containsKey=function(e,t){var s=Ze(t.path),a=IDBKeyRange.bound([s],[Jm(s)],!1,!0),c=0;return Un(e).$t({index:ee.documentTargetsIndex,Ft:!0,range:a},function(d,p,m){0!==d[0]&&(c++,m.done())}).next(function(){return c>0})},i.prototype.lt=function(e,t){return br(e).get(t).next(function(s){return s?Uo(s):null})},i}();function br(i){return _e(i,ye.store)}function dv(i){return _e(i,Oe.store)}function Un(i){return _e(i,ee.store)}function wi(i){return(0,S.mG)(this,void 0,void 0,function(){return(0,S.Jh)(this,function(e){if(i.code!==A.FAILED_PRECONDITION||i.message!==Qg)throw i;return P("LocalStore","Unexpectedly lost primary lease"),[2]})})}function fv(i,e){var s=i[1],c=e[1],d=ct(i[0],e[0]);return 0===d?ct(s,c):d}var LC=function(){function i(e){this.ne=e,this.buffer=new jt(fv),this.se=0}return i.prototype.ie=function(){return++this.se},i.prototype.re=function(e){var t=[e,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(t);else{var s=this.buffer.last();fv(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}},Object.defineProperty(i.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),i}(),VC=function(){function i(e,t){this.garbageCollector=e,this.asyncQueue=t,this.oe=!1,this.ce=null}return i.prototype.start=function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(e)},i.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(i.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),i.prototype.ue=function(e){var t=this,s=this.oe?3e5:6e4;P("LruGarbageCollector","Garbage collection scheduled in "+s+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",s,function(){return(0,S.mG)(t,void 0,void 0,function(){var a;return(0,S.Jh)(this,function(c){switch(c.label){case 0:this.ce=null,this.oe=!0,c.label=1;case 1:return c.trys.push([1,3,,7]),[4,e.collectGarbage(this.garbageCollector)];case 2:return c.sent(),[3,7];case 3:return yi(a=c.sent())?(P("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",a),[3,6]):[3,4];case 4:return[4,wi(a)];case 5:c.sent(),c.label=6;case 6:return[3,7];case 7:return[4,this.ue(e)];case 8:return c.sent(),[2]}})})})},i}(),BC=function(){function i(e,t){this.ae=e,this.params=t}return i.prototype.calculateTargetCount=function(e,t){return this.ae.he(e).next(function(s){return Math.floor(t/100*s)})},i.prototype.nthSequenceNumber=function(e,t){var s=this;if(0===t)return N.resolve(Ee.o);var a=new LC(t);return this.ae.forEachTarget(e,function(c){return a.re(c.sequenceNumber)}).next(function(){return s.ae.le(e,function(c){return a.re(c)})}).next(function(){return a.maxValue})},i.prototype.removeTargets=function(e,t,s){return this.ae.removeTargets(e,t,s)},i.prototype.removeOrphanedDocuments=function(e,t){return this.ae.removeOrphanedDocuments(e,t)},i.prototype.collect=function(e,t){var s=this;return-1===this.params.cacheSizeCollectionThreshold?(P("LruGarbageCollector","Garbage collection skipped; disabled"),N.resolve(uv)):this.getCacheSize(e).next(function(a){return a<s.params.cacheSizeCollectionThreshold?(P("LruGarbageCollector","Garbage collection skipped; Cache size "+a+" is lower than threshold "+s.params.cacheSizeCollectionThreshold),uv):s.fe(e,t)})},i.prototype.getCacheSize=function(e){return this.ae.getCacheSize(e)},i.prototype.fe=function(e,t){var s,a,c,d,p,m,v,_=this,b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(function(I){return I>_.params.maximumSequenceNumbersToCollect?(P("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+_.params.maximumSequenceNumbersToCollect+" from "+I),a=_.params.maximumSequenceNumbersToCollect):a=I,d=Date.now(),_.nthSequenceNumber(e,a)}).next(function(I){return s=I,p=Date.now(),_.removeTargets(e,s,t)}).next(function(I){return c=I,m=Date.now(),_.removeOrphanedDocuments(e,s)}).next(function(I){return v=Date.now(),hl()<=si.in.DEBUG&&P("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(d-b)+"ms\n\tDetermined least recently used "+a+" in "+(p-d)+"ms\n\tRemoved "+c+" targets in "+(m-p)+"ms\n\tRemoved "+I+" documents in "+(v-m)+"ms\nTotal Duration: "+(v-b)+"ms"),N.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:c,documentsRemoved:I})})},i}(),qC=function(){function i(e,t){this.db=e,this.garbageCollector=new BC(this,t)}return i.prototype.he=function(e){var t=this.de(e);return this.db.getTargetCache().getTargetCount(e).next(function(s){return t.next(function(a){return s+a})})},i.prototype.de=function(e){var t=0;return this.le(e,function(s){t++}).next(function(){return t})},i.prototype.forEachTarget=function(e,t){return this.db.getTargetCache().forEachTarget(e,t)},i.prototype.le=function(e,t){return this.we(e,function(s,a){return t(a)})},i.prototype.addReference=function(e,t,s){return Ba(e,s)},i.prototype.removeReference=function(e,t,s){return Ba(e,s)},i.prototype.removeTargets=function(e,t,s){return this.db.getTargetCache().removeTargets(e,t,s)},i.prototype.markPotentiallyOrphaned=function(e,t){return Ba(e,t)},i.prototype._e=function(e,t){return a=t,c=!1,hv(s=e).Ot(function(d){return lv(s,d,a).next(function(p){return p&&(c=!0),N.resolve(!p)})}).next(function(){return c});var s,a,c},i.prototype.removeOrphanedDocuments=function(e,t){var s=this,a=this.db.getRemoteDocumentCache().newChangeBuffer(),c=[],d=0;return this.we(e,function(p,m){if(m<=t){var v=s._e(e,p).next(function(_){if(!_)return d++,a.getEntry(e,p).next(function(){return a.removeEntry(p),Un(e).delete([0,Ze(p.path)])})});c.push(v)}}).next(function(){return N.waitFor(c)}).next(function(){return a.apply(e)}).next(function(){return d})},i.prototype.removeTarget=function(e,t){var s=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)},i.prototype.updateLimboDocument=function(e,t){return Ba(e,t)},i.prototype.we=function(e,t){var s,a=Un(e),c=Ee.o;return a.$t({index:ee.documentTargetsIndex},function(d,p){var v=p.path,_=p.sequenceNumber;0===d[0]?(c!==Ee.o&&t(new H(_n(s)),c),c=_,s=v):c=Ee.o}).next(function(){c!==Ee.o&&t(new H(_n(s)),c)})},i.prototype.getCacheSize=function(e){return this.db.getRemoteDocumentCache().getSize(e)},i}();function Ba(i,e){return Un(i).put((s=i.currentSequenceNumber,new ee(0,Ze(e.path),s)));var s}var Sr=function(){function i(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}return i.prototype.get=function(e){var t=this.mapKeyFn(e),s=this.inner[t];if(void 0!==s)for(var a=0,c=s;a<c.length;a++){var d=c[a],m=d[1];if(this.equalsFn(d[0],e))return m}},i.prototype.has=function(e){return void 0!==this.get(e)},i.prototype.set=function(e,t){var s=this.mapKeyFn(e),a=this.inner[s];if(void 0!==a){for(var c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return void(a[c]=[e,t]);a.push([e,t])}else this.inner[s]=[[e,t]]},i.prototype.delete=function(e){var t=this.mapKeyFn(e),s=this.inner[t];if(void 0===s)return!1;for(var a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return 1===s.length?delete this.inner[t]:s.splice(a,1),!0;return!1},i.prototype.forEach=function(e){di(this.inner,function(t,s){for(var a=0,c=s;a<c.length;a++){var d=c[a];e(d[0],d[1])}})},i.prototype.isEmpty=function(){return Wm(this.inner)},i}(),pv=function(){function i(){this.changes=new Sr(function(e){return e.toString()},function(e,t){return e.isEqual(t)}),this.changesApplied=!1}return i.prototype.getReadTime=function(e){var t=this.changes.get(e);return t?t.readTime:st.min()},i.prototype.addEntry=function(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})},i.prototype.removeEntry=function(e,t){void 0===t&&(t=null),this.assertNotApplied(),this.changes.set(e,{document:te.newInvalidDocument(e),readTime:t})},i.prototype.getEntry=function(e,t){this.assertNotApplied();var s=this.changes.get(t);return void 0!==s?N.resolve(s.document):this.getFromCache(e,t)},i.prototype.getEntries=function(e,t){return this.getAllFromCache(e,t)},i.prototype.apply=function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)},i.prototype.assertNotApplied=function(){},i}(),UC=function(){function i(e,t){this.R=e,this.Ut=t}return i.prototype.addEntry=function(e,t,s){return jn(e).put(qa(t),s)},i.prototype.removeEntry=function(e,t){var s=jn(e),a=qa(t);return s.delete(a)},i.prototype.updateMetadata=function(e,t){var s=this;return this.getMetadata(e).next(function(a){return a.byteSize+=t,s.me(e,a)})},i.prototype.getEntry=function(e,t){var s=this;return jn(e).get(qa(t)).next(function(a){return s.ye(t,a)})},i.prototype.ge=function(e,t){var s=this;return jn(e).get(qa(t)).next(function(a){return{document:s.ye(t,a),size:La(a)}})},i.prototype.getEntries=function(e,t){var s=this,a=Be();return this.pe(e,t,function(c,d){var p=s.ye(c,d);a=a.insert(c,p)}).next(function(){return a})},i.prototype.Ee=function(e,t){var s=this,a=Be(),c=new se(H.comparator);return this.pe(e,t,function(d,p){var m=s.ye(d,p);a=a.insert(d,m),c=c.insert(d,La(p))}).next(function(){return{documents:a,Te:c}})},i.prototype.pe=function(e,t,s){if(t.isEmpty())return N.resolve();var a=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),c=t.getIterator(),d=c.getNext();return jn(e).$t({range:a},function(p,m,v){for(var _=H.fromSegments(p);d&&H.comparator(d,_)<0;)s(d,null),d=c.getNext();d&&d.isEqual(_)&&(s(d,m),d=c.hasNext()?c.getNext():null),d?v.Ct(d.path.toArray()):v.done()}).next(function(){for(;d;)s(d,null),d=c.hasNext()?c.getNext():null})},i.prototype.getDocumentsMatchingQuery=function(e,t,s){var a=this,c=Be(),d=t.path.length+1,p={};if(s.isEqual(st.min())){var m=t.path.toArray();p.range=IDBKeyRange.lowerBound(m)}else{var v=t.path.toArray(),_=Ol(s);p.range=IDBKeyRange.lowerBound([v,_],!0),p.index=Mt.collectionReadTimeIndex}return jn(e).$t(p,function(b,I,k){if(b.length===d){var T=Ml(a.R,I);t.path.isPrefixOf(T.key.path)?Ro(t,T)&&(c=c.insert(T.key,T)):k.done()}}).next(function(){return c})},i.prototype.newChangeBuffer=function(e){return new jC(this,!!e&&e.trackRemovals)},i.prototype.getSize=function(e){return this.getMetadata(e).next(function(t){return t.byteSize})},i.prototype.getMetadata=function(e){return mv(e).get(rn.key).next(function(t){return $(!!t),t})},i.prototype.me=function(e,t){return mv(e).put(rn.key,t)},i.prototype.ye=function(e,t){if(t){var s=Ml(this.R,t);if(!s.isNoDocument()||!s.version.isEqual(st.min()))return s}return te.newInvalidDocument(e)},i}(),jC=function(i){function e(t,s){var a=this;return(a=i.call(this)||this).Ie=t,a.trackRemovals=s,a.Ae=new Sr(function(c){return c.toString()},function(c,d){return c.isEqual(d)}),a}return(0,S.ZT)(e,i),e.prototype.applyChanges=function(t){var s=this,a=[],c=0,d=new jt(function(p,m){return ct(p.canonicalString(),m.canonicalString())});return this.changes.forEach(function(p,m){var v=s.Ae.get(p);if(m.document.isValidDocument()){var _=nv(s.Ie.R,m.document,s.getReadTime(p));d=d.add(p.path.popLast());var b=La(_);c+=b-v,a.push(s.Ie.addEntry(t,p,_))}else if(c-=v,s.trackRemovals){var I=nv(s.Ie.R,te.newNoDocument(p,st.min()),s.getReadTime(p));a.push(s.Ie.addEntry(t,p,I))}else a.push(s.Ie.removeEntry(t,p))}),d.forEach(function(p){a.push(s.Ie.Ut.addToCollectionParentIndex(t,p))}),a.push(this.Ie.updateMetadata(t,c)),N.waitFor(a)},e.prototype.getFromCache=function(t,s){var a=this;return this.Ie.ge(t,s).next(function(c){return a.Ae.set(s,c.size),c.document})},e.prototype.getAllFromCache=function(t,s){var a=this;return this.Ie.Ee(t,s).next(function(c){var d=c.documents;return c.Te.forEach(function(p,m){a.Ae.set(p,m)}),d})},e}(pv);function mv(i){return _e(i,rn.store)}function jn(i){return _e(i,Mt.store)}function qa(i){return i.path.toArray()}var YC=function(){function i(e){this.R=e}return i.prototype.Rt=function(e,t,s,a){var c=this;$(s<a&&s>=0&&a<=11);var m,d=new Xg("createOrUpgrade",t);s<1&&a>=1&&(e.createObjectStore(Me.store),(m=e).createObjectStore(Bn.store,{keyPath:Bn.keyPath}),m.createObjectStore(St.store,{keyPath:St.keyPath,autoIncrement:!0}).createIndex(St.userMutationsIndex,St.userMutationsKeyPath,{unique:!0}),m.createObjectStore(ae.store),gv(e),function(m){m.createObjectStore(Mt.store)}(e));var p=N.resolve();return s<3&&a>=3&&(0!==s&&(function(m){m.deleteObjectStore(ee.store),m.deleteObjectStore(ye.store),m.deleteObjectStore(Oe.store)}(e),gv(e)),p=p.next(function(){return function(m){var v=m.store(Oe.store),_=new Oe(0,0,st.min().toTimestamp(),0);return v.put(Oe.key,_)}(d)})),s<4&&a>=4&&(0!==s&&(p=p.next(function(){return function(m,v){return v.store(St.store).Nt().next(function(_){m.deleteObjectStore(St.store),m.createObjectStore(St.store,{keyPath:St.keyPath,autoIncrement:!0}).createIndex(St.userMutationsIndex,St.userMutationsKeyPath,{unique:!0});var b=v.store(St.store),I=_.map(function(k){return b.put(k)});return N.waitFor(I)})}(e,d)})),p=p.next(function(){!function(m){m.createObjectStore(wn.store,{keyPath:wn.keyPath})}(e)})),s<5&&a>=5&&(p=p.next(function(){return c.Re(d)})),s<6&&a>=6&&(p=p.next(function(){return function(m){m.createObjectStore(rn.store)}(e),c.be(d)})),s<7&&a>=7&&(p=p.next(function(){return c.ve(d)})),s<8&&a>=8&&(p=p.next(function(){return c.Pe(e,d)})),s<9&&a>=9&&(p=p.next(function(){(function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")})(e),function(m){var v=m.objectStore(Mt.store);v.createIndex(Mt.readTimeIndex,Mt.readTimeIndexPath,{unique:!1}),v.createIndex(Mt.collectionReadTimeIndex,Mt.collectionReadTimeIndexPath,{unique:!1})}(t)})),s<10&&a>=10&&(p=p.next(function(){return c.Ve(d)})),s<11&&a>=11&&(p=p.next(function(){(function(m){m.createObjectStore(pr.store,{keyPath:pr.keyPath})})(e),function(m){m.createObjectStore(mr.store,{keyPath:mr.keyPath})}(e)})),p},i.prototype.be=function(e){var t=0;return e.store(Mt.store).$t(function(s,a){t+=La(a)}).next(function(){var s=new rn(t);return e.store(rn.store).put(rn.key,s)})},i.prototype.Re=function(e){var t=this,s=e.store(Bn.store),a=e.store(St.store);return s.Nt().next(function(c){return N.forEach(c,function(d){var p=IDBKeyRange.bound([d.userId,-1],[d.userId,d.lastAcknowledgedBatchId]);return a.Nt(St.userMutationsIndex,p).next(function(m){return N.forEach(m,function(v){$(v.userId===d.userId);var _=_r(t.R,v);return cv(e,d.userId,_).next(function(){})})})})})},i.prototype.ve=function(e){var t=e.store(ee.store),s=e.store(Mt.store);return e.store(Oe.store).get(Oe.key).next(function(a){var c=[];return s.$t(function(d,p){var m=new ft(d),v=[0,Ze(m)];c.push(t.get(v).next(function(_){return _?N.resolve():t.put(new ee(0,Ze(m),a.highestListenSequenceNumber))}))}).next(function(){return N.waitFor(c)})})},i.prototype.Pe=function(e,t){e.createObjectStore(vi.store,{keyPath:vi.keyPath});var s=t.store(vi.store),a=new Nl,c=function(d){if(a.add(d)){var p=d.lastSegment(),m=d.popLast();return s.put({collectionId:p,parent:Ze(m)})}};return t.store(Mt.store).$t({Ft:!0},function(d,p){var m=new ft(d);return c(m.popLast())}).next(function(){return t.store(ae.store).$t({Ft:!0},function(d,p){var v=_n(d[1]);return c(v.popLast())})})},i.prototype.Ve=function(e){var t=this,s=e.store(ye.store);return s.$t(function(a,c){var d=Uo(c),p=rv(t.R,d);return s.put(p)})},i}();function gv(i){i.createObjectStore(ee.store,{keyPath:ee.keyPath}).createIndex(ee.documentTargetsIndex,ee.documentTargetsKeyPath,{unique:!0}),i.createObjectStore(ye.store,{keyPath:ye.keyPath}).createIndex(ye.queryTargetsIndexName,ye.queryTargetsKeyPath,{unique:!0}),i.createObjectStore(Oe.store)}var Pl="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",GC=function(){function i(e,t,s,a,c,d,p,m,v,_){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=s,this.Se=c,this.window=d,this.document=p,this.De=v,this.Ce=_,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ke=null,this.inForeground=!1,this.Fe=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(b){return Promise.resolve()},!i.yt())throw new R(A.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new qC(this,a),this.Le=t+"main",this.R=new ev(m),this.Be=new gr(this.Le,11,new YC(this.R)),this.qe=new FC(this.referenceDelegate,this.R),this.Ut=new NC,this.Ue=new UC(this.R,this.Ut),this.Ke=new OC,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===_&&Vt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return i.prototype.start=function(){var e=this;return this.je().then(function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new R(A.FAILED_PRECONDITION,Pl);return e.We(),e.Ge(),e.ze(),e.runTransaction("getHighestListenSequenceNumber","readonly",function(t){return e.qe.getHighestSequenceNumber(t)})}).then(function(t){e.Ne=new Ee(t,e.De)}).then(function(){e.xe=!0}).catch(function(t){return e.Be&&e.Be.close(),Promise.reject(t)})},i.prototype.He=function(e){var t=this;return this.Me=function(s){return(0,S.mG)(t,void 0,void 0,function(){return(0,S.Jh)(this,function(a){return this.started?[2,e(s)]:[2]})})},e(this.isPrimary)},i.prototype.setDatabaseDeletedListener=function(e){var t=this;this.Be.vt(function(s){return(0,S.mG)(t,void 0,void 0,function(){return(0,S.Jh)(this,function(a){switch(a.label){case 0:return null===s.newVersion?[4,e()]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})})},i.prototype.setNetworkEnabled=function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Se.enqueueAndForget(function(){return(0,S.mG)(t,void 0,void 0,function(){return(0,S.Jh)(this,function(s){switch(s.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:s.sent(),s.label=2;case 2:return[2]}})})}))},i.prototype.je=function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(t){return Ua(t).put(new wn(e.clientId,Date.now(),e.networkEnabled,e.inForeground)).next(function(){if(e.isPrimary)return e.Je(t).next(function(s){s||(e.isPrimary=!1,e.Se.enqueueRetryable(function(){return e.Me(!1)}))})}).next(function(){return e.Ye(t)}).next(function(s){return e.isPrimary&&!s?e.Xe(t).next(function(){return!1}):!!s&&e.Ze(t).next(function(){return!0})})}).catch(function(t){if(yi(t))return P("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return P("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(function(t){e.isPrimary!==t&&e.Se.enqueueRetryable(function(){return e.Me(t)}),e.isPrimary=t})},i.prototype.Je=function(e){var t=this;return jo(e).get(Me.key).next(function(s){return N.resolve(t.tn(s))})},i.prototype.en=function(e){return Ua(e).delete(this.clientId)},i.prototype.nn=function(){return(0,S.mG)(this,void 0,void 0,function(){var e,t,s,c=this;return(0,S.Jh)(this,function(d){switch(d.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(p){var m=_e(p,wn.store);return m.Nt().next(function(v){var _=c.rn(v,18e5),b=v.filter(function(I){return-1===_.indexOf(I)});return N.forEach(b,function(I){return m.delete(I.clientId)}).next(function(){return b})})}).catch(function(){return[]})]);case 1:if(e=d.sent(),this.Qe)for(t=0,s=e;t<s.length;t++)this.Qe.removeItem(this.on(s[t].clientId));d.label=2;case 2:return[2]}})})},i.prototype.ze=function(){var e=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return e.je().then(function(){return e.nn()}).then(function(){return e.ze()})})},i.prototype.tn=function(e){return!!e&&e.ownerId===this.clientId},i.prototype.Ye=function(e){var t=this;return this.Ce?N.resolve(!0):jo(e).get(Me.key).next(function(s){if(null!==s&&t.sn(s.leaseTimestampMs,5e3)&&!t.cn(s.ownerId)){if(t.tn(s)&&t.networkEnabled)return!0;if(!t.tn(s)){if(!s.allowTabSynchronization)throw new R(A.FAILED_PRECONDITION,Pl);return!1}}return!(!t.networkEnabled||!t.inForeground)||Ua(e).Nt().next(function(a){return void 0===t.rn(a,5e3).find(function(c){return!(t.clientId===c.clientId||!(!t.networkEnabled&&c.networkEnabled||!t.inForeground&&c.inForeground&&t.networkEnabled===c.networkEnabled))})})}).next(function(s){return t.isPrimary!==s&&P("IndexedDbPersistence","Client "+(s?"is":"is not")+" eligible for a primary lease."),s})},i.prototype.shutdown=function(){return(0,S.mG)(this,void 0,void 0,function(){var e=this;return(0,S.Jh)(this,function(t){switch(t.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[Me.store,wn.store],function(s){var a=new tv(s,Ee.o);return e.Xe(a).next(function(){return e.en(a)})})];case 1:return t.sent(),this.Be.close(),this.ln(),[2]}})})},i.prototype.rn=function(e,t){var s=this;return e.filter(function(a){return s.sn(a.updateTimeMs,t)&&!s.cn(a.clientId)})},i.prototype.fn=function(){var e=this;return this.runTransaction("getActiveClients","readonly",function(t){return Ua(t).Nt().next(function(s){return e.rn(s,18e5).map(function(a){return a.clientId})})})},Object.defineProperty(i.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),i.prototype.getMutationQueue=function(e){return PC.Qt(e,this.R,this.Ut,this.referenceDelegate)},i.prototype.getTargetCache=function(){return this.qe},i.prototype.getRemoteDocumentCache=function(){return this.Ue},i.prototype.getIndexManager=function(){return this.Ut},i.prototype.getBundleCache=function(){return this.Ke},i.prototype.runTransaction=function(e,t,s){var c,a=this;return P("IndexedDbPersistence","Starting transaction:",e),this.Be.runTransaction(e,"readonly"===t?"readonly":"readwrite",EC,function(p){return c=new tv(p,a.Ne?a.Ne.next():Ee.o),"readwrite-primary"===t?a.Je(c).next(function(m){return!!m||a.Ye(c)}).next(function(m){if(!m)throw Vt("Failed to obtain primary lease for action '"+e+"'."),a.isPrimary=!1,a.Se.enqueueRetryable(function(){return a.Me(!1)}),new R(A.FAILED_PRECONDITION,Qg);return s(c)}).next(function(m){return a.Ze(c).next(function(){return m})}):a.dn(c).next(function(){return s(c)})}).then(function(p){return c.raiseOnCommittedEvent(),p})},i.prototype.dn=function(e){var t=this;return jo(e).get(Me.key).next(function(s){if(null!==s&&t.sn(s.leaseTimestampMs,5e3)&&!t.cn(s.ownerId)&&!t.tn(s)&&!(t.Ce||t.allowTabSynchronization&&s.allowTabSynchronization))throw new R(A.FAILED_PRECONDITION,Pl)})},i.prototype.Ze=function(e){var t=new Me(this.clientId,this.allowTabSynchronization,Date.now());return jo(e).put(Me.key,t)},i.yt=function(){return gr.yt()},i.prototype.Xe=function(e){var t=this,s=jo(e);return s.get(Me.key).next(function(a){return t.tn(a)?(P("IndexedDbPersistence","Releasing primary lease."),s.delete(Me.key)):N.resolve()})},i.prototype.sn=function(e,t){var s=Date.now();return!(e<s-t||e>s&&(Vt("Detected an update time that is in the future: "+e+" > "+s),1))},i.prototype.We=function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Fe=function(){e.Se.enqueueAndForget(function(){return e.inForeground="visible"===e.document.visibilityState,e.je()})},this.document.addEventListener("visibilitychange",this.Fe),this.inForeground="visible"===this.document.visibilityState)},i.prototype.an=function(){this.Fe&&(this.document.removeEventListener("visibilitychange",this.Fe),this.Fe=null)},i.prototype.Ge=function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ke=function(){t.un(),(0,gt.G6)()&&navigator.appVersion.match("Version/14")&&t.Se.enterRestrictedMode(!0),t.Se.enqueueAndForget(function(){return t.shutdown()})},this.window.addEventListener("pagehide",this.ke))},i.prototype.hn=function(){this.ke&&(this.window.removeEventListener("pagehide",this.ke),this.ke=null)},i.prototype.cn=function(e){var t;try{var s=null!==(null===(t=this.Qe)||void 0===t?void 0:t.getItem(this.on(e)));return P("IndexedDbPersistence","Client '"+e+"' "+(s?"is":"is not")+" zombied in LocalStorage"),s}catch(a){return Vt("IndexedDbPersistence","Failed to get zombied client id.",a),!1}},i.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(e){Vt("Failed to set zombie client id.",e)}},i.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(e){}},i.prototype.on=function(e){return"firestore_zombie_"+this.persistenceKey+"_"+e},i}();function jo(i){return _e(i,Me.store)}function Ua(i){return _e(i,wn.store)}function Fl(i,e){var t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}var HC=function(i,e){this.progress=i,this.wn=e},vv=function(){function i(e,t,s){this.Ue=e,this._n=t,this.Ut=s}return i.prototype.mn=function(e,t){var s=this;return this._n.getAllMutationBatchesAffectingDocumentKey(e,t).next(function(a){return s.yn(e,t,a)})},i.prototype.yn=function(e,t,s){return this.Ue.getEntry(e,t).next(function(a){for(var c=0,d=s;c<d.length;c++)d[c].applyToLocalView(a);return a})},i.prototype.gn=function(e,t){e.forEach(function(s,a){for(var c=0,d=t;c<d.length;c++)d[c].applyToLocalView(a)})},i.prototype.pn=function(e,t){var s=this;return this.Ue.getEntries(e,t).next(function(a){return s.En(e,a).next(function(){return a})})},i.prototype.En=function(e,t){var s=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(e,t).next(function(a){return s.gn(t,a)})},i.prototype.getDocumentsMatchingQuery=function(e,t,s){return H.isDocumentKey((a=t).path)&&null===a.collectionGroup&&0===a.filters.length?this.Tn(e,t.path):wl(t)?this.In(e,t,s):this.An(e,t,s);var a},i.prototype.Tn=function(e,t){return this.mn(e,new H(t)).next(function(s){var a=Cl();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a})},i.prototype.In=function(e,t,s){var a=this,c=t.collectionGroup,d=Cl();return this.Ut.getCollectionParents(e,c).next(function(p){return N.forEach(p,function(m){var _,b,v=(_=t,b=m.child(c),new yn(b,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt));return a.An(e,v,s).next(function(_){_.forEach(function(b,I){d=d.insert(b,I)})})}).next(function(){return d})})},i.prototype.An=function(e,t,s){var a,c,d=this;return this.Ue.getDocumentsMatchingQuery(e,t,s).next(function(p){return a=p,d._n.getAllMutationBatchesAffectingQuery(e,t)}).next(function(p){return d.Rn(e,c=p,a).next(function(m){a=m;for(var v=0,_=c;v<_.length;v++)for(var b=_[v],I=0,k=b.mutations;I<k.length;I++){var T=k[I],E=T.key,M=a.get(E);null==M&&(M=te.newInvalidDocument(E),a=a.insert(E,M)),Sl(T,M,b.localWriteTime),M.isFoundDocument()||(a=a.remove(E))}})}).next(function(){return a.forEach(function(p,m){Ro(t,m)||(a=a.remove(p))}),a})},i.prototype.Rn=function(e,t,s){for(var a=vt(),c=0,d=t;c<d.length;c++)for(var p=0,m=d[c].mutations;p<m.length;p++){var v=m[p];v instanceof Ln&&null===s.get(v.key)&&(a=a.add(v.key))}var _=s;return this.Ue.getEntries(e,a).next(function(b){return b.forEach(function(I,k){k.isFoundDocument()&&(_=_.insert(I,k))}),_})},i}(),zC=function(){function i(e,t,s,a){this.targetId=e,this.fromCache=t,this.bn=s,this.vn=a}return i.Pn=function(e,t){for(var s=vt(),a=vt(),c=0,d=t.docChanges;c<d.length;c++){var p=d[c];switch(p.type){case 0:s=s.add(p.doc.key);break;case 1:a=a.add(p.doc.key)}}return new i(e,t.fromCache,s,a)},i}(),yv=function(){function i(){}return i.prototype.Vn=function(e){this.Sn=e},i.prototype.getDocumentsMatchingQuery=function(e,t,s,a){var d,c=this;return 0===(d=t).filters.length&&null===d.limit&&null==d.startAt&&null==d.endAt&&(0===d.explicitOrderBy.length||1===d.explicitOrderBy.length&&d.explicitOrderBy[0].field.isKeyField())||s.isEqual(st.min())?this.Dn(e,t):this.Sn.pn(e,a).next(function(d){var p=c.Cn(t,d);return(Da(t)||Ea(t))&&c.Nn(t.limitType,p,a,s)?c.Dn(e,t):(hl()<=si.in.DEBUG&&P("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),bl(t)),c.Sn.getDocumentsMatchingQuery(e,t,s).next(function(m){return p.forEach(function(v){m=m.insert(v.key,v)}),m}))})},i.prototype.Cn=function(e,t){var s=new jt(dg(e));return t.forEach(function(a,c){Ro(e,c)&&(s=s.add(c))}),s},i.prototype.Nn=function(e,t,s,a){if(s.size!==t.size)return!0;var c="F"===e?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)},i.prototype.Dn=function(e,t){return hl()<=si.in.DEBUG&&P("QueryEngine","Using full collection scan to execute query:",bl(t)),this.Sn.getDocumentsMatchingQuery(e,t,st.min())},i}(),ZC=function(){function i(e,t,s,a){this.persistence=e,this.xn=t,this.R=a,this.kn=new se(ct),this.Fn=new Sr(function(c){return xo(c)},Ca),this.$n=st.min(),this._n=e.getMutationQueue(s),this.On=e.getRemoteDocumentCache(),this.qe=e.getTargetCache(),this.Mn=new vv(this.On,this._n,this.persistence.getIndexManager()),this.Ke=e.getBundleCache(),this.xn.Vn(this.Mn)}return i.prototype.collectGarbage=function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(s){return e.collect(s,t.kn)})},i}();function _v(i,e,t,s){return new ZC(i,e,t,s)}function wv(i,e){return(0,S.mG)(this,void 0,void 0,function(){var t,s,a,c;return(0,S.Jh)(this,function(d){switch(d.label){case 0:return t=V(i),s=t._n,a=t.Mn,[4,t.persistence.runTransaction("Handle user change","readonly",function(p){var m;return t._n.getAllMutationBatches(p).next(function(v){return m=v,s=t.persistence.getMutationQueue(e),a=new vv(t.On,s,t.persistence.getIndexManager()),s.getAllMutationBatches(p)}).next(function(v){for(var _=[],b=[],I=vt(),k=0,T=m;k<T.length;k++){var E=T[k];_.push(E.batchId);for(var M=0,F=E.mutations;M<F.length;M++)I=I.add(F[M].key)}for(var z=0,ot=v;z<ot.length;z++){var lt=ot[z];b.push(lt.batchId);for(var L=0,Tt=lt.mutations;L<Tt.length;L++)I=I.add(Tt[L].key)}return a.pn(p,I).next(function(tt){return{Ln:tt,removedBatchIds:_,addedBatchIds:b}})})})];case 1:return c=d.sent(),[2,(t._n=s,t.Mn=a,t.xn.Vn(t.Mn),c)]}})})}function KC(i,e){var t=V(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(s){var d,p,m,v,_,b,I,a=e.batch.keys(),c=t.On.newChangeBuffer({trackRemovals:!0});return(d=t,p=s,m=e,v=c,_=m.batch,b=_.keys(),I=N.resolve(),b.forEach(function(k){I=I.next(function(){return v.getEntry(p,k)}).next(function(T){var E=m.docVersions.get(k);$(null!==E),T.version.compareTo(E)<0&&(_.applyToRemoteDocument(T,m),T.isValidDocument()&&v.addEntry(T,m.commitVersion))})}),I.next(function(){return d._n.removeMutationBatch(p,_)})).next(function(){return c.apply(s)}).next(function(){return t._n.performConsistencyCheck(s)}).next(function(){return t.Mn.pn(s,a)})})}function bv(i){var e=V(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.qe.getLastRemoteSnapshotVersion(t)})}function JC(i,e){var t=V(i),s=e.snapshotVersion,a=t.kn;return t.persistence.runTransaction("Apply remote event","readwrite-primary",function(c){var d=t.On.newChangeBuffer({trackRemovals:!0});a=t.kn;var p=[];e.targetChanges.forEach(function(_,b){var E,M,F,I=a.get(b);if(I){p.push(t.qe.removeMatchingKeys(c,_.removedDocuments,b).next(function(){return t.qe.addMatchingKeys(c,_.addedDocuments,b)}));var k=_.resumeToken;if(k.approximateByteSize()>0){var T=I.withResumeToken(k,s).withSequenceNumber(c.currentSequenceNumber);a=a.insert(b,T),E=I,F=_,$((M=T).resumeToken.approximateByteSize()>0),(0===E.resumeToken.approximateByteSize()||M.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=3e8||F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0)&&p.push(t.qe.updateTargetData(c,T))}}});var m=Be();if(e.documentUpdates.forEach(function(_,b){e.resolvedLimboDocuments.has(_)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(c,_))}),p.push(Sv(c,d,e.documentUpdates,s,void 0).next(function(_){m=_})),!s.isEqual(st.min())){var v=t.qe.getLastRemoteSnapshotVersion(c).next(function(_){return t.qe.setTargetsMetadata(c,c.currentSequenceNumber,s)});p.push(v)}return N.waitFor(p).next(function(){return d.apply(c)}).next(function(){return t.Mn.En(c,m)}).next(function(){return m})}).then(function(c){return t.kn=a,c})}function Sv(i,e,t,s,a){var c=vt();return t.forEach(function(d){return c=c.add(d)}),e.getEntries(i,c).next(function(d){var p=Be();return t.forEach(function(m,v){var _=d.get(m),b=(null==a?void 0:a.get(m))||s;v.isNoDocument()&&v.version.isEqual(st.min())?(e.removeEntry(m,b),p=p.insert(m,v)):!_.isValidDocument()||v.version.compareTo(_.version)>0||0===v.version.compareTo(_.version)&&_.hasPendingWrites?(e.addEntry(v,b),p=p.insert(m,v)):P("LocalStore","Ignoring outdated watch update for ",m,". Current version:",_.version," Watch version:",v.version)}),p})}function QC(i,e){var t=V(i);return t.persistence.runTransaction("Get next mutation batch","readonly",function(s){return void 0===e&&(e=-1),t._n.getNextMutationBatchAfterBatchId(s,e)})}function Ir(i,e){var t=V(i);return t.persistence.runTransaction("Allocate target","readwrite",function(s){var a;return t.qe.getTargetData(s,e).next(function(c){return c?N.resolve(a=c):t.qe.allocateTargetId(s).next(function(d){return a=new Fa(e,d,0,s.currentSequenceNumber),t.qe.addTargetData(s,a).next(function(){return a})})})}).then(function(s){var a=t.kn.get(s.targetId);return(null===a||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.kn=t.kn.insert(s.targetId,s),t.Fn.set(e,s.targetId)),s})}function Cr(i,e,t){return(0,S.mG)(this,void 0,void 0,function(){var s,a,c,d;return(0,S.Jh)(this,function(p){switch(p.label){case 0:s=V(i),a=s.kn.get(e),c=t?"readwrite":"readwrite-primary",p.label=1;case 1:return p.trys.push([1,4,,5]),t?[3,3]:[4,s.persistence.runTransaction("Release target",c,function(m){return s.persistence.referenceDelegate.removeTarget(m,a)})];case 2:p.sent(),p.label=3;case 3:return[3,5];case 4:if(!yi(d=p.sent()))throw d;return P("LocalStore","Failed to update sequence numbers for target "+e+": "+d),[3,5];case 5:return s.kn=s.kn.remove(e),s.Fn.delete(a.target),[2]}})})}function ja(i,e,t){var s=V(i),a=st.min(),c=vt();return s.persistence.runTransaction("Execute query","readonly",function(d){return(p=s,m=d,v=Ve(e),_=V(p),b=_.Fn.get(v),void 0!==b?N.resolve(_.kn.get(b)):_.qe.getTargetData(m,v)).next(function(p){if(p)return a=p.lastLimboFreeSnapshotVersion,s.qe.getMatchingKeysForTargetId(d,p.targetId).next(function(m){c=m})}).next(function(){return s.xn.getDocumentsMatchingQuery(d,e,t?a:st.min(),t?c:vt())}).next(function(p){return{documents:p,Bn:c}});var p,m,v,_,b})}function Iv(i,e){var t=V(i),s=V(t.qe),a=t.kn.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",function(c){return s.lt(c,e).next(function(d){return d?d.target:null})})}function Cv(i){var e=V(i);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return a=t,c=e.$n,d=V(e.On),p=Be(),m=Ol(c),v=jn(a),_=IDBKeyRange.lowerBound(m,!0),v.$t({index:Mt.readTimeIndex,range:_},function(b,I){var k=Ml(d.R,I);p=p.insert(k.key,k),m=I.readTime}).next(function(){return{wn:p,readTime:iv(m)}});var a,c,d,p,m,v,_}).then(function(t){var s=t.wn;return e.$n=t.readTime,s})}function WC(i){return(0,S.mG)(this,void 0,void 0,function(){var e;return(0,S.Jh)(this,function(t){return[2,(e=V(i)).persistence.runTransaction("Synchronize last document change read time","readonly",function(s){return c=jn(s),d=st.min(),c.$t({index:Mt.readTimeIndex,reverse:!0},function(p,m,v){m.readTime&&(d=iv(m.readTime)),v.done()}).next(function(){return d});var c,d}).then(function(s){e.$n=s})]})})}function XC(i,e,t,s){return(0,S.mG)(this,void 0,void 0,function(){var a,c,d,p,m,v,_,b,I,k;return(0,S.Jh)(this,function(T){switch(T.label){case 0:for(a=V(i),c=vt(),d=Be(),p=Ag(),m=0,v=t;m<v.length;m++)b=e.qn((_=v[m]).metadata.name),_.document&&(c=c.add(b)),d=d.insert(b,e.Un(_)),p=p.insert(b,e.Kn(_.metadata.readTime));return I=a.On.newChangeBuffer({trackRemovals:!0}),[4,Ir(a,(E=s,Ve(ur(ft.fromString("__bundle__/docs/"+E)))))];case 1:return k=T.sent(),[2,a.persistence.runTransaction("Apply bundle documents","readwrite",function(E){return Sv(E,I,d,st.min(),p).next(function(M){return I.apply(E),M}).next(function(M){return a.qe.removeMatchingKeysForTargetId(E,k.targetId).next(function(){return a.qe.addMatchingKeys(E,c,k.targetId)}).next(function(){return a.Mn.En(E,M)}).next(function(){return M})})})]}var E})})}function $C(i,e,t){return void 0===t&&(t=vt()),(0,S.mG)(this,void 0,void 0,function(){var s,a;return(0,S.Jh)(this,function(c){switch(c.label){case 0:return[4,Ir(i,Ve(Rl(e.bundledQuery)))];case 1:return s=c.sent(),[2,(a=V(i)).persistence.runTransaction("Save named query","readwrite",function(d){var p=Zt(e.readTime);if(s.snapshotVersion.compareTo(p)>=0)return a.Ke.saveNamedQuery(d,e);var m=s.withResumeToken(fe.EMPTY_BYTE_STRING,p);return a.kn=a.kn.insert(m.targetId,m),a.qe.updateTargetData(d,m).next(function(){return a.qe.removeMatchingKeysForTargetId(d,s.targetId)}).next(function(){return a.qe.addMatchingKeys(d,t,s.targetId)}).next(function(){return a.Ke.saveNamedQuery(d,e)})})]}})})}var tT=function(){function i(e){this.R=e,this.Qn=new Map,this.jn=new Map}return i.prototype.getBundleMetadata=function(e,t){return N.resolve(this.Qn.get(t))},i.prototype.saveBundleMetadata=function(e,t){var s;return this.Qn.set(t.id,{id:(s=t).id,version:s.version,createTime:Zt(s.createTime)}),N.resolve()},i.prototype.getNamedQuery=function(e,t){return N.resolve(this.jn.get(t))},i.prototype.saveNamedQuery=function(e,t){return this.jn.set(t.name,{name:(s=t).name,query:Rl(s.bundledQuery),readTime:Zt(s.readTime)}),N.resolve();var s},i}(),Ll=function(){function i(){this.Wn=new jt(Kt.Gn),this.zn=new jt(Kt.Hn)}return i.prototype.isEmpty=function(){return this.Wn.isEmpty()},i.prototype.addReference=function(e,t){var s=new Kt(e,t);this.Wn=this.Wn.add(s),this.zn=this.zn.add(s)},i.prototype.Jn=function(e,t){var s=this;e.forEach(function(a){return s.addReference(a,t)})},i.prototype.removeReference=function(e,t){this.Yn(new Kt(e,t))},i.prototype.Xn=function(e,t){var s=this;e.forEach(function(a){return s.removeReference(a,t)})},i.prototype.Zn=function(e){var t=this,s=new H(new ft([])),a=new Kt(s,e),c=new Kt(s,e+1),d=[];return this.zn.forEachInRange([a,c],function(p){t.Yn(p),d.push(p.key)}),d},i.prototype.ts=function(){var e=this;this.Wn.forEach(function(t){return e.Yn(t)})},i.prototype.Yn=function(e){this.Wn=this.Wn.delete(e),this.zn=this.zn.delete(e)},i.prototype.es=function(e){var t=new H(new ft([])),s=new Kt(t,e),a=new Kt(t,e+1),c=vt();return this.zn.forEachInRange([s,a],function(d){c=c.add(d.key)}),c},i.prototype.containsKey=function(e){var t=new Kt(e,0),s=this.Wn.firstAfterOrEqual(t);return null!==s&&e.isEqual(s.key)},i}(),Kt=function(){function i(e,t){this.key=e,this.ns=t}return i.Gn=function(e,t){return H.comparator(e.key,t.key)||ct(e.ns,t.ns)},i.Hn=function(e,t){return ct(e.ns,t.ns)||H.comparator(e.key,t.key)},i}(),eT=function(){function i(e,t){this.Ut=e,this.referenceDelegate=t,this._n=[],this.ss=1,this.rs=new jt(Kt.Gn)}return i.prototype.checkEmpty=function(e){return N.resolve(0===this._n.length)},i.prototype.addMutationBatch=function(e,t,s,a){var c=this.ss;this.ss++;var d=new xl(c,t,s,a);this._n.push(d);for(var p=0,m=a;p<m.length;p++){var v=m[p];this.rs=this.rs.add(new Kt(v.key,c)),this.Ut.addToCollectionParentIndex(e,v.key.path.popLast())}return N.resolve(d)},i.prototype.lookupMutationBatch=function(e,t){return N.resolve(this.os(t))},i.prototype.getNextMutationBatchAfterBatchId=function(e,t){var a=this.cs(t+1),c=a<0?0:a;return N.resolve(this._n.length>c?this._n[c]:null)},i.prototype.getHighestUnacknowledgedBatchId=function(){return N.resolve(0===this._n.length?-1:this.ss-1)},i.prototype.getAllMutationBatches=function(e){return N.resolve(this._n.slice())},i.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var s=this,a=new Kt(t,0),c=new Kt(t,Number.POSITIVE_INFINITY),d=[];return this.rs.forEachInRange([a,c],function(p){var m=s.os(p.ns);d.push(m)}),N.resolve(d)},i.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var s=this,a=new jt(ct);return t.forEach(function(c){var d=new Kt(c,0),p=new Kt(c,Number.POSITIVE_INFINITY);s.rs.forEachInRange([d,p],function(m){a=a.add(m.ns)})}),N.resolve(this.us(a))},i.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var s=t.path,a=s.length+1,c=s;H.isDocumentKey(c)||(c=c.child(""));var d=new Kt(new H(c),0),p=new jt(ct);return this.rs.forEachWhile(function(m){var v=m.key.path;return!!s.isPrefixOf(v)&&(v.length===a&&(p=p.add(m.ns)),!0)},d),N.resolve(this.us(p))},i.prototype.us=function(e){var t=this,s=[];return e.forEach(function(a){var c=t.os(a);null!==c&&s.push(c)}),s},i.prototype.removeMutationBatch=function(e,t){var s=this;$(0===this.hs(t.batchId,"removed")),this._n.shift();var a=this.rs;return N.forEach(t.mutations,function(c){var d=new Kt(c.key,t.batchId);return a=a.delete(d),s.referenceDelegate.markPotentiallyOrphaned(e,c.key)}).next(function(){s.rs=a})},i.prototype.Gt=function(e){},i.prototype.containsKey=function(e,t){var s=new Kt(t,0),a=this.rs.firstAfterOrEqual(s);return N.resolve(t.isEqual(a&&a.key))},i.prototype.performConsistencyCheck=function(e){return N.resolve()},i.prototype.hs=function(e,t){return this.cs(e)},i.prototype.cs=function(e){return 0===this._n.length?0:e-this._n[0].batchId},i.prototype.os=function(e){var t=this.cs(e);return t<0||t>=this._n.length?null:this._n[t]},i}(),nT=function(){function i(e,t){this.Ut=e,this.ls=t,this.docs=new se(H.comparator),this.size=0}return i.prototype.addEntry=function(e,t,s){var a=t.key,c=this.docs.get(a),d=c?c.size:0,p=this.ls(t);return this.docs=this.docs.insert(a,{document:t.clone(),size:p,readTime:s}),this.size+=p-d,this.Ut.addToCollectionParentIndex(e,a.path.popLast())},i.prototype.removeEntry=function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)},i.prototype.getEntry=function(e,t){var s=this.docs.get(t);return N.resolve(s?s.document.clone():te.newInvalidDocument(t))},i.prototype.getEntries=function(e,t){var s=this,a=Be();return t.forEach(function(c){var d=s.docs.get(c);a=a.insert(c,d?d.document.clone():te.newInvalidDocument(c))}),N.resolve(a)},i.prototype.getDocumentsMatchingQuery=function(e,t,s){for(var a=Be(),c=new H(t.path.child("")),d=this.docs.getIteratorFrom(c);d.hasNext();){var p=d.getNext(),v=p.value,_=v.document,b=v.readTime;if(!t.path.isPrefixOf(p.key.path))break;b.compareTo(s)<=0||Ro(t,_)&&(a=a.insert(_.key,_.clone()))}return N.resolve(a)},i.prototype.fs=function(e,t){return N.forEach(this.docs,function(s){return t(s)})},i.prototype.newChangeBuffer=function(e){return new iT(this)},i.prototype.getSize=function(e){return N.resolve(this.size)},i}(),iT=function(i){function e(t){var s=this;return(s=i.call(this)||this).Ie=t,s}return(0,S.ZT)(e,i),e.prototype.applyChanges=function(t){var s=this,a=[];return this.changes.forEach(function(c,d){d.document.isValidDocument()?a.push(s.Ie.addEntry(t,d.document,s.getReadTime(c))):s.Ie.removeEntry(c)}),N.waitFor(a)},e.prototype.getFromCache=function(t,s){return this.Ie.getEntry(t,s)},e.prototype.getAllFromCache=function(t,s){return this.Ie.getEntries(t,s)},e}(pv),rT=function(){function i(e){this.persistence=e,this.ds=new Sr(function(t){return xo(t)},Ca),this.lastRemoteSnapshotVersion=st.min(),this.highestTargetId=0,this.ws=0,this._s=new Ll,this.targetCount=0,this.ys=Va.Jt()}return i.prototype.forEachTarget=function(e,t){return this.ds.forEach(function(s,a){return t(a)}),N.resolve()},i.prototype.getLastRemoteSnapshotVersion=function(e){return N.resolve(this.lastRemoteSnapshotVersion)},i.prototype.getHighestSequenceNumber=function(e){return N.resolve(this.ws)},i.prototype.allocateTargetId=function(e){return this.highestTargetId=this.ys.next(),N.resolve(this.highestTargetId)},i.prototype.setTargetsMetadata=function(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.ws&&(this.ws=t),N.resolve()},i.prototype.te=function(e){this.ds.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.ys=new Va(t),this.highestTargetId=t),e.sequenceNumber>this.ws&&(this.ws=e.sequenceNumber)},i.prototype.addTargetData=function(e,t){return this.te(t),this.targetCount+=1,N.resolve()},i.prototype.updateTargetData=function(e,t){return this.te(t),N.resolve()},i.prototype.removeTargetData=function(e,t){return this.ds.delete(t.target),this._s.Zn(t.targetId),this.targetCount-=1,N.resolve()},i.prototype.removeTargets=function(e,t,s){var a=this,c=0,d=[];return this.ds.forEach(function(p,m){m.sequenceNumber<=t&&null===s.get(m.targetId)&&(a.ds.delete(p),d.push(a.removeMatchingKeysForTargetId(e,m.targetId)),c++)}),N.waitFor(d).next(function(){return c})},i.prototype.getTargetCount=function(e){return N.resolve(this.targetCount)},i.prototype.getTargetData=function(e,t){var s=this.ds.get(t)||null;return N.resolve(s)},i.prototype.addMatchingKeys=function(e,t,s){return this._s.Jn(t,s),N.resolve()},i.prototype.removeMatchingKeys=function(e,t,s){this._s.Xn(t,s);var a=this.persistence.referenceDelegate,c=[];return a&&t.forEach(function(d){c.push(a.markPotentiallyOrphaned(e,d))}),N.waitFor(c)},i.prototype.removeMatchingKeysForTargetId=function(e,t){return this._s.Zn(t),N.resolve()},i.prototype.getMatchingKeysForTargetId=function(e,t){var s=this._s.es(t);return N.resolve(s)},i.prototype.containsKey=function(e,t){return N.resolve(this._s.containsKey(t))},i}(),oT=function(){function i(e,t){var s=this;this.gs={},this.Ne=new Ee(0),this.xe=!1,this.xe=!0,this.referenceDelegate=e(this),this.qe=new rT(this),this.Ut=new RC,this.Ue=new nT(this.Ut,function(d){return s.referenceDelegate.ps(d)}),this.R=new ev(t),this.Ke=new tT(this.R)}return i.prototype.start=function(){return Promise.resolve()},i.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(i.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),i.prototype.setDatabaseDeletedListener=function(){},i.prototype.setNetworkEnabled=function(){},i.prototype.getIndexManager=function(){return this.Ut},i.prototype.getMutationQueue=function(e){var t=this.gs[e.toKey()];return t||(t=new eT(this.Ut,this.referenceDelegate),this.gs[e.toKey()]=t),t},i.prototype.getTargetCache=function(){return this.qe},i.prototype.getRemoteDocumentCache=function(){return this.Ue},i.prototype.getBundleCache=function(){return this.Ke},i.prototype.runTransaction=function(e,t,s){var a=this;P("MemoryPersistence","Starting transaction:",e);var c=new sT(this.Ne.next());return this.referenceDelegate.Es(),s(c).next(function(d){return a.referenceDelegate.Ts(c).next(function(){return d})}).toPromise().then(function(d){return c.raiseOnCommittedEvent(),d})},i.prototype.Is=function(e,t){return N.or(Object.values(this.gs).map(function(s){return function(){return s.containsKey(e,t)}}))},i}(),sT=function(i){function e(t){var s=this;return(s=i.call(this)||this).currentSequenceNumber=t,s}return(0,S.ZT)(e,i),e}(Wg),aT=function(){function i(e){this.persistence=e,this.As=new Ll,this.Rs=null}return i.bs=function(e){return new i(e)},Object.defineProperty(i.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw G()},enumerable:!1,configurable:!0}),i.prototype.addReference=function(e,t,s){return this.As.addReference(s,t),this.vs.delete(s.toString()),N.resolve()},i.prototype.removeReference=function(e,t,s){return this.As.removeReference(s,t),this.vs.add(s.toString()),N.resolve()},i.prototype.markPotentiallyOrphaned=function(e,t){return this.vs.add(t.toString()),N.resolve()},i.prototype.removeTarget=function(e,t){var s=this;this.As.Zn(t.targetId).forEach(function(c){return s.vs.add(c.toString())});var a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,t.targetId).next(function(c){c.forEach(function(d){return s.vs.add(d.toString())})}).next(function(){return a.removeTargetData(e,t)})},i.prototype.Es=function(){this.Rs=new Set},i.prototype.Ts=function(e){var t=this,s=this.persistence.getRemoteDocumentCache().newChangeBuffer();return N.forEach(this.vs,function(a){var c=H.fromPath(a);return t.Ps(e,c).next(function(d){d||s.removeEntry(c)})}).next(function(){return t.Rs=null,s.apply(e)})},i.prototype.updateLimboDocument=function(e,t){var s=this;return this.Ps(e,t).next(function(a){a?s.vs.delete(t.toString()):s.vs.add(t.toString())})},i.prototype.ps=function(e){return 0},i.prototype.Ps=function(e,t){var s=this;return N.or([function(){return N.resolve(s.As.containsKey(t))},function(){return s.persistence.getTargetCache().containsKey(e,t)},function(){return s.persistence.Is(e,t)}])},i}(),ne=function(){function i(e){this.uid=e}return i.prototype.isAuthenticated=function(){return null!=this.uid},i.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},i.prototype.isEqual=function(e){return e.uid===this.uid},i}();function Tv(i,e){return"firestore_clients_"+i+"_"+e}function kv(i,e,t){var s="firestore_mutations_"+i+"_"+t;return e.isAuthenticated()&&(s+="_"+e.uid),s}function Vl(i,e){return"firestore_targets_"+i+"_"+e}ne.UNAUTHENTICATED=new ne(null),ne.GOOGLE_CREDENTIALS=new ne("google-credentials-uid"),ne.FIRST_PARTY=new ne("first-party-uid"),ne.MOCK_USER=new ne("mock-user");var Dv=function(){function i(e,t,s,a){this.user=e,this.batchId=t,this.state=s,this.error=a}return i.Vs=function(e,t,s){var a,c=JSON.parse(s),d="object"==typeof c&&-1!==["pending","acknowledged","rejected"].indexOf(c.state)&&(void 0===c.error||"object"==typeof c.error);return d&&c.error&&(d="string"==typeof c.error.message&&"string"==typeof c.error.code)&&(a=new R(c.error.code,c.error.message)),d?new i(e,t,c.state,a):(Vt("SharedClientState","Failed to parse mutation state for ID '"+t+"': "+s),null)},i.prototype.Ss=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},i}(),Bl=function(){function i(e,t,s){this.targetId=e,this.state=t,this.error=s}return i.Vs=function(e,t){var s,a=JSON.parse(t),c="object"==typeof a&&-1!==["not-current","current","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return c&&a.error&&(c="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(s=new R(a.error.code,a.error.message)),c?new i(e,a.state,s):(Vt("SharedClientState","Failed to parse target state for ID '"+e+"': "+t),null)},i.prototype.Ss=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},i}(),Ev=function(){function i(e,t){this.clientId=e,this.activeTargetIds=t}return i.Vs=function(e,t){for(var s=JSON.parse(t),a="object"==typeof s&&s.activeTargetIds instanceof Array,c=Ra(),d=0;a&&d<s.activeTargetIds.length;++d)a=tg(s.activeTargetIds[d]),c=c.add(s.activeTargetIds[d]);return a?new i(e,c):(Vt("SharedClientState","Failed to parse client data for instance '"+e+"': "+t),null)},i}(),uT=function(){function i(e,t){this.clientId=e,this.onlineState=t}return i.Vs=function(e){var t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new i(t.clientId,t.onlineState):(Vt("SharedClientState","Failed to parse online state: "+e),null)},i}(),ql=function(){function i(){this.activeTargetIds=Ra()}return i.prototype.Ds=function(e){this.activeTargetIds=this.activeTargetIds.add(e)},i.prototype.Cs=function(e){this.activeTargetIds=this.activeTargetIds.delete(e)},i.prototype.Ss=function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)},i}(),Ul=function(){function i(e,t,s,a,c){this.window=e,this.Se=t,this.persistenceKey=s,this.Ns=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.ks.bind(this),this.Fs=new se(ct),this.started=!1,this.$s=[];var d=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=c,this.Os=Tv(this.persistenceKey,this.Ns),this.Ms="firestore_sequence_number_"+this.persistenceKey,this.Fs=this.Fs.insert(this.Ns,new ql),this.Ls=new RegExp("^firestore_clients_"+d+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+d+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+d+"_(\\d+)$"),this.Us="firestore_online_state_"+this.persistenceKey,this.Ks=function(p){return"firestore_bundle_loaded_"+p}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return i.yt=function(e){return!(!e||!e.localStorage)},i.prototype.start=function(){return(0,S.mG)(this,void 0,void 0,function(){var e,t,s,a,c,d,p,m,v,_,I=this;return(0,S.Jh)(this,function(k){switch(k.label){case 0:return[4,this.syncEngine.fn()];case 1:for(e=k.sent(),t=0,s=e;t<s.length;t++)(a=s[t])!==this.Ns&&(c=this.getItem(Tv(this.persistenceKey,a)))&&(d=Ev.Vs(a,c))&&(this.Fs=this.Fs.insert(d.clientId,d));for(this.Qs(),(p=this.storage.getItem(this.Us))&&(m=this.js(p))&&this.Ws(m),v=0,_=this.$s;v<_.length;v++)this.ks(_[v]);return this.$s=[],this.window.addEventListener("pagehide",function(){return I.shutdown()}),this.started=!0,[2]}})})},i.prototype.writeSequenceNumber=function(e){this.setItem(this.Ms,JSON.stringify(e))},i.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.Fs)},i.prototype.isActiveQueryTarget=function(e){var t=!1;return this.Fs.forEach(function(s,a){a.activeTargetIds.has(e)&&(t=!0)}),t},i.prototype.addPendingMutation=function(e){this.zs(e,"pending")},i.prototype.updateMutationState=function(e,t,s){this.zs(e,t,s),this.Hs(e)},i.prototype.addLocalQueryTarget=function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var s=this.storage.getItem(Vl(this.persistenceKey,e));if(s){var a=Bl.Vs(e,s);a&&(t=a.state)}}return this.Js.Ds(e),this.Qs(),t},i.prototype.removeLocalQueryTarget=function(e){this.Js.Cs(e),this.Qs()},i.prototype.isLocalQueryTarget=function(e){return this.Js.activeTargetIds.has(e)},i.prototype.clearQueryState=function(e){this.removeItem(Vl(this.persistenceKey,e))},i.prototype.updateQueryState=function(e,t,s){this.Ys(e,t,s)},i.prototype.handleUserChange=function(e,t,s){var a=this;t.forEach(function(c){a.Hs(c)}),this.currentUser=e,s.forEach(function(c){a.addPendingMutation(c)})},i.prototype.setOnlineState=function(e){this.Xs(e)},i.prototype.notifyBundleLoaded=function(){this.Zs()},i.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},i.prototype.getItem=function(e){var t=this.storage.getItem(e);return P("SharedClientState","READ",e,t),t},i.prototype.setItem=function(e,t){P("SharedClientState","SET",e,t),this.storage.setItem(e,t)},i.prototype.removeItem=function(e){P("SharedClientState","REMOVE",e),this.storage.removeItem(e)},i.prototype.ks=function(e){var t=this,s=e;if(s.storageArea===this.storage){if(P("SharedClientState","EVENT",s.key,s.newValue),s.key===this.Os)return void Vt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return(0,S.mG)(t,void 0,void 0,function(){var a,c,d,p,m,v;return(0,S.Jh)(this,function(_){if(this.started){if(null!==s.key)if(this.Ls.test(s.key)){if(null==s.newValue)return a=this.ti(s.key),[2,this.ei(a,null)];if(c=this.ni(s.key,s.newValue))return[2,this.ei(c.clientId,c)]}else if(this.Bs.test(s.key)){if(null!==s.newValue&&(d=this.si(s.key,s.newValue)))return[2,this.ii(d)]}else if(this.qs.test(s.key)){if(null!==s.newValue&&(p=this.ri(s.key,s.newValue)))return[2,this.oi(p)]}else if(s.key===this.Us){if(null!==s.newValue&&(m=this.js(s.newValue)))return[2,this.Ws(m)]}else if(s.key===this.Ms)(v=function(b){var I=Ee.o;if(null!=b)try{var k=JSON.parse(b);$("number"==typeof k),I=k}catch(T){Vt("SharedClientState","Failed to read sequence number from WebStorage",T)}return I}(s.newValue))!==Ee.o&&this.sequenceNumberHandler(v);else if(s.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(s);return[2]})})})}},Object.defineProperty(i.prototype,"Js",{get:function(){return this.Fs.get(this.Ns)},enumerable:!1,configurable:!0}),i.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},i.prototype.zs=function(e,t,s){var a=new Dv(this.currentUser,e,t,s),c=kv(this.persistenceKey,this.currentUser,e);this.setItem(c,a.Ss())},i.prototype.Hs=function(e){var t=kv(this.persistenceKey,this.currentUser,e);this.removeItem(t)},i.prototype.Xs=function(e){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:e}))},i.prototype.Ys=function(e,t,s){var a=Vl(this.persistenceKey,e),c=new Bl(e,t,s);this.setItem(a,c.Ss())},i.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},i.prototype.ti=function(e){var t=this.Ls.exec(e);return t?t[1]:null},i.prototype.ni=function(e,t){var s=this.ti(e);return Ev.Vs(s,t)},i.prototype.si=function(e,t){var s=this.Bs.exec(e),a=Number(s[1]);return Dv.Vs(new ne(void 0!==s[2]?s[2]:null),a,t)},i.prototype.ri=function(e,t){var s=this.qs.exec(e),a=Number(s[1]);return Bl.Vs(a,t)},i.prototype.js=function(e){return uT.Vs(e)},i.prototype.ii=function(e){return(0,S.mG)(this,void 0,void 0,function(){return(0,S.Jh)(this,function(t){return e.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(e.batchId,e.state,e.error)]:(P("SharedClientState","Ignoring mutation for non-active user "+e.user.uid),[2])})})},i.prototype.oi=function(e){return this.syncEngine.ai(e.targetId,e.state,e.error)},i.prototype.ei=function(e,t){var s=this,a=t?this.Fs.insert(e,t):this.Fs.remove(e),c=this.Gs(this.Fs),d=this.Gs(a),p=[],m=[];return d.forEach(function(v){c.has(v)||p.push(v)}),c.forEach(function(v){d.has(v)||m.push(v)}),this.syncEngine.hi(p,m).then(function(){s.Fs=a})},i.prototype.Ws=function(e){this.Fs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)},i.prototype.Gs=function(e){var t=Ra();return e.forEach(function(s,a){t=t.unionWith(a.activeTargetIds)}),t},i}(),Av=function(){function i(){this.li=new ql,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return i.prototype.addPendingMutation=function(e){},i.prototype.updateMutationState=function(e,t,s){},i.prototype.addLocalQueryTarget=function(e){return this.li.Ds(e),this.fi[e]||"not-current"},i.prototype.updateQueryState=function(e,t,s){this.fi[e]=t},i.prototype.removeLocalQueryTarget=function(e){this.li.Cs(e)},i.prototype.isLocalQueryTarget=function(e){return this.li.activeTargetIds.has(e)},i.prototype.clearQueryState=function(e){delete this.fi[e]},i.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},i.prototype.isActiveQueryTarget=function(e){return this.li.activeTargetIds.has(e)},i.prototype.start=function(){return this.li=new ql,Promise.resolve()},i.prototype.handleUserChange=function(e,t,s){},i.prototype.setOnlineState=function(e){},i.prototype.shutdown=function(){},i.prototype.writeSequenceNumber=function(e){},i.prototype.notifyBundleLoaded=function(){},i}(),cT=function(){function i(){}return i.prototype.di=function(e){},i.prototype.shutdown=function(){},i}(),xv=function(){function i(){var e=this;this.wi=function(){return e._i()},this.mi=function(){return e.yi()},this.gi=[],this.pi()}return i.prototype.di=function(e){this.gi.push(e)},i.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},i.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},i.prototype._i=function(){P("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var e=0,t=this.gi;e<t.length;e++)(0,t[e])(0)},i.prototype.yi=function(){P("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var e=0,t=this.gi;e<t.length;e++)(0,t[e])(1)},i.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},i}(),lT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},hT=function(){function i(e){this.Ei=e.Ei,this.Ti=e.Ti}return i.prototype.Ii=function(e){this.Ai=e},i.prototype.Ri=function(e){this.bi=e},i.prototype.onMessage=function(e){this.vi=e},i.prototype.close=function(){this.Ti()},i.prototype.send=function(e){this.Ei(e)},i.prototype.Pi=function(){this.Ai()},i.prototype.Vi=function(e){this.bi(e)},i.prototype.Si=function(e){this.vi(e)},i}(),dT=function(i){function e(t){var s=this;return(s=i.call(this,t)||this).forceLongPolling=t.forceLongPolling,s.autoDetectLongPolling=t.autoDetectLongPolling,s.useFetchStreams=t.useFetchStreams,s}return(0,S.ZT)(e,i),e.prototype.Fi=function(t,s,a,c){return new Promise(function(d,p){var m=new Zm;m.listenOnce(Gm.COMPLETE,function(){try{switch(m.getLastErrorCode()){case wa.NO_ERROR:var _=m.getResponseJson();P("Connection","XHR received:",JSON.stringify(_)),d(_);break;case wa.TIMEOUT:P("Connection",'RPC "'+t+'" timed out'),p(new R(A.DEADLINE_EXCEEDED,"Request time out"));break;case wa.HTTP_ERROR:var b=m.getStatus();if(P("Connection",'RPC "'+t+'" failed with status:',b,"response text:",m.getResponseText()),b>0){var I=m.getResponseJson().error;if(I&&I.status&&I.message){var k=(E=I.status.toLowerCase().replace(/_/g,"-"),Object.values(A).indexOf(E)>=0?E:A.UNKNOWN);p(new R(k,I.message))}else p(new R(A.UNKNOWN,"Server responded with status "+m.getStatus()))}else p(new R(A.UNAVAILABLE,"Connection failed."));break;default:G()}}finally{P("Connection",'RPC "'+t+'" completed.')}var E});var v=JSON.stringify(c);m.send(s,"POST",v,a,15)})},e.prototype.Oi=function(t,s){var a=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],c=new _a,d=ra(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(p.xmlHttpFactory=new zm({})),this.ki(p.initMessageHeaders,s),(0,gt.uI)()||(0,gt.b$)()||(0,gt.d)()||(0,gt.w1)()||(0,gt.Mn)()||(0,gt.ru)()||(p.httpHeadersOverwriteParam="$httpHeaders");var m=a.join("");P("Connection","Creating WebChannel: "+m,p);var v=c.createWebChannel(m,p),_=!1,b=!1,I=new hT({Ei:function(T){b?P("Connection","Not sending because WebChannel is closed:",T):(_||(P("Connection","Opening WebChannel transport."),v.open(),_=!0),P("Connection","WebChannel sending:",T),v.send(T))},Ti:function(){return v.close()}}),k=function(T,E,M){T.listen(E,function(F){try{M(F)}catch(Y){setTimeout(function(){throw Y},0)}})};return k(v,To.EventType.OPEN,function(){b||P("Connection","WebChannel transport opened.")}),k(v,To.EventType.CLOSE,function(){b||(b=!0,P("Connection","WebChannel transport closed"),I.Vi())}),k(v,To.EventType.ERROR,function(T){b||(b=!0,ko("Connection","WebChannel transport errored:",T),I.Vi(new R(A.UNAVAILABLE,"The operation could not be completed")))}),k(v,To.EventType.MESSAGE,function(T){var E;if(!b){var M=T.data[0];$(!!M);var Y=M.error||(null===(E=M[0])||void 0===E?void 0:E.error);if(Y){P("Connection","WebChannel received error:",Y);var z=Y.status,ot=function(L){var Tt=qt[L];if(void 0!==Tt)return Dg(Tt)}(z),lt=Y.message;void 0===ot&&(ot=A.INTERNAL,lt="Unknown error status: "+z+" with message "+Y.message),b=!0,I.Vi(new R(ot,lt)),v.close()}else P("Connection","WebChannel received:",M),I.Si(M)}}),k(d,Hm.STAT_EVENT,function(T){T.stat===ll_PROXY?P("Connection","Detected buffering proxy"):T.stat===ll_NOPROXY&&P("Connection","Detected no buffering proxy")}),setTimeout(function(){I.Pi()},0),I},e}(function(){function i(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.Di=(e.ssl?"https":"http")+"://"+e.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return i.prototype.Ni=function(e,t,s,a){var c=this.xi(e,t);P("RestConnection","Sending: ",c,s);var d={};return this.ki(d,a),this.Fi(e,c,d,s).then(function(p){return P("RestConnection","Received: ",p),p},function(p){throw ko("RestConnection",e+" failed with error: ",p,"url: ",c,"request:",s),p})},i.prototype.$i=function(e,t,s,a){return this.Ni(e,t,s,a)},i.prototype.ki=function(e,t){if(e["X-Goog-Api-Client"]="gl-js/ fire/8.10.0",e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t)for(var s in t.authHeaders)t.authHeaders.hasOwnProperty(s)&&(e[s]=t.authHeaders[s])},i.prototype.xi=function(e,t){return this.Di+"/v1/"+t+":"+lT[e]},i}());function Mv(){return"undefined"!=typeof window?window:null}function Ya(){return"undefined"!=typeof document?document:null}function Yo(i){return new vC(i,!0)}var jl=function(){function i(e,t,s,a,c){void 0===s&&(s=1e3),void 0===a&&(a=1.5),void 0===c&&(c=6e4),this.Se=e,this.timerId=t,this.Mi=s,this.Li=a,this.Bi=c,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return i.prototype.reset=function(){this.qi=0},i.prototype.Qi=function(){this.qi=this.Bi},i.prototype.ji=function(e){var t=this;this.cancel();var s=Math.floor(this.qi+this.Wi()),a=Math.max(0,Date.now()-this.Ki),c=Math.max(0,s-a);c>0&&P("ExponentialBackoff","Backing off for "+c+" ms (base delay: "+this.qi+" ms, delay with jitter: "+s+" ms, last attempt: "+a+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,c,function(){return t.Ki=Date.now(),e()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},i.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},i.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},i.prototype.Wi=function(){return(Math.random()-.5)*this.qi},i}(),Ov=function(){function i(e,t,s,a,c,d){this.Se=e,this.zi=s,this.Hi=a,this.Ji=c,this.listener=d,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new jl(e,t)}return i.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},i.prototype.er=function(){return 2===this.state},i.prototype.start=function(){3!==this.state?this.auth():this.nr()},i.prototype.stop=function(){return(0,S.mG)(this,void 0,void 0,function(){return(0,S.Jh)(this,function(e){switch(e.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},i.prototype.sr=function(){this.state=0,this.Zi.reset()},i.prototype.ir=function(){var e=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return e.rr()}))},i.prototype.cr=function(e){this.ur(),this.stream.send(e)},i.prototype.rr=function(){return(0,S.mG)(this,void 0,void 0,function(){return(0,S.Jh)(this,function(e){return this.er()?[2,this.close(0)]:[2]})})},i.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},i.prototype.close=function(e,t){return(0,S.mG)(this,void 0,void 0,function(){return(0,S.Jh)(this,function(s){switch(s.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==e?this.Zi.reset():t&&t.code===A.RESOURCE_EXHAUSTED?(Vt(t.toString()),Vt("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):t&&t.code===A.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.Ri(t)];case 1:return s.sent(),[2]}})})},i.prototype.ar=function(){},i.prototype.auth=function(){var e=this;this.state=1;var t=this.hr(this.Yi),s=this.Yi;this.Ji.getToken().then(function(a){e.Yi===s&&e.lr(a)},function(a){t(function(){var c=new R(A.UNKNOWN,"Fetching auth token failed: "+a.message);return e.dr(c)})})},i.prototype.lr=function(e){var t=this,s=this.hr(this.Yi);this.stream=this.wr(e),this.stream.Ii(function(){s(function(){return t.state=2,t.listener.Ii()})}),this.stream.Ri(function(a){s(function(){return t.dr(a)})}),this.stream.onMessage(function(a){s(function(){return t.onMessage(a)})})},i.prototype.nr=function(){var e=this;this.state=4,this.Zi.ji(function(){return(0,S.mG)(e,void 0,void 0,function(){return(0,S.Jh)(this,function(t){return this.state=0,this.start(),[2]})})})},i.prototype.dr=function(e){return P("PersistentStream","close with error: "+e),this.stream=null,this.close(3,e)},i.prototype.hr=function(e){var t=this;return function(s){t.Se.enqueueAndForget(function(){return t.Yi===e?s():(P("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},i}(),fT=function(i){function e(t,s,a,c,d){var p=this;return(p=i.call(this,t,"listen_stream_connection_backoff","listen_stream_idle",s,a,d)||this).R=c,p}return(0,S.ZT)(e,i),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var s=function(c,d){var p,M;if("targetChange"in d){var m="NO_CHANGE"===(M=d.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===M?1:"REMOVE"===M?2:"CURRENT"===M?3:"RESET"===M?4:G(),v=d.targetChange.targetIds||[],_=function(M,F){return M.I?($(void 0===F||"string"==typeof F),fe.fromBase64String(F||"")):($(void 0===F||F instanceof Uint8Array),fe.fromUint8Array(F||new Uint8Array))}(c,d.targetChange.resumeToken),b=(I=d.targetChange.cause)&&function(M){var F=void 0===M.code?A.UNKNOWN:Dg(M.code);return new R(F,M.message||"")}(I);p=new Mg(m,v,_,b||null)}else if("documentChange"in d){v=nn(c,(m=d.documentChange).document.name),_=Zt(m.document.updateTime);var I=new Ae({mapValue:{fields:m.document.fields}}),k=(b=te.newFoundDocument(v,_,I),m.targetIds||[]);p=new Na(k,m.removedTargetIds||[],b.key,b)}else if("documentDelete"in d)v=nn(c,(m=d.documentDelete).document),_=m.readTime?Zt(m.readTime):st.min(),I=te.newNoDocument(v,_),p=new Na([],b=m.removedTargetIds||[],I.key,I);else if("documentRemove"in d)v=nn(c,(m=d.documentRemove).document),p=new Na([],_=m.removedTargetIds||[],v,null);else{if(!("filter"in d))return G();var E=d.filter;v=new uC(m=E.count||0),p=new xg(_=E.targetId,v)}return p}(this.R,t),a=function(c){if(!("targetChange"in c))return st.min();var d=c.targetChange;return d.targetIds&&d.targetIds.length?st.min():d.readTime?Zt(d.readTime):st.min()}(t);return this.listener._r(s,a)},e.prototype.mr=function(t){var c,d,p,m,s={};s.database=Bo(this.R),s.addTarget=(c=this.R,(p=Ta(m=(d=t).target)?{documents:jg(c,m)}:{query:Yg(c,m)}).targetId=d.targetId,d.resumeToken.approximateByteSize()>0?p.resumeToken=Pg(c,d.resumeToken):d.snapshotVersion.compareTo(st.min())>0&&(p.readTime=Lo(c,d.snapshotVersion.toTimestamp())),p);var a=function(c,d){var p=function(m,v){switch(v){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return G()}}(0,d.purpose);return null==p?null:{"goog-listen-tags":p}}(0,t);a&&(s.labels=a),this.cr(s)},e.prototype.yr=function(t){var s={};s.database=Bo(this.R),s.removeTarget=t,this.cr(s)},e}(Ov),pT=function(i){function e(t,s,a,c,d){var p=this;return(p=i.call(this,t,"write_stream_connection_backoff","write_stream_idle",s,a,d)||this).R=c,p.gr=!1,p}return(0,S.ZT)(e,i),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,i.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if($(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var s=(d=t.commitTime,(c=t.writeResults)&&c.length>0?($(void 0!==d),c.map(function(p){return v=d,(_=Zt((m=p).updateTime?m.updateTime:v)).isEqual(st.min())&&(_=Zt(v)),new oC(_,m.transformResults||[]);var m,v,_})):[]),a=Zt(t.commitTime);return this.listener.Tr(a,s)}var c,d;return $(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=Bo(this.R),this.cr(t)},e.prototype.Er=function(t){var s=this,a={streamToken:this.lastStreamToken,writes:t.map(function(c){return Pa(s.R,c)})};this.cr(a)},e}(Ov),mT=function(i){function e(t,s,a){var c=this;return(c=i.call(this)||this).credentials=t,c.Hi=s,c.R=a,c.Rr=!1,c}return(0,S.ZT)(e,i),e.prototype.br=function(){if(this.Rr)throw new R(A.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,s,a){var c=this;return this.br(),this.credentials.getToken().then(function(d){return c.Hi.Ni(t,s,a,d)}).catch(function(d){throw"FirebaseError"===d.name?(d.code===A.UNAUTHENTICATED&&c.credentials.invalidateToken(),d):new R(A.UNKNOWN,d.toString())})},e.prototype.$i=function(t,s,a){var c=this;return this.br(),this.credentials.getToken().then(function(d){return c.Hi.$i(t,s,a,d)}).catch(function(d){throw"FirebaseError"===d.name?(d.code===A.UNAUTHENTICATED&&c.credentials.invalidateToken(),d):new R(A.UNKNOWN,d.toString())})},e.prototype.terminate=function(){this.Rr=!0},e}(function(){}),gT=function(){function i(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return i.prototype.Sr=function(){var e=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return e.Pr=null,e.Cr("Backend didn't respond within 10 seconds."),e.Dr("Offline"),Promise.resolve()}))},i.prototype.Nr=function(e){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.kr(),this.Cr("Connection failed 1 times. Most recent error: "+e.toString()),this.Dr("Offline")))},i.prototype.set=function(e){this.kr(),this.vr=0,"Online"===e&&(this.Vr=!1),this.Dr(e)},i.prototype.Dr=function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))},i.prototype.Cr=function(e){var t="Could not reach Cloud Firestore backend. "+e+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(Vt(t),this.Vr=!1):P("OnlineStateTracker",t)},i.prototype.kr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},i}(),vT=function(i,e,t,s,a){var c=this;this.localStore=i,this.datastore=e,this.asyncQueue=t,this.remoteSyncer={},this.Fr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=a,this.Lr.di(function(d){t.enqueueAndForget(function(){return(0,S.mG)(c,void 0,void 0,function(){return(0,S.Jh)(this,function(p){switch(p.label){case 0:return Yn(this)?(P("RemoteStore","Restarting streams for network reachability change."),[4,function(m){return(0,S.mG)(this,void 0,void 0,function(){var v;return(0,S.Jh)(this,function(_){switch(_.label){case 0:return(v=V(m)).Or.add(4),[4,Tr(v)];case 1:return _.sent(),v.Br.set("Unknown"),v.Or.delete(4),[4,Go(v)];case 2:return _.sent(),[2]}})})}(this)]):[3,2];case 1:p.sent(),p.label=2;case 2:return[2]}})})})}),this.Br=new gT(t,s)};function Go(i){return(0,S.mG)(this,void 0,void 0,function(){var e,t;return(0,S.Jh)(this,function(s){switch(s.label){case 0:if(!Yn(i))return[3,4];e=0,t=i.Mr,s.label=1;case 1:return e<t.length?[4,(0,t[e])(!0)]:[3,4];case 2:s.sent(),s.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Tr(i){return(0,S.mG)(this,void 0,void 0,function(){var e,t;return(0,S.Jh)(this,function(s){switch(s.label){case 0:e=0,t=i.Mr,s.label=1;case 1:return e<t.length?[4,(0,t[e])(!1)]:[3,4];case 2:s.sent(),s.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Ga(i,e){var t=V(i);t.$r.has(e.targetId)||(t.$r.set(e.targetId,e),Hl(t)?Gl(t):Dr(t).er()&&Yl(t,e))}function Ho(i,e){var t=V(i),s=Dr(t);t.$r.delete(e),s.er()&&Rv(t,e),0===t.$r.size&&(s.er()?s.ir():Yn(t)&&t.Br.set("Unknown"))}function Yl(i,e){i.qr.U(e.targetId),Dr(i).mr(e)}function Rv(i,e){i.qr.U(e),Dr(i).yr(e)}function Gl(i){i.qr=new pC({getRemoteKeysForTarget:function(e){return i.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return i.$r.get(e)||null}}),Dr(i).start(),i.Br.Sr()}function Hl(i){return Yn(i)&&!Dr(i).tr()&&i.$r.size>0}function Yn(i){return 0===V(i).Or.size}function Nv(i){i.qr=void 0}function yT(i){return(0,S.mG)(this,void 0,void 0,function(){return(0,S.Jh)(this,function(e){return i.$r.forEach(function(t,s){Yl(i,t)}),[2]})})}function _T(i,e){return(0,S.mG)(this,void 0,void 0,function(){return(0,S.Jh)(this,function(t){return Nv(i),Hl(i)?(i.Br.Nr(e),Gl(i)):i.Br.set("Unknown"),[2]})})}function wT(i,e,t){return(0,S.mG)(this,void 0,void 0,function(){var s,a,c;return(0,S.Jh)(this,function(d){switch(d.label){case 0:if(i.Br.set("Online"),!(e instanceof Mg&&2===e.state&&e.cause))return[3,6];d.label=1;case 1:return d.trys.push([1,3,,5]),[4,function(p,m){return(0,S.mG)(this,void 0,void 0,function(){var v,_,b,I;return(0,S.Jh)(this,function(k){switch(k.label){case 0:v=m.cause,_=0,b=m.targetIds,k.label=1;case 1:return _<b.length?p.$r.has(I=b[_])?[4,p.remoteSyncer.rejectListen(I,v)]:[3,3]:[3,5];case 2:k.sent(),p.$r.delete(I),p.qr.removeTarget(I),k.label=3;case 3:k.label=4;case 4:return _++,[3,1];case 5:return[2]}})})}(i,e)];case 2:return d.sent(),[3,5];case 3:return s=d.sent(),P("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),[4,Ha(i,s)];case 4:return d.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Na?i.qr.X(e):e instanceof xg?i.qr.rt(e):i.qr.et(e),t.isEqual(st.min()))return[3,13];d.label=7;case 7:return d.trys.push([7,11,,13]),[4,bv(i.localStore)];case 8:return a=d.sent(),t.compareTo(a)>=0?[4,(p=i,m=t,v=p.qr.ut(m),v.targetChanges.forEach(function(_,b){if(_.resumeToken.approximateByteSize()>0){var I=p.$r.get(b);I&&p.$r.set(b,I.withResumeToken(_.resumeToken,m))}}),v.targetMismatches.forEach(function(_){var b=p.$r.get(_);if(b){p.$r.set(_,b.withResumeToken(fe.EMPTY_BYTE_STRING,b.snapshotVersion)),Rv(p,_);var I=new Fa(b.target,_,1,b.sequenceNumber);Yl(p,I)}}),p.remoteSyncer.applyRemoteEvent(v))]:[3,10];case 9:d.sent(),d.label=10;case 10:return[3,13];case 11:return P("RemoteStore","Failed to raise snapshot:",c=d.sent()),[4,Ha(i,c)];case 12:return d.sent(),[3,13];case 13:return[2]}var p,m,v})})}function Ha(i,e,t){return(0,S.mG)(this,void 0,void 0,function(){var s=this;return(0,S.Jh)(this,function(a){switch(a.label){case 0:if(!yi(e))throw e;return i.Or.add(1),[4,Tr(i)];case 1:return a.sent(),i.Br.set("Offline"),t||(t=function(){return bv(i.localStore)}),i.asyncQueue.enqueueRetryable(function(){return(0,S.mG)(s,void 0,void 0,function(){return(0,S.Jh)(this,function(c){switch(c.label){case 0:return P("RemoteStore","Retrying IndexedDB access"),[4,t()];case 1:return c.sent(),i.Or.delete(1),[4,Go(i)];case 2:return c.sent(),[2]}})})}),[2]}})})}function Pv(i,e){return e().catch(function(t){return Ha(i,t,e)})}function kr(i){return(0,S.mG)(this,void 0,void 0,function(){var e,t,s,a,c;return(0,S.Jh)(this,function(d){switch(d.label){case 0:e=V(i),t=Gn(e),s=e.Fr.length>0?e.Fr[e.Fr.length-1].batchId:-1,d.label=1;case 1:if(!(Yn(p=e)&&p.Fr.length<10))return[3,7];d.label=2;case 2:return d.trys.push([2,4,,6]),[4,QC(e.localStore,s)];case 3:return null===(a=d.sent())?(0===e.Fr.length&&t.ir(),[3,7]):(s=a.batchId,function(p,m){p.Fr.push(m);var v=Gn(p);v.er()&&v.pr&&v.Er(m.mutations)}(e,a),[3,6]);case 4:return c=d.sent(),[4,Ha(e,c)];case 5:return d.sent(),[3,6];case 6:return[3,1];case 7:return Fv(e)&&Lv(e),[2]}var p})})}function Fv(i){return Yn(i)&&!Gn(i).tr()&&i.Fr.length>0}function Lv(i){Gn(i).start()}function bT(i){return(0,S.mG)(this,void 0,void 0,function(){return(0,S.Jh)(this,function(e){return Gn(i).Ar(),[2]})})}function ST(i){return(0,S.mG)(this,void 0,void 0,function(){var e,t,s;return(0,S.Jh)(this,function(c){for(e=Gn(i),t=0,s=i.Fr;t<s.length;t++)e.Er(s[t].mutations);return[2]})})}function IT(i,e,t){return(0,S.mG)(this,void 0,void 0,function(){var s,a;return(0,S.Jh)(this,function(c){switch(c.label){case 0:return s=i.Fr.shift(),a=MC.from(s,e,t),[4,Pv(i,function(){return i.remoteSyncer.applySuccessfulWrite(a)})];case 1:return c.sent(),[4,kr(i)];case 2:return c.sent(),[2]}})})}function CT(i,e){return(0,S.mG)(this,void 0,void 0,function(){return(0,S.Jh)(this,function(t){switch(t.label){case 0:return e&&Gn(i).pr?[4,function(s,a){return(0,S.mG)(this,void 0,void 0,function(){var c,d;return(0,S.Jh)(this,function(p){switch(p.label){case 0:return kg(d=a.code)&&d!==A.ABORTED?(c=s.Fr.shift(),Gn(s).sr(),[4,Pv(s,function(){return s.remoteSyncer.rejectFailedWrite(c.batchId,a)})]):[3,3];case 1:return p.sent(),[4,kr(s)];case 2:p.sent(),p.label=3;case 3:return[2]}})})}(i,e)]:[3,2];case 1:t.sent(),t.label=2;case 2:return Fv(i)&&Lv(i),[2]}})})}function zl(i,e){return(0,S.mG)(this,void 0,void 0,function(){var t;return(0,S.Jh)(this,function(s){switch(s.label){case 0:return t=V(i),e?(t.Or.delete(2),[4,Go(t)]):[3,2];case 1:return s.sent(),[3,5];case 2:return e?[3,4]:(t.Or.add(2),[4,Tr(t)]);case 3:s.sent(),t.Br.set("Unknown"),s.label=4;case 4:s.label=5;case 5:return[2]}})})}function Dr(i){var t,s,a,c,e=this;return i.Ur||(i.Ur=(t=i.datastore,s=i.asyncQueue,a={Ii:yT.bind(null,i),Ri:_T.bind(null,i),_r:wT.bind(null,i)},(c=V(t)).br(),new fT(s,c.Hi,c.credentials,c.R,a)),i.Mr.push(function(t){return(0,S.mG)(e,void 0,void 0,function(){return(0,S.Jh)(this,function(s){switch(s.label){case 0:return t?(i.Ur.sr(),Hl(i)?Gl(i):i.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,i.Ur.stop()];case 2:s.sent(),Nv(i),s.label=3;case 3:return[2]}})})})),i.Ur}function Gn(i){var t,s,a,c,e=this;return i.Kr||(i.Kr=(t=i.datastore,s=i.asyncQueue,a={Ii:bT.bind(null,i),Ri:CT.bind(null,i),Ir:ST.bind(null,i),Tr:IT.bind(null,i)},(c=V(t)).br(),new pT(s,c.Hi,c.credentials,c.R,a)),i.Mr.push(function(t){return(0,S.mG)(e,void 0,void 0,function(){return(0,S.Jh)(this,function(s){switch(s.label){case 0:return t?(i.Kr.sr(),[4,kr(i)]):[3,2];case 1:return s.sent(),[3,4];case 2:return[4,i.Kr.stop()];case 3:s.sent(),i.Fr.length>0&&(P("RemoteStore","Stopping write stream with "+i.Fr.length+" pending writes"),i.Fr=[]),s.label=4;case 4:return[2]}})})})),i.Kr}var TT=function(){function i(e,t,s,a,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=c,this.deferred=new ue,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(d){})}return i.createAndSchedule=function(e,t,s,a,c){var d=new i(e,t,Date.now()+s,a,c);return d.start(s),d},i.prototype.start=function(e){var t=this;this.timerHandle=setTimeout(function(){return t.handleDelayElapsed()},e)},i.prototype.skipDelay=function(){return this.handleDelayElapsed()},i.prototype.cancel=function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new R(A.CANCELLED,"Operation cancelled"+(e?": "+e:""))))},i.prototype.handleDelayElapsed=function(){var e=this;this.asyncQueue.enqueueAndForget(function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then(function(t){return e.deferred.resolve(t)})):Promise.resolve()})},i.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},i}();function Er(i,e){if(Vt("AsyncQueue",e+": "+i),yi(i))return new R(A.UNAVAILABLE,e+": "+i);throw i}var Vv=function(){function i(e){this.comparator=e?function(t,s){return e(t,s)||H.comparator(t.key,s.key)}:function(t,s){return H.comparator(t.key,s.key)},this.keyedMap=Cl(),this.sortedSet=new se(this.comparator)}return i.emptySet=function(e){return new i(e.comparator)},i.prototype.has=function(e){return null!=this.keyedMap.get(e)},i.prototype.get=function(e){return this.keyedMap.get(e)},i.prototype.first=function(){return this.sortedSet.minKey()},i.prototype.last=function(){return this.sortedSet.maxKey()},i.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},i.prototype.indexOf=function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1},Object.defineProperty(i.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),i.prototype.forEach=function(e){this.sortedSet.inorderTraversal(function(t,s){return e(t),!1})},i.prototype.add=function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))},i.prototype.delete=function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this},i.prototype.isEqual=function(e){if(!(e instanceof i)||this.size!==e.size)return!1;for(var t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();t.hasNext();){var a=t.getNext().key,c=s.getNext().key;if(!a.isEqual(c))return!1}return!0},i.prototype.toString=function(){var e=[];return this.forEach(function(t){e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},i.prototype.copy=function(e,t){var s=new i;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s},i}(),Bv=function(){function i(){this.Qr=new se(H.comparator)}return i.prototype.track=function(e){var t=e.doc.key,s=this.Qr.get(t);s?0!==e.type&&3===s.type?this.Qr=this.Qr.insert(t,e):3===e.type&&1!==s.type?this.Qr=this.Qr.insert(t,{type:s.type,doc:e.doc}):2===e.type&&2===s.type?this.Qr=this.Qr.insert(t,{type:2,doc:e.doc}):2===e.type&&0===s.type?this.Qr=this.Qr.insert(t,{type:0,doc:e.doc}):1===e.type&&0===s.type?this.Qr=this.Qr.remove(t):1===e.type&&2===s.type?this.Qr=this.Qr.insert(t,{type:1,doc:s.doc}):0===e.type&&1===s.type?this.Qr=this.Qr.insert(t,{type:2,doc:e.doc}):G():this.Qr=this.Qr.insert(t,e)},i.prototype.jr=function(){var e=[];return this.Qr.inorderTraversal(function(t,s){e.push(s)}),e},i}(),za=function(){function i(e,t,s,a,c,d,p,m){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=p,this.excludesMetadataChanges=m}return i.fromInitialDocuments=function(e,t,s,a){var c=[];return t.forEach(function(d){c.push({type:0,doc:d})}),new i(e,t,Vv.emptySet(t),c,s,a,!0,!1)},Object.defineProperty(i.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),i.prototype.isEqual=function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Oo(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(var a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0},i}(),kT=function(){this.Wr=void 0,this.listeners=[]},DT=function(){this.queries=new Sr(function(i){return hg(i)},Oo),this.onlineState="Unknown",this.Gr=new Set};function Zl(i,e){return(0,S.mG)(this,void 0,void 0,function(){var t,s,a,c,d,p,m;return(0,S.Jh)(this,function(v){switch(v.label){case 0:if(t=V(i),a=!1,(c=t.queries.get(s=e.query))||(a=!0,c=new kT),!a)return[3,4];v.label=1;case 1:return v.trys.push([1,3,,4]),d=c,[4,t.onListen(s)];case 2:return d.Wr=v.sent(),[3,4];case 3:return p=v.sent(),m=Er(p,"Initialization of query '"+bl(e.query)+"' failed"),[2,void e.onError(m)];case 4:return t.queries.set(s,c),c.listeners.push(e),e.zr(t.onlineState),c.Wr&&e.Hr(c.Wr)&&Jl(t),[2]}})})}function Kl(i,e){return(0,S.mG)(this,void 0,void 0,function(){var t,s,a,c,d;return(0,S.Jh)(this,function(p){return t=V(i),a=!1,(c=t.queries.get(s=e.query))&&(d=c.listeners.indexOf(e))>=0&&(c.listeners.splice(d,1),a=0===c.listeners.length),a?[2,(t.queries.delete(s),t.onUnlisten(s))]:[2]})})}function ET(i,e){for(var t=V(i),s=!1,a=0,c=e;a<c.length;a++){var d=c[a],m=t.queries.get(d.query);if(m){for(var v=0,_=m.listeners;v<_.length;v++)_[v].Hr(d)&&(s=!0);m.Wr=d}}s&&Jl(t)}function AT(i,e,t){var s=V(i),a=s.queries.get(e);if(a)for(var c=0,d=a.listeners;c<d.length;c++)d[c].onError(t);s.queries.delete(e)}function Jl(i){i.Gr.forEach(function(e){e.next()})}var Ql=function(){function i(e,t,s){this.query=e,this.Jr=t,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=s||{}}return i.prototype.Hr=function(e){if(!this.options.includeMetadataChanges){for(var t=[],s=0,a=e.docChanges;s<a.length;s++){var c=a[s];3!==c.type&&t.push(c)}e=new za(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var d=!1;return this.Yr?this.Zr(e)&&(this.Jr.next(e),d=!0):this.eo(e,this.onlineState)&&(this.no(e),d=!0),this.Xr=e,d},i.prototype.onError=function(e){this.Jr.error(e)},i.prototype.zr=function(e){this.onlineState=e;var t=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,e)&&(this.no(this.Xr),t=!0),t},i.prototype.eo=function(e,t){return!e.fromCache||!(this.options.so&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)},i.prototype.Zr=function(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges},i.prototype.no=function(e){e=za.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Yr=!0,this.Jr.next(e)},i}(),xT=function(){function i(e,t){this.payload=e,this.byteLength=t}return i.prototype.io=function(){return"metadata"in this.payload},i}(),qv=function(){function i(e){this.R=e}return i.prototype.qn=function(e){return nn(this.R,e)},i.prototype.Un=function(e){return e.metadata.exists?qg(this.R,e.document,!1):te.newNoDocument(this.qn(e.metadata.name),this.Kn(e.metadata.readTime))},i.prototype.Kn=function(e){return Zt(e)},i}();!function(){function i(e,t,s){this.ro=e,this.localStore=t,this.R=s,this.queries=[],this.documents=[],this.progress=function(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}(e)}i.prototype.oo=function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null},i.prototype.co=function(e){for(var t=new Map,s=new qv(this.R),a=0,c=e;a<c.length;a++){var d=c[a];if(d.metadata.queries)for(var p=s.qn(d.metadata.name),m=0,v=d.metadata.queries;m<v.length;m++){var _=v[m],b=(t.get(_)||vt()).add(p);t.set(_,b)}}return t},i.prototype.complete=function(){return(0,S.mG)(this,void 0,void 0,function(){var e,t,s,a,c;return(0,S.Jh)(this,function(d){switch(d.label){case 0:return[4,XC(this.localStore,new qv(this.R),this.documents,this.ro.id)];case 1:e=d.sent(),t=this.co(this.documents),s=0,a=this.queries,d.label=2;case 2:return s<a.length?[4,$C(this.localStore,c=a[s],t.get(c.name))]:[3,5];case 3:d.sent(),d.label=4;case 4:return s++,[3,2];case 5:return[2,(this.progress.taskState="Success",new HC(Object.assign({},this.progress),e))]}})})}}();var jv=function(i){this.key=i},Yv=function(i){this.key=i},Gv=function(){function i(e,t){this.query=e,this.uo=t,this.ao=null,this.current=!1,this.ho=vt(),this.mutatedKeys=vt(),this.lo=dg(e),this.fo=new Vv(this.lo)}return Object.defineProperty(i.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),i.prototype._o=function(e,t){var s=this,a=t?t.mo:new Bv,c=t?t.fo:this.fo,d=t?t.mutatedKeys:this.mutatedKeys,p=c,m=!1,v=Da(this.query)&&c.size===this.query.limit?c.last():null,_=Ea(this.query)&&c.size===this.query.limit?c.first():null;if(e.inorderTraversal(function(I,k){var T=c.get(I),E=Ro(s.query,k)?k:null,M=!!T&&s.mutatedKeys.has(T.key),F=!!E&&(E.hasLocalMutations||s.mutatedKeys.has(E.key)&&E.hasCommittedMutations),Y=!1;T&&E?T.data.isEqual(E.data)?M!==F&&(a.track({type:3,doc:E}),Y=!0):s.yo(T,E)||(a.track({type:2,doc:E}),Y=!0,(v&&s.lo(E,v)>0||_&&s.lo(E,_)<0)&&(m=!0)):!T&&E?(a.track({type:0,doc:E}),Y=!0):T&&!E&&(a.track({type:1,doc:T}),Y=!0,(v||_)&&(m=!0)),Y&&(E?(p=p.add(E),d=F?d.add(I):d.delete(I)):(p=p.delete(I),d=d.delete(I)))}),Da(this.query)||Ea(this.query))for(;p.size>this.query.limit;){var b=Da(this.query)?p.last():p.first();p=p.delete(b.key),d=d.delete(b.key),a.track({type:1,doc:b})}return{fo:p,mo:a,Nn:m,mutatedKeys:d}},i.prototype.yo=function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations},i.prototype.applyChanges=function(e,t,s){var a=this,c=this.fo;this.fo=e.fo,this.mutatedKeys=e.mutatedKeys;var d=e.mo.jr();d.sort(function(_,b){return k=b.type,(T=function(E){switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return G()}})(_.type)-T(k)||a.lo(_.doc,b.doc);var k,T}),this.po(s);var p=t?this.Eo():[],m=0===this.ho.size&&this.current?1:0,v=m!==this.ao;return this.ao=m,0!==d.length||v?{snapshot:new za(this.query,e.fo,c,d,e.mutatedKeys,0===m,v,!1),To:p}:{To:p}},i.prototype.zr=function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({fo:this.fo,mo:new Bv,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},i.prototype.Io=function(e){return!this.uo.has(e)&&!!this.fo.has(e)&&!this.fo.get(e).hasLocalMutations},i.prototype.po=function(e){var t=this;e&&(e.addedDocuments.forEach(function(s){return t.uo=t.uo.add(s)}),e.modifiedDocuments.forEach(function(s){}),e.removedDocuments.forEach(function(s){return t.uo=t.uo.delete(s)}),this.current=e.current)},i.prototype.Eo=function(){var e=this;if(!this.current)return[];var t=this.ho;this.ho=vt(),this.fo.forEach(function(a){e.Io(a.key)&&(e.ho=e.ho.add(a.key))});var s=[];return t.forEach(function(a){e.ho.has(a)||s.push(new Yv(a))}),this.ho.forEach(function(a){t.has(a)||s.push(new jv(a))}),s},i.prototype.Ao=function(e){this.uo=e.Bn,this.ho=vt();var t=this._o(e.documents);return this.applyChanges(t,!0)},i.prototype.Ro=function(){return za.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},i}(),OT=function(i,e,t){this.query=i,this.targetId=e,this.view=t},RT=function(i){this.key=i,this.bo=!1},NT=function(){function i(e,t,s,a,c,d){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.vo={},this.Po=new Sr(function(p){return hg(p)},Oo),this.Vo=new Map,this.So=new Set,this.Do=new se(H.comparator),this.Co=new Map,this.No=new Ll,this.xo={},this.ko=new Map,this.Fo=Va.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(i.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),i}();function PT(i,e){return(0,S.mG)(this,void 0,void 0,function(){var t,a,c,d,p;return(0,S.Jh)(this,function(m){switch(m.label){case 0:return t=nh(i),(c=t.Po.get(e))?(t.sharedClientState.addLocalQueryTarget(c.targetId),a=c.view.Ro(),[3,4]):[3,1];case 1:return[4,Ir(t.localStore,Ve(e))];case 2:return d=m.sent(),p=t.sharedClientState.addLocalQueryTarget(d.targetId),[4,Wl(t,e,d.targetId,"current"===p)];case 3:a=m.sent(),t.isPrimaryClient&&Ga(t.remoteStore,d),m.label=4;case 4:return[2,a]}})})}function Wl(i,e,t,s){return(0,S.mG)(this,void 0,void 0,function(){var a,c,d,p,m,v;return(0,S.Jh)(this,function(_){switch(_.label){case 0:return i.Oo=function(b,I,k){return function(T,E,M,F){return(0,S.mG)(this,void 0,void 0,function(){var Y,z,ot;return(0,S.Jh)(this,function(lt){switch(lt.label){case 0:return(Y=E.view._o(M)).Nn?[4,ja(T.localStore,E.query,!1).then(function(L){return E.view._o(L.documents,Y)})]:[3,2];case 1:Y=lt.sent(),lt.label=2;case 2:return z=F&&F.targetChanges.get(E.targetId),ot=E.view.applyChanges(Y,T.isPrimaryClient,z),[2,(th(T,E.targetId,ot.To),ot.snapshot)]}})})}(i,b,I,k)},[4,ja(i.localStore,e,!0)];case 1:return a=_.sent(),c=new Gv(e,a.Bn),d=c._o(a.documents),p=kl.createSynthesizedTargetChangeForCurrentChange(t,s&&"Offline"!==i.onlineState),m=c.applyChanges(d,i.isPrimaryClient,p),th(i,t,m.To),v=new OT(e,t,c),[2,(i.Po.set(e,v),i.Vo.has(t)?i.Vo.get(t).push(e):i.Vo.set(t,[e]),m.snapshot)]}})})}function FT(i,e){return(0,S.mG)(this,void 0,void 0,function(){var t,s,a;return(0,S.Jh)(this,function(c){switch(c.label){case 0:return t=V(i),s=t.Po.get(e),(a=t.Vo.get(s.targetId)).length>1?[2,(t.Vo.set(s.targetId,a.filter(function(d){return!Oo(d,e)})),void t.Po.delete(e))]:t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(s.targetId),t.sharedClientState.isActiveQueryTarget(s.targetId)?[3,2]:[4,Cr(t.localStore,s.targetId,!1).then(function(){t.sharedClientState.clearQueryState(s.targetId),Ho(t.remoteStore,s.targetId),Ar(t,s.targetId)}).catch(wi)]):[3,3];case 1:c.sent(),c.label=2;case 2:return[3,5];case 3:return Ar(t,s.targetId),[4,Cr(t.localStore,s.targetId,!0)];case 4:c.sent(),c.label=5;case 5:return[2]}})})}function LT(i,e,t){return(0,S.mG)(this,void 0,void 0,function(){var s,a,c,d;return(0,S.Jh)(this,function(p){switch(p.label){case 0:s=ih(i),p.label=1;case 1:return p.trys.push([1,5,,6]),[4,(m=s.localStore,v=e,b=V(m),I=ve.now(),k=v.reduce(function(T,E){return T.add(E.key)},vt()),b.persistence.runTransaction("Locally write mutations","readwrite",function(T){return b.Mn.pn(T,k).next(function(E){_=E;for(var M=[],F=0,Y=v;F<Y.length;F++){var z=Y[F],ot=aC(z,_.get(z.key));null!=ot&&M.push(new Ln(z.key,ot,rg(ot.value.mapValue),oe.exists(!0)))}return b._n.addMutationBatch(T,I,M,v)})}).then(function(T){return T.applyToLocalDocumentSet(_),{batchId:T.batchId,changes:_}}))];case 2:return a=p.sent(),s.sharedClientState.addPendingMutation(a.batchId),function(m,v,_){var b=m.xo[m.currentUser.toKey()];b||(b=new se(ct)),b=b.insert(v,_),m.xo[m.currentUser.toKey()]=b}(s,a.batchId,t),[4,bn(s,a.changes)];case 3:return p.sent(),[4,kr(s.remoteStore)];case 4:return p.sent(),[3,6];case 5:return c=p.sent(),d=Er(c,"Failed to persist write"),t.reject(d),[3,6];case 6:return[2]}var m,v,_,b,I,k})})}function Hv(i,e){return(0,S.mG)(this,void 0,void 0,function(){var t,s;return(0,S.Jh)(this,function(a){switch(a.label){case 0:t=V(i),a.label=1;case 1:return a.trys.push([1,4,,6]),[4,JC(t.localStore,e)];case 2:return s=a.sent(),e.targetChanges.forEach(function(c,d){var p=t.Co.get(d);p&&($(c.addedDocuments.size+c.modifiedDocuments.size+c.removedDocuments.size<=1),c.addedDocuments.size>0?p.bo=!0:c.modifiedDocuments.size>0?$(p.bo):c.removedDocuments.size>0&&($(p.bo),p.bo=!1))}),[4,bn(t,s,e)];case 3:return a.sent(),[3,6];case 4:return[4,wi(a.sent())];case 5:return a.sent(),[3,6];case 6:return[2]}})})}function zv(i,e,t){var s=V(i);if(s.isPrimaryClient&&0===t||!s.isPrimaryClient&&1===t){var a=[];s.Po.forEach(function(c,d){var p=d.view.zr(e);p.snapshot&&a.push(p.snapshot)}),function(c,d){var p=V(c);p.onlineState=d;var m=!1;p.queries.forEach(function(v,_){for(var b=0,I=_.listeners;b<I.length;b++)I[b].zr(d)&&(m=!0)}),m&&Jl(p)}(s.eventManager,e),a.length&&s.vo._r(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}function VT(i,e,t){return(0,S.mG)(this,void 0,void 0,function(){var s,a,c,d,p,m;return(0,S.Jh)(this,function(v){switch(v.label){case 0:return(s=V(i)).sharedClientState.updateQueryState(e,"rejected",t),a=s.Co.get(e),(c=a&&a.key)?(d=(d=new se(H.comparator)).insert(c,te.newNoDocument(c,st.min())),p=vt().add(c),m=new Tl(st.min(),new Map,new jt(ct),d,p),[4,Hv(s,m)]):[3,2];case 1:return v.sent(),s.Do=s.Do.remove(c),s.Co.delete(e),eh(s),[3,4];case 2:return[4,Cr(s.localStore,e,!1).then(function(){return Ar(s,e,t)}).catch(wi)];case 3:v.sent(),v.label=4;case 4:return[2]}})})}function BT(i,e){return(0,S.mG)(this,void 0,void 0,function(){var t,s,a;return(0,S.Jh)(this,function(c){switch(c.label){case 0:t=V(i),s=e.batch.batchId,c.label=1;case 1:return c.trys.push([1,4,,6]),[4,KC(t.localStore,e)];case 2:return a=c.sent(),$l(t,s,null),Xl(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),[4,bn(t,a)];case 3:return c.sent(),[3,6];case 4:return[4,wi(c.sent())];case 5:return c.sent(),[3,6];case 6:return[2]}})})}function qT(i,e,t){return(0,S.mG)(this,void 0,void 0,function(){var s,a;return(0,S.Jh)(this,function(c){switch(c.label){case 0:s=V(i),c.label=1;case 1:return c.trys.push([1,4,,6]),[4,(d=s.localStore,p=e,m=V(d),m.persistence.runTransaction("Reject batch","readwrite-primary",function(v){var _;return m._n.lookupMutationBatch(v,p).next(function(b){return $(null!==b),_=b.keys(),m._n.removeMutationBatch(v,b)}).next(function(){return m._n.performConsistencyCheck(v)}).next(function(){return m.Mn.pn(v,_)})}))];case 2:return a=c.sent(),$l(s,e,t),Xl(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),[4,bn(s,a)];case 3:return c.sent(),[3,6];case 4:return[4,wi(c.sent())];case 5:return c.sent(),[3,6];case 6:return[2]}var d,p,m})})}function UT(i,e){return(0,S.mG)(this,void 0,void 0,function(){var t,s,a,c,d;return(0,S.Jh)(this,function(p){switch(p.label){case 0:Yn((t=V(i)).remoteStore)||P("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),p.label=1;case 1:return p.trys.push([1,3,,4]),[4,(m=t.localStore,v=V(m),v.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(_){return v._n.getHighestUnacknowledgedBatchId(_)}))];case 2:return-1===(s=p.sent())?[2,void e.resolve()]:((a=t.ko.get(s)||[]).push(e),t.ko.set(s,a),[3,4]);case 3:return c=p.sent(),d=Er(c,"Initialization of waitForPendingWrites() operation failed"),e.reject(d),[3,4];case 4:return[2]}var m,v})})}function Xl(i,e){(i.ko.get(e)||[]).forEach(function(t){t.resolve()}),i.ko.delete(e)}function $l(i,e,t){var s=V(i),a=s.xo[s.currentUser.toKey()];if(a){var c=a.get(e);c&&(t?c.reject(t):c.resolve(),a=a.remove(e)),s.xo[s.currentUser.toKey()]=a}}function Ar(i,e,t){void 0===t&&(t=null),i.sharedClientState.removeLocalQueryTarget(e);for(var s=0,a=i.Vo.get(e);s<a.length;s++){var c=a[s];i.Po.delete(c),t&&i.vo.Mo(c,t)}i.Vo.delete(e),i.isPrimaryClient&&i.No.Zn(e).forEach(function(d){i.No.containsKey(d)||Zv(i,d)})}function Zv(i,e){i.So.delete(e.path.canonicalString());var t=i.Do.get(e);null!==t&&(Ho(i.remoteStore,t),i.Do=i.Do.remove(e),i.Co.delete(t),eh(i))}function th(i,e,t){for(var s=0,a=t;s<a.length;s++){var c=a[s];c instanceof jv?(i.No.addReference(c.key,e),jT(i,c)):c instanceof Yv?(P("SyncEngine","Document no longer in limbo: "+c.key),i.No.removeReference(c.key,e),i.No.containsKey(c.key)||Zv(i,c.key)):G()}}function jT(i,e){var t=e.key,s=t.path.canonicalString();i.Do.get(t)||i.So.has(s)||(P("SyncEngine","New document in limbo: "+t),i.So.add(s),eh(i))}function eh(i){for(;i.So.size>0&&i.Do.size<i.maxConcurrentLimboResolutions;){var e=i.So.values().next().value;i.So.delete(e);var t=new H(ft.fromString(e)),s=i.Fo.next();i.Co.set(s,new RT(t)),i.Do=i.Do.insert(t,s),Ga(i.remoteStore,new Fa(Ve(ur(t.path)),s,2,Ee.o))}}function bn(i,e,t){return(0,S.mG)(this,void 0,void 0,function(){var s,a,c,d;return(0,S.Jh)(this,function(p){switch(p.label){case 0:return s=V(i),a=[],c=[],d=[],s.Po.isEmpty()?[3,3]:(s.Po.forEach(function(m,v){d.push(s.Oo(v,e,t).then(function(_){if(_){s.isPrimaryClient&&s.sharedClientState.updateQueryState(v.targetId,_.fromCache?"not-current":"current"),a.push(_);var b=zC.Pn(v.targetId,_);c.push(b)}}))}),[4,Promise.all(d)]);case 1:return p.sent(),s.vo._r(a),[4,function(m,v){return(0,S.mG)(this,void 0,void 0,function(){var _,b,I,k,T,E,M,Y;return(0,S.Jh)(this,function(z){switch(z.label){case 0:_=V(m),z.label=1;case 1:return z.trys.push([1,3,,4]),[4,_.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(ot){return N.forEach(v,function(lt){return N.forEach(lt.bn,function(L){return _.persistence.referenceDelegate.addReference(ot,lt.targetId,L)}).next(function(){return N.forEach(lt.vn,function(L){return _.persistence.referenceDelegate.removeReference(ot,lt.targetId,L)})})})})];case 2:return z.sent(),[3,4];case 3:if(!yi(b=z.sent()))throw b;return P("LocalStore","Failed to update sequence numbers: "+b),[3,4];case 4:for(I=0,k=v;I<k.length;I++)E=(T=k[I]).targetId,T.fromCache||(M=_.kn.get(E),Y=M.withLastLimboFreeSnapshotVersion(M.snapshotVersion),_.kn=_.kn.insert(E,Y));return[2]}})})}(s.localStore,c)];case 2:p.sent(),p.label=3;case 3:return[2]}})})}function YT(i,e){return(0,S.mG)(this,void 0,void 0,function(){var t,s;return(0,S.Jh)(this,function(a){switch(a.label){case 0:return(t=V(i)).currentUser.isEqual(e)?[3,3]:(P("SyncEngine","User change. New user:",e.toKey()),[4,wv(t.localStore,e)]);case 1:return s=a.sent(),t.currentUser=e,(c=t).ko.forEach(function(p){p.forEach(function(m){m.reject(new R(A.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),c.ko.clear(),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),[4,bn(t,s.Ln)];case 2:a.sent(),a.label=3;case 3:return[2]}var c})})}function GT(i,e){var t=V(i),s=t.Co.get(e);if(s&&s.bo)return vt().add(s.key);var a=vt(),c=t.Vo.get(e);if(!c)return a;for(var d=0,p=c;d<p.length;d++){var v=t.Po.get(p[d]);a=a.unionWith(v.view.wo)}return a}function HT(i,e){return(0,S.mG)(this,void 0,void 0,function(){var t,s,a;return(0,S.Jh)(this,function(c){switch(c.label){case 0:return[4,ja((t=V(i)).localStore,e.query,!0)];case 1:return s=c.sent(),a=e.view.Ao(s),[2,(t.isPrimaryClient&&th(t,e.targetId,a.To),a)]}})})}function zT(i){return(0,S.mG)(this,void 0,void 0,function(){var e;return(0,S.Jh)(this,function(t){return[2,Cv((e=V(i)).localStore).then(function(s){return bn(e,s)})]})})}function ZT(i,e,t,s){return(0,S.mG)(this,void 0,void 0,function(){var a,c;return(0,S.Jh)(this,function(d){switch(d.label){case 0:return[4,(p=(a=V(i)).localStore,m=e,v=V(p),_=V(v._n),v.persistence.runTransaction("Lookup mutation documents","readonly",function(b){return _.jt(b,m).next(function(I){return I?v.Mn.pn(b,I):N.resolve(null)})}))];case 1:return null===(c=d.sent())?[3,6]:"pending"!==t?[3,3]:[4,kr(a.remoteStore)];case 2:return d.sent(),[3,4];case 3:"acknowledged"===t||"rejected"===t?($l(a,e,s||null),Xl(a,e),function(p,m){V(V(p)._n).Gt(m)}(a.localStore,e)):G(),d.label=4;case 4:return[4,bn(a,c)];case 5:return d.sent(),[3,7];case 6:P("SyncEngine","Cannot apply mutation batch with id: "+e),d.label=7;case 7:return[2]}var p,m,v,_})})}function KT(i,e){return(0,S.mG)(this,void 0,void 0,function(){var t,s,a,c,d,m,v;return(0,S.Jh)(this,function(_){switch(_.label){case 0:return nh(t=V(i)),ih(t),!0!==e||!0===t.$o?[3,3]:(s=t.sharedClientState.getAllActiveQueryTargets(),[4,Kv(t,s.toArray())]);case 1:return a=_.sent(),t.$o=!0,[4,zl(t.remoteStore,!0)];case 2:for(_.sent(),c=0,d=a;c<d.length;c++)Ga(t.remoteStore,d[c]);return[3,7];case 3:return!1!==e||!1===t.$o?[3,7]:(m=[],v=Promise.resolve(),t.Vo.forEach(function(b,I){t.sharedClientState.isLocalQueryTarget(I)?m.push(I):v=v.then(function(){return Ar(t,I),Cr(t.localStore,I,!0)}),Ho(t.remoteStore,I)}),[4,v]);case 4:return _.sent(),[4,Kv(t,m)];case 5:return _.sent(),(I=V(t)).Co.forEach(function(k,T){Ho(I.remoteStore,T)}),I.No.ts(),I.Co=new Map,I.Do=new se(H.comparator),t.$o=!1,[4,zl(t.remoteStore,!1)];case 6:_.sent(),_.label=7;case 7:return[2]}var I})})}function Kv(i,e,t){return(0,S.mG)(this,void 0,void 0,function(){var s,a,c,d,p,m,v,_,b,I,T,E,M;return(0,S.Jh)(this,function(F){switch(F.label){case 0:s=V(i),a=[],c=[],d=0,p=e,F.label=1;case 1:return d<p.length?(v=void 0,(_=s.Vo.get(m=p[d]))&&0!==_.length?[4,Ir(s.localStore,Ve(_[0]))]:[3,7]):[3,13];case 2:v=F.sent(),b=0,I=_,F.label=3;case 3:return b<I.length?(T=s.Po.get(I[b]),[4,HT(s,T)]):[3,6];case 4:(E=F.sent()).snapshot&&c.push(E.snapshot),F.label=5;case 5:return b++,[3,3];case 6:return[3,11];case 7:return[4,Iv(s.localStore,m)];case 8:return M=F.sent(),[4,Ir(s.localStore,M)];case 9:return v=F.sent(),[4,Wl(s,Jv(M),m,!1)];case 10:F.sent(),F.label=11;case 11:a.push(v),F.label=12;case 12:return d++,[3,1];case 13:return[2,(s.vo._r(c),a)]}})})}function Jv(i){return cg(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function JT(i){var e=V(i);return V(V(e.localStore).persistence).fn()}function QT(i,e,t,s){return(0,S.mG)(this,void 0,void 0,function(){var a,c,d;return(0,S.Jh)(this,function(p){switch(p.label){case 0:return(a=V(i)).$o?(P("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!a.Vo.has(e))return[3,8];switch(t){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Cv(a.localStore)];case 3:return c=p.sent(),d=Tl.createSynthesizedRemoteEventForCurrentChange(e,"current"===t),[4,bn(a,c,d)];case 4:return p.sent(),[3,8];case 5:return[4,Cr(a.localStore,e,!0)];case 6:return p.sent(),Ar(a,e,s),[3,8];case 7:G(),p.label=8;case 8:return[2]}})})}function WT(i,e,t){return(0,S.mG)(this,void 0,void 0,function(){var s,a,c,d,p,m,v,_,b;return(0,S.Jh)(this,function(k){switch(k.label){case 0:if(!(s=nh(i)).$o)return[3,10];a=0,c=e,k.label=1;case 1:return a<c.length?s.Vo.has(d=c[a])?(P("SyncEngine","Adding an already active target "+d),[3,5]):[4,Iv(s.localStore,d)]:[3,6];case 2:return p=k.sent(),[4,Ir(s.localStore,p)];case 3:return m=k.sent(),[4,Wl(s,Jv(p),m.targetId,!1)];case 4:k.sent(),Ga(s.remoteStore,m),k.label=5;case 5:return a++,[3,1];case 6:v=function(T){return(0,S.Jh)(this,function(E){switch(E.label){case 0:return s.Vo.has(T)?[4,Cr(s.localStore,T,!1).then(function(){Ho(s.remoteStore,T),Ar(s,T)}).catch(wi)]:[3,2];case 1:E.sent(),E.label=2;case 2:return[2]}})},_=0,b=t,k.label=7;case 7:return _<b.length?[5,v(b[_])]:[3,10];case 8:k.sent(),k.label=9;case 9:return _++,[3,7];case 10:return[2]}})})}function nh(i){var e=V(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=Hv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=GT.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=VT.bind(null,e),e.vo._r=ET.bind(null,e.eventManager),e.vo.Mo=AT.bind(null,e.eventManager),e}function ih(i){var e=V(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=BT.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=qT.bind(null,e),e}var Qv=function(){function i(){this.synchronizeTabs=!1}return i.prototype.initialize=function(e){return(0,S.mG)(this,void 0,void 0,function(){return(0,S.Jh)(this,function(t){switch(t.label){case 0:return this.R=Yo(e.databaseInfo.databaseId),this.sharedClientState=this.Bo(e),this.persistence=this.qo(e),[4,this.persistence.start()];case 1:return t.sent(),this.gcScheduler=this.Uo(e),this.localStore=this.Ko(e),[2]}})})},i.prototype.Uo=function(e){return null},i.prototype.Ko=function(e){return _v(this.persistence,new yv,e.initialUser,this.R)},i.prototype.qo=function(e){return new oT(aT.bs,this.R)},i.prototype.Bo=function(e){return new Av},i.prototype.terminate=function(){return(0,S.mG)(this,void 0,void 0,function(){return(0,S.Jh)(this,function(e){switch(e.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return e.sent(),[4,this.persistence.shutdown()];case 2:return e.sent(),[2]}})})},i}(),Wv=function(i){function e(t,s,a){var c=this;return(c=i.call(this)||this).Qo=t,c.cacheSizeBytes=s,c.forceOwnership=a,c.synchronizeTabs=!1,c}return(0,S.ZT)(e,i),e.prototype.initialize=function(t){return(0,S.mG)(this,void 0,void 0,function(){var s=this;return(0,S.Jh)(this,function(a){switch(a.label){case 0:return[4,i.prototype.initialize.call(this,t)];case 1:return a.sent(),[4,WC(this.localStore)];case 2:return a.sent(),[4,this.Qo.initialize(this,t)];case 3:return a.sent(),[4,ih(this.Qo.syncEngine)];case 4:return a.sent(),[4,kr(this.Qo.remoteStore)];case 5:return a.sent(),[4,this.persistence.He(function(){return s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(s.localStore),Promise.resolve()})];case 6:return a.sent(),[2]}})})},e.prototype.Ko=function(t){return _v(this.persistence,new yv,t.initialUser,this.R)},e.prototype.Uo=function(t){return new VC(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.qo=function(t){var s=Fl(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),a=void 0!==this.cacheSizeBytes?on.withCacheSize(this.cacheSizeBytes):on.DEFAULT;return new GC(this.synchronizeTabs,s,t.clientId,a,t.asyncQueue,Mv(),Ya(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new Av},e}(Qv),$T=function(i){function e(t,s){var a=this;return(a=i.call(this,t,s,!1)||this).Qo=t,a.cacheSizeBytes=s,a.synchronizeTabs=!0,a}return(0,S.ZT)(e,i),e.prototype.initialize=function(t){return(0,S.mG)(this,void 0,void 0,function(){var s,a=this;return(0,S.Jh)(this,function(c){switch(c.label){case 0:return[4,i.prototype.initialize.call(this,t)];case 1:return c.sent(),s=this.Qo.syncEngine,this.sharedClientState instanceof Ul?(this.sharedClientState.syncEngine={ui:ZT.bind(null,s),ai:QT.bind(null,s),hi:WT.bind(null,s),fn:JT.bind(null,s),ci:zT.bind(null,s)},[4,this.sharedClientState.start()]):[3,3];case 2:c.sent(),c.label=3;case 3:return[4,this.persistence.He(function(d){return(0,S.mG)(a,void 0,void 0,function(){return(0,S.Jh)(this,function(p){switch(p.label){case 0:return[4,KT(this.Qo.syncEngine,d)];case 1:return p.sent(),this.gcScheduler&&(d&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):d||this.gcScheduler.stop()),[2]}})})})];case 4:return c.sent(),[2]}})})},e.prototype.Bo=function(t){var s=Mv();if(!Ul.yt(s))throw new R(A.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var a=Fl(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Ul(s,t.asyncQueue,a,t.clientId,t.initialUser)},e}(Wv),rh=function(){function i(){}return i.prototype.initialize=function(e,t){return(0,S.mG)(this,void 0,void 0,function(){var s=this;return(0,S.Jh)(this,function(a){switch(a.label){case 0:return this.localStore?[3,2]:(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(c){return zv(s.syncEngine,c,1)},this.remoteStore.remoteSyncer.handleCredentialChange=YT.bind(null,this.syncEngine),[4,zl(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:a.sent(),a.label=2;case 2:return[2]}})})},i.prototype.createEventManager=function(e){return new DT},i.prototype.createDatastore=function(e){var s=Yo(e.databaseInfo.databaseId),a=new dT(e.databaseInfo);return new mT(e.credentials,a,s)},i.prototype.createRemoteStore=function(e){var t,s,a,c,d,p=this;return t=this.localStore,s=this.datastore,a=e.asyncQueue,c=function(m){return zv(p.syncEngine,m,0)},d=xv.yt()?new xv:new cT,new vT(t,s,a,c,d)},i.prototype.createSyncEngine=function(e,t){return v=t,_=new NT(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions),v&&(_.$o=!0),_;var v,_},i.prototype.terminate=function(){return function(e){return(0,S.mG)(this,void 0,void 0,function(){var t;return(0,S.Jh)(this,function(s){switch(s.label){case 0:return t=V(e),P("RemoteStore","RemoteStore shutting down."),t.Or.add(5),[4,Tr(t)];case 1:return s.sent(),t.Lr.shutdown(),t.Br.set("Unknown"),[2]}})})}(this.remoteStore)},i}(),Za=function(){function i(e){this.observer=e,this.muted=!1}return i.prototype.next=function(e){this.observer.next&&this.jo(this.observer.next,e)},i.prototype.error=function(e){this.observer.error?this.jo(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)},i.prototype.Wo=function(){this.muted=!0},i.prototype.jo=function(e,t){var s=this;this.muted||setTimeout(function(){s.muted||e(t)},0)},i}(),ek=(function(){function i(e,t){var s=this;this.Go=e,this.R=t,this.metadata=new ue,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(a){a&&a.io()?s.metadata.resolve(a.payload.metadata):s.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==a?void 0:a.payload)))},function(a){return s.metadata.reject(a)})}i.prototype.close=function(){return this.Go.cancel()},i.prototype.getMetadata=function(){return(0,S.mG)(this,void 0,void 0,function(){return(0,S.Jh)(this,function(e){return[2,this.metadata.promise]})})},i.prototype.Lo=function(){return(0,S.mG)(this,void 0,void 0,function(){return(0,S.Jh)(this,function(e){switch(e.label){case 0:return[4,this.getMetadata()];case 1:return[2,(e.sent(),this.Ho())]}})})},i.prototype.Ho=function(){return(0,S.mG)(this,void 0,void 0,function(){var e,t,s,a;return(0,S.Jh)(this,function(c){switch(c.label){case 0:return[4,this.Jo()];case 1:return null===(e=c.sent())?[2,null]:(t=this.zo.decode(e),s=Number(t),isNaN(s)&&this.Yo("length string ("+t+") is not valid number"),[4,this.Xo(s)]);case 2:return a=c.sent(),[2,new xT(JSON.parse(a),e.length+s)]}})})},i.prototype.Zo=function(){return this.buffer.findIndex(function(e){return e==="{".charCodeAt(0)})},i.prototype.Jo=function(){return(0,S.mG)(this,void 0,void 0,function(){var e,t;return(0,S.Jh)(this,function(s){switch(s.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(s.sent())return[3,3];s.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((e=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),t=this.buffer.slice(0,e),[2,(this.buffer=this.buffer.slice(e),t)])}})})},i.prototype.Xo=function(e){return(0,S.mG)(this,void 0,void 0,function(){var t;return(0,S.Jh)(this,function(s){switch(s.label){case 0:return this.buffer.length<e?[4,this.tc()]:[3,3];case 1:s.sent()&&this.Yo("Reached the end of bundle when more is expected."),s.label=2;case 2:return[3,0];case 3:return t=this.zo.decode(this.buffer.slice(0,e)),[2,(this.buffer=this.buffer.slice(e),t)]}})})},i.prototype.Yo=function(e){throw this.Go.cancel(),new Error("Invalid bundle format: "+e)},i.prototype.tc=function(){return(0,S.mG)(this,void 0,void 0,function(){var e,t;return(0,S.Jh)(this,function(s){switch(s.label){case 0:return[4,this.Go.read()];case 1:return(e=s.sent()).done||((t=new Uint8Array(this.buffer.length+e.value.length)).set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t),[2,e.done]}})})}}(),function(){function i(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return i.prototype.lookup=function(e){return(0,S.mG)(this,void 0,void 0,function(){var t,s=this;return(0,S.Jh)(this,function(a){switch(a.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new R(A.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(c,d){return(0,S.mG)(this,void 0,void 0,function(){var p,m,v,_,b,I;return(0,S.Jh)(this,function(k){switch(k.label){case 0:return p=V(c),m=Bo(p.R)+"/documents",v={documents:d.map(function(T){return Vo(p.R,T)})},[4,p.$i("BatchGetDocuments",m,v)];case 1:return _=k.sent(),b=new Map,_.forEach(function(T){var M,F,E=(M=p.R,"found"in(F=T)?function(Y,z){$(!!z.found);var ot=nn(Y,z.found.name),lt=Zt(z.found.updateTime),L=new Ae({mapValue:{fields:z.found.fields}});return te.newFoundDocument(ot,lt,L)}(M,F):"missing"in F?function(Y,z){$(!!z.missing),$(!!z.readTime);var ot=nn(Y,z.missing),lt=Zt(z.readTime);return te.newNoDocument(ot,lt)}(M,F):G());b.set(E.key.toString(),E)}),I=[],[2,(d.forEach(function(T){var E=b.get(T.toString());$(!!E),I.push(E)}),I)]}})})}(this.datastore,e)];case 1:return[2,((t=a.sent()).forEach(function(c){return s.recordVersion(c)}),t)]}})})},i.prototype.set=function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())},i.prototype.update=function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastWriteError=s}this.writtenDocs.add(e.toString())},i.prototype.delete=function(e){this.write(new Fo(e,this.precondition(e))),this.writtenDocs.add(e.toString())},i.prototype.commit=function(){return(0,S.mG)(this,void 0,void 0,function(){var e,t=this;return(0,S.Jh)(this,function(s){switch(s.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return e=this.readVersions,this.mutations.forEach(function(a){e.delete(a.key.toString())}),e.forEach(function(a,c){var d=H.fromPath(c);t.mutations.push(new Il(d,t.precondition(d)))}),[4,function(a,c){return(0,S.mG)(this,void 0,void 0,function(){var d,p,m;return(0,S.Jh)(this,function(v){switch(v.label){case 0:return d=V(a),p=Bo(d.R)+"/documents",m={writes:c.map(function(_){return Pa(d.R,_)})},[4,d.Ni("Commit",p,m)];case 1:return v.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return s.sent(),this.committed=!0,[2]}})})},i.prototype.recordVersion=function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw G();t=st.min()}var s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new R(A.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)},i.prototype.precondition=function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?oe.updateTime(t):oe.none()},i.prototype.preconditionForUpdate=function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(st.min()))throw new R(A.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return oe.updateTime(t)}return oe.exists(!0)},i.prototype.write=function(e){this.ensureCommitNotCalled(),this.mutations.push(e)},i.prototype.ensureCommitNotCalled=function(){},i}()),nk=function(){function i(e,t,s,a){this.asyncQueue=e,this.datastore=t,this.updateFunction=s,this.deferred=a,this.ec=5,this.Zi=new jl(this.asyncQueue,"transaction_retry")}return i.prototype.run=function(){this.ec-=1,this.nc()},i.prototype.nc=function(){var e=this;this.Zi.ji(function(){return(0,S.mG)(e,void 0,void 0,function(){var t,s,a=this;return(0,S.Jh)(this,function(c){return t=new ek(this.datastore),(s=this.sc(t))&&s.then(function(d){a.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){a.deferred.resolve(d)}).catch(function(p){a.ic(p)})})}).catch(function(d){a.ic(d)}),[2]})})})},i.prototype.sc=function(e){try{var t=this.updateFunction(e);return!fi(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(s){return this.deferred.reject(s),null}},i.prototype.ic=function(e){var t=this;this.ec>0&&this.rc(e)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return t.nc(),Promise.resolve()})):this.deferred.reject(e)},i.prototype.rc=function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!kg(t)}return!1},i}(),ik=function(){function i(e,t,s){var a=this;this.credentials=e,this.asyncQueue=t,this.databaseInfo=s,this.user=ne.UNAUTHENTICATED,this.clientId=Km.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(t,function(c){return(0,S.mG)(a,void 0,void 0,function(){return(0,S.Jh)(this,function(d){switch(d.label){case 0:return P("FirestoreClient","Received user=",c.uid),[4,this.credentialListener(c)];case 1:return d.sent(),this.user=c,[2]}})})})}return i.prototype.getConfiguration=function(){return(0,S.mG)(this,void 0,void 0,function(){return(0,S.Jh)(this,function(e){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]})})},i.prototype.setCredentialChangeListener=function(e){this.credentialListener=e},i.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new R(A.FAILED_PRECONDITION,"The client has already been terminated.")},i.prototype.terminate=function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new ue;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return(0,S.mG)(e,void 0,void 0,function(){var s,a;return(0,S.Jh)(this,function(c){switch(c.label){case 0:return c.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:c.sent(),c.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:c.sent(),c.label=4;case 4:return this.credentials.removeChangeListener(),t.resolve(),[3,6];case 5:return s=c.sent(),a=Er(s,"Failed to shutdown persistence"),t.reject(a),[3,6];case 6:return[2]}})})}),t.promise},i}();function $v(i,e){return(0,S.mG)(this,void 0,void 0,function(){var t,s,a=this;return(0,S.Jh)(this,function(c){switch(c.label){case 0:return i.asyncQueue.verifyOperationInProgress(),P("FirestoreClient","Initializing OfflineComponentProvider"),[4,i.getConfiguration()];case 1:return t=c.sent(),[4,e.initialize(t)];case 2:return c.sent(),s=t.initialUser,i.setCredentialChangeListener(function(d){return(0,S.mG)(a,void 0,void 0,function(){return(0,S.Jh)(this,function(p){switch(p.label){case 0:return s.isEqual(d)?[3,2]:[4,wv(e.localStore,d)];case 1:p.sent(),s=d,p.label=2;case 2:return[2]}})})}),e.persistence.setDatabaseDeletedListener(function(){return i.terminate()}),i.offlineComponents=e,[2]}})})}function ty(i,e){return(0,S.mG)(this,void 0,void 0,function(){var t,s;return(0,S.Jh)(this,function(a){switch(a.label){case 0:return i.asyncQueue.verifyOperationInProgress(),[4,oh(i)];case 1:return t=a.sent(),P("FirestoreClient","Initializing OnlineComponentProvider"),[4,i.getConfiguration()];case 2:return s=a.sent(),[4,e.initialize(t,s)];case 3:return a.sent(),i.setCredentialChangeListener(function(c){return function(d,p){return(0,S.mG)(this,void 0,void 0,function(){var m,v;return(0,S.Jh)(this,function(_){switch(_.label){case 0:return(m=V(d)).asyncQueue.verifyOperationInProgress(),P("RemoteStore","RemoteStore received new credentials"),v=Yn(m),m.Or.add(3),[4,Tr(m)];case 1:return _.sent(),v&&m.Br.set("Unknown"),[4,m.remoteSyncer.handleCredentialChange(p)];case 2:return _.sent(),m.Or.delete(3),[4,Go(m)];case 3:return _.sent(),[2]}})})}(e.remoteStore,c)}),i.onlineComponents=e,[2]}})})}function oh(i){return(0,S.mG)(this,void 0,void 0,function(){return(0,S.Jh)(this,function(e){switch(e.label){case 0:return i.offlineComponents?[3,2]:(P("FirestoreClient","Using default OfflineComponentProvider"),[4,$v(i,new Qv)]);case 1:e.sent(),e.label=2;case 2:return[2,i.offlineComponents]}})})}function Ka(i){return(0,S.mG)(this,void 0,void 0,function(){return(0,S.Jh)(this,function(e){switch(e.label){case 0:return i.onlineComponents?[3,2]:(P("FirestoreClient","Using default OnlineComponentProvider"),[4,ty(i,new rh)]);case 1:e.sent(),e.label=2;case 2:return[2,i.onlineComponents]}})})}function ey(i){return oh(i).then(function(e){return e.persistence})}function sh(i){return oh(i).then(function(e){return e.localStore})}function ny(i){return Ka(i).then(function(e){return e.remoteStore})}function ah(i){return Ka(i).then(function(e){return e.syncEngine})}function xr(i){return(0,S.mG)(this,void 0,void 0,function(){var e,t;return(0,S.Jh)(this,function(s){switch(s.label){case 0:return[4,Ka(i)];case 1:return e=s.sent(),[2,((t=e.eventManager).onListen=PT.bind(null,e.syncEngine),t.onUnlisten=FT.bind(null,e.syncEngine),t)]}})})}function iy(i,e,t){var s=this;void 0===t&&(t={});var a=new ue;return i.asyncQueue.enqueueAndForget(function(){return(0,S.mG)(s,void 0,void 0,function(){var c;return(0,S.Jh)(this,function(d){switch(d.label){case 0:return c=function(p,m,v,_,b){var I=new Za({next:function(T){m.enqueueAndForget(function(){return Kl(p,k)});var E=T.docs.has(v);!E&&T.fromCache?b.reject(new R(A.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&T.fromCache&&_&&"server"===_.source?b.reject(new R(A.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):b.resolve(T)},error:function(T){return b.reject(T)}}),k=new Ql(ur(v.path),I,{includeMetadataChanges:!0,so:!0});return Zl(p,k)},[4,xr(i)];case 1:return[2,c.apply(void 0,[d.sent(),i.asyncQueue,e,t,a])]}})})}),a.promise}function ry(i,e,t){var s=this;void 0===t&&(t={});var a=new ue;return i.asyncQueue.enqueueAndForget(function(){return(0,S.mG)(s,void 0,void 0,function(){var c;return(0,S.Jh)(this,function(d){switch(d.label){case 0:return c=function(p,m,v,_,b){var I=new Za({next:function(T){m.enqueueAndForget(function(){return Kl(p,k)}),T.fromCache&&"server"===_.source?b.reject(new R(A.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):b.resolve(T)},error:function(T){return b.reject(T)}}),k=new Ql(v,I,{includeMetadataChanges:!0,so:!0});return Zl(p,k)},[4,xr(i)];case 1:return[2,c.apply(void 0,[d.sent(),i.asyncQueue,e,t,a])]}})})}),a.promise}var rk=function(i,e,t,s,a,c,d,p){this.databaseId=i,this.appId=e,this.persistenceKey=t,this.host=s,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.useFetchStreams=p},Ja=function(){function i(e,t){this.projectId=e,this.database=t||"(default)"}return Object.defineProperty(i.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),i.prototype.isEqual=function(e){return e instanceof i&&e.projectId===this.projectId&&e.database===this.database},i}(),oy=new Map,sy=function(i,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+i},ay=function(){function i(){this.changeListener=null}return i.prototype.getToken=function(){return Promise.resolve(null)},i.prototype.invalidateToken=function(){},i.prototype.setChangeListener=function(e,t){this.changeListener=t,e.enqueueRetryable(function(){return t(ne.UNAUTHENTICATED)})},i.prototype.removeChangeListener=function(){this.changeListener=null},i}(),ok=function(){function i(e){this.token=e,this.changeListener=null}return i.prototype.getToken=function(){return Promise.resolve(this.token)},i.prototype.invalidateToken=function(){},i.prototype.setChangeListener=function(e,t){var s=this;this.changeListener=t,e.enqueueRetryable(function(){return t(s.token.user)})},i.prototype.removeChangeListener=function(){this.changeListener=null},i}(),sk=function(){function i(e){var t=this;this.currentUser=ne.UNAUTHENTICATED,this.oc=new ue,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){t.cc++,t.currentUser=t.ac(),t.oc.resolve(),t.changeListener&&t.asyncQueue.enqueueRetryable(function(){return t.changeListener(t.currentUser)})};var s=function(a){P("FirebaseCredentialsProvider","Auth detected"),t.auth=a,t.auth.addAuthTokenListener(t.uc)};e.onInit(function(a){return s(a)}),setTimeout(function(){if(!t.auth){var a=e.getImmediate({optional:!0});a?s(a):(P("FirebaseCredentialsProvider","Auth not yet detected"),t.oc.resolve())}},0)}return i.prototype.getToken=function(){var e=this,t=this.cc,s=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(s).then(function(a){return e.cc!==t?(P("FirebaseCredentialsProvider","getToken aborted due to token change."),e.getToken()):a?($("string"==typeof a.accessToken),new sy(a.accessToken,e.currentUser)):null}):Promise.resolve(null)},i.prototype.invalidateToken=function(){this.forceRefresh=!0},i.prototype.setChangeListener=function(e,t){var s=this;this.asyncQueue=e,this.asyncQueue.enqueueRetryable(function(){return(0,S.mG)(s,void 0,void 0,function(){return(0,S.Jh)(this,function(a){switch(a.label){case 0:return[4,this.oc.promise];case 1:return a.sent(),[4,t(this.currentUser)];case 2:return a.sent(),this.changeListener=t,[2]}})})})},i.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},i.prototype.ac=function(){var e=this.auth&&this.auth.getUid();return $(null===e||"string"==typeof e),new ne(e)},i}(),ak=function(){function i(e,t,s){this.hc=e,this.lc=t,this.fc=s,this.type="FirstParty",this.user=ne.FIRST_PARTY}return Object.defineProperty(i.prototype,"authHeaders",{get:function(){var e={"X-Goog-AuthUser":this.lc},t=this.hc.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),this.fc&&(e["X-Goog-Iam-Authorization-Token"]=this.fc),e},enumerable:!1,configurable:!0}),i}(),uk=function(){function i(e,t,s){this.hc=e,this.lc=t,this.fc=s}return i.prototype.getToken=function(){return Promise.resolve(new ak(this.hc,this.lc,this.fc))},i.prototype.setChangeListener=function(e,t){e.enqueueRetryable(function(){return t(ne.FIRST_PARTY)})},i.prototype.removeChangeListener=function(){},i.prototype.invalidateToken=function(){},i}();function uh(i,e,t){if(!t)throw new R(A.INVALID_ARGUMENT,"Function "+i+"() cannot be called with an empty "+e+".")}function ch(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new R(A.INVALID_ARGUMENT,"Invalid options passed to function "+i+'(): You cannot specify both "merge" and "mergeFields".');return e}function uy(i,e,t,s){if(!0===e&&!0===s)throw new R(A.INVALID_ARGUMENT,i+" and "+t+" cannot be used together.")}function cy(i){if(!H.isDocumentKey(i))throw new R(A.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+i+" has "+i.length+".")}function ly(i){if(H.isDocumentKey(i))throw new R(A.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+i+" has "+i.length+".")}function Qa(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=i.substring(0,20)+"..."),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";var e=function(t){if(t.constructor){var s=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(s&&s.length>1)return s[1]}return null}(i);return e?"a custom "+e+" object":"an object"}return"function"==typeof i?"a function":G()}function pt(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new R(A.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var t=Qa(i);throw new R(A.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+t)}return i}function hy(i,e){if(e<=0)throw new R(A.INVALID_ARGUMENT,"Function "+i+"() requires a positive number, but it was: "+e+".")}var dy=function(){function i(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new R(A.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new R(A.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,uy("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}return i.prototype.isEqual=function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams},i}(),zo=function(){function i(e,t){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dy({}),this._settingsFrozen=!1,e instanceof Ja?(this._databaseId=e,this._credentials=new ay):(this._app=e,this._databaseId=function(s){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new R(A.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ja(s.options.projectId)}(e),this._credentials=new sk(t))}return Object.defineProperty(i.prototype,"app",{get:function(){if(!this._app)throw new R(A.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),i.prototype._setSettings=function(e){if(this._settingsFrozen)throw new R(A.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dy(e),void 0!==e.credentials&&(this._credentials=function(t){if(!t)return new ay;switch(t.type){case"gapi":var s=t.client;return $(!("object"!=typeof s||null===s||!s.auth||!s.auth.getAuthHeaderValueForFirstParty)),new uk(s,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new R(A.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},i.prototype._getSettings=function(){return this._settings},i.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},i.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},i.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},i.prototype._terminate=function(){return(t=oy.get(this))&&(P("ComponentProvider","Removing Datastore"),oy.delete(this),t.terminate()),Promise.resolve();var t},i}(),Et=function(){function i(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}return Object.defineProperty(i.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"parent",{get:function(){return new Hn(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),i.prototype.withConverter=function(e){return new i(this.firestore,e,this._key)},i}(),we=function(){function i(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}return i.prototype.withConverter=function(e){return new i(this.firestore,e,this._query)},i}(),Hn=function(i){function e(t,s,a){var c=this;return(c=i.call(this,t,s,ur(a))||this)._path=a,c.type="collection",c}return(0,S.ZT)(e,i),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new Et(this.firestore,null,new H(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(we);function fy(i,e){for(var t,s=[],a=2;a<arguments.length;a++)s[a-2]=arguments[a];if(i=(0,gt.m9)(i),uh("collection","path",e),i instanceof zo)return ly(t=ft.fromString.apply(ft,(0,S.ev)([e],s))),new Hn(i,null,t);if(!(i instanceof Et||i instanceof Hn))throw new R(A.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return ly(t=ft.fromString.apply(ft,(0,S.ev)([i.path],s)).child(ft.fromString(e))),new Hn(i.firestore,null,t)}function Wa(i,e){for(var t,s=[],a=2;a<arguments.length;a++)s[a-2]=arguments[a];if(i=(0,gt.m9)(i),1===arguments.length&&(e=Km.u()),uh("doc","path",e),i instanceof zo)return cy(t=ft.fromString.apply(ft,(0,S.ev)([e],s))),new Et(i,null,new H(t));if(!(i instanceof Et||i instanceof Hn))throw new R(A.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return cy(t=i._path.child(ft.fromString.apply(ft,(0,S.ev)([e],s)))),new Et(i.firestore,i instanceof Hn?i.converter:null,new H(t))}function py(i,e){return i=(0,gt.m9)(i),e=(0,gt.m9)(e),(i instanceof Et||i instanceof Hn)&&(e instanceof Et||e instanceof Hn)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function my(i,e){return i=(0,gt.m9)(i),e=(0,gt.m9)(e),i instanceof we&&e instanceof we&&i.firestore===e.firestore&&Oo(i._query,e._query)&&i.converter===e.converter}var ck=function(){function i(){var e=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new jl(this,"async_queue_retry"),this.Ic=function(){var s=Ya();s&&P("AsyncQueue","Visibility state changed to "+s.visibilityState),e.Zi.Gi()};var t=Ya();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(i.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),i.prototype.enqueueAndForget=function(e){this.enqueue(e)},i.prototype.enqueueAndForgetEvenWhileRestricted=function(e){this.Ac(),this.Rc(e)},i.prototype.enterRestrictedMode=function(e){if(!this._c){this._c=!0,this.Ec=e||!1;var t=Ya();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ic)}},i.prototype.enqueue=function(e){var t=this;if(this.Ac(),this._c)return new Promise(function(){});var s=new ue;return this.Rc(function(){return t._c&&t.Ec?Promise.resolve():(e().then(s.resolve,s.reject),s.promise)}).then(function(){return s.promise})},i.prototype.enqueueRetryable=function(e){var t=this;this.enqueueAndForget(function(){return t.wc.push(e),t.bc()})},i.prototype.bc=function(){return(0,S.mG)(this,void 0,void 0,function(){var e,t=this;return(0,S.Jh)(this,function(s){switch(s.label){case 0:if(0===this.wc.length)return[3,5];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return s.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!yi(e=s.sent()))throw e;return P("AsyncQueue","Operation failed with retryable error: "+e),[3,4];case 4:this.wc.length>0&&this.Zi.ji(function(){return t.bc()}),s.label=5;case 5:return[2]}})})},i.prototype.Rc=function(e){var t=this,s=this.dc.then(function(){return t.gc=!0,e().catch(function(a){throw t.yc=a,t.gc=!1,Vt("INTERNAL UNHANDLED ERROR: ",(d=(c=a).message||"",c.stack&&(d=c.stack.includes(c.message)?c.stack:c.message+"\n"+c.stack),d)),a;var c,d}).then(function(a){return t.gc=!1,a})});return this.dc=s,s},i.prototype.enqueueAfterDelay=function(e,t,s){var a=this;this.Ac(),this.Tc.indexOf(e)>-1&&(t=0);var c=TT.createAndSchedule(this,e,t,s,function(d){return a.vc(d)});return this.mc.push(c),c},i.prototype.Ac=function(){this.yc&&G()},i.prototype.verifyOperationInProgress=function(){},i.prototype.Pc=function(){return(0,S.mG)(this,void 0,void 0,function(){var e;return(0,S.Jh)(this,function(t){switch(t.label){case 0:return[4,e=this.dc];case 1:t.sent(),t.label=2;case 2:if(e!==this.dc)return[3,0];t.label=3;case 3:return[2]}})})},i.prototype.Vc=function(e){for(var t=0,s=this.mc;t<s.length;t++)if(s[t].timerId===e)return!0;return!1},i.prototype.Sc=function(e){var t=this;return this.Pc().then(function(){t.mc.sort(function(d,p){return d.targetTimeMs-p.targetTimeMs});for(var s=0,a=t.mc;s<a.length;s++){var c=a[s];if(c.skipDelay(),"all"!==e&&c.timerId===e)break}return t.Pc()})},i.prototype.Dc=function(e){this.Tc.push(e)},i.prototype.vc=function(e){var t=this.mc.indexOf(e);this.mc.splice(t,1)},i}();function Mr(i){return function(e,t){if("object"!=typeof e||null===e)return!1;for(var s=e,a=0,c=["next","error","complete"];a<c.length;a++){var d=c[a];if(d in s&&"function"==typeof s[d])return!0}return!1}(i)}!function(){function i(){this._progressObserver={},this._taskCompletionResolver=new ue,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}i.prototype.onProgress=function(e,t,s){this._progressObserver={next:e,error:t,complete:s}},i.prototype.catch=function(e){return this._taskCompletionResolver.promise.catch(e)},i.prototype.then=function(e,t){return this._taskCompletionResolver.promise.then(e,t)},i.prototype._completeWith=function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)},i.prototype._failWith=function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)},i.prototype._updateProgress=function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}();var Rt=function(i){function e(t,s){var a=this;return(a=i.call(this,t,s)||this).type="firestore",a._queue=new ck,a._persistenceKey="name"in t?t.name:"[DEFAULT]",a}return(0,S.ZT)(e,i),e.prototype._terminate=function(){return this._firestoreClient||gy(this),this._firestoreClient.terminate()},e}(zo);function Jt(i){return i._firestoreClient||gy(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function gy(i){var e,c,p,t=i._freezeSettings(),s=(c=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new rk(i._databaseId,c,i._persistenceKey,(p=t).host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,p.useFetchStreams));i._firestoreClient=new ik(i._credentials,i._queue,s)}function vy(i,e,t){var s=this,a=new ue;return i.asyncQueue.enqueue(function(){return(0,S.mG)(s,void 0,void 0,function(){var c;return(0,S.Jh)(this,function(d){switch(d.label){case 0:return d.trys.push([0,3,,4]),[4,$v(i,t)];case 1:return d.sent(),[4,ty(i,e)];case 2:return d.sent(),a.resolve(),[3,4];case 3:if(!("FirebaseError"===(p=c=d.sent()).name?p.code===A.FAILED_PRECONDITION||p.code===A.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&p instanceof DOMException)||22===p.code||20===p.code||11===p.code))throw c;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+c),a.reject(c),[3,4];case 4:return[2]}var p})})}).then(function(){return a.promise})}function yy(i){if(i._initialized||i._terminated)throw new R(A.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var sn=function(){function i(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var s=0;s<e.length;++s)if(0===e[s].length)throw new R(A.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ze(e)}return i.prototype.isEqual=function(e){return this._internalPath.isEqual(e._internalPath)},i}(),bi=function(){function i(e){this._byteString=e}return i.fromBase64String=function(e){try{return new i(fe.fromBase64String(e))}catch(t){throw new R(A.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}},i.fromUint8Array=function(e){return new i(fe.fromUint8Array(e))},i.prototype.toBase64=function(){return this._byteString.toBase64()},i.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},i.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},i.prototype.isEqual=function(e){return this._byteString.isEqual(e._byteString)},i}(),Si=function(i){this._methodName=i},Xa=function(){function i(e,t){if(!isFinite(e)||e<-90||e>90)throw new R(A.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new R(A.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}return Object.defineProperty(i.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),i.prototype.isEqual=function(e){return this._lat===e._lat&&this._long===e._long},i.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},i.prototype._compareTo=function(e){return ct(this._lat,e._lat)||ct(this._long,e._long)},i}(),dk=/^__.*__$/,fk=function(){function i(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}return i.prototype.toMutation=function(e,t){return null!==this.fieldMask?new Ln(e,this.data,this.fieldMask,t,this.fieldTransforms):new Po(e,this.data,t,this.fieldTransforms)},i}(),_y=function(){function i(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}return i.prototype.toMutation=function(e,t){return new Ln(e,this.data,this.fieldMask,t,this.fieldTransforms)},i}();function wy(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw G()}}var by=function(){function i(e,t,s,a,c,d){this.settings=e,this.databaseId=t,this.R=s,this.ignoreUndefinedProperties=a,void 0===c&&this.Cc(),this.fieldTransforms=c||[],this.fieldMask=d||[]}return Object.defineProperty(i.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),i.prototype.xc=function(e){return new i(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},i.prototype.kc=function(e){var t,s=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.xc({path:s,Fc:!1});return a.$c(e),a},i.prototype.Oc=function(e){var t,s=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.xc({path:s,Fc:!1});return a.Cc(),a},i.prototype.Mc=function(e){return this.xc({path:void 0,Fc:!0})},i.prototype.Lc=function(e){return tu(e,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},i.prototype.contains=function(e){return void 0!==this.fieldMask.find(function(t){return e.isPrefixOf(t)})||void 0!==this.fieldTransforms.find(function(t){return e.isPrefixOf(t.field)})},i.prototype.Cc=function(){if(this.path)for(var e=0;e<this.path.length;e++)this.$c(this.path.get(e))},i.prototype.$c=function(e){if(0===e.length)throw this.Lc("Document fields must not be empty");if(wy(this.Nc)&&dk.test(e))throw this.Lc('Document fields cannot begin and end with "__"')},i}(),pk=function(){function i(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.R=s||Yo(e)}return i.prototype.Uc=function(e,t,s,a){return void 0===a&&(a=!1),new by({Nc:e,methodName:t,qc:s,path:ze.emptyPath(),Fc:!1,Bc:a},this.databaseId,this.R,this.ignoreUndefinedProperties)},i}();function Ii(i){var e=i._freezeSettings(),t=Yo(i._databaseId);return new pk(i._databaseId,!!e.ignoreUndefinedProperties,t)}function $a(i,e,t,s,a,c){void 0===c&&(c={});var d=i.Uc(c.merge||c.mergeFields?2:0,e,t,a);fh("Data must be an object, but it was:",d,s);var p,m,v=Cy(s,d);if(c.merge)p=new rr(d.fieldMask),m=d.fieldTransforms;else if(c.mergeFields){for(var _=[],b=0,I=c.mergeFields;b<I.length;b++){var k=ph(e,I[b],t);if(!d.contains(k))throw new R(A.INVALID_ARGUMENT,"Field '"+k+"' is specified in your field mask but missing from your input data.");ky(_,k)||_.push(k)}p=new rr(_),m=d.fieldTransforms.filter(function(T){return p.covers(T.field)})}else p=null,m=d.fieldTransforms;return new fk(new Ae(v),p,m)}var lh=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return(0,S.ZT)(e,i),e.prototype._toFieldTransform=function(t){if(2!==t.Nc)throw t.Lc(1===t.Nc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Si);function Sy(i,e,t){return new by({Nc:3,qc:e.settings.qc,methodName:i._methodName,Fc:t},e.databaseId,e.R,e.ignoreUndefinedProperties)}var mk=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return(0,S.ZT)(e,i),e.prototype._toFieldTransform=function(t){return new No(t.path,new lr)},e.prototype.isEqual=function(t){return t instanceof e},e}(Si),gk=function(i){function e(t,s){var a=this;return(a=i.call(this,t)||this).Kc=s,a}return(0,S.ZT)(e,i),e.prototype._toFieldTransform=function(t){var s=Sy(this,t,!0),a=this.Kc.map(function(d){return Ci(d,s)}),c=new mi(a);return new No(t.path,c)},e.prototype.isEqual=function(t){return this===t},e}(Si),vk=function(i){function e(t,s){var a=this;return(a=i.call(this,t)||this).Kc=s,a}return(0,S.ZT)(e,i),e.prototype._toFieldTransform=function(t){var s=Sy(this,t,!0),a=this.Kc.map(function(d){return Ci(d,s)}),c=new gi(a);return new No(t.path,c)},e.prototype.isEqual=function(t){return this===t},e}(Si),yk=function(i){function e(t,s){var a=this;return(a=i.call(this,t)||this).Qc=s,a}return(0,S.ZT)(e,i),e.prototype._toFieldTransform=function(t){var s=new hr(t.R,mg(t.R,this.Qc));return new No(t.path,s)},e.prototype.isEqual=function(t){return this===t},e}(Si);function hh(i,e,t,s){var a=i.Uc(1,e,t);fh("Data must be an object, but it was:",a,s);var c=[],d=Ae.empty();di(s,function(m,v){var _=mh(e,m,t);v=(0,gt.m9)(v);var b=a.Oc(_);if(v instanceof lh)c.push(_);else{var I=Ci(v,b);null!=I&&(c.push(_),d.set(_,I))}});var p=new rr(c);return new _y(d,p,a.fieldTransforms)}function dh(i,e,t,s,a,c){var d=i.Uc(1,e,t),p=[ph(e,s,t)],m=[a];if(c.length%2!=0)throw new R(A.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var v=0;v<c.length;v+=2)p.push(ph(e,c[v])),m.push(c[v+1]);for(var _=[],b=Ae.empty(),I=p.length-1;I>=0;--I)if(!ky(_,p[I])){var k=p[I],T=m[I];T=(0,gt.m9)(T);var E=d.Oc(k);if(T instanceof lh)_.push(k);else{var M=Ci(T,E);null!=M&&(_.push(k),b.set(k,M))}}var F=new rr(_);return new _y(b,F,d.fieldTransforms)}function Iy(i,e,t,s){return void 0===s&&(s=!1),Ci(t,i.Uc(s?4:3,e))}function Ci(i,e){if(Ty(i=(0,gt.m9)(i)))return fh("Unsupported field value:",e,i),Cy(i,e);if(i instanceof Si)return function(t,s){if(!wy(s.Nc))throw s.Lc(t._methodName+"() can only be used with update() and set()");if(!s.path)throw s.Lc(t._methodName+"() is not currently supported inside arrays");var a=t._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.Fc&&4!==e.Nc)throw e.Lc("Nested arrays are not supported");return function(t,s){for(var a=[],c=0,d=0,p=t;d<p.length;d++){var m=Ci(p[d],s.Mc(c));null==m&&(m={nullValue:"NULL_VALUE"}),a.push(m),c++}return{arrayValue:{values:a}}}(i,e)}return function(t,s){if(null===(t=(0,gt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return mg(s.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var a=ve.fromDate(t);return{timestampValue:Lo(s.R,a)}}if(t instanceof ve)return a=new ve(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Lo(s.R,a)};if(t instanceof Xa)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof bi)return{bytesValue:Pg(s.R,t._byteString)};if(t instanceof Et){var c=t.firestore._databaseId;if(!c.isEqual(a=s.databaseId))throw s.Lc("Document reference is for database "+c.projectId+"/"+c.database+" but should be for database "+a.projectId+"/"+a.database);return{referenceValue:Dl(t.firestore._databaseId||s.databaseId,t._key.path)}}throw s.Lc("Unsupported field value: "+Qa(t))}(i,e)}function Cy(i,e){var t={};return Wm(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):di(i,function(s,a){var c=Ci(a,e.kc(s));null!=c&&(t[s]=c)}),{mapValue:{fields:t}}}function Ty(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof ve||i instanceof Xa||i instanceof bi||i instanceof Et||i instanceof Si)}function fh(i,e,t){if(!Ty(t)||"object"!=typeof(a=t)||null===a||Object.getPrototypeOf(a)!==Object.prototype&&null!==Object.getPrototypeOf(a)){var s=Qa(t);throw e.Lc("an object"===s?i+" a custom object":i+" "+s)}var a}function ph(i,e,t){if((e=(0,gt.m9)(e))instanceof sn)return e._internalPath;if("string"==typeof e)return mh(i,e);throw tu("Field path arguments must be of type string or FieldPath.",i,!1,void 0,t)}var _k=new RegExp("[~\\*/\\[\\]]");function mh(i,e,t){if(e.search(_k)>=0)throw tu("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",i,!1,void 0,t);try{return(new(sn.bind.apply(sn,(0,S.ev)([void 0],e.split(".")))))._internalPath}catch(s){throw tu("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",i,!1,void 0,t)}}function tu(i,e,t,s,a){var c=s&&!s.isEmpty(),d=void 0!==a,p="Function "+e+"() called with invalid data";t&&(p+=" (via `toFirestore()`)");var m="";return(c||d)&&(m+=" (found",c&&(m+=" in field "+s),d&&(m+=" in document "+a),m+=")"),new R(A.INVALID_ARGUMENT,(p+=". ")+i+m)}function ky(i,e){return i.some(function(t){return t.isEqual(e)})}var Zo=function(){function i(e,t,s,a,c){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=c}return Object.defineProperty(i.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"ref",{get:function(){return new Et(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),i.prototype.exists=function(){return null!==this._document},i.prototype.data=function(){if(this._document){if(this._converter){var e=new wk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}},i.prototype.get=function(e){if(this._document){var t=this._document.data.field(eu("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}},i}(),wk=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return(0,S.ZT)(e,i),e.prototype.data=function(){return i.prototype.data.call(this)},e}(Zo);function eu(i,e){return"string"==typeof e?mh(i,e):e instanceof sn?e._internalPath:e._delegate._internalPath}var Ti=function(){function i(e,t){this.hasPendingWrites=e,this.fromCache=t}return i.prototype.isEqual=function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache},i}(),Sn=function(i){function e(t,s,a,c,d,p){var m=this;return(m=i.call(this,t,s,a,c,p)||this)._firestore=t,m._firestoreImpl=t,m.metadata=d,m}return(0,S.ZT)(e,i),e.prototype.exists=function(){return i.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var s=new Ko(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(s,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,s){if(void 0===s&&(s={}),this._document){var a=this._document.data.field(eu("DocumentSnapshot.get",t));if(null!==a)return this._userDataWriter.convertValue(a,s.serverTimestamps)}},e}(Zo),Ko=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return(0,S.ZT)(e,i),e.prototype.data=function(t){return void 0===t&&(t={}),i.prototype.data.call(this,t)},e}(Sn),zn=function(){function i(e,t,s,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Ti(a.hasPendingWrites,a.fromCache),this.query=s}return Object.defineProperty(i.prototype,"docs",{get:function(){var e=[];return this.forEach(function(t){return e.push(t)}),e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),i.prototype.forEach=function(e,t){var s=this;this._snapshot.docs.forEach(function(a){e.call(t,new Ko(s._firestore,s._userDataWriter,a.key,a,new Ti(s._snapshot.mutatedKeys.has(a.key),s._snapshot.fromCache),s.query.converter))})},i.prototype.docChanges=function(e){void 0===e&&(e={});var t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new R(A.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){var c=0;return s._snapshot.docChanges.map(function(p){return{type:"added",doc:new Ko(s._firestore,s._userDataWriter,p.doc.key,p.doc,new Ti(s._snapshot.mutatedKeys.has(p.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:c++}})}var d=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(function(p){return a||3!==p.type}).map(function(p){var m=new Ko(s._firestore,s._userDataWriter,p.doc.key,p.doc,new Ti(s._snapshot.mutatedKeys.has(p.doc.key),s._snapshot.fromCache),s.query.converter),v=-1,_=-1;return 0!==p.type&&(v=d.indexOf(p.doc.key),d=d.delete(p.doc.key)),1!==p.type&&(_=(d=d.add(p.doc)).indexOf(p.doc.key)),{type:bk(p.type),doc:m,oldIndex:v,newIndex:_}})}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges},i}();function bk(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return G()}}function Dy(i,e){return i instanceof Sn&&e instanceof Sn?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof zn&&e instanceof zn&&i._firestore===e._firestore&&my(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}function Ey(i){if(Ea(i)&&0===i.explicitOrderBy.length)throw new R(A.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Jo=function(){};function Zn(i){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];for(var s=0,a=e;s<a.length;s++){var c=a[s];i=c._apply(i)}return i}var Sk=function(i){function e(t,s,a){var c=this;return(c=i.call(this)||this).jc=t,c.Wc=s,c.Gc=a,c.type="where",c}return(0,S.ZT)(e,i),e.prototype._apply=function(t){var c,p,s=Ii(t.firestore),a=function(c,d,p,m,v,_,b){var I;if(v.isKeyField()){if("array-contains"===_||"array-contains-any"===_)throw new R(A.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+_+"' queries on FieldPath.documentId().");if("in"===_||"not-in"===_){Ny(b,_);for(var k=[],T=0,E=b;T<E.length;T++)k.push(Ry(m,c,E[T]));I={arrayValue:{values:k}}}else I=Ry(m,c,b)}else"in"!==_&&"not-in"!==_&&"array-contains-any"!==_||Ny(b,_),I=Iy(p,"where",b,"in"===_||"not-in"===_);var F=xe.create(v,_,I);return function(Y,z){if(z.g()){var ot=_l(Y);if(null!==ot&&!ot.isEqual(z.field))throw new R(A.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+ot.toString()+"' and '"+z.field.toString()+"'");var lt=yl(Y);null!==lt&&Py(0,z.field,lt)}var L=function(Tt,cs){for(var tt=0,Nr=Tt.filters;tt<Nr.length;tt++){var D=Nr[tt];if(cs.indexOf(D.op)>=0)return D.op}return null}(Y,function(Tt){switch(Tt){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(z.op));if(null!==L)throw new R(A.INVALID_ARGUMENT,L===z.op?"Invalid query. You cannot use more than one '"+z.op.toString()+"' filter.":"Invalid query. You cannot use '"+z.op.toString()+"' filters with '"+L.toString()+"' filters.")}(c,F),F}(t._query,0,s,t.firestore._databaseId,this.jc,this.Wc,this.Gc);return new we(t.firestore,t.converter,(p=(c=t._query).filters.concat([a]),new yn(c.path,c.collectionGroup,c.explicitOrderBy.slice(),p,c.limit,c.limitType,c.startAt,c.endAt)))},e}(Jo),Ik=function(i){function e(t,s){var a=this;return(a=i.call(this)||this).jc=t,a.zc=s,a.type="orderBy",a}return(0,S.ZT)(e,i),e.prototype._apply=function(t){var a,d,s=function(a,c,d){if(null!==a.startAt)throw new R(A.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==a.endAt)throw new R(A.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var p=new ar(c,d);return function(m,v){if(null===yl(m)){var _=_l(m);null!==_&&Py(0,_,v.field)}}(a,p),p}(t._query,this.jc,this.zc);return new we(t.firestore,t.converter,(d=(a=t._query).explicitOrderBy.concat([s]),new yn(a.path,a.collectionGroup,d,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)))},e}(Jo),Ay=function(i){function e(t,s,a){var c=this;return(c=i.call(this)||this).type=t,c.Hc=s,c.Jc=a,c}return(0,S.ZT)(e,i),e.prototype._apply=function(t){return new we(t.firestore,t.converter,lg(t._query,this.Hc,this.Jc))},e}(Jo),xy=function(i){function e(t,s,a){var c=this;return(c=i.call(this)||this).type=t,c.Yc=s,c.Xc=a,c}return(0,S.ZT)(e,i),e.prototype._apply=function(t){var a,c,s=Oy(t,this.type,this.Yc,this.Xc);return new we(t.firestore,t.converter,(c=s,new yn((a=t._query).path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,c,a.endAt)))},e}(Jo),My=function(i){function e(t,s,a){var c=this;return(c=i.call(this)||this).type=t,c.Yc=s,c.Xc=a,c}return(0,S.ZT)(e,i),e.prototype._apply=function(t){var a,c,s=Oy(t,this.type,this.Yc,this.Xc);return new we(t.firestore,t.converter,(c=s,new yn((a=t._query).path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,a.startAt,c)))},e}(Jo);function Oy(i,e,t,s){if(t[0]=(0,gt.m9)(t[0]),t[0]instanceof Zo)return function(c,d,p,m,v){if(!m)throw new R(A.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+p+"().");for(var _=[],b=0,I=cr(c);b<I.length;b++){var k=I[b];if(k.field.isKeyField())_.push(Sa(d,m.key));else{var T=m.data.field(k.field);if(fl(T))throw new R(A.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+k.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===T){var E=k.field.canonicalString();throw new R(A.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+E+"' (used as the orderBy) does not exist.")}_.push(T)}}return new Mo(_,v)}(i._query,i.firestore._databaseId,e,t[0]._document,s);var a=Ii(i.firestore);return function(c,d,p,m,v,_){var b=c.explicitOrderBy;if(v.length>b.length)throw new R(A.INVALID_ARGUMENT,"Too many arguments provided to "+m+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var I=[],k=0;k<v.length;k++){var T=v[k];if(b[k].field.isKeyField()){if("string"!=typeof T)throw new R(A.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+m+"(), but got a "+typeof T);if(!wl(c)&&-1!==T.indexOf("/"))throw new R(A.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+m+"() must be a plain document ID, but '"+T+"' contains a slash.");var E=c.path.child(ft.fromString(T));if(!H.isDocumentKey(E))throw new R(A.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+m+"() must result in a valid document path, but '"+E+"' is not because it contains an odd number of segments.");var M=new H(E);I.push(Sa(d,M))}else{var F=Iy(p,m,T);I.push(F)}}return new Mo(I,_)}(i._query,i.firestore._databaseId,a,e,t,s)}function Ry(i,e,t){if("string"==typeof(t=(0,gt.m9)(t))){if(""===t)throw new R(A.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!wl(e)&&-1!==t.indexOf("/"))throw new R(A.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+t+"' contains a '/' character.");var s=e.path.child(ft.fromString(t));if(!H.isDocumentKey(s))throw new R(A.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+s+"' is not because it has an odd number of segments ("+s.length+").");return Sa(i,new H(s))}if(t instanceof Et)return Sa(i,t._key);throw new R(A.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Qa(t)+".")}function Ny(i,e){if(!Array.isArray(i)||0===i.length)throw new R(A.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(i.length>10)throw new R(A.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Py(i,e,t){if(!t.isEqual(e))throw new R(A.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+t.toString()+"' instead.")}var gh=function(){function i(){}return i.prototype.convertValue=function(e,t){switch(void 0===t&&(t="none"),pi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Bt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(or(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw G()}},i.prototype.convertObject=function(e,t){var s=this,a={};return di(e.fields,function(c,d){a[c]=s.convertValue(d,t)}),a},i.prototype.convertGeoPoint=function(e){return new Xa(Bt(e.latitude),Bt(e.longitude))},i.prototype.convertArray=function(e,t){var s=this;return(e.values||[]).map(function(a){return s.convertValue(a,t)})},i.prototype.convertServerTimestamp=function(e,t){switch(t){case"previous":var s=$m(e);return null==s?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Do(e));default:return null}},i.prototype.convertTimestamp=function(e){var t=Fn(e);return new ve(t.seconds,t.nanos)},i.prototype.convertDocumentKey=function(e,t){var s=ft.fromString(e);$(Kg(s));var a=new Ja(s.get(1),s.get(3)),c=new H(s.popFirst(5));return a.isEqual(t)||Vt("Document "+c+" contains a document reference within a different database ("+a.projectId+"/"+a.database+") which is not supported. It will be treated as a reference in the current database ("+t.projectId+"/"+t.database+") instead."),c},i}();function nu(i,e,t){return i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e}var Ck=function(i){function e(t){var s=this;return(s=i.call(this)||this).firestore=t,s}return(0,S.ZT)(e,i),e.prototype.convertBytes=function(t){return new bi(t)},e.prototype.convertReference=function(t){var s=this.convertDocumentKey(t,this.firestore._databaseId);return new Et(this.firestore,null,s)},e}(gh),Tk=function(){function i(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Ii(e)}return i.prototype.set=function(e,t,s){this._verifyNotCommitted();var a=Kn(e,this._firestore),c=nu(a.converter,t,s),d=$a(this._dataReader,"WriteBatch.set",a._key,c,null!==a.converter,s);return this._mutations.push(d.toMutation(a._key,oe.none())),this},i.prototype.update=function(e,t,s){for(var a=[],c=3;c<arguments.length;c++)a[c-3]=arguments[c];this._verifyNotCommitted();var d,p=Kn(e,this._firestore);return d="string"==typeof(t=(0,gt.m9)(t))||t instanceof sn?dh(this._dataReader,"WriteBatch.update",p._key,t,s,a):hh(this._dataReader,"WriteBatch.update",p._key,t),this._mutations.push(d.toMutation(p._key,oe.exists(!0))),this},i.prototype.delete=function(e){this._verifyNotCommitted();var t=Kn(e,this._firestore);return this._mutations=this._mutations.concat(new Fo(t._key,oe.none())),this},i.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},i.prototype._verifyNotCommitted=function(){if(this._committed)throw new R(A.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},i}();function Kn(i,e){if((i=(0,gt.m9)(i)).firestore!==e)throw new R(A.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}var ki=function(i){function e(t){var s=this;return(s=i.call(this)||this).firestore=t,s}return(0,S.ZT)(e,i),e.prototype.convertBytes=function(t){return new bi(t)},e.prototype.convertReference=function(t){var s=this.convertDocumentKey(t,this.firestore._databaseId);return new Et(this.firestore,null,s)},e}(gh);function Fy(i,e,t){for(var s=[],a=3;a<arguments.length;a++)s[a-3]=arguments[a];i=pt(i,Et);var c=pt(i.firestore,Rt),d=Ii(c);return Qo(c,[("string"==typeof(e=(0,gt.m9)(e))||e instanceof sn?dh(d,"updateDoc",i._key,e,t,s):hh(d,"updateDoc",i._key,e)).toMutation(i._key,oe.exists(!0))])}function Ly(i){for(var e,t,s,a=[],c=1;c<arguments.length;c++)a[c-1]=arguments[c];i=(0,gt.m9)(i);var d={includeMetadataChanges:!1},p=0;"object"!=typeof a[p]||Mr(a[p])||(d=a[p],p++);var m,v,_,b={includeMetadataChanges:d.includeMetadataChanges};if(Mr(a[p])){var I=a[p];a[p]=null===(e=I.next)||void 0===e?void 0:e.bind(I),a[p+1]=null===(t=I.error)||void 0===t?void 0:t.bind(I),a[p+2]=null===(s=I.complete)||void 0===s?void 0:s.bind(I)}if(i instanceof Et)v=pt(i.firestore,Rt),_=ur(i._key.path),m={next:function(E){a[p]&&a[p](vh(v,i,E))},error:a[p+1],complete:a[p+2]};else{var k=pt(i,we);v=pt(k.firestore,Rt),_=k._query;var T=new ki(v);m={next:function(E){a[p]&&a[p](new zn(v,T,k,E))},error:a[p+1],complete:a[p+2]},Ey(i._query)}return function(E,M,F,Y){var z=this,ot=new Za(Y),lt=new Ql(M,ot,F);return E.asyncQueue.enqueueAndForget(function(){return(0,S.mG)(z,void 0,void 0,function(){var L;return(0,S.Jh)(this,function(Tt){switch(Tt.label){case 0:return L=Zl,[4,xr(E)];case 1:return[2,L.apply(void 0,[Tt.sent(),lt])]}})})}),function(){ot.Wo(),E.asyncQueue.enqueueAndForget(function(){return(0,S.mG)(z,void 0,void 0,function(){var L;return(0,S.Jh)(this,function(Tt){switch(Tt.label){case 0:return L=Kl,[4,xr(E)];case 1:return[2,L.apply(void 0,[Tt.sent(),lt])]}})})})}}(Jt(v),_,b,m)}function Qo(i,e){return function(t,s){var a=this,c=new ue;return t.asyncQueue.enqueueAndForget(function(){return(0,S.mG)(a,void 0,void 0,function(){var d;return(0,S.Jh)(this,function(p){switch(p.label){case 0:return d=LT,[4,ah(t)];case 1:return[2,d.apply(void 0,[p.sent(),s,c])]}})})}),c.promise}(Jt(i),e)}function vh(i,e,t){var s=t.docs.get(e._key),a=new ki(i);return new Sn(i,a,e._key,s,new Ti(t.hasPendingWrites,t.fromCache),e.converter)}var kk=function(i){function e(t,s){var a=this;return(a=i.call(this,t,s)||this)._firestore=t,a}return(0,S.ZT)(e,i),e.prototype.get=function(t){var s=this,a=Kn(t,this._firestore),c=new ki(this._firestore);return i.prototype.get.call(this,t).then(function(d){return new Sn(s._firestore,c,a._key,d._document,new Ti(!1,!1),a.converter)})},e}(function(){function i(e,t){this._firestore=e,this._transaction=t,this._dataReader=Ii(e)}return i.prototype.get=function(e){var t=this,s=Kn(e,this._firestore),a=new Ck(this._firestore);return this._transaction.lookup([s._key]).then(function(c){if(!c||1!==c.length)return G();var d=c[0];if(d.isFoundDocument())return new Zo(t._firestore,a,d.key,d,s.converter);if(d.isNoDocument())return new Zo(t._firestore,a,s._key,null,s.converter);throw G()})},i.prototype.set=function(e,t,s){var a=Kn(e,this._firestore),c=nu(a.converter,t,s),d=$a(this._dataReader,"Transaction.set",a._key,c,null!==a.converter,s);return this._transaction.set(a._key,d),this},i.prototype.update=function(e,t,s){for(var a=[],c=3;c<arguments.length;c++)a[c-3]=arguments[c];var d,p=Kn(e,this._firestore);return d="string"==typeof(t=(0,gt.m9)(t))||t instanceof sn?dh(this._dataReader,"Transaction.update",p._key,t,s,a):hh(this._dataReader,"Transaction.update",p._key,t),this._transaction.update(p._key,d),this},i.prototype.delete=function(e){var t=Kn(e,this._firestore);return this._transaction.delete(t._key),this},i}());function Vy(){if("undefined"==typeof Uint8Array)throw new R(A.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function By(){if("undefined"==typeof atob)throw new R(A.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var qy=function(){function i(e){this._delegate=e}return i.fromBase64String=function(e){return By(),new i(bi.fromBase64String(e))},i.fromUint8Array=function(e){return Vy(),new i(bi.fromUint8Array(e))},i.prototype.toBase64=function(){return By(),this._delegate.toBase64()},i.prototype.toUint8Array=function(){return Vy(),this._delegate.toUint8Array()},i.prototype.isEqual=function(e){return this._delegate.isEqual(e._delegate)},i.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},i}(),Dk=function(){function i(){}return i.prototype.enableIndexedDbPersistence=function(e,t){return function(s,a){yy(s=pt(s,Rt));var c=Jt(s),d=s._freezeSettings(),p=new rh;return vy(c,p,new Wv(p,d.cacheSizeBytes,null==a?void 0:a.forceOwnership))}(e._delegate,{forceOwnership:t})},i.prototype.enableMultiTabIndexedDbPersistence=function(e){return function(t){yy(t=pt(t,Rt));var s=Jt(t),a=t._freezeSettings(),c=new rh;return vy(s,c,new $T(c,a.cacheSizeBytes))}(e._delegate)},i.prototype.clearIndexedDbPersistence=function(e){return function(t){var s=this;if(t._initialized&&!t._terminated)throw new R(A.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var a=new ue;return t._queue.enqueueAndForgetEvenWhileRestricted(function(){return(0,S.mG)(s,void 0,void 0,function(){var c;return(0,S.Jh)(this,function(d){switch(d.label){case 0:return d.trys.push([0,2,,3]),[4,function(p){return(0,S.mG)(this,void 0,void 0,function(){return(0,S.Jh)(this,function(v){switch(v.label){case 0:return gr.yt()?[4,gr.delete(p+"main")]:[2,Promise.resolve()];case 1:return v.sent(),[2]}})})}(Fl(t._databaseId,t._persistenceKey))];case 1:return d.sent(),a.resolve(),[3,3];case 2:return c=d.sent(),a.reject(c),[3,3];case 3:return[2]}})})}),a.promise}(e._delegate)},i}(),Uy=function(){function i(e,t,s){var a=this;this._delegate=t,this.Zc=s,this.INTERNAL={delete:function(){return a.terminate()}},e instanceof Ja||(this.tu=e)}return Object.defineProperty(i.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),i.prototype.settings=function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||ko("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)},i.prototype.useEmulator=function(e,t,s){void 0===s&&(s={}),function(a,c,d,p){var m;void 0===p&&(p={});var v=(a=pt(a,zo))._getSettings();if("firestore.googleapis.com"!==v.host&&v.host!==c&&ko("Host has been set in both settings() and useEmulator(), emulator host will be used"),a._setSettings(Object.assign(Object.assign({},v),{host:c+":"+d,ssl:!1})),p.mockUserToken){var _,b;if("string"==typeof p.mockUserToken)_=p.mockUserToken,b=ne.MOCK_USER;else{_=(0,gt.Sg)(p.mockUserToken,null===(m=a._app)||void 0===m?void 0:m.options.projectId);var I=p.mockUserToken.sub||p.mockUserToken.user_id;if(!I)throw new R(A.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new ne(I)}a._credentials=new ok(new sy(_,b))}}(this._delegate,e,t,s)},i.prototype.enableNetwork=function(){return function(e){var t=this;return e.asyncQueue.enqueue(function(){return(0,S.mG)(t,void 0,void 0,function(){var s,a;return(0,S.Jh)(this,function(c){switch(c.label){case 0:return[4,ey(e)];case 1:return s=c.sent(),[4,ny(e)];case 2:return a=c.sent(),[2,(s.setNetworkEnabled(!0),d=a,p=V(d),p.Or.delete(0),Go(p))]}var d,p})})})}(Jt(pt(this._delegate,Rt)))},i.prototype.disableNetwork=function(){return function(e){var t=this;return e.asyncQueue.enqueue(function(){return(0,S.mG)(t,void 0,void 0,function(){var s,a;return(0,S.Jh)(this,function(c){switch(c.label){case 0:return[4,ey(e)];case 1:return s=c.sent(),[4,ny(e)];case 2:return a=c.sent(),[2,(s.setNetworkEnabled(!1),function(d){return(0,S.mG)(this,void 0,void 0,function(){var p;return(0,S.Jh)(this,function(m){switch(m.label){case 0:return(p=V(d)).Or.add(0),[4,Tr(p)];case 1:return m.sent(),p.Br.set("Offline"),[2]}})})}(a))]}})})})}(Jt(pt(this._delegate,Rt)))},i.prototype.enablePersistence=function(e){var t=!1,s=!1;return e&&uy("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",s=!!e.experimentalForceOwningTab),t?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,s)},i.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},i.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},i.prototype.waitForPendingWrites=function(){return function(e){var t=this,s=new ue;return e.asyncQueue.enqueueAndForget(function(){return(0,S.mG)(t,void 0,void 0,function(){var a;return(0,S.Jh)(this,function(c){switch(c.label){case 0:return a=UT,[4,ah(e)];case 1:return[2,a.apply(void 0,[c.sent(),s])]}})})}),s.promise}(Jt(pt(this._delegate,Rt)))},i.prototype.onSnapshotsInSync=function(e){return s=e,function(a,c){var d=this,p=new Za(c);return a.asyncQueue.enqueueAndForget(function(){return(0,S.mG)(d,void 0,void 0,function(){var m;return(0,S.Jh)(this,function(v){switch(v.label){case 0:return m=function(_,b){V(_).Gr.add(b),b.next()},[4,xr(a)];case 1:return[2,m.apply(void 0,[v.sent(),p])]}})})}),function(){p.Wo(),a.asyncQueue.enqueueAndForget(function(){return(0,S.mG)(d,void 0,void 0,function(){var m;return(0,S.Jh)(this,function(v){switch(v.label){case 0:return m=function(_,b){V(_).Gr.delete(b)},[4,xr(a)];case 1:return[2,m.apply(void 0,[v.sent(),p])]}})})})}}(Jt(pt(this._delegate,Rt)),Mr(s)?s:{next:s});var s},Object.defineProperty(i.prototype,"app",{get:function(){if(!this.tu)throw new R(A.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),i.prototype.collection=function(e){try{return new ou(this,fy(this._delegate,e))}catch(t){throw pe(t,"collection()","Firestore.collection()")}},i.prototype.doc=function(e){try{return new Di(this,Wa(this._delegate,e))}catch(t){throw pe(t,"doc()","Firestore.doc()")}},i.prototype.collectionGroup=function(e){try{return new $o(this,function(t,s){if(t=pt(t,zo),uh("collectionGroup","collection id",s),s.indexOf("/")>=0)throw new R(A.INVALID_ARGUMENT,"Invalid collection ID '"+s+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new we(t,null,(a=s,new yn(ft.emptyPath(),a)));var a}(this._delegate,e))}catch(t){throw pe(t,"collectionGroup()","Firestore.collectionGroup()")}},i.prototype.runTransaction=function(e){var s,t=this;return function(c,d){var p=this,m=new ue;return c.asyncQueue.enqueueAndForget(function(){return(0,S.mG)(p,void 0,void 0,function(){var v;return(0,S.Jh)(this,function(_){switch(_.label){case 0:return[4,(b=c,Ka(b).then(function(I){return I.datastore}))];case 1:return v=_.sent(),new nk(c.asyncQueue,v,d,m).run(),[2]}var b})})}),m.promise}(Jt(s=this._delegate),function(c){return function(s){return e(new jy(t,s))}(new kk(s,c))})},i.prototype.batch=function(){var e=this;return Jt(this._delegate),new Yy(new Tk(this._delegate,function(t){return Qo(e._delegate,t)}))},i.prototype.loadBundle=function(e){throw new R(A.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},i.prototype.namedQuery=function(e){throw new R(A.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},i}(),iu=function(i){function e(t){var s=this;return(s=i.call(this)||this).firestore=t,s}return(0,S.ZT)(e,i),e.prototype.convertBytes=function(t){return new qy(new bi(t))},e.prototype.convertReference=function(t){var s=this.convertDocumentKey(t,this.firestore._databaseId);return Di.eu(s,this.firestore,null)},e}(gh),jy=function(){function i(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new iu(e)}return i.prototype.get=function(e){var t=this,s=Ei(e);return this._delegate.get(s).then(function(a){return new Wo(t._firestore,new Sn(t._firestore._delegate,t._userDataWriter,a._key,a._document,a.metadata,s.converter))})},i.prototype.set=function(e,t,s){var a=Ei(e);return s?(ch("Transaction.set",s),this._delegate.set(a,t,s)):this._delegate.set(a,t),this},i.prototype.update=function(e,t,s){for(var a,c=[],d=3;d<arguments.length;d++)c[d-3]=arguments[d];var p=Ei(e);return 2===arguments.length?this._delegate.update(p,t):(a=this._delegate).update.apply(a,(0,S.ev)([p,t,s],c)),this},i.prototype.delete=function(e){var t=Ei(e);return this._delegate.delete(t),this},i}(),Yy=function(){function i(e){this._delegate=e}return i.prototype.set=function(e,t,s){var a=Ei(e);return s?(ch("WriteBatch.set",s),this._delegate.set(a,t,s)):this._delegate.set(a,t),this},i.prototype.update=function(e,t,s){for(var a,c=[],d=3;d<arguments.length;d++)c[d-3]=arguments[d];var p=Ei(e);return 2===arguments.length?this._delegate.update(p,t):(a=this._delegate).update.apply(a,(0,S.ev)([p,t,s],c)),this},i.prototype.delete=function(e){var t=Ei(e);return this._delegate.delete(t),this},i.prototype.commit=function(){return this._delegate.commit()},i}(),ru=function(){function i(e,t,s){this._firestore=e,this._userDataWriter=t,this._delegate=s}return i.prototype.fromFirestore=function(e,t){var s=new Ko(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Xo(this._firestore,s),null!=t?t:{})},i.prototype.toFirestore=function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)},i.nu=function(e,t){var s=i.su,a=s.get(e);a||(a=new WeakMap,s.set(e,a));var c=a.get(t);return c||(c=new i(e,new iu(e),t),a.set(t,c)),c},i}();ru.su=new WeakMap;var Di=function(){function i(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new iu(e)}return i.iu=function(e,t,s){if(e.length%2!=0)throw new R(A.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new i(t,new Et(t._delegate,s,new H(e)))},i.eu=function(e,t,s){return new i(t,new Et(t._delegate,s,e))},Object.defineProperty(i.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"parent",{get:function(){return new ou(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),i.prototype.collection=function(e){try{return new ou(this.firestore,fy(this._delegate,e))}catch(t){throw pe(t,"collection()","DocumentReference.collection()")}},i.prototype.isEqual=function(e){return(e=(0,gt.m9)(e))instanceof Et&&py(this._delegate,e)},i.prototype.set=function(e,t){t=ch("DocumentReference.set",t);try{return function(s,a,c){s=pt(s,Et);var d=pt(s.firestore,Rt),p=nu(s.converter,a,c);return Qo(d,[$a(Ii(d),"setDoc",s._key,p,null!==s.converter,c).toMutation(s._key,oe.none())])}(this._delegate,e,t)}catch(s){throw pe(s,"setDoc()","DocumentReference.set()")}},i.prototype.update=function(e,t){for(var s=[],a=2;a<arguments.length;a++)s[a-2]=arguments[a];try{return 1===arguments.length?Fy(this._delegate,e):Fy.apply(void 0,(0,S.ev)([this._delegate,e,t],s))}catch(c){throw pe(c,"updateDoc()","DocumentReference.update()")}},i.prototype.delete=function(){return Qo(pt((e=this._delegate).firestore,Rt),[new Fo(e._key,oe.none())]);var e},i.prototype.onSnapshot=function(){for(var e=this,t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];var a=Gy(t),c=Hy(t,function(d){return new Wo(e.firestore,new Sn(e.firestore._delegate,e._userDataWriter,d._key,d._document,d.metadata,e._delegate.converter))});return Ly(this._delegate,a,c)},i.prototype.get=function(e){var t=this;return("cache"===(null==e?void 0:e.source)?function(s){s=pt(s,Et);var a=pt(s.firestore,Rt),c=Jt(a),d=new ki(a);return function(p,m){var v=this,_=new ue;return p.asyncQueue.enqueueAndForget(function(){return(0,S.mG)(v,void 0,void 0,function(){var b;return(0,S.Jh)(this,function(I){switch(I.label){case 0:return b=function(k,T,E){return(0,S.mG)(this,void 0,void 0,function(){var M,F;return(0,S.Jh)(this,function(Y){switch(Y.label){case 0:return Y.trys.push([0,2,,3]),[4,(z=k,ot=T,lt=V(z),lt.persistence.runTransaction("read document","readonly",function(L){return lt.Mn.mn(L,ot)}))];case 1:return(F=Y.sent()).isFoundDocument()?E.resolve(F):F.isNoDocument()?E.resolve(null):E.reject(new R(A.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return M=Y.sent(),F=Er(M,"Failed to get document '"+T+" from cache"),E.reject(F),[3,3];case 3:return[2]}var z,ot,lt})})},[4,sh(p)];case 1:return[2,b.apply(void 0,[I.sent(),m,_])]}})})}),_.promise}(c,s._key).then(function(p){return new Sn(a,d,s._key,p,new Ti(null!==p&&p.hasLocalMutations,!0),s.converter)})}(this._delegate):"server"===(null==e?void 0:e.source)?function(s){s=pt(s,Et);var a=pt(s.firestore,Rt);return iy(Jt(a),s._key,{source:"server"}).then(function(c){return vh(a,s,c)})}(this._delegate):function(s){s=pt(s,Et);var a=pt(s.firestore,Rt);return iy(Jt(a),s._key).then(function(c){return vh(a,s,c)})}(this._delegate)).then(function(s){return new Wo(t.firestore,new Sn(t.firestore._delegate,t._userDataWriter,s._key,s._document,s.metadata,t._delegate.converter))})},i.prototype.withConverter=function(e){return new i(this.firestore,this._delegate.withConverter(e?ru.nu(this.firestore,e):null))},i}();function pe(i,e,t){return i.message=i.message.replace(e,t),i}function Gy(i){for(var e=0,t=i;e<t.length;e++){var s=t[e];if("object"==typeof s&&!Mr(s))return s}return{}}function Hy(i,e){var t,s,a;return{next:function(c){a.next&&a.next(e(c))},error:null===(t=(a=Mr(i[0])?i[0]:Mr(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]}).error)||void 0===t?void 0:t.bind(a),complete:null===(s=a.complete)||void 0===s?void 0:s.bind(a)}}var Wo=function(){function i(e,t){this._firestore=e,this._delegate=t}return Object.defineProperty(i.prototype,"ref",{get:function(){return new Di(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),i.prototype.data=function(e){return this._delegate.data(e)},i.prototype.get=function(e,t){return this._delegate.get(e,t)},i.prototype.isEqual=function(e){return Dy(this._delegate,e._delegate)},i}(),Xo=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return(0,S.ZT)(e,i),e.prototype.data=function(t){return this._delegate.data(t)},e}(Wo),$o=function(){function i(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new iu(e)}return i.prototype.where=function(e,t,s){try{return new i(this.firestore,Zn(this._delegate,(d=s,p=t,m=eu("where",a=e),new Sk(m,p,d))))}catch(a){throw pe(a,/(orderBy|where)\(\)/,"Query.$1()")}var a,d,p,m},i.prototype.orderBy=function(e,t){try{return new i(this.firestore,Zn(this._delegate,function(s,a){void 0===a&&(a="asc");var c=a,d=eu("orderBy",s);return new Ik(d,c)}(e,t)))}catch(s){throw pe(s,/(orderBy|where)\(\)/,"Query.$1()")}},i.prototype.limit=function(e){try{return new i(this.firestore,Zn(this._delegate,(hy("limit",t=e),new Ay("limit",t,"F"))))}catch(t){throw pe(t,"limit()","Query.limit()")}var t},i.prototype.limitToLast=function(e){try{return new i(this.firestore,Zn(this._delegate,(hy("limitToLast",t=e),new Ay("limitToLast",t,"L"))))}catch(t){throw pe(t,"limitToLast()","Query.limitToLast()")}var t},i.prototype.startAt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return new i(this.firestore,Zn(this._delegate,function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];return new xy("startAt",s,!0)}.apply(void 0,e)))}catch(s){throw pe(s,"startAt()","Query.startAt()")}},i.prototype.startAfter=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return new i(this.firestore,Zn(this._delegate,function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];return new xy("startAfter",s,!1)}.apply(void 0,e)))}catch(s){throw pe(s,"startAfter()","Query.startAfter()")}},i.prototype.endBefore=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return new i(this.firestore,Zn(this._delegate,function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];return new My("endBefore",s,!0)}.apply(void 0,e)))}catch(s){throw pe(s,"endBefore()","Query.endBefore()")}},i.prototype.endAt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return new i(this.firestore,Zn(this._delegate,function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];return new My("endAt",s,!1)}.apply(void 0,e)))}catch(s){throw pe(s,"endAt()","Query.endAt()")}},i.prototype.isEqual=function(e){return my(this._delegate,e._delegate)},i.prototype.get=function(e){var t=this;return("cache"===(null==e?void 0:e.source)?function(s){s=pt(s,we);var a=pt(s.firestore,Rt),c=Jt(a),d=new ki(a);return function(p,m){var v=this,_=new ue;return p.asyncQueue.enqueueAndForget(function(){return(0,S.mG)(v,void 0,void 0,function(){var b;return(0,S.Jh)(this,function(I){switch(I.label){case 0:return b=function(k,T,E){return(0,S.mG)(this,void 0,void 0,function(){var M,F,Y,z,ot;return(0,S.Jh)(this,function(lt){switch(lt.label){case 0:return lt.trys.push([0,2,,3]),[4,ja(k,T,!0)];case 1:return ot=lt.sent(),M=new Gv(T,ot.Bn),F=M._o(ot.documents),Y=M.applyChanges(F,!1),E.resolve(Y.snapshot),[3,3];case 2:return z=lt.sent(),ot=Er(z,"Failed to execute query '"+T+" against cache"),E.reject(ot),[3,3];case 3:return[2]}})})},[4,sh(p)];case 1:return[2,b.apply(void 0,[I.sent(),m,_])]}})})}),_.promise}(c,s._query).then(function(p){return new zn(a,d,s,p)})}(this._delegate):"server"===(null==e?void 0:e.source)?function(s){s=pt(s,we);var a=pt(s.firestore,Rt),c=Jt(a),d=new ki(a);return ry(c,s._query,{source:"server"}).then(function(p){return new zn(a,d,s,p)})}(this._delegate):function(s){s=pt(s,we);var a=pt(s.firestore,Rt),c=Jt(a),d=new ki(a);return Ey(s._query),ry(c,s._query).then(function(p){return new zn(a,d,s,p)})}(this._delegate)).then(function(s){return new yh(t.firestore,new zn(t.firestore._delegate,t._userDataWriter,t._delegate,s._snapshot))})},i.prototype.onSnapshot=function(){for(var e=this,t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];var a=Gy(t),c=Hy(t,function(d){return new yh(e.firestore,new zn(e.firestore._delegate,e._userDataWriter,e._delegate,d._snapshot))});return Ly(this._delegate,a,c)},i.prototype.withConverter=function(e){return new i(this.firestore,this._delegate.withConverter(e?ru.nu(this.firestore,e):null))},i}(),Ak=function(){function i(e,t){this._firestore=e,this._delegate=t}return Object.defineProperty(i.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"doc",{get:function(){return new Xo(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),i}(),yh=function(){function i(e,t){this._firestore=e,this._delegate=t}return Object.defineProperty(i.prototype,"query",{get:function(){return new $o(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"docs",{get:function(){var e=this;return this._delegate.docs.map(function(t){return new Xo(e._firestore,t)})},enumerable:!1,configurable:!0}),i.prototype.docChanges=function(e){var t=this;return this._delegate.docChanges(e).map(function(s){return new Ak(t._firestore,s)})},i.prototype.forEach=function(e,t){var s=this;this._delegate.forEach(function(a){e.call(t,new Xo(s._firestore,a))})},i.prototype.isEqual=function(e){return Dy(this._delegate,e._delegate)},i}(),ou=function(i){function e(t,s){var a=this;return(a=i.call(this,t,s)||this).firestore=t,a._delegate=s,a}return(0,S.ZT)(e,i),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new Di(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new Di(this.firestore,void 0===t?Wa(this._delegate):Wa(this._delegate,t))}catch(s){throw pe(s,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var a,c,d,p,m,s=this;return(a=this._delegate,c=t,d=pt(a.firestore,Rt),p=Wa(a),m=nu(a.converter,c),Qo(d,[$a(Ii(a.firestore),"addDoc",p._key,m,null!==a.converter,{}).toMutation(p._key,oe.exists(!1))]).then(function(){return p})).then(function(a){return new Di(s.firestore,a)})},e.prototype.isEqual=function(t){return py(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?ru.nu(this.firestore,t):null))},e}($o);function Ei(i){return pt(i,Et)}var xk=function(){function i(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._delegate=new(sn.bind.apply(sn,(0,S.ev)([void 0],e)))}return i.documentId=function(){return new i(ze.keyField().canonicalString())},i.prototype.isEqual=function(e){return(e=(0,gt.m9)(e))instanceof sn&&this._delegate._internalPath.isEqual(e._internalPath)},i}(),Mk=function(){function i(e){this._delegate=e}return i.serverTimestamp=function(){var e=new mk("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new i(e)},i.delete=function(){var e=new lh("deleteField");return e._methodName="FieldValue.delete",new i(e)},i.arrayUnion=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var s=function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];return new gk("arrayUnion",a)}.apply(void 0,e);return s._methodName="FieldValue.arrayUnion",new i(s)},i.arrayRemove=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var s=function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];return new vk("arrayRemove",a)}.apply(void 0,e);return s._methodName="FieldValue.arrayRemove",new i(s)},i.increment=function(e){var t=new yk("increment",e);return t._methodName="FieldValue.increment",new i(t)},i.prototype.isEqual=function(e){return this._delegate.isEqual(e._delegate)},i}(),Ok=X(6034),Rk={Firestore:Uy,GeoPoint:Xa,Timestamp:ve,Blob:qy,Transaction:jy,WriteBatch:Yy,DocumentReference:Di,DocumentSnapshot:Wo,Query:$o,QueryDocumentSnapshot:Xo,QuerySnapshot:yh,CollectionReference:ou,FieldPath:xk,FieldValue:Mk,setLogLevel:function(i){He.setLogLevel(i)},CACHE_SIZE_UNLIMITED:-1};!function(i){i.INTERNAL.registerComponent(new Ok.wA("firestore",function(s){return e=s.getProvider("app").getImmediate(),t=s.getProvider("auth-internal"),new Uy(e,new Rt(e,t),new Dk);var e,t},"PUBLIC").setServiceProps(Object.assign({},Rk))),i.registerVersion("@firebase/firestore","2.4.0")}(it.Z);var ts=X(2329),Pk=X(2340),l=X(7716),B=X(3679);let Fk=(()=>{class i{constructor(){}get windowRef(){return window}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var Lk=X(6215);let zy=(()=>{class i{constructor(){this.isOTPVerified=new Lk.X(!1)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var _h=X(3738),an=X(8295),su=X(9983),es=X(1552),In=X(1095),Zy=X(15);function Vk(i,e){if(1&i){const t=l.EpF();l.TgZ(0,"input",3),l.NdJ("keydown",function(a){return l.CHM(t),l.oxw(2).onKeyDown(a)})("keyup",function(a){const d=l.CHM(t).index;return l.oxw(2).onKeyUp(a,d)}),l.qZA()}if(2&i){const t=e.$implicit,s=e.index,a=l.oxw(2);l.Gre("otp-input ",a.config.inputClass,""),l.hYB("id","otp_",s,"_",a.componentKey,""),l.Q6J("pattern",a.config.allowNumbersOnly?"\\d*":"")("type",a.inputType)("placeholder",(null==a.config?null:a.config.placeholder)||"")("disabledNumberOnly",!a.config.allowNumbersOnly)("ngStyle",a.config.inputStyles)("formControl",a.otpForm.controls[t])}}function Bk(i,e){if(1&i&&(l.TgZ(0,"div",1),l.YNc(1,Vk,1,11,"input",2),l.ALo(2,"keys"),l.qZA()),2&i){const t=l.oxw();l.Gre("wrapper ",t.config.containerClass,""),l.MGl("id","c_",t.componentKey,""),l.Q6J("ngStyle",t.config.containerStyles),l.xp6(1),l.Q6J("ngForOf",l.lcZ(2,6,null==t.otpForm?null:t.otpForm.controls))}}let wh=(()=>{class i{transform(t){return Object.keys(t)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275pipe=l.Yjl({name:"keys",type:i,pure:!0}),i})(),qk=(()=>{class i{constructor(t){this.keysPipe=t,this.config={length:4},this.onInputChange=new l.vpe,this.inputControls=new Array(this.config.length),this.componentKey=Math.random().toString(36).substring(2)+(new Date).getTime().toString(36)}ngOnInit(){this.otpForm=new B.cw({});for(let t=0;t<this.config.length;t++)this.otpForm.addControl(this.getControlName(t),new B.NI);this.otpForm.valueChanges.subscribe(t=>{this.keysPipe.transform(this.otpForm.controls).forEach(s=>{var a=this.otpForm.controls[s].value;a&&a.length>1&&(a.length>=this.config.length?this.setValue(a):this.rebuildValue())})}),this.inputType=this.getInputType()}ngAfterViewInit(){if(!this.config.disableAutoFocus){const t=document.getElementById(`c_${this.componentKey}`);if(t){t.addEventListener("paste",a=>this.handlePaste(a));const s=t.getElementsByClassName("otp-input")[0];s&&s.focus&&s.focus()}}}getControlName(t){return`ctrl_${t}`}ifLeftArrow(t){return this.ifKeyCode(t,37)}ifRightArrow(t){return this.ifKeyCode(t,39)}ifBackspaceOrDelete(t){return"Backspace"===t.key||"Delete"===t.key||this.ifKeyCode(t,8)||this.ifKeyCode(t,46)}ifKeyCode(t,s){return(t.keyCode||t.charCode)==s}onKeyDown(t){if(this.ifKeyCode(t,32))return!1}onKeyUp(t,s){const a=this.appendKey(`otp_${s+1}`),c=this.appendKey("otp_"+(s-1));if(this.ifRightArrow(t))this.setSelected(a);else{if(!this.ifLeftArrow(t))return this.ifBackspaceOrDelete(t)&&!t.target.value?(this.setSelected(c),void this.rebuildValue()):void(!t.target.value||(this.ifValidEntry(t)&&this.setSelected(a),this.rebuildValue()));this.setSelected(c)}}appendKey(t){return`${t}_${this.componentKey}`}setSelected(t){this.focusTo(t);const s=document.getElementById(t);s&&s.setSelectionRange&&setTimeout(()=>{s.setSelectionRange(0,1)},0)}ifValidEntry(t){const s=String.fromCharCode(t.keyCode);return/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)||/[a-zA-Z0-9-_]/.test(s)||this.config.allowKeyCodes&&this.config.allowKeyCodes.includes(t.keyCode)||t.keyCode>=96&&t.keyCode<=105}focusTo(t){const s=document.getElementById(t);s&&s.focus()}setValue(t){if(!this.config.allowNumbersOnly||!isNaN(t)){if(this.otpForm.reset(),!t)return void this.rebuildValue();if(t=t.toString().replace(/\s/g,""),Array.from(t).forEach((a,c)=>{this.otpForm.get(this.getControlName(c))&&this.otpForm.get(this.getControlName(c)).setValue(a)}),!this.config.disableAutoFocus){const a=document.getElementById(`c_${this.componentKey}`);var s=t.length<this.config.length?t.length:this.config.length-1;let c=a.getElementsByClassName("otp-input")[s];c&&c.focus&&c.focus()}this.rebuildValue()}}rebuildValue(){let t="";this.keysPipe.transform(this.otpForm.controls).forEach(s=>{if(this.otpForm.controls[s].value){let a=this.otpForm.controls[s].value,c=a.length>1,d=!this.config.allowNumbersOnly&&this.config.letterCase&&("upper"==this.config.letterCase.toLocaleLowerCase()||"lower"==this.config.letterCase.toLocaleLowerCase());a=a[0];let p=d?"upper"==this.config.letterCase.toLocaleLowerCase()?a.toUpperCase():a.toLowerCase():a;d&&p==a?d=!1:a=p,t+=a,(c||d)&&this.otpForm.controls[s].setValue(a)}}),this.onInputChange.emit(t)}getInputType(){return this.config.isPasswordInput?"password":this.config.allowNumbersOnly?"tel":"text"}handlePaste(t){let s=t.clipboardData||window.clipboardData;if(s)var a=s.getData("Text");t.stopPropagation(),t.preventDefault(),a&&this.setValue(a)}}return i.\u0275fac=function(t){return new(t||i)(l.Y36(wh))},i.\u0275cmp=l.Xpm({type:i,selectors:[["ng-otp-input"]],inputs:{config:"config"},outputs:{onInputChange:"onInputChange"},decls:1,vars:1,consts:[[3,"class","id","ngStyle",4,"ngIf"],[3,"id","ngStyle"],["numberOnly","","autocomplete","one-time-code",3,"pattern","type","placeholder","disabledNumberOnly","ngStyle","class","formControl","id","keydown","keyup",4,"ngFor","ngForOf"],["numberOnly","","autocomplete","one-time-code",3,"pattern","type","placeholder","disabledNumberOnly","ngStyle","formControl","id","keydown","keyup"]],template:function(t,s){1&t&&l.YNc(0,Bk,3,8,"div",0),2&t&&l.Q6J("ngIf",null==s.otpForm?null:s.otpForm.controls)},directives:function(){return[J.O5,J.PC,J.sg,B.Fj,Uk,B.c5,B.JJ,B.oH]},pipes:function(){return[wh]},styles:[".otp-input[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:4px;border:solid 1px #c5c5c5;text-align:center;font-size:32px}.wrapper[_ngcontent-%COMP%]   .otp-input[_ngcontent-%COMP%]:not(:last-child){margin-right:8px}@media screen and (max-width: 767px){.otp-input[_ngcontent-%COMP%]{width:40px;font-size:24px;height:40px}}@media screen and (max-width: 420px){.otp-input[_ngcontent-%COMP%]{width:30px;font-size:18px;height:30px}}"]}),i})(),Uk=(()=>{class i{constructor(t,s){this._elRef=t,this._renderer=s}ngOnInit(){this.disabledNumberOnly||this._renderer.setAttribute(this._elRef.nativeElement,"onkeypress","return (event.charCode >= 48 && event.charCode <= 57) || event.charCode == 0")}}return i.\u0275fac=function(t){return new(t||i)(l.Y36(l.SBq),l.Y36(l.Qsj))},i.\u0275dir=l.lG2({type:i,selectors:[["","numberOnly",""]],inputs:{disabledNumberOnly:"disabledNumberOnly"}}),i})(),jk=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({providers:[wh],imports:[[J.ez,B.u5,B.UX]]}),i})(),Yk=(()=>{class i{constructor(t,s){this.router=t,this.loginService=s,this.config={allowNumberOnly:!0,length:6,isPasswordInput:!1,disableAutoFocus:!1,placeholder:"",inputStyles:{width:"50px",height:"50px,"}}}ngOnInit(){this.verify=localStorage.getItem("verificationId")||"{}"}verifyOtp(){var t=ts.Z.auth.PhoneAuthProvider.credential(this.verify,this.otp);ts.Z.auth().signInWithCredential(t).then(s=>{console.log(s),localStorage.setItem("userDetailsFirebase",JSON.stringify(s)),this.loginService.isOTPVerified.next(!0)})}onOtpChange(t){console.log("otp event",t),this.otp=t}}return i.\u0275fac=function(t){return new(t||i)(l.Y36(Zy.F0),l.Y36(zy))},i.\u0275cmp=l.Xpm({type:i,selectors:[["app-otp-input"]],decls:10,vars:1,consts:[["for",""],[3,"config","onInputChange"],[1,"text-center","my-3"],["mat-raised-button","","color","primary",1,"py-1","px-5",3,"click"]],template:function(t,s){1&t&&(l.TgZ(0,"div"),l.TgZ(1,"p"),l._uU(2,"Otp sended successfully"),l.qZA(),l.TgZ(3,"div"),l.TgZ(4,"label",0),l._uU(5,"Enter OTP"),l.qZA(),l.TgZ(6,"ng-otp-input",1),l.NdJ("onInputChange",function(c){return s.onOtpChange(c)}),l.qZA(),l.TgZ(7,"div",2),l.TgZ(8,"button",3),l.NdJ("click",function(){return s.verifyOtp()}),l._uU(9,"continue"),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&t&&(l.xp6(6),l.Q6J("config",s.config))},directives:[qk,In.lW],styles:[""]}),i})();class bh{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class Sh extends bh{constructor(e,t,s,a){super(),this.component=e,this.viewContainerRef=t,this.injector=s,this.componentFactoryResolver=a}}class ns extends bh{constructor(e,t,s){super(),this.templateRef=e,this.viewContainerRef=t,this.context=s}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class Gk extends bh{constructor(e){super(),this.element=e instanceof l.SBq?e.nativeElement:e}}class Ky{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof Sh?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof ns?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof Gk?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class Hk extends Ky{constructor(e,t,s,a,c){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=s,this._defaultInjector=a,this.attachDomPortal=d=>{const p=d.element,m=this._document.createComment("dom-portal");p.parentNode.insertBefore(m,p),this.outletElement.appendChild(p),this._attachedPortal=d,super.setDisposeFn(()=>{m.parentNode&&m.parentNode.replaceChild(p,m)})},this._document=c}attachComponentPortal(e){const s=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let a;return e.viewContainerRef?(a=e.viewContainerRef.createComponent(s,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn(()=>a.destroy())):(a=s.create(e.injector||this._defaultInjector),this._appRef.attachView(a.hostView),this.setDisposeFn(()=>{this._appRef.detachView(a.hostView),a.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(a)),this._attachedPortal=e,a}attachTemplatePortal(e){let t=e.viewContainerRef,s=t.createEmbeddedView(e.templateRef,e.context);return s.rootNodes.forEach(a=>this.outletElement.appendChild(a)),s.detectChanges(),this.setDisposeFn(()=>{let a=t.indexOf(s);-1!==a&&t.remove(a)}),this._attachedPortal=e,s}dispose(){super.dispose(),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let is=(()=>{class i extends Ky{constructor(t,s,a){super(),this._componentFactoryResolver=t,this._viewContainerRef=s,this._isInitialized=!1,this.attached=new l.vpe,this.attachDomPortal=c=>{const d=c.element,p=this._document.createComment("dom-portal");c.setAttachedHost(this),d.parentNode.insertBefore(p,d),this._getRootNode().appendChild(d),this._attachedPortal=c,super.setDisposeFn(()=>{p.parentNode&&p.parentNode.replaceChild(d,p)})},this._document=a}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(t){t.setAttachedHost(this);const s=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,c=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),d=s.createComponent(c,s.length,t.injector||s.injector);return s!==this._viewContainerRef&&this._getRootNode().appendChild(d.hostView.rootNodes[0]),super.setDisposeFn(()=>d.destroy()),this._attachedPortal=t,this._attachedRef=d,this.attached.emit(d),d}attachTemplatePortal(t){t.setAttachedHost(this);const s=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=s,this.attached.emit(s),s}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return i.\u0275fac=function(t){return new(t||i)(l.Y36(l._Vd),l.Y36(l.s_b),l.Y36(J.K0))},i.\u0275dir=l.lG2({type:i,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[l.qOj]}),i})(),Ih=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({}),i})();var Cn=X(4765),be=X(946),Z=X(9490),W=X(6461),Ct=X(521),wt=X(9765),Jn=X(5917),Tn=X(9761),kn=X(6782);function zk(i,e){1&i&&l.Hsn(0)}const Zk=["*"];let Qy=(()=>{class i{constructor(t){this._elementRef=t}focus(){this._elementRef.nativeElement.focus()}}return i.\u0275fac=function(t){return new(t||i)(l.Y36(l.SBq))},i.\u0275dir=l.lG2({type:i,selectors:[["","cdkStepHeader",""]],hostAttrs:["role","tab"]}),i})(),Wy=(()=>{class i{constructor(t){this.template=t}}return i.\u0275fac=function(t){return new(t||i)(l.Y36(l.Rgc))},i.\u0275dir=l.lG2({type:i,selectors:[["","cdkStepLabel",""]]}),i})(),Kk=0;const Xy=new l.OlP("STEPPER_GLOBAL_OPTIONS");let Ch=(()=>{class i{constructor(t,s){this._stepper=t,this.interacted=!1,this.interactedStream=new l.vpe,this._editable=!0,this._optional=!1,this._completedOverride=null,this._customError=null,this._stepperOptions=s||{},this._displayDefaultIndicatorType=!1!==this._stepperOptions.displayDefaultIndicatorType}get editable(){return this._editable}set editable(t){this._editable=(0,Z.Ig)(t)}get optional(){return this._optional}set optional(t){this._optional=(0,Z.Ig)(t)}get completed(){return null==this._completedOverride?this._getDefaultCompleted():this._completedOverride}set completed(t){this._completedOverride=(0,Z.Ig)(t)}_getDefaultCompleted(){return this.stepControl?this.stepControl.valid&&this.interacted:this.interacted}get hasError(){return null==this._customError?this._getDefaultError():this._customError}set hasError(t){this._customError=(0,Z.Ig)(t)}_getDefaultError(){return this.stepControl&&this.stepControl.invalid&&this.interacted}select(){this._stepper.selected=this}reset(){this.interacted=!1,null!=this._completedOverride&&(this._completedOverride=!1),null!=this._customError&&(this._customError=!1),this.stepControl&&this.stepControl.reset()}ngOnChanges(){this._stepper._stateChanged()}_markAsInteracted(){this.interacted||(this.interacted=!0,this.interactedStream.emit(this))}_showError(){var t;return null!==(t=this._stepperOptions.showError)&&void 0!==t?t:null!=this._customError}}return i.\u0275fac=function(t){return new(t||i)(l.Y36((0,l.Gpc)(()=>Or)),l.Y36(Xy,8))},i.\u0275cmp=l.Xpm({type:i,selectors:[["cdk-step"]],contentQueries:function(t,s,a){if(1&t&&l.Suo(a,Wy,5),2&t){let c;l.iGM(c=l.CRH())&&(s.stepLabel=c.first)}},viewQuery:function(t,s){if(1&t&&l.Gf(l.Rgc,7),2&t){let a;l.iGM(a=l.CRH())&&(s.content=a.first)}},inputs:{editable:"editable",optional:"optional",completed:"completed",hasError:"hasError",stepControl:"stepControl",label:"label",errorMessage:"errorMessage",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],state:"state"},outputs:{interactedStream:"interacted"},exportAs:["cdkStep"],features:[l.TTD],ngContentSelectors:Zk,decls:1,vars:0,template:function(t,s){1&t&&(l.F$t(),l.YNc(0,zk,1,0,"ng-template"))},encapsulation:2,changeDetection:0}),i})(),Or=(()=>{class i{constructor(t,s,a,c){this._dir=t,this._changeDetectorRef=s,this._elementRef=a,this._destroyed=new wt.xQ,this.steps=new l.n_E,this._sortedHeaders=new l.n_E,this._linear=!1,this._selectedIndex=0,this.selectionChange=new l.vpe,this._orientation="horizontal",this._groupId=Kk++}get linear(){return this._linear}set linear(t){this._linear=(0,Z.Ig)(t)}get selectedIndex(){return this._selectedIndex}set selectedIndex(t){var s;const a=(0,Z.su)(t);this.steps&&this._steps?(this._isValidIndex(t),null===(s=this.selected)||void 0===s||s._markAsInteracted(),this._selectedIndex!==a&&!this._anyControlsInvalidOrPending(a)&&(a>=this._selectedIndex||this.steps.toArray()[a].editable)&&this._updateSelectedItemIndex(t)):this._selectedIndex=a}get selected(){return this.steps?this.steps.toArray()[this.selectedIndex]:void 0}set selected(t){this.selectedIndex=t&&this.steps?this.steps.toArray().indexOf(t):-1}get orientation(){return this._orientation}set orientation(t){this._orientation=t,this._keyManager&&this._keyManager.withVerticalOrientation("vertical"===t)}ngAfterContentInit(){this._steps.changes.pipe((0,Tn.O)(this._steps),(0,kn.R)(this._destroyed)).subscribe(t=>{this.steps.reset(t.filter(s=>s._stepper===this)),this.steps.notifyOnChanges()})}ngAfterViewInit(){this._stepHeader.changes.pipe((0,Tn.O)(this._stepHeader),(0,kn.R)(this._destroyed)).subscribe(t=>{this._sortedHeaders.reset(t.toArray().sort((s,a)=>s._elementRef.nativeElement.compareDocumentPosition(a._elementRef.nativeElement)&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)),this._sortedHeaders.notifyOnChanges()}),this._keyManager=new Cn.Em(this._sortedHeaders).withWrap().withHomeAndEnd().withVerticalOrientation("vertical"===this._orientation),(this._dir?this._dir.change:(0,Jn.of)()).pipe((0,Tn.O)(this._layoutDirection()),(0,kn.R)(this._destroyed)).subscribe(t=>this._keyManager.withHorizontalOrientation(t)),this._keyManager.updateActiveItem(this._selectedIndex),this.steps.changes.subscribe(()=>{this.selected||(this._selectedIndex=Math.max(this._selectedIndex-1,0))}),this._isValidIndex(this._selectedIndex)||(this._selectedIndex=0)}ngOnDestroy(){this.steps.destroy(),this._sortedHeaders.destroy(),this._destroyed.next(),this._destroyed.complete()}next(){this.selectedIndex=Math.min(this._selectedIndex+1,this.steps.length-1)}previous(){this.selectedIndex=Math.max(this._selectedIndex-1,0)}reset(){this._updateSelectedItemIndex(0),this.steps.forEach(t=>t.reset()),this._stateChanged()}_getStepLabelId(t){return`cdk-step-label-${this._groupId}-${t}`}_getStepContentId(t){return`cdk-step-content-${this._groupId}-${t}`}_stateChanged(){this._changeDetectorRef.markForCheck()}_getAnimationDirection(t){const s=t-this._selectedIndex;return s<0?"rtl"===this._layoutDirection()?"next":"previous":s>0?"rtl"===this._layoutDirection()?"previous":"next":"current"}_getIndicatorType(t,s="number"){const a=this.steps.toArray()[t],c=this._isCurrentStep(t);return a._displayDefaultIndicatorType?this._getDefaultIndicatorLogic(a,c):this._getGuidelineLogic(a,c,s)}_getDefaultIndicatorLogic(t,s){return t._showError()&&t.hasError&&!s?"error":!t.completed||s?"number":t.editable?"edit":"done"}_getGuidelineLogic(t,s,a="number"){return t._showError()&&t.hasError&&!s?"error":t.completed&&!s?"done":t.completed&&s?a:t.editable&&s?"edit":a}_isCurrentStep(t){return this._selectedIndex===t}_getFocusIndex(){return this._keyManager?this._keyManager.activeItemIndex:this._selectedIndex}_updateSelectedItemIndex(t){const s=this.steps.toArray();this.selectionChange.emit({selectedIndex:t,previouslySelectedIndex:this._selectedIndex,selectedStep:s[t],previouslySelectedStep:s[this._selectedIndex]}),this._containsFocus()?this._keyManager.setActiveItem(t):this._keyManager.updateActiveItem(t),this._selectedIndex=t,this._stateChanged()}_onKeydown(t){const s=(0,W.Vb)(t),a=t.keyCode,c=this._keyManager;null==c.activeItemIndex||s||a!==W.L_&&a!==W.K5?c.onKeydown(t):(this.selectedIndex=c.activeItemIndex,t.preventDefault())}_anyControlsInvalidOrPending(t){return!!(this._linear&&t>=0)&&this.steps.toArray().slice(0,t).some(s=>{const a=s.stepControl;return(a?a.invalid||a.pending||!s.interacted:!s.completed)&&!s.optional&&!s._completedOverride})}_layoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_containsFocus(){const t=this._elementRef.nativeElement,s=(0,Ct.ht)();return t===s||t.contains(s)}_isValidIndex(t){return t>-1&&(!this.steps||t<this.steps.length)}}return i.\u0275fac=function(t){return new(t||i)(l.Y36(be.Is,8),l.Y36(l.sBO),l.Y36(l.SBq),l.Y36(J.K0))},i.\u0275dir=l.lG2({type:i,selectors:[["","cdkStepper",""]],contentQueries:function(t,s,a){if(1&t&&(l.Suo(a,Ch,5),l.Suo(a,Qy,5)),2&t){let c;l.iGM(c=l.CRH())&&(s._steps=c),l.iGM(c=l.CRH())&&(s._stepHeader=c)}},inputs:{linear:"linear",selectedIndex:"selectedIndex",selected:"selected",orientation:"orientation"},outputs:{selectionChange:"selectionChange"},exportAs:["cdkStepper"]}),i})(),Jk=(()=>{class i{constructor(t){this._stepper=t,this.type="submit"}_handleClick(){this._stepper.next()}}return i.\u0275fac=function(t){return new(t||i)(l.Y36(Or))},i.\u0275dir=l.lG2({type:i,selectors:[["button","cdkStepperNext",""]],hostVars:1,hostBindings:function(t,s){1&t&&l.NdJ("click",function(){return s._handleClick()}),2&t&&l.Ikx("type",s.type)},inputs:{type:"type"}}),i})(),Qk=(()=>{class i{constructor(t){this._stepper=t,this.type="button"}_handleClick(){this._stepper.previous()}}return i.\u0275fac=function(t){return new(t||i)(l.Y36(Or))},i.\u0275dir=l.lG2({type:i,selectors:[["button","cdkStepperPrevious",""]],hostVars:1,hostBindings:function(t,s){1&t&&l.NdJ("click",function(){return s._handleClick()}),2&t&&l.Ikx("type",s.type)},inputs:{type:"type"}}),i})(),$y=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({imports:[[be.vT]]}),i})();var Q=X(2458),Yt=X(5319),t_=X(3190),Wk=X(8002),e_=X(7519),at=X(7238);function Xk(i,e){if(1&i&&l.GkF(0,8),2&i){const t=l.oxw();l.Q6J("ngTemplateOutlet",t.iconOverrides[t.state])("ngTemplateOutletContext",t._getIconContext())}}function $k(i,e){if(1&i&&(l.TgZ(0,"span"),l._uU(1),l.qZA()),2&i){const t=l.oxw(2);l.xp6(1),l.Oqu(t._getDefaultTextForState(t.state))}}function tD(i,e){if(1&i&&(l.TgZ(0,"span",13),l._uU(1),l.qZA()),2&i){const t=l.oxw(2);l.xp6(1),l.Oqu(t._intl.completedLabel)}}function eD(i,e){if(1&i&&(l.TgZ(0,"span",13),l._uU(1),l.qZA()),2&i){const t=l.oxw(2);l.xp6(1),l.Oqu(t._intl.editableLabel)}}function nD(i,e){if(1&i&&(l.TgZ(0,"mat-icon"),l._uU(1),l.qZA()),2&i){const t=l.oxw(2);l.xp6(1),l.Oqu(t._getDefaultTextForState(t.state))}}function iD(i,e){if(1&i&&(l.ynx(0,9),l.YNc(1,$k,2,1,"span",10),l.YNc(2,tD,2,1,"span",11),l.YNc(3,eD,2,1,"span",11),l.YNc(4,nD,2,1,"mat-icon",12),l.BQk()),2&i){const t=l.oxw();l.Q6J("ngSwitch",t.state),l.xp6(1),l.Q6J("ngSwitchCase","number"),l.xp6(1),l.Q6J("ngIf","done"===t.state),l.xp6(1),l.Q6J("ngIf","edit"===t.state)}}function rD(i,e){if(1&i&&(l.TgZ(0,"div",14),l.GkF(1,15),l.qZA()),2&i){const t=l.oxw();l.xp6(1),l.Q6J("ngTemplateOutlet",t._templateLabel().template)}}function oD(i,e){if(1&i&&(l.TgZ(0,"div",14),l._uU(1),l.qZA()),2&i){const t=l.oxw();l.xp6(1),l.Oqu(t.label)}}function sD(i,e){if(1&i&&(l.TgZ(0,"div",16),l._uU(1),l.qZA()),2&i){const t=l.oxw();l.xp6(1),l.Oqu(t._intl.optionalLabel)}}function aD(i,e){if(1&i&&(l.TgZ(0,"div",17),l._uU(1),l.qZA()),2&i){const t=l.oxw();l.xp6(1),l.Oqu(t.errorMessage)}}function uD(i,e){}function cD(i,e){if(1&i&&(l.Hsn(0),l.YNc(1,uD,0,0,"ng-template",0)),2&i){const t=l.oxw();l.xp6(1),l.Q6J("cdkPortalOutlet",t._portal)}}const lD=["*"];function hD(i,e){1&i&&l._UZ(0,"div",9)}const n_=function(i,e){return{step:i,i:e}};function dD(i,e){if(1&i&&(l.ynx(0),l.GkF(1,7),l.YNc(2,hD,1,0,"div",8),l.BQk()),2&i){const t=e.$implicit,s=e.index,a=e.last;l.oxw(2);const c=l.MAs(4);l.xp6(1),l.Q6J("ngTemplateOutlet",c)("ngTemplateOutletContext",l.WLB(3,n_,t,s)),l.xp6(1),l.Q6J("ngIf",!a)}}function fD(i,e){if(1&i){const t=l.EpF();l.TgZ(0,"div",10),l.NdJ("@horizontalStepTransition.done",function(a){return l.CHM(t),l.oxw(2)._animationDone.next(a)}),l.GkF(1,11),l.qZA()}if(2&i){const t=e.$implicit,s=e.index,a=l.oxw(2);l.Q6J("@horizontalStepTransition",a._getAnimationDirection(s))("id",a._getStepContentId(s)),l.uIk("aria-labelledby",a._getStepLabelId(s))("aria-expanded",a.selectedIndex===s),l.xp6(1),l.Q6J("ngTemplateOutlet",t.content)}}function pD(i,e){if(1&i&&(l.ynx(0),l.TgZ(1,"div",3),l.YNc(2,dD,3,6,"ng-container",4),l.qZA(),l.TgZ(3,"div",5),l.YNc(4,fD,2,5,"div",6),l.qZA(),l.BQk()),2&i){const t=l.oxw();l.xp6(2),l.Q6J("ngForOf",t.steps),l.xp6(2),l.Q6J("ngForOf",t.steps)}}function mD(i,e){if(1&i){const t=l.EpF();l.TgZ(0,"div",13),l.GkF(1,7),l.TgZ(2,"div",14),l.TgZ(3,"div",15),l.NdJ("@verticalStepTransition.done",function(a){return l.CHM(t),l.oxw(2)._animationDone.next(a)}),l.TgZ(4,"div",16),l.GkF(5,11),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&i){const t=e.$implicit,s=e.index,a=e.last,c=l.oxw(2),d=l.MAs(4);l.xp6(1),l.Q6J("ngTemplateOutlet",d)("ngTemplateOutletContext",l.WLB(9,n_,t,s)),l.xp6(1),l.ekj("mat-stepper-vertical-line",!a),l.xp6(1),l.Q6J("@verticalStepTransition",c._getAnimationDirection(s))("id",c._getStepContentId(s)),l.uIk("aria-labelledby",c._getStepLabelId(s))("aria-expanded",c.selectedIndex===s),l.xp6(2),l.Q6J("ngTemplateOutlet",t.content)}}function gD(i,e){if(1&i&&(l.ynx(0),l.YNc(1,mD,6,12,"div",12),l.BQk()),2&i){const t=l.oxw();l.xp6(1),l.Q6J("ngForOf",t.steps)}}function vD(i,e){if(1&i){const t=l.EpF();l.TgZ(0,"mat-step-header",17),l.NdJ("click",function(){return l.CHM(t).step.select()})("keydown",function(a){return l.CHM(t),l.oxw()._onKeydown(a)}),l.qZA()}if(2&i){const t=e.step,s=e.i,a=l.oxw();l.ekj("mat-horizontal-stepper-header","horizontal"===a.orientation)("mat-vertical-stepper-header","vertical"===a.orientation),l.Q6J("tabIndex",a._getFocusIndex()===s?0:-1)("id",a._getStepLabelId(s))("index",s)("state",a._getIndicatorType(s,t.state))("label",t.stepLabel||t.label)("selected",a.selectedIndex===s)("active",a._stepIsNavigable(s,t))("optional",t.optional)("errorMessage",t.errorMessage)("iconOverrides",a._iconOverrides)("disableRipple",a.disableRipple||!a._stepIsNavigable(s,t))("color",t.color||a.color),l.uIk("aria-posinset",s+1)("aria-setsize",a.steps.length)("aria-controls",a._getStepContentId(s))("aria-selected",a.selectedIndex==s)("aria-label",t.ariaLabel||null)("aria-labelledby",!t.ariaLabel&&t.ariaLabelledby?t.ariaLabelledby:null)("aria-disabled",!a._stepIsNavigable(s,t)||null)}}let Th=(()=>{class i extends Wy{}return i.\u0275fac=function(){let e;return function(s){return(e||(e=l.n5z(i)))(s||i)}}(),i.\u0275dir=l.lG2({type:i,selectors:[["","matStepLabel",""]],features:[l.qOj]}),i})(),au=(()=>{class i{constructor(){this.changes=new wt.xQ,this.optionalLabel="Optional",this.completedLabel="Completed",this.editableLabel="Editable"}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=l.Yz7({factory:function(){return new i},token:i,providedIn:"root"}),i})();const _D={provide:au,deps:[[new l.FiY,new l.tp0,au]],useFactory:function(i){return i||new au}},wD=(0,Q.pj)(class extends Qy{constructor(e){super(e)}},"primary");let i_=(()=>{class i extends wD{constructor(t,s,a,c){super(a),this._intl=t,this._focusMonitor=s,this._intlSubscription=t.changes.subscribe(()=>c.markForCheck())}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._intlSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,s){t?this._focusMonitor.focusVia(this._elementRef,t,s):this._elementRef.nativeElement.focus(s)}_stringLabel(){return this.label instanceof Th?null:this.label}_templateLabel(){return this.label instanceof Th?this.label:null}_getHostElement(){return this._elementRef.nativeElement}_getIconContext(){return{index:this.index,active:this.active,optional:this.optional}}_getDefaultTextForState(t){return"number"==t?`${this.index+1}`:"edit"==t?"create":"error"==t?"warning":t}}return i.\u0275fac=function(t){return new(t||i)(l.Y36(au),l.Y36(Cn.tE),l.Y36(l.SBq),l.Y36(l.sBO))},i.\u0275cmp=l.Xpm({type:i,selectors:[["mat-step-header"]],hostAttrs:["role","tab",1,"mat-step-header"],inputs:{color:"color",state:"state",label:"label",errorMessage:"errorMessage",iconOverrides:"iconOverrides",index:"index",selected:"selected",active:"active",optional:"optional",disableRipple:"disableRipple"},features:[l.qOj],decls:10,vars:19,consts:[["matRipple","",1,"mat-step-header-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-step-icon-content",3,"ngSwitch"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngSwitchCase"],[3,"ngSwitch",4,"ngSwitchDefault"],[1,"mat-step-label"],["class","mat-step-text-label",4,"ngIf"],["class","mat-step-optional",4,"ngIf"],["class","mat-step-sub-label-error",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngSwitch"],[4,"ngSwitchCase"],["class","cdk-visually-hidden",4,"ngIf"],[4,"ngSwitchDefault"],[1,"cdk-visually-hidden"],[1,"mat-step-text-label"],[3,"ngTemplateOutlet"],[1,"mat-step-optional"],[1,"mat-step-sub-label-error"]],template:function(t,s){1&t&&(l._UZ(0,"div",0),l.TgZ(1,"div"),l.TgZ(2,"div",1),l.YNc(3,Xk,1,2,"ng-container",2),l.YNc(4,iD,5,4,"ng-container",3),l.qZA(),l.qZA(),l.TgZ(5,"div",4),l.YNc(6,rD,2,1,"div",5),l.YNc(7,oD,2,1,"div",5),l.YNc(8,sD,2,1,"div",6),l.YNc(9,aD,2,1,"div",7),l.qZA()),2&t&&(l.Q6J("matRippleTrigger",s._getHostElement())("matRippleDisabled",s.disableRipple),l.xp6(1),l.Gre("mat-step-icon-state-",s.state," mat-step-icon"),l.ekj("mat-step-icon-selected",s.selected),l.xp6(1),l.Q6J("ngSwitch",!(!s.iconOverrides||!s.iconOverrides[s.state])),l.xp6(1),l.Q6J("ngSwitchCase",!0),l.xp6(2),l.ekj("mat-step-label-active",s.active)("mat-step-label-selected",s.selected)("mat-step-label-error","error"==s.state),l.xp6(1),l.Q6J("ngIf",s._templateLabel()),l.xp6(1),l.Q6J("ngIf",s._stringLabel()),l.xp6(1),l.Q6J("ngIf",s.optional&&"error"!=s.state),l.xp6(1),l.Q6J("ngIf","error"==s.state))},directives:[Q.wG,J.RF,J.n9,J.ED,J.O5,J.tP,es.Hw],styles:[".mat-step-header{overflow:hidden;outline:none;cursor:pointer;position:relative;box-sizing:content-box;-webkit-tap-highlight-color:transparent}.cdk-high-contrast-active .mat-step-header{outline:solid 1px}.cdk-high-contrast-active .mat-step-header.cdk-keyboard-focused,.cdk-high-contrast-active .mat-step-header.cdk-program-focused{outline:solid 3px}.cdk-high-contrast-active .mat-step-header[aria-selected=true] .mat-step-label{text-decoration:underline}.mat-step-optional,.mat-step-sub-label-error{font-size:12px}.mat-step-icon{border-radius:50%;height:24px;width:24px;flex-shrink:0;position:relative}.mat-step-icon-content,.mat-step-icon .mat-icon{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}.mat-step-icon .mat-icon{font-size:16px;height:16px;width:16px}.mat-step-icon-state-error .mat-icon{font-size:24px;height:24px;width:24px}.mat-step-label{display:inline-block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;min-width:50px;vertical-align:middle}.mat-step-text-label{text-overflow:ellipsis;overflow:hidden}.mat-step-header .mat-step-header-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}\n"],encapsulation:2,changeDetection:0}),i})();const r_={horizontalStepTransition:(0,at.X$)("horizontalStepTransition",[(0,at.SB)("previous",(0,at.oB)({transform:"translate3d(-100%, 0, 0)",visibility:"hidden"})),(0,at.SB)("current",(0,at.oB)({transform:"none",visibility:"inherit"})),(0,at.SB)("next",(0,at.oB)({transform:"translate3d(100%, 0, 0)",visibility:"hidden"})),(0,at.eR)("* => *",(0,at.jt)("500ms cubic-bezier(0.35, 0, 0.25, 1)"))]),verticalStepTransition:(0,at.X$)("verticalStepTransition",[(0,at.SB)("previous",(0,at.oB)({height:"0px",visibility:"hidden"})),(0,at.SB)("next",(0,at.oB)({height:"0px",visibility:"hidden"})),(0,at.SB)("current",(0,at.oB)({height:"*",visibility:"inherit"})),(0,at.eR)("* <=> current",(0,at.jt)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])};let bD=(()=>{class i{constructor(t){this.templateRef=t}}return i.\u0275fac=function(t){return new(t||i)(l.Y36(l.Rgc))},i.\u0275dir=l.lG2({type:i,selectors:[["ng-template","matStepperIcon",""]],inputs:{name:["matStepperIcon","name"]}}),i})(),SD=(()=>{class i{constructor(t){this._template=t}}return i.\u0275fac=function(t){return new(t||i)(l.Y36(l.Rgc))},i.\u0275dir=l.lG2({type:i,selectors:[["ng-template","matStepContent",""]]}),i})(),o_=(()=>{class i extends Ch{constructor(t,s,a,c){super(t,c),this._errorStateMatcher=s,this._viewContainerRef=a,this._isSelected=Yt.w.EMPTY}ngAfterContentInit(){this._isSelected=this._stepper.steps.changes.pipe((0,t_.w)(()=>this._stepper.selectionChange.pipe((0,Wk.U)(t=>t.selectedStep===this),(0,Tn.O)(this._stepper.selected===this)))).subscribe(t=>{t&&this._lazyContent&&!this._portal&&(this._portal=new ns(this._lazyContent._template,this._viewContainerRef))})}ngOnDestroy(){this._isSelected.unsubscribe()}isErrorState(t,s){return this._errorStateMatcher.isErrorState(t,s)||!!(t&&t.invalid&&this.interacted)}}return i.\u0275fac=function(t){return new(t||i)(l.Y36((0,l.Gpc)(()=>a_)),l.Y36(Q.rD,4),l.Y36(l.s_b),l.Y36(Xy,8))},i.\u0275cmp=l.Xpm({type:i,selectors:[["mat-step"]],contentQueries:function(t,s,a){if(1&t&&(l.Suo(a,Th,5),l.Suo(a,SD,5)),2&t){let c;l.iGM(c=l.CRH())&&(s.stepLabel=c.first),l.iGM(c=l.CRH())&&(s._lazyContent=c.first)}},inputs:{color:"color"},exportAs:["matStep"],features:[l._Bn([{provide:Q.rD,useExisting:i},{provide:Ch,useExisting:i}]),l.qOj],ngContentSelectors:lD,decls:1,vars:0,consts:[[3,"cdkPortalOutlet"]],template:function(t,s){1&t&&(l.F$t(),l.YNc(0,cD,2,1,"ng-template"))},directives:[is],encapsulation:2,changeDetection:0}),i})(),s_=(()=>{class i extends Or{}return i.\u0275fac=function(){let e;return function(s){return(e||(e=l.n5z(i)))(s||i)}}(),i.\u0275dir=l.lG2({type:i,features:[l.qOj]}),i})(),ID=(()=>{class i extends s_{}return i.\u0275fac=function(){let e;return function(s){return(e||(e=l.n5z(i)))(s||i)}}(),i.\u0275dir=l.lG2({type:i,selectors:[["mat-horizontal-stepper"]],features:[l.qOj]}),i})(),CD=(()=>{class i extends s_{}return i.\u0275fac=function(){let e;return function(s){return(e||(e=l.n5z(i)))(s||i)}}(),i.\u0275dir=l.lG2({type:i,selectors:[["mat-vertical-stepper"]],features:[l.qOj]}),i})(),a_=(()=>{class i extends Or{constructor(t,s,a,c){super(t,s,a,c),this.steps=new l.n_E,this.animationDone=new l.vpe,this.labelPosition="end",this._iconOverrides={},this._animationDone=new wt.xQ;const d=a.nativeElement.nodeName.toLowerCase();this.orientation="mat-vertical-stepper"===d?"vertical":"horizontal"}ngAfterContentInit(){super.ngAfterContentInit(),this._icons.forEach(({name:t,templateRef:s})=>this._iconOverrides[t]=s),this.steps.changes.pipe((0,kn.R)(this._destroyed)).subscribe(()=>{this._stateChanged()}),this._animationDone.pipe((0,e_.x)((t,s)=>t.fromState===s.fromState&&t.toState===s.toState),(0,kn.R)(this._destroyed)).subscribe(t=>{"current"===t.toState&&this.animationDone.emit()})}_stepIsNavigable(t,s){return s.completed||this.selectedIndex===t||!this.linear}}return i.\u0275fac=function(t){return new(t||i)(l.Y36(be.Is,8),l.Y36(l.sBO),l.Y36(l.SBq),l.Y36(J.K0))},i.\u0275cmp=l.Xpm({type:i,selectors:[["mat-stepper"],["mat-vertical-stepper"],["mat-horizontal-stepper"],["","matStepper",""]],contentQueries:function(t,s,a){if(1&t&&(l.Suo(a,o_,5),l.Suo(a,bD,5)),2&t){let c;l.iGM(c=l.CRH())&&(s._steps=c),l.iGM(c=l.CRH())&&(s._icons=c)}},viewQuery:function(t,s){if(1&t&&l.Gf(i_,5),2&t){let a;l.iGM(a=l.CRH())&&(s._stepHeader=a)}},hostAttrs:["role","tablist"],hostVars:9,hostBindings:function(t,s){2&t&&(l.uIk("aria-orientation",s.orientation),l.ekj("mat-stepper-horizontal","horizontal"===s.orientation)("mat-stepper-vertical","vertical"===s.orientation)("mat-stepper-label-position-end","horizontal"===s.orientation&&"end"==s.labelPosition)("mat-stepper-label-position-bottom","horizontal"===s.orientation&&"bottom"==s.labelPosition))},inputs:{selectedIndex:"selectedIndex",labelPosition:"labelPosition",disableRipple:"disableRipple",color:"color"},outputs:{animationDone:"animationDone"},exportAs:["matStepper","matVerticalStepper","matHorizontalStepper"],features:[l._Bn([{provide:Or,useExisting:i},{provide:ID,useExisting:i},{provide:CD,useExisting:i}]),l.qOj],decls:5,vars:3,consts:[[3,"ngSwitch"],[4,"ngSwitchCase"],["stepTemplate",""],[1,"mat-horizontal-stepper-header-container"],[4,"ngFor","ngForOf"],[1,"mat-horizontal-content-container"],["class","mat-horizontal-stepper-content","role","tabpanel",3,"id",4,"ngFor","ngForOf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","mat-stepper-horizontal-line",4,"ngIf"],[1,"mat-stepper-horizontal-line"],["role","tabpanel",1,"mat-horizontal-stepper-content",3,"id"],[3,"ngTemplateOutlet"],["class","mat-step",4,"ngFor","ngForOf"],[1,"mat-step"],[1,"mat-vertical-content-container"],["role","tabpanel",1,"mat-vertical-stepper-content",3,"id"],[1,"mat-vertical-content"],[3,"tabIndex","id","index","state","label","selected","active","optional","errorMessage","iconOverrides","disableRipple","color","click","keydown"]],template:function(t,s){1&t&&(l.ynx(0,0),l.YNc(1,pD,5,2,"ng-container",1),l.YNc(2,gD,2,1,"ng-container",1),l.BQk(),l.YNc(3,vD,1,23,"ng-template",null,2,l.W1O)),2&t&&(l.Q6J("ngSwitch",s.orientation),l.xp6(1),l.Q6J("ngSwitchCase","horizontal"),l.xp6(1),l.Q6J("ngSwitchCase","vertical"))},directives:[J.RF,J.n9,J.sg,J.tP,J.O5,i_],styles:['.mat-stepper-vertical,.mat-stepper-horizontal{display:block}.mat-horizontal-stepper-header-container{white-space:nowrap;display:flex;align-items:center}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header-container{align-items:flex-start}.mat-stepper-horizontal-line{border-top-width:1px;border-top-style:solid;flex:auto;height:0;margin:0 -16px;min-width:32px}.mat-stepper-label-position-bottom .mat-stepper-horizontal-line{margin:0;min-width:0;position:relative}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:first-child)::before,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:last-child)::before,.mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:last-child)::after,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:first-child)::after{border-top-width:1px;border-top-style:solid;content:"";display:inline-block;height:0;position:absolute;width:calc(50% - 20px)}.mat-horizontal-stepper-header{display:flex;height:72px;overflow:hidden;align-items:center;padding:0 24px}.mat-horizontal-stepper-header .mat-step-icon{margin-right:8px;flex:none}[dir=rtl] .mat-horizontal-stepper-header .mat-step-icon{margin-right:0;margin-left:8px}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header{box-sizing:border-box;flex-direction:column;height:auto}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:last-child)::after,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:first-child)::after{right:0}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:first-child)::before,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:last-child)::before{left:0}[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:last-child::before,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:first-child::after{display:none}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header .mat-step-icon{margin-right:0;margin-left:0}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header .mat-step-label{padding:16px 0 0 0;text-align:center;width:100%}.mat-vertical-stepper-header{display:flex;align-items:center;height:24px}.mat-vertical-stepper-header .mat-step-icon{margin-right:12px}[dir=rtl] .mat-vertical-stepper-header .mat-step-icon{margin-right:0;margin-left:12px}.mat-horizontal-stepper-content{outline:0}.mat-horizontal-stepper-content[aria-expanded=false]{height:0;overflow:hidden}.mat-horizontal-content-container{overflow:hidden;padding:0 24px 24px 24px}.cdk-high-contrast-active .mat-horizontal-content-container{outline:solid 1px}.mat-vertical-content-container{margin-left:36px;border:0;position:relative}.cdk-high-contrast-active .mat-vertical-content-container{outline:solid 1px}[dir=rtl] .mat-vertical-content-container{margin-left:0;margin-right:36px}.mat-stepper-vertical-line::before{content:"";position:absolute;left:0;border-left-width:1px;border-left-style:solid}[dir=rtl] .mat-stepper-vertical-line::before{left:auto;right:0}.mat-vertical-stepper-content{overflow:hidden;outline:0}.mat-vertical-content{padding:0 24px 24px 24px}.mat-step:last-child .mat-vertical-content-container{border:none}\n'],encapsulation:2,data:{animation:[r_.horizontalStepTransition,r_.verticalStepTransition]},changeDetection:0}),i})(),TD=(()=>{class i extends Jk{}return i.\u0275fac=function(){let e;return function(s){return(e||(e=l.n5z(i)))(s||i)}}(),i.\u0275dir=l.lG2({type:i,selectors:[["button","matStepperNext",""]],hostAttrs:[1,"mat-stepper-next"],hostVars:1,hostBindings:function(t,s){2&t&&l.Ikx("type",s.type)},inputs:{type:"type"},features:[l.qOj]}),i})(),kD=(()=>{class i extends Qk{}return i.\u0275fac=function(){let e;return function(s){return(e||(e=l.n5z(i)))(s||i)}}(),i.\u0275dir=l.lG2({type:i,selectors:[["button","matStepperPrevious",""]],hostAttrs:[1,"mat-stepper-previous"],hostVars:1,hostBindings:function(t,s){2&t&&l.Ikx("type",s.type)},inputs:{type:"type"},features:[l.qOj]}),i})(),DD=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({providers:[_D,Q.rD],imports:[[Q.BQ,J.ez,Ih,In.ot,$y,es.Ps,Q.si],Q.BQ]}),i})();var ED=X(6237),uu=X(7574);let c_=(()=>{class i{constructor(){this._listeners=[]}notify(t,s){for(let a of this._listeners)a(t,s)}listen(t){return this._listeners.push(t),()=>{this._listeners=this._listeners.filter(s=>t!==s)}}ngOnDestroy(){this._listeners=[]}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=l.Yz7({factory:function(){return new i},token:i,providedIn:"root"}),i})();const RD=["input"],ND=function(i){return{enterDuration:i}},PD=["*"],FD=new l.OlP("mat-radio-default-options",{providedIn:"root",factory:function(){return{color:"accent"}}});let h_=0;const VD={provide:B.JU,useExisting:(0,l.Gpc)(()=>m_),multi:!0};class d_{constructor(e,t){this.source=e,this.value=t}}const f_=new l.OlP("MatRadioGroup");let p_=(()=>{class i{constructor(t){this._changeDetector=t,this._value=null,this._name="mat-radio-group-"+h_++,this._selected=null,this._isInitialized=!1,this._labelPosition="after",this._disabled=!1,this._required=!1,this._controlValueAccessorChangeFn=()=>{},this.onTouched=()=>{},this.change=new l.vpe}get name(){return this._name}set name(t){this._name=t,this._updateRadioButtonNames()}get labelPosition(){return this._labelPosition}set labelPosition(t){this._labelPosition="before"===t?"before":"after",this._markRadiosForCheck()}get value(){return this._value}set value(t){this._value!==t&&(this._value=t,this._updateSelectedRadioFromValue(),this._checkSelectedRadioButton())}_checkSelectedRadioButton(){this._selected&&!this._selected.checked&&(this._selected.checked=!0)}get selected(){return this._selected}set selected(t){this._selected=t,this.value=t?t.value:null,this._checkSelectedRadioButton()}get disabled(){return this._disabled}set disabled(t){this._disabled=(0,Z.Ig)(t),this._markRadiosForCheck()}get required(){return this._required}set required(t){this._required=(0,Z.Ig)(t),this._markRadiosForCheck()}ngAfterContentInit(){this._isInitialized=!0}_touch(){this.onTouched&&this.onTouched()}_updateRadioButtonNames(){this._radios&&this._radios.forEach(t=>{t.name=this.name,t._markForCheck()})}_updateSelectedRadioFromValue(){this._radios&&(null===this._selected||this._selected.value!==this._value)&&(this._selected=null,this._radios.forEach(s=>{s.checked=this.value===s.value,s.checked&&(this._selected=s)}))}_emitChangeEvent(){this._isInitialized&&this.change.emit(new d_(this._selected,this._value))}_markRadiosForCheck(){this._radios&&this._radios.forEach(t=>t._markForCheck())}writeValue(t){this.value=t,this._changeDetector.markForCheck()}registerOnChange(t){this._controlValueAccessorChangeFn=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.disabled=t,this._changeDetector.markForCheck()}}return i.\u0275fac=function(t){return new(t||i)(l.Y36(l.sBO))},i.\u0275dir=l.lG2({type:i,inputs:{name:"name",labelPosition:"labelPosition",value:"value",selected:"selected",disabled:"disabled",required:"required",color:"color"},outputs:{change:"change"}}),i})(),m_=(()=>{class i extends p_{}return i.\u0275fac=function(){let e;return function(s){return(e||(e=l.n5z(i)))(s||i)}}(),i.\u0275dir=l.lG2({type:i,selectors:[["mat-radio-group"]],contentQueries:function(t,s,a){if(1&t&&l.Suo(a,g_,5),2&t){let c;l.iGM(c=l.CRH())&&(s._radios=c)}},hostAttrs:["role","radiogroup",1,"mat-radio-group"],exportAs:["matRadioGroup"],features:[l._Bn([VD,{provide:f_,useExisting:i}]),l.qOj]}),i})();class BD{constructor(e){this._elementRef=e}}const qD=(0,Q.Kr)((0,Q.sb)(BD));let UD=(()=>{class i extends qD{constructor(t,s,a,c,d,p,m,v){super(s),this._changeDetector=a,this._focusMonitor=c,this._radioDispatcher=d,this._providerOverride=m,this._uniqueId="mat-radio-"+ ++h_,this.id=this._uniqueId,this.change=new l.vpe,this._checked=!1,this._value=null,this._removeUniqueSelectionListener=()=>{},this.radioGroup=t,this._noopAnimations="NoopAnimations"===p,v&&(this.tabIndex=(0,Z.su)(v,0)),this._removeUniqueSelectionListener=d.listen((_,b)=>{_!==this.id&&b===this.name&&(this.checked=!1)})}get checked(){return this._checked}set checked(t){const s=(0,Z.Ig)(t);this._checked!==s&&(this._checked=s,s&&this.radioGroup&&this.radioGroup.value!==this.value?this.radioGroup.selected=this:!s&&this.radioGroup&&this.radioGroup.value===this.value&&(this.radioGroup.selected=null),s&&this._radioDispatcher.notify(this.id,this.name),this._changeDetector.markForCheck())}get value(){return this._value}set value(t){this._value!==t&&(this._value=t,null!==this.radioGroup&&(this.checked||(this.checked=this.radioGroup.value===t),this.checked&&(this.radioGroup.selected=this)))}get labelPosition(){return this._labelPosition||this.radioGroup&&this.radioGroup.labelPosition||"after"}set labelPosition(t){this._labelPosition=t}get disabled(){return this._disabled||null!==this.radioGroup&&this.radioGroup.disabled}set disabled(t){this._setDisabled((0,Z.Ig)(t))}get required(){return this._required||this.radioGroup&&this.radioGroup.required}set required(t){this._required=(0,Z.Ig)(t)}get color(){return this._color||this.radioGroup&&this.radioGroup.color||this._providerOverride&&this._providerOverride.color||"accent"}set color(t){this._color=t}get inputId(){return`${this.id||this._uniqueId}-input`}focus(t,s){s?this._focusMonitor.focusVia(this._inputElement,s,t):this._inputElement.nativeElement.focus(t)}_markForCheck(){this._changeDetector.markForCheck()}ngOnInit(){this.radioGroup&&(this.checked=this.radioGroup.value===this._value,this.checked&&(this.radioGroup.selected=this),this.name=this.radioGroup.name)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{!t&&this.radioGroup&&this.radioGroup._touch()})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._removeUniqueSelectionListener()}_emitChangeEvent(){this.change.emit(new d_(this,this._value))}_isRippleDisabled(){return this.disableRipple||this.disabled}_onInputClick(t){t.stopPropagation()}_onInputInteraction(t){if(t.stopPropagation(),!this.checked&&!this.disabled){const s=this.radioGroup&&this.value!==this.radioGroup.value;this.checked=!0,this._emitChangeEvent(),this.radioGroup&&(this.radioGroup._controlValueAccessorChangeFn(this.value),s&&this.radioGroup._emitChangeEvent())}}_setDisabled(t){this._disabled!==t&&(this._disabled=t,this._changeDetector.markForCheck())}}return i.\u0275fac=function(t){return new(t||i)(l.Y36(p_),l.Y36(l.SBq),l.Y36(l.sBO),l.Y36(Cn.tE),l.Y36(c_),l.Y36(String),l.Y36(void 0),l.Y36(String))},i.\u0275dir=l.lG2({type:i,viewQuery:function(t,s){if(1&t&&l.Gf(RD,5),2&t){let a;l.iGM(a=l.CRH())&&(s._inputElement=a.first)}},inputs:{id:"id",checked:"checked",value:"value",labelPosition:"labelPosition",disabled:"disabled",required:"required",color:"color",name:"name",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"]},outputs:{change:"change"},features:[l.qOj]}),i})(),g_=(()=>{class i extends UD{constructor(t,s,a,c,d,p,m,v){super(t,s,a,c,d,p,m,v)}}return i.\u0275fac=function(t){return new(t||i)(l.Y36(f_,8),l.Y36(l.SBq),l.Y36(l.sBO),l.Y36(Cn.tE),l.Y36(c_),l.Y36(ED.Qb,8),l.Y36(FD,8),l.$8M("tabindex"))},i.\u0275cmp=l.Xpm({type:i,selectors:[["mat-radio-button"]],hostAttrs:[1,"mat-radio-button"],hostVars:17,hostBindings:function(t,s){1&t&&l.NdJ("focus",function(){return s._inputElement.nativeElement.focus()}),2&t&&(l.uIk("tabindex",null)("id",s.id)("aria-label",null)("aria-labelledby",null)("aria-describedby",null),l.ekj("mat-radio-checked",s.checked)("mat-radio-disabled",s.disabled)("_mat-animation-noopable",s._noopAnimations)("mat-primary","primary"===s.color)("mat-accent","accent"===s.color)("mat-warn","warn"===s.color))},inputs:{disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matRadioButton"],features:[l.qOj],ngContentSelectors:PD,decls:13,vars:20,consts:[[1,"mat-radio-label"],["label",""],[1,"mat-radio-container"],[1,"mat-radio-outer-circle"],[1,"mat-radio-inner-circle"],["type","radio",1,"mat-radio-input","cdk-visually-hidden",3,"id","checked","disabled","tabIndex","required","change","click"],["input",""],["mat-ripple","",1,"mat-radio-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered","matRippleRadius","matRippleAnimation"],[1,"mat-ripple-element","mat-radio-persistent-ripple"],[1,"mat-radio-label-content"],[2,"display","none"]],template:function(t,s){if(1&t&&(l.F$t(),l.TgZ(0,"label",0,1),l.TgZ(2,"span",2),l._UZ(3,"span",3),l._UZ(4,"span",4),l.TgZ(5,"input",5,6),l.NdJ("change",function(c){return s._onInputInteraction(c)})("click",function(c){return s._onInputClick(c)}),l.qZA(),l.TgZ(7,"span",7),l._UZ(8,"span",8),l.qZA(),l.qZA(),l.TgZ(9,"span",9),l.TgZ(10,"span",10),l._uU(11,"\xa0"),l.qZA(),l.Hsn(12),l.qZA(),l.qZA()),2&t){const a=l.MAs(1);l.uIk("for",s.inputId),l.xp6(5),l.Q6J("id",s.inputId)("checked",s.checked)("disabled",s.disabled)("tabIndex",s.tabIndex)("required",s.required),l.uIk("name",s.name)("value",s.value)("aria-label",s.ariaLabel)("aria-labelledby",s.ariaLabelledby)("aria-describedby",s.ariaDescribedby),l.xp6(2),l.Q6J("matRippleTrigger",a)("matRippleDisabled",s._isRippleDisabled())("matRippleCentered",!0)("matRippleRadius",20)("matRippleAnimation",l.VKq(18,ND,s._noopAnimations?0:150)),l.xp6(2),l.ekj("mat-radio-label-before","before"==s.labelPosition)}},directives:[Q.wG],styles:[".mat-radio-button{display:inline-block;-webkit-tap-highlight-color:transparent;outline:0}.mat-radio-label{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;display:inline-flex;align-items:center;white-space:nowrap;vertical-align:middle;width:100%}.mat-radio-container{box-sizing:border-box;display:inline-block;position:relative;width:20px;height:20px;flex-shrink:0}.mat-radio-outer-circle{box-sizing:border-box;display:block;height:20px;left:0;position:absolute;top:0;transition:border-color ease 280ms;width:20px;border-width:2px;border-style:solid;border-radius:50%}._mat-animation-noopable .mat-radio-outer-circle{transition:none}.mat-radio-inner-circle{border-radius:50%;box-sizing:border-box;display:block;height:20px;left:0;position:absolute;top:0;opacity:0;transition:transform ease 280ms,background-color ease 280ms,opacity linear 1ms 280ms;width:20px;transform:scale(0.001);-webkit-print-color-adjust:exact;color-adjust:exact}.mat-radio-checked .mat-radio-inner-circle{transform:scale(0.5);opacity:1;transition:transform ease 280ms,background-color ease 280ms}.cdk-high-contrast-active .mat-radio-checked .mat-radio-inner-circle{border:solid 10px}._mat-animation-noopable .mat-radio-inner-circle{transition:none}.mat-radio-label-content{-webkit-user-select:auto;-moz-user-select:auto;-ms-user-select:auto;user-select:auto;display:inline-block;order:0;line-height:inherit;padding-left:8px;padding-right:0}[dir=rtl] .mat-radio-label-content{padding-right:8px;padding-left:0}.mat-radio-label-content.mat-radio-label-before{order:-1;padding-left:0;padding-right:8px}[dir=rtl] .mat-radio-label-content.mat-radio-label-before{padding-right:0;padding-left:8px}.mat-radio-disabled,.mat-radio-disabled .mat-radio-label{cursor:default}.mat-radio-button .mat-radio-ripple{position:absolute;left:calc(50% - 20px);top:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-radio-button .mat-radio-ripple .mat-ripple-element:not(.mat-radio-persistent-ripple){opacity:.16}.mat-radio-persistent-ripple{width:100%;height:100%;transform:none;top:0;left:0}.mat-radio-container:hover .mat-radio-persistent-ripple{opacity:.04}.mat-radio-button:not(.mat-radio-disabled).cdk-keyboard-focused .mat-radio-persistent-ripple,.mat-radio-button:not(.mat-radio-disabled).cdk-program-focused .mat-radio-persistent-ripple{opacity:.12}.mat-radio-persistent-ripple,.mat-radio-disabled .mat-radio-container:hover .mat-radio-persistent-ripple{opacity:0}@media(hover: none){.mat-radio-container:hover .mat-radio-persistent-ripple{display:none}}.mat-radio-input{bottom:0;left:50%}.cdk-high-contrast-active .mat-radio-button:not(.mat-radio-disabled).cdk-keyboard-focused .mat-radio-ripple,.cdk-high-contrast-active .mat-radio-button:not(.mat-radio-disabled).cdk-program-focused .mat-radio-ripple{outline:solid 3px}.cdk-high-contrast-active .mat-radio-disabled{opacity:.5}\n"],encapsulation:2,changeDetection:0}),i})(),jD=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({imports:[[Q.si,Q.BQ],Q.BQ]}),i})();var v_=X(2759),kh=X(6465),Dh=X(6102);new class extends Dh.v{flush(e){this.active=!0,this.scheduled=void 0;const{actions:t}=this;let s,a=-1,c=t.length;e=e||t.shift();do{if(s=e.execute(e.state,e.delay))break}while(++a<c&&(e=t.shift()));if(this.active=!1,s){for(;++a<c&&(e=t.shift());)e.unsubscribe();throw s}}}(class extends kh.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,s=0){return null!==s&&s>0?super.requestAsyncId(e,t,s):(e.actions.push(this),e.scheduled||(e.scheduled=requestAnimationFrame(()=>e.flush(null))))}recycleAsyncId(e,t,s=0){if(null!==s&&s>0||null===s&&this.delay>0)return super.recycleAsyncId(e,t,s);0===e.actions.length&&(cancelAnimationFrame(t),e.scheduled=void 0)}});let zD=1;const ZD=Promise.resolve(),cu={};function y_(i){return i in cu&&(delete cu[i],!0)}const __={setImmediate(i){const e=zD++;return cu[e]=!0,ZD.then(()=>y_(e)&&i()),e},clearImmediate(i){y_(i)}};new class extends Dh.v{flush(e){this.active=!0,this.scheduled=void 0;const{actions:t}=this;let s,a=-1,c=t.length;e=e||t.shift();do{if(s=e.execute(e.state,e.delay))break}while(++a<c&&(e=t.shift()));if(this.active=!1,s){for(;++a<c&&(e=t.shift());)e.unsubscribe();throw s}}}(class extends kh.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,s=0){return null!==s&&s>0?super.requestAsyncId(e,t,s):(e.actions.push(this),e.scheduled||(e.scheduled=__.setImmediate(e.flush.bind(e,null))))}recycleAsyncId(e,t,s=0){if(null!==s&&s>0||null===s&&this.delay>0)return super.recycleAsyncId(e,t,s);0===e.actions.length&&(__.clearImmediate(t),e.scheduled=void 0)}});var Eh=X(5124),w_=X(5435);X(7393),new class extends Dh.v{}(class extends kh.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,s=0){return null!==s&&s>0||null===s&&this.delay>0?super.requestAsyncId(e,t,s):e.flush(this)}});var iE=X(9193),rE=X(205);class qe{constructor(e,t,s){this.kind=e,this.value=t,this.error=s,this.hasValue="N"===e}observe(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}do(e,t,s){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return s&&s()}}accept(e,t,s){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,s)}toObservable(){switch(this.kind){case"N":return(0,Jn.of)(this.value);case"E":return(0,rE._)(this.error);case"C":return(0,iE.c)()}throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new qe("N",e):qe.undefinedValueNotification}static createError(e){return new qe("E",void 0,e)}static createComplete(){return qe.completeNotification}}qe.completeNotification=new qe("C"),qe.undefinedValueNotification=new qe("N",void 0),X(7971),X(8858);let hu=(()=>{class i{constructor(t,s,a){this._ngZone=t,this._platform=s,this._scrolled=new wt.xQ,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=a}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const s=this.scrollContainers.get(t);s&&(s.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new uu.y(s=>{this._globalSubscription||this._addGlobalListener();const a=t>0?this._scrolled.pipe((0,Eh.e)(t)).subscribe(s):this._scrolled.subscribe(s);return this._scrolledCount++,()=>{a.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,Jn.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,s)=>this.deregister(s)),this._scrolled.complete()}ancestorScrolled(t,s){const a=this.getAncestorScrollContainers(t);return this.scrolled(s).pipe((0,w_.h)(c=>!c||a.indexOf(c)>-1))}getAncestorScrollContainers(t){const s=[];return this.scrollContainers.forEach((a,c)=>{this._scrollableContainsElement(c,t)&&s.push(c)}),s}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,s){let a=(0,Z.fI)(s),c=t.getElementRef().nativeElement;do{if(a==c)return!0}while(a=a.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{const t=this._getWindow();return(0,v_.R)(t.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return i.\u0275fac=function(t){return new(t||i)(l.LFG(l.R0b),l.LFG(Ct.t4),l.LFG(J.K0,8))},i.\u0275prov=l.Yz7({factory:function(){return new i(l.LFG(l.R0b),l.LFG(Ct.t4),l.LFG(J.K0,8))},token:i,providedIn:"root"}),i})(),rs=(()=>{class i{constructor(t,s,a){this._platform=t,this._change=new wt.xQ,this._changeListener=c=>{this._change.next(c)},this._document=a,s.runOutsideAngular(()=>{if(t.isBrowser){const c=this._getWindow();c.addEventListener("resize",this._changeListener),c.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:s,height:a}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+a,right:t.left+s,height:a,width:s}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,s=this._getWindow(),a=t.documentElement,c=a.getBoundingClientRect();return{top:-c.top||t.body.scrollTop||s.scrollY||a.scrollTop||0,left:-c.left||t.body.scrollLeft||s.scrollX||a.scrollLeft||0}}change(t=20){return t>0?this._change.pipe((0,Eh.e)(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return i.\u0275fac=function(t){return new(t||i)(l.LFG(Ct.t4),l.LFG(l.R0b),l.LFG(J.K0,8))},i.\u0275prov=l.Yz7({factory:function(){return new i(l.LFG(Ct.t4),l.LFG(l.R0b),l.LFG(J.K0,8))},token:i,providedIn:"root"}),i})(),xh=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({}),i})(),C_=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({imports:[[be.vT,Ct.ud,xh],be.vT,xh]}),i})();var os=X(6682),du=X(5257);const T_=(0,Ct.Mq)();class TE{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=(0,Z.HM)(-this._previousScrollPosition.left),e.style.top=(0,Z.HM)(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,s=e.style,a=this._document.body.style,c=s.scrollBehavior||"",d=a.scrollBehavior||"";this._isEnabled=!1,s.left=this._previousHTMLStyles.left,s.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),T_&&(s.scrollBehavior=a.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),T_&&(s.scrollBehavior=c,a.scrollBehavior=d)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,s=this._viewportRuler.getViewportSize();return t.scrollHeight>s.height||t.scrollWidth>s.width}}class kE{constructor(e,t,s,a){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=s,this._config=a,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class k_{enable(){}disable(){}attach(){}}function Mh(i,e){return e.some(t=>i.bottom<t.top||i.top>t.bottom||i.right<t.left||i.left>t.right)}function D_(i,e){return e.some(t=>i.top<t.top||i.bottom>t.bottom||i.left<t.left||i.right>t.right)}class DE{constructor(e,t,s,a){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=s,this._config=a,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:s,height:a}=this._viewportRuler.getViewportSize();Mh(t,[{width:s,height:a,bottom:a,right:s,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let EE=(()=>{class i{constructor(t,s,a,c){this._scrollDispatcher=t,this._viewportRuler=s,this._ngZone=a,this.noop=()=>new k_,this.close=d=>new kE(this._scrollDispatcher,this._ngZone,this._viewportRuler,d),this.block=()=>new TE(this._viewportRuler,this._document),this.reposition=d=>new DE(this._scrollDispatcher,this._viewportRuler,this._ngZone,d),this._document=c}}return i.\u0275fac=function(t){return new(t||i)(l.LFG(hu),l.LFG(rs),l.LFG(l.R0b),l.LFG(J.K0))},i.\u0275prov=l.Yz7({factory:function(){return new i(l.LFG(hu),l.LFG(rs),l.LFG(l.R0b),l.LFG(J.K0))},token:i,providedIn:"root"}),i})();class Oh{constructor(e){if(this.scrollStrategy=new k_,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const s of t)void 0!==e[s]&&(this[s]=e[s])}}}class AE{constructor(e,t,s,a,c){this.offsetX=s,this.offsetY=a,this.panelClass=c,this.originX=e.originX,this.originY=e.originY,this.overlayX=t.overlayX,this.overlayY=t.overlayY}}class xE{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let E_=(()=>{class i{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const s=this._attachedOverlays.indexOf(t);s>-1&&this._attachedOverlays.splice(s,1),0===this._attachedOverlays.length&&this.detach()}}return i.\u0275fac=function(t){return new(t||i)(l.LFG(J.K0))},i.\u0275prov=l.Yz7({factory:function(){return new i(l.LFG(J.K0))},token:i,providedIn:"root"}),i})(),ME=(()=>{class i extends E_{constructor(t){super(t),this._keydownListener=s=>{const a=this._attachedOverlays;for(let c=a.length-1;c>-1;c--)if(a[c]._keydownEvents.observers.length>0){a[c]._keydownEvents.next(s);break}}}add(t){super.add(t),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return i.\u0275fac=function(t){return new(t||i)(l.LFG(J.K0))},i.\u0275prov=l.Yz7({factory:function(){return new i(l.LFG(J.K0))},token:i,providedIn:"root"}),i})(),OE=(()=>{class i extends E_{constructor(t,s){super(t),this._platform=s,this._cursorStyleIsSet=!1,this._pointerDownListener=a=>{this._pointerDownEventTarget=(0,Ct.sA)(a)},this._clickListener=a=>{const c=(0,Ct.sA)(a),d="click"===a.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:c;this._pointerDownEventTarget=null;const p=this._attachedOverlays.slice();for(let m=p.length-1;m>-1;m--){const v=p[m];if(!(v._outsidePointerEvents.observers.length<1)&&v.hasAttached()){if(v.overlayElement.contains(c)||v.overlayElement.contains(d))break;v._outsidePointerEvents.next(a)}}}}add(t){if(super.add(t),!this._isAttached){const s=this._document.body;s.addEventListener("pointerdown",this._pointerDownListener,!0),s.addEventListener("click",this._clickListener,!0),s.addEventListener("auxclick",this._clickListener,!0),s.addEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=s.style.cursor,s.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}}return i.\u0275fac=function(t){return new(t||i)(l.LFG(J.K0),l.LFG(Ct.t4))},i.\u0275prov=l.Yz7({factory:function(){return new i(l.LFG(J.K0),l.LFG(Ct.t4))},token:i,providedIn:"root"}),i})(),Rh=(()=>{class i{constructor(t,s){this._platform=s,this._document=t}ngOnDestroy(){const t=this._containerElement;t&&t.parentNode&&t.parentNode.removeChild(t)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||(0,Ct.Oy)()){const a=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let c=0;c<a.length;c++)a[c].parentNode.removeChild(a[c])}const s=this._document.createElement("div");s.classList.add(t),(0,Ct.Oy)()?s.setAttribute("platform","test"):this._platform.isBrowser||s.setAttribute("platform","server"),this._document.body.appendChild(s),this._containerElement=s}}return i.\u0275fac=function(t){return new(t||i)(l.LFG(J.K0),l.LFG(Ct.t4))},i.\u0275prov=l.Yz7({factory:function(){return new i(l.LFG(J.K0),l.LFG(Ct.t4))},token:i,providedIn:"root"}),i})();class RE{constructor(e,t,s,a,c,d,p,m,v){this._portalOutlet=e,this._host=t,this._pane=s,this._config=a,this._ngZone=c,this._keyboardDispatcher=d,this._document=p,this._location=m,this._outsideClickDispatcher=v,this._backdropElement=null,this._backdropClick=new wt.xQ,this._attachments=new wt.xQ,this._detachments=new wt.xQ,this._locationChanges=Yt.w.EMPTY,this._backdropClickHandler=_=>this._backdropClick.next(_),this._keydownEvents=new wt.xQ,this._outsidePointerEvents=new wt.xQ,a.scrollStrategy&&(this._scrollStrategy=a.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=a.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){let t=this._portalOutlet.attach(e);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,du.q)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host&&this._host.parentNode&&(this._host.parentNode.removeChild(this._host),this._host=null),this._previousHostParent=this._pane=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=Object.assign(Object.assign({},this._config),e),this._updateElementSize()}setDirection(e){this._config=Object.assign(Object.assign({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=(0,Z.HM)(this._config.width),e.height=(0,Z.HM)(this._config.height),e.minWidth=(0,Z.HM)(this._config.minWidth),e.minHeight=(0,Z.HM)(this._config.minHeight),e.maxWidth=(0,Z.HM)(this._config.maxWidth),e.maxHeight=(0,Z.HM)(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(!e)return;let t;const s=()=>{e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",s),this._disposeBackdrop(e)),this._config.backdropClass&&this._toggleClasses(e,this._config.backdropClass,!1),clearTimeout(t)};e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",s)}),e.style.pointerEvents="none",t=this._ngZone.runOutsideAngular(()=>setTimeout(s,500))}_toggleClasses(e,t,s){const a=e.classList;(0,Z.Eq)(t).forEach(c=>{c&&(s?a.add(c):a.remove(c))})}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe((0,kn.R)((0,os.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._previousHostParent.removeChild(this._host)),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.parentNode&&e.parentNode.removeChild(e),this._backdropElement===e&&(this._backdropElement=null))}}const A_="cdk-overlay-connected-position-bounding-box",NE=/([A-Za-z%]+)$/;class Nh{constructor(e,t,s,a,c){this._viewportRuler=t,this._document=s,this._platform=a,this._overlayContainer=c,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new wt.xQ,this._resizeSubscription=Yt.w.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){this._validatePositions(),e.hostElement.classList.add(A_),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const e=this._originRect,t=this._overlayRect,s=this._viewportRect,a=[];let c;for(let d of this._preferredPositions){let p=this._getOriginPoint(e,d),m=this._getOverlayPoint(p,t,d),v=this._getOverlayFit(m,t,s,d);if(v.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(d,p);this._canFitWithFlexibleDimensions(v,m,s)?a.push({position:d,origin:p,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(p,d)}):(!c||c.overlayFit.visibleArea<v.visibleArea)&&(c={overlayFit:v,overlayPoint:m,originPoint:p,position:d,overlayRect:t})}if(a.length){let d=null,p=-1;for(const m of a){const v=m.boundingBoxRect.width*m.boundingBoxRect.height*(m.position.weight||1);v>p&&(p=v,d=m)}return this._isPushed=!1,void this._applyPosition(d.position,d.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(c.position,c.originPoint);this._applyPosition(c.position,c.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Ai(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(A_),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const e=this._lastPosition||this._preferredPositions[0],t=this._getOriginPoint(this._originRect,e);this._applyPosition(e,t)}}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t){let s,a;if("center"==t.originX)s=e.left+e.width/2;else{const c=this._isRtl()?e.right:e.left,d=this._isRtl()?e.left:e.right;s="start"==t.originX?c:d}return a="center"==t.originY?e.top+e.height/2:"top"==t.originY?e.top:e.bottom,{x:s,y:a}}_getOverlayPoint(e,t,s){let a,c;return a="center"==s.overlayX?-t.width/2:"start"===s.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,c="center"==s.overlayY?-t.height/2:"top"==s.overlayY?0:-t.height,{x:e.x+a,y:e.y+c}}_getOverlayFit(e,t,s,a){const c=M_(t);let{x:d,y:p}=e,m=this._getOffset(a,"x"),v=this._getOffset(a,"y");m&&(d+=m),v&&(p+=v);let I=0-p,k=p+c.height-s.height,T=this._subtractOverflows(c.width,0-d,d+c.width-s.width),E=this._subtractOverflows(c.height,I,k),M=T*E;return{visibleArea:M,isCompletelyWithinViewport:c.width*c.height===M,fitsInViewportVertically:E===c.height,fitsInViewportHorizontally:T==c.width}}_canFitWithFlexibleDimensions(e,t,s){if(this._hasFlexibleDimensions){const a=s.bottom-t.y,c=s.right-t.x,d=x_(this._overlayRef.getConfig().minHeight),p=x_(this._overlayRef.getConfig().minWidth),v=e.fitsInViewportHorizontally||null!=p&&p<=c;return(e.fitsInViewportVertically||null!=d&&d<=a)&&v}return!1}_pushOverlayOnScreen(e,t,s){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const a=M_(t),c=this._viewportRect,d=Math.max(e.x+a.width-c.width,0),p=Math.max(e.y+a.height-c.height,0),m=Math.max(c.top-s.top-e.y,0),v=Math.max(c.left-s.left-e.x,0);let _=0,b=0;return _=a.width<=c.width?v||-d:e.x<this._viewportMargin?c.left-s.left-e.x:0,b=a.height<=c.height?m||-p:e.y<this._viewportMargin?c.top-s.top-e.y:0,this._previousPushAmount={x:_,y:b},{x:e.x+_,y:e.y+b}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const s=this._getScrollVisibility(),a=new xE(e,s);this._positionChanges.next(a)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let s,a=e.overlayY;s="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let c=0;c<t.length;c++)t[c].style.transformOrigin=`${s} ${a}`}_calculateBoundingBoxRect(e,t){const s=this._viewportRect,a=this._isRtl();let c,d,p,_,b,I;if("top"===t.overlayY)d=e.y,c=s.height-d+this._viewportMargin;else if("bottom"===t.overlayY)p=s.height-e.y+2*this._viewportMargin,c=s.height-p+this._viewportMargin;else{const k=Math.min(s.bottom-e.y+s.top,e.y),T=this._lastBoundingBoxSize.height;c=2*k,d=e.y-k,c>T&&!this._isInitialRender&&!this._growAfterOpen&&(d=e.y-T/2)}if("end"===t.overlayX&&!a||"start"===t.overlayX&&a)I=s.width-e.x+this._viewportMargin,_=e.x-this._viewportMargin;else if("start"===t.overlayX&&!a||"end"===t.overlayX&&a)b=e.x,_=s.right-e.x;else{const k=Math.min(s.right-e.x+s.left,e.x),T=this._lastBoundingBoxSize.width;_=2*k,b=e.x-k,_>T&&!this._isInitialRender&&!this._growAfterOpen&&(b=e.x-T/2)}return{top:d,left:b,bottom:p,right:I,width:_,height:c}}_setBoundingBoxStyles(e,t){const s=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(s.height=Math.min(s.height,this._lastBoundingBoxSize.height),s.width=Math.min(s.width,this._lastBoundingBoxSize.width));const a={};if(this._hasExactPosition())a.top=a.left="0",a.bottom=a.right=a.maxHeight=a.maxWidth="",a.width=a.height="100%";else{const c=this._overlayRef.getConfig().maxHeight,d=this._overlayRef.getConfig().maxWidth;a.height=(0,Z.HM)(s.height),a.top=(0,Z.HM)(s.top),a.bottom=(0,Z.HM)(s.bottom),a.width=(0,Z.HM)(s.width),a.left=(0,Z.HM)(s.left),a.right=(0,Z.HM)(s.right),a.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",a.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",c&&(a.maxHeight=(0,Z.HM)(c)),d&&(a.maxWidth=(0,Z.HM)(d))}this._lastBoundingBoxSize=s,Ai(this._boundingBox.style,a)}_resetBoundingBoxStyles(){Ai(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Ai(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const s={},a=this._hasExactPosition(),c=this._hasFlexibleDimensions,d=this._overlayRef.getConfig();if(a){const _=this._viewportRuler.getViewportScrollPosition();Ai(s,this._getExactOverlayY(t,e,_)),Ai(s,this._getExactOverlayX(t,e,_))}else s.position="static";let p="",m=this._getOffset(t,"x"),v=this._getOffset(t,"y");m&&(p+=`translateX(${m}px) `),v&&(p+=`translateY(${v}px)`),s.transform=p.trim(),d.maxHeight&&(a?s.maxHeight=(0,Z.HM)(d.maxHeight):c&&(s.maxHeight="")),d.maxWidth&&(a?s.maxWidth=(0,Z.HM)(d.maxWidth):c&&(s.maxWidth="")),Ai(this._pane.style,s)}_getExactOverlayY(e,t,s){let a={top:"",bottom:""},c=this._getOverlayPoint(t,this._overlayRect,e);this._isPushed&&(c=this._pushOverlayOnScreen(c,this._overlayRect,s));let d=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return c.y-=d,"bottom"===e.overlayY?a.bottom=this._document.documentElement.clientHeight-(c.y+this._overlayRect.height)+"px":a.top=(0,Z.HM)(c.y),a}_getExactOverlayX(e,t,s){let d,a={left:"",right:""},c=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(c=this._pushOverlayOnScreen(c,this._overlayRect,s)),d=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===d?a.right=this._document.documentElement.clientWidth-(c.x+this._overlayRect.width)+"px":a.left=(0,Z.HM)(c.x),a}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),s=this._scrollables.map(a=>a.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:D_(e,s),isOriginOutsideView:Mh(e,s),isOverlayClipped:D_(t,s),isOverlayOutsideView:Mh(t,s)}}_subtractOverflows(e,...t){return t.reduce((s,a)=>s-Math.max(a,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,s=this._viewportRuler.getViewportScrollPosition();return{top:s.top+this._viewportMargin,left:s.left+this._viewportMargin,right:s.left+e-this._viewportMargin,bottom:s.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&(0,Z.Eq)(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof l.SBq)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,s=e.height||0;return{top:e.y,bottom:e.y+s,left:e.x,right:e.x+t,height:s,width:t}}}function Ai(i,e){for(let t in e)e.hasOwnProperty(t)&&(i[t]=e[t]);return i}function x_(i){if("number"!=typeof i&&null!=i){const[e,t]=i.split(NE);return t&&"px"!==t?null:parseFloat(e)}return i||null}function M_(i){return{top:Math.floor(i.top),right:Math.floor(i.right),bottom:Math.floor(i.bottom),left:Math.floor(i.left),width:Math.floor(i.width),height:Math.floor(i.height)}}class PE{constructor(e,t,s,a,c,d,p){this._preferredPositions=[],this._positionStrategy=new Nh(s,a,c,d,p).withFlexibleDimensions(!1).withPush(!1).withViewportMargin(0),this.withFallbackPosition(e,t),this.onPositionChange=this._positionStrategy.positionChanges}get positions(){return this._preferredPositions}attach(e){this._overlayRef=e,this._positionStrategy.attach(e),this._direction&&(e.setDirection(this._direction),this._direction=null)}dispose(){this._positionStrategy.dispose()}detach(){this._positionStrategy.detach()}apply(){this._positionStrategy.apply()}recalculateLastPosition(){this._positionStrategy.reapplyLastPosition()}withScrollableContainers(e){this._positionStrategy.withScrollableContainers(e)}withFallbackPosition(e,t,s,a){const c=new AE(e,t,s,a);return this._preferredPositions.push(c),this._positionStrategy.withPositions(this._preferredPositions),this}withDirection(e){return this._overlayRef?this._overlayRef.setDirection(e):this._direction=e,this}withOffsetX(e){return this._positionStrategy.withDefaultOffsetX(e),this}withOffsetY(e){return this._positionStrategy.withDefaultOffsetY(e),this}withLockedPosition(e){return this._positionStrategy.withLockedPosition(e),this}withPositions(e){return this._preferredPositions=e.slice(),this._positionStrategy.withPositions(this._preferredPositions),this}setOrigin(e){return this._positionStrategy.setOrigin(e),this}}const O_="cdk-global-overlay-wrapper";class FE{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(O_),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._rightOffset="",this._leftOffset=e,this._justifyContent="flex-start",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._leftOffset="",this._rightOffset=e,this._justifyContent="flex-end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._justifyContent="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,s=this._overlayRef.getConfig(),{width:a,height:c,maxWidth:d,maxHeight:p}=s,m=!("100%"!==a&&"100vw"!==a||d&&"100%"!==d&&"100vw"!==d),v=!("100%"!==c&&"100vh"!==c||p&&"100%"!==p&&"100vh"!==p);e.position=this._cssPosition,e.marginLeft=m?"0":this._leftOffset,e.marginTop=v?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=this._rightOffset,m?t.justifyContent="flex-start":"center"===this._justifyContent?t.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?t.justifyContent="flex-end":"flex-end"===this._justifyContent&&(t.justifyContent="flex-start"):t.justifyContent=this._justifyContent,t.alignItems=v?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,s=t.style;t.classList.remove(O_),s.justifyContent=s.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let LE=(()=>{class i{constructor(t,s,a,c){this._viewportRuler=t,this._document=s,this._platform=a,this._overlayContainer=c}global(){return new FE}connectedTo(t,s,a){return new PE(s,a,t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}flexibleConnectedTo(t){return new Nh(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return i.\u0275fac=function(t){return new(t||i)(l.LFG(rs),l.LFG(J.K0),l.LFG(Ct.t4),l.LFG(Rh))},i.\u0275prov=l.Yz7({factory:function(){return new i(l.LFG(rs),l.LFG(J.K0),l.LFG(Ct.t4),l.LFG(Rh))},token:i,providedIn:"root"}),i})(),VE=0,ss=(()=>{class i{constructor(t,s,a,c,d,p,m,v,_,b,I){this.scrollStrategies=t,this._overlayContainer=s,this._componentFactoryResolver=a,this._positionBuilder=c,this._keyboardDispatcher=d,this._injector=p,this._ngZone=m,this._document=v,this._directionality=_,this._location=b,this._outsideClickDispatcher=I}create(t){const s=this._createHostElement(),a=this._createPaneElement(s),c=this._createPortalOutlet(a),d=new Oh(t);return d.direction=d.direction||this._directionality.value,new RE(c,s,a,d,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(t){const s=this._document.createElement("div");return s.id="cdk-overlay-"+VE++,s.classList.add("cdk-overlay-pane"),t.appendChild(s),s}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(l.z2F)),new Hk(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return i.\u0275fac=function(t){return new(t||i)(l.LFG(EE),l.LFG(Rh),l.LFG(l._Vd),l.LFG(LE),l.LFG(ME),l.LFG(l.zs3),l.LFG(l.R0b),l.LFG(J.K0),l.LFG(be.Is),l.LFG(J.Ye),l.LFG(OE))},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac}),i})();const UE={provide:new l.OlP("cdk-connected-overlay-scroll-strategy"),deps:[ss],useFactory:function(i){return()=>i.scrollStrategies.reposition()}};let jE=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({providers:[ss,UE],imports:[[be.vT,Ih,C_],C_]}),i})();const YE=["mat-calendar-body",""];function GE(i,e){if(1&i&&(l.TgZ(0,"tr",2),l.TgZ(1,"td",3),l._uU(2),l.qZA(),l.qZA()),2&i){const t=l.oxw();l.xp6(1),l.Udp("padding-top",t._cellPadding)("padding-bottom",t._cellPadding),l.uIk("colspan",t.numCols),l.xp6(1),l.hij(" ",t.label," ")}}function HE(i,e){if(1&i&&(l.TgZ(0,"td",3),l._uU(1),l.qZA()),2&i){const t=l.oxw(2);l.Udp("padding-top",t._cellPadding)("padding-bottom",t._cellPadding),l.uIk("colspan",t._firstRowOffset),l.xp6(1),l.hij(" ",t._firstRowOffset>=t.labelMinRequiredCells?t.label:""," ")}}function zE(i,e){if(1&i){const t=l.EpF();l.TgZ(0,"td",7),l.NdJ("click",function(a){const d=l.CHM(t).$implicit;return l.oxw(2)._cellClicked(d,a)}),l.TgZ(1,"div",8),l._uU(2),l.qZA(),l._UZ(3,"div",9),l.qZA()}if(2&i){const t=e.$implicit,s=e.index,a=l.oxw().index,c=l.oxw();l.Udp("width",c._cellWidth)("padding-top",c._cellPadding)("padding-bottom",c._cellPadding),l.ekj("mat-calendar-body-disabled",!t.enabled)("mat-calendar-body-active",c._isActiveCell(a,s))("mat-calendar-body-range-start",c._isRangeStart(t.compareValue))("mat-calendar-body-range-end",c._isRangeEnd(t.compareValue))("mat-calendar-body-in-range",c._isInRange(t.compareValue))("mat-calendar-body-comparison-bridge-start",c._isComparisonBridgeStart(t.compareValue,a,s))("mat-calendar-body-comparison-bridge-end",c._isComparisonBridgeEnd(t.compareValue,a,s))("mat-calendar-body-comparison-start",c._isComparisonStart(t.compareValue))("mat-calendar-body-comparison-end",c._isComparisonEnd(t.compareValue))("mat-calendar-body-in-comparison-range",c._isInComparisonRange(t.compareValue))("mat-calendar-body-preview-start",c._isPreviewStart(t.compareValue))("mat-calendar-body-preview-end",c._isPreviewEnd(t.compareValue))("mat-calendar-body-in-preview",c._isInPreview(t.compareValue)),l.Q6J("ngClass",t.cssClasses)("tabindex",c._isActiveCell(a,s)?0:-1),l.uIk("data-mat-row",a)("data-mat-col",s)("aria-label",t.ariaLabel)("aria-disabled",!t.enabled||null)("aria-selected",c._isSelected(t.compareValue)),l.xp6(1),l.ekj("mat-calendar-body-selected",c._isSelected(t.compareValue))("mat-calendar-body-comparison-identical",c._isComparisonIdentical(t.compareValue))("mat-calendar-body-today",c.todayValue===t.compareValue),l.xp6(1),l.hij(" ",t.displayValue," ")}}function ZE(i,e){if(1&i&&(l.TgZ(0,"tr",4),l.YNc(1,HE,2,6,"td",5),l.YNc(2,zE,4,46,"td",6),l.qZA()),2&i){const t=e.$implicit,s=e.index,a=l.oxw();l.xp6(1),l.Q6J("ngIf",0===s&&a._firstRowOffset),l.xp6(1),l.Q6J("ngForOf",t)}}function KE(i,e){if(1&i&&(l.TgZ(0,"th",5),l.TgZ(1,"abbr",6),l._uU(2),l.qZA(),l.qZA()),2&i){const t=e.$implicit;l.uIk("aria-label",t.long),l.xp6(1),l.uIk("title",t.long),l.xp6(1),l.Oqu(t.narrow)}}const N_=["*"];function JE(i,e){}function QE(i,e){if(1&i){const t=l.EpF();l.TgZ(0,"mat-month-view",5),l.NdJ("activeDateChange",function(a){return l.CHM(t),l.oxw().activeDate=a})("_userSelection",function(a){return l.CHM(t),l.oxw()._dateSelected(a)}),l.qZA()}if(2&i){const t=l.oxw();l.Q6J("activeDate",t.activeDate)("selected",t.selected)("dateFilter",t.dateFilter)("maxDate",t.maxDate)("minDate",t.minDate)("dateClass",t.dateClass)("comparisonStart",t.comparisonStart)("comparisonEnd",t.comparisonEnd)}}function WE(i,e){if(1&i){const t=l.EpF();l.TgZ(0,"mat-year-view",6),l.NdJ("activeDateChange",function(a){return l.CHM(t),l.oxw().activeDate=a})("monthSelected",function(a){return l.CHM(t),l.oxw()._monthSelectedInYearView(a)})("selectedChange",function(a){return l.CHM(t),l.oxw()._goToDateInView(a,"month")}),l.qZA()}if(2&i){const t=l.oxw();l.Q6J("activeDate",t.activeDate)("selected",t.selected)("dateFilter",t.dateFilter)("maxDate",t.maxDate)("minDate",t.minDate)("dateClass",t.dateClass)}}function XE(i,e){if(1&i){const t=l.EpF();l.TgZ(0,"mat-multi-year-view",7),l.NdJ("activeDateChange",function(a){return l.CHM(t),l.oxw().activeDate=a})("yearSelected",function(a){return l.CHM(t),l.oxw()._yearSelectedInMultiYearView(a)})("selectedChange",function(a){return l.CHM(t),l.oxw()._goToDateInView(a,"year")}),l.qZA()}if(2&i){const t=l.oxw();l.Q6J("activeDate",t.activeDate)("selected",t.selected)("dateFilter",t.dateFilter)("maxDate",t.maxDate)("minDate",t.minDate)("dateClass",t.dateClass)}}function $E(i,e){}const t1=["button"];function e1(i,e){1&i&&(l.O4$(),l.TgZ(0,"svg",3),l._UZ(1,"path",4),l.qZA())}const n1=[[["","matDatepickerToggleIcon",""]]],i1=["[matDatepickerToggleIcon]"];let as=(()=>{class i{constructor(){this.changes=new wt.xQ,this.calendarLabel="Calendar",this.openCalendarLabel="Open calendar",this.closeCalendarLabel="Close calendar",this.prevMonthLabel="Previous month",this.nextMonthLabel="Next month",this.prevYearLabel="Previous year",this.nextYearLabel="Next year",this.prevMultiYearLabel="Previous 24 years",this.nextMultiYearLabel="Next 24 years",this.switchToMonthViewLabel="Choose date",this.switchToMultiYearViewLabel="Choose month and year"}formatYearRange(t,s){return`${t} \u2013 ${s}`}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=l.Yz7({factory:function(){return new i},token:i,providedIn:"root"}),i})();class Ph{constructor(e,t,s,a,c={},d=e,p){this.value=e,this.displayValue=t,this.ariaLabel=s,this.enabled=a,this.cssClasses=c,this.compareValue=d,this.rawValue=p}}let Rr=(()=>{class i{constructor(t,s){this._elementRef=t,this._ngZone=s,this.numCols=7,this.activeCell=0,this.isRange=!1,this.cellAspectRatio=1,this.previewStart=null,this.previewEnd=null,this.selectedValueChange=new l.vpe,this.previewChange=new l.vpe,this._enterHandler=a=>{if(this._skipNextFocus&&"focus"===a.type)this._skipNextFocus=!1;else if(a.target&&this.isRange){const c=this._getCellFromElement(a.target);c&&this._ngZone.run(()=>this.previewChange.emit({value:c.enabled?c:null,event:a}))}},this._leaveHandler=a=>{null!==this.previewEnd&&this.isRange&&a.target&&Fh(a.target)&&this._ngZone.run(()=>this.previewChange.emit({value:null,event:a}))},s.runOutsideAngular(()=>{const a=t.nativeElement;a.addEventListener("mouseenter",this._enterHandler,!0),a.addEventListener("focus",this._enterHandler,!0),a.addEventListener("mouseleave",this._leaveHandler,!0),a.addEventListener("blur",this._leaveHandler,!0)})}_cellClicked(t,s){t.enabled&&this.selectedValueChange.emit({value:t.value,event:s})}_isSelected(t){return this.startValue===t||this.endValue===t}ngOnChanges(t){const s=t.numCols,{rows:a,numCols:c}=this;(t.rows||s)&&(this._firstRowOffset=a&&a.length&&a[0].length?c-a[0].length:0),(t.cellAspectRatio||s||!this._cellPadding)&&(this._cellPadding=50*this.cellAspectRatio/c+"%"),(s||!this._cellWidth)&&(this._cellWidth=100/c+"%")}ngOnDestroy(){const t=this._elementRef.nativeElement;t.removeEventListener("mouseenter",this._enterHandler,!0),t.removeEventListener("focus",this._enterHandler,!0),t.removeEventListener("mouseleave",this._leaveHandler,!0),t.removeEventListener("blur",this._leaveHandler,!0)}_isActiveCell(t,s){let a=t*this.numCols+s;return t&&(a-=this._firstRowOffset),a==this.activeCell}_focusActiveCell(t=!0){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe((0,du.q)(1)).subscribe(()=>{const s=this._elementRef.nativeElement.querySelector(".mat-calendar-body-active");s&&(t||(this._skipNextFocus=!0),s.focus())})})}_isRangeStart(t){return Lh(t,this.startValue,this.endValue)}_isRangeEnd(t){return Vh(t,this.startValue,this.endValue)}_isInRange(t){return Bh(t,this.startValue,this.endValue,this.isRange)}_isComparisonStart(t){return Lh(t,this.comparisonStart,this.comparisonEnd)}_isComparisonBridgeStart(t,s,a){if(!this._isComparisonStart(t)||this._isRangeStart(t)||!this._isInRange(t))return!1;let c=this.rows[s][a-1];if(!c){const d=this.rows[s-1];c=d&&d[d.length-1]}return c&&!this._isRangeEnd(c.compareValue)}_isComparisonBridgeEnd(t,s,a){if(!this._isComparisonEnd(t)||this._isRangeEnd(t)||!this._isInRange(t))return!1;let c=this.rows[s][a+1];if(!c){const d=this.rows[s+1];c=d&&d[0]}return c&&!this._isRangeStart(c.compareValue)}_isComparisonEnd(t){return Vh(t,this.comparisonStart,this.comparisonEnd)}_isInComparisonRange(t){return Bh(t,this.comparisonStart,this.comparisonEnd,this.isRange)}_isComparisonIdentical(t){return this.comparisonStart===this.comparisonEnd&&t===this.comparisonStart}_isPreviewStart(t){return Lh(t,this.previewStart,this.previewEnd)}_isPreviewEnd(t){return Vh(t,this.previewStart,this.previewEnd)}_isInPreview(t){return Bh(t,this.previewStart,this.previewEnd,this.isRange)}_getCellFromElement(t){let s;if(Fh(t)?s=t:Fh(t.parentNode)&&(s=t.parentNode),s){const a=s.getAttribute("data-mat-row"),c=s.getAttribute("data-mat-col");if(a&&c)return this.rows[parseInt(a)][parseInt(c)]}return null}}return i.\u0275fac=function(t){return new(t||i)(l.Y36(l.SBq),l.Y36(l.R0b))},i.\u0275cmp=l.Xpm({type:i,selectors:[["","mat-calendar-body",""]],hostAttrs:[1,"mat-calendar-body"],inputs:{numCols:"numCols",activeCell:"activeCell",isRange:"isRange",cellAspectRatio:"cellAspectRatio",previewStart:"previewStart",previewEnd:"previewEnd",label:"label",rows:"rows",todayValue:"todayValue",startValue:"startValue",endValue:"endValue",labelMinRequiredCells:"labelMinRequiredCells",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd"},outputs:{selectedValueChange:"selectedValueChange",previewChange:"previewChange"},exportAs:["matCalendarBody"],features:[l.TTD],attrs:YE,decls:2,vars:2,consts:[["aria-hidden","true",4,"ngIf"],["role","row",4,"ngFor","ngForOf"],["aria-hidden","true"],[1,"mat-calendar-body-label"],["role","row"],["class","mat-calendar-body-label",3,"paddingTop","paddingBottom",4,"ngIf"],["role","gridcell","class","mat-calendar-body-cell",3,"ngClass","tabindex","mat-calendar-body-disabled","mat-calendar-body-active","mat-calendar-body-range-start","mat-calendar-body-range-end","mat-calendar-body-in-range","mat-calendar-body-comparison-bridge-start","mat-calendar-body-comparison-bridge-end","mat-calendar-body-comparison-start","mat-calendar-body-comparison-end","mat-calendar-body-in-comparison-range","mat-calendar-body-preview-start","mat-calendar-body-preview-end","mat-calendar-body-in-preview","width","paddingTop","paddingBottom","click",4,"ngFor","ngForOf"],["role","gridcell",1,"mat-calendar-body-cell",3,"ngClass","tabindex","click"],[1,"mat-calendar-body-cell-content","mat-focus-indicator"],[1,"mat-calendar-body-cell-preview"]],template:function(t,s){1&t&&(l.YNc(0,GE,3,6,"tr",0),l.YNc(1,ZE,3,2,"tr",1)),2&t&&(l.Q6J("ngIf",s._firstRowOffset<s.labelMinRequiredCells),l.xp6(1),l.Q6J("ngForOf",s.rows))},directives:[J.O5,J.sg,J.mk],styles:['.mat-calendar-body{min-width:224px}.mat-calendar-body-label{height:0;line-height:0;text-align:left;padding-left:4.7142857143%;padding-right:4.7142857143%}.mat-calendar-body-cell{position:relative;height:0;line-height:0;text-align:center;outline:none;cursor:pointer}.mat-calendar-body-cell::before,.mat-calendar-body-cell::after,.mat-calendar-body-cell-preview{content:"";position:absolute;top:5%;left:0;z-index:0;box-sizing:border-box;height:90%;width:100%}.mat-calendar-body-range-start:not(.mat-calendar-body-in-comparison-range)::before,.mat-calendar-body-range-start::after,.mat-calendar-body-comparison-start:not(.mat-calendar-body-comparison-bridge-start)::before,.mat-calendar-body-comparison-start::after,.mat-calendar-body-preview-start .mat-calendar-body-cell-preview{left:5%;width:95%;border-top-left-radius:999px;border-bottom-left-radius:999px}[dir=rtl] .mat-calendar-body-range-start:not(.mat-calendar-body-in-comparison-range)::before,[dir=rtl] .mat-calendar-body-range-start::after,[dir=rtl] .mat-calendar-body-comparison-start:not(.mat-calendar-body-comparison-bridge-start)::before,[dir=rtl] .mat-calendar-body-comparison-start::after,[dir=rtl] .mat-calendar-body-preview-start .mat-calendar-body-cell-preview{left:0;border-radius:0;border-top-right-radius:999px;border-bottom-right-radius:999px}.mat-calendar-body-range-end:not(.mat-calendar-body-in-comparison-range)::before,.mat-calendar-body-range-end::after,.mat-calendar-body-comparison-end:not(.mat-calendar-body-comparison-bridge-end)::before,.mat-calendar-body-comparison-end::after,.mat-calendar-body-preview-end .mat-calendar-body-cell-preview{width:95%;border-top-right-radius:999px;border-bottom-right-radius:999px}[dir=rtl] .mat-calendar-body-range-end:not(.mat-calendar-body-in-comparison-range)::before,[dir=rtl] .mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-end:not(.mat-calendar-body-comparison-bridge-end)::before,[dir=rtl] .mat-calendar-body-comparison-end::after,[dir=rtl] .mat-calendar-body-preview-end .mat-calendar-body-cell-preview{left:5%;border-radius:0;border-top-left-radius:999px;border-bottom-left-radius:999px}[dir=rtl] .mat-calendar-body-comparison-bridge-start.mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-bridge-end.mat-calendar-body-range-start::after{width:95%;border-top-right-radius:999px;border-bottom-right-radius:999px}.mat-calendar-body-comparison-start.mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-start.mat-calendar-body-range-end::after,.mat-calendar-body-comparison-end.mat-calendar-body-range-start::after,[dir=rtl] .mat-calendar-body-comparison-end.mat-calendar-body-range-start::after{width:90%}.mat-calendar-body-in-preview .mat-calendar-body-cell-preview{border-top:dashed 1px;border-bottom:dashed 1px}.mat-calendar-body-preview-start .mat-calendar-body-cell-preview{border-left:dashed 1px}[dir=rtl] .mat-calendar-body-preview-start .mat-calendar-body-cell-preview{border-left:0;border-right:dashed 1px}.mat-calendar-body-preview-end .mat-calendar-body-cell-preview{border-right:dashed 1px}[dir=rtl] .mat-calendar-body-preview-end .mat-calendar-body-cell-preview{border-right:0;border-left:dashed 1px}.mat-calendar-body-disabled{cursor:default}.cdk-high-contrast-active .mat-calendar-body-disabled{opacity:.5}.mat-calendar-body-cell-content{top:5%;left:5%;z-index:1;display:flex;align-items:center;justify-content:center;box-sizing:border-box;width:90%;height:90%;line-height:1;border-width:1px;border-style:solid;border-radius:999px}.mat-calendar-body-cell-content.mat-focus-indicator{position:absolute}.cdk-high-contrast-active .mat-calendar-body-cell-content{border:none}.cdk-high-contrast-active .mat-datepicker-popup:not(:empty),.cdk-high-contrast-active .mat-calendar-body-cell:not(.mat-calendar-body-in-range) .mat-calendar-body-selected{outline:solid 1px}.cdk-high-contrast-active .mat-calendar-body-today{outline:dotted 1px}.cdk-high-contrast-active .cdk-keyboard-focused .mat-calendar-body-active>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected),.cdk-high-contrast-active .cdk-program-focused .mat-calendar-body-active>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected){outline:dotted 2px}.cdk-high-contrast-active .mat-calendar-body-cell::before,.cdk-high-contrast-active .mat-calendar-body-cell::after,.cdk-high-contrast-active .mat-calendar-body-selected{background:none}.cdk-high-contrast-active .mat-calendar-body-in-range::before,.cdk-high-contrast-active .mat-calendar-body-comparison-bridge-start::before,.cdk-high-contrast-active .mat-calendar-body-comparison-bridge-end::before{border-top:solid 1px;border-bottom:solid 1px}.cdk-high-contrast-active .mat-calendar-body-range-start::before{border-left:solid 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-range-start::before{border-left:0;border-right:solid 1px}.cdk-high-contrast-active .mat-calendar-body-range-end::before{border-right:solid 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-range-end::before{border-right:0;border-left:solid 1px}.cdk-high-contrast-active .mat-calendar-body-in-comparison-range::before{border-top:dashed 1px;border-bottom:dashed 1px}.cdk-high-contrast-active .mat-calendar-body-comparison-start::before{border-left:dashed 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-comparison-start::before{border-left:0;border-right:dashed 1px}.cdk-high-contrast-active .mat-calendar-body-comparison-end::before{border-right:dashed 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-comparison-end::before{border-right:0;border-left:dashed 1px}[dir=rtl] .mat-calendar-body-label{text-align:right}@media(hover: none){.mat-calendar-body-cell:not(.mat-calendar-body-disabled):hover>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected){background-color:transparent}}\n'],encapsulation:2,changeDetection:0}),i})();function Fh(i){return"TD"===i.nodeName}function Lh(i,e,t){return null!==t&&e!==t&&i<t&&i===e}function Vh(i,e,t){return null!==e&&e!==t&&i>=e&&i===t}function Bh(i,e,t,s){return s&&null!==e&&null!==t&&e!==t&&i>=e&&i<=t}class ce{constructor(e,t){this.start=e,this.end=t}}let Qn=(()=>{class i{constructor(t,s){this.selection=t,this._adapter=s,this._selectionChanged=new wt.xQ,this.selectionChanged=this._selectionChanged,this.selection=t}updateSelection(t,s){const a=this.selection;this.selection=t,this._selectionChanged.next({selection:t,source:s,oldValue:a})}ngOnDestroy(){this._selectionChanged.complete()}_isValidDateInstance(t){return this._adapter.isDateInstance(t)&&this._adapter.isValid(t)}}return i.\u0275fac=function(t){return new(t||i)(l.LFG(void 0),l.LFG(Q._A))},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac}),i})(),a1=(()=>{class i extends Qn{constructor(t){super(null,t)}add(t){super.updateSelection(t,this)}isValid(){return null!=this.selection&&this._isValidDateInstance(this.selection)}isComplete(){return null!=this.selection}clone(){const t=new i(this._adapter);return t.updateSelection(this.selection,this),t}}return i.\u0275fac=function(t){return new(t||i)(l.LFG(Q._A))},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac}),i})();const P_={provide:Qn,deps:[[new l.FiY,new l.tp0,Qn],Q._A],useFactory:function(i,e){return i||new a1(e)}},fu=new l.OlP("MAT_DATE_RANGE_SELECTION_STRATEGY");let F_=(()=>{class i{constructor(t,s,a,c,d){this._changeDetectorRef=t,this._dateFormats=s,this._dateAdapter=a,this._dir=c,this._rangeStrategy=d,this._rerenderSubscription=Yt.w.EMPTY,this.selectedChange=new l.vpe,this._userSelection=new l.vpe,this.activeDateChange=new l.vpe,this._activeDate=this._dateAdapter.today()}get activeDate(){return this._activeDate}set activeDate(t){const s=this._activeDate,a=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(a,this.minDate,this.maxDate),this._hasSameMonthAndYear(s,this._activeDate)||this._init()}get selected(){return this._selected}set selected(t){this._selected=t instanceof ce?t:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t)),this._setRanges(this._selected)}get minDate(){return this._minDate}set minDate(t){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t))}get maxDate(){return this._maxDate}set maxDate(t){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t))}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe((0,Tn.O)(null)).subscribe(()=>this._init())}ngOnChanges(t){const s=t.comparisonStart||t.comparisonEnd;s&&!s.firstChange&&this._setRanges(this.selected)}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_dateSelected(t){const s=t.value,a=this._dateAdapter.getYear(this.activeDate),c=this._dateAdapter.getMonth(this.activeDate),d=this._dateAdapter.createDate(a,c,s);let p,m;this._selected instanceof ce?(p=this._getDateInCurrentMonth(this._selected.start),m=this._getDateInCurrentMonth(this._selected.end)):p=m=this._getDateInCurrentMonth(this._selected),(p!==s||m!==s)&&this.selectedChange.emit(d),this._userSelection.emit({value:d,event:t.event}),this._previewStart=this._previewEnd=null,this._changeDetectorRef.markForCheck()}_handleCalendarBodyKeydown(t){const s=this._activeDate,a=this._isRtl();switch(t.keyCode){case W.oh:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,a?1:-1);break;case W.SV:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,a?-1:1);break;case W.LH:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,-7);break;case W.JH:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,7);break;case W.Sd:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,1-this._dateAdapter.getDate(this._activeDate));break;case W.uR:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,this._dateAdapter.getNumDaysInMonth(this._activeDate)-this._dateAdapter.getDate(this._activeDate));break;case W.Ku:this.activeDate=t.altKey?this._dateAdapter.addCalendarYears(this._activeDate,-1):this._dateAdapter.addCalendarMonths(this._activeDate,-1);break;case W.VM:this.activeDate=t.altKey?this._dateAdapter.addCalendarYears(this._activeDate,1):this._dateAdapter.addCalendarMonths(this._activeDate,1);break;case W.K5:case W.L_:return this._selectionKeyPressed=!0,void(this._canSelect(this._activeDate)&&t.preventDefault());case W.hY:return void(null!=this._previewEnd&&!(0,W.Vb)(t)&&(this._previewStart=this._previewEnd=null,this.selectedChange.emit(null),this._userSelection.emit({value:null,event:t}),t.preventDefault(),t.stopPropagation()));default:return}this._dateAdapter.compareDate(s,this.activeDate)&&this.activeDateChange.emit(this.activeDate),this._focusActiveCell(),t.preventDefault()}_handleCalendarBodyKeyup(t){(t.keyCode===W.L_||t.keyCode===W.K5)&&(this._selectionKeyPressed&&this._canSelect(this._activeDate)&&this._dateSelected({value:this._dateAdapter.getDate(this._activeDate),event:t}),this._selectionKeyPressed=!1)}_init(){this._setRanges(this.selected),this._todayDate=this._getCellCompareValue(this._dateAdapter.today()),this._monthLabel=this._dateFormats.display.monthLabel?this._dateAdapter.format(this.activeDate,this._dateFormats.display.monthLabel):this._dateAdapter.getMonthNames("short")[this._dateAdapter.getMonth(this.activeDate)].toLocaleUpperCase();let t=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),1);this._firstWeekOffset=(7+this._dateAdapter.getDayOfWeek(t)-this._dateAdapter.getFirstDayOfWeek())%7,this._initWeekdays(),this._createWeekCells(),this._changeDetectorRef.markForCheck()}_focusActiveCell(t){this._matCalendarBody._focusActiveCell(t)}_previewChanged({event:t,value:s}){if(this._rangeStrategy){const c=this._rangeStrategy.createPreview(s?s.rawValue:null,this.selected,t);this._previewStart=this._getCellCompareValue(c.start),this._previewEnd=this._getCellCompareValue(c.end),this._changeDetectorRef.detectChanges()}}_initWeekdays(){const t=this._dateAdapter.getFirstDayOfWeek(),s=this._dateAdapter.getDayOfWeekNames("narrow");let c=this._dateAdapter.getDayOfWeekNames("long").map((d,p)=>({long:d,narrow:s[p]}));this._weekdays=c.slice(t).concat(c.slice(0,t))}_createWeekCells(){const t=this._dateAdapter.getNumDaysInMonth(this.activeDate),s=this._dateAdapter.getDateNames();this._weeks=[[]];for(let a=0,c=this._firstWeekOffset;a<t;a++,c++){7==c&&(this._weeks.push([]),c=0);const d=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),a+1),p=this._shouldEnableDate(d),m=this._dateAdapter.format(d,this._dateFormats.display.dateA11yLabel),v=this.dateClass?this.dateClass(d,"month"):void 0;this._weeks[this._weeks.length-1].push(new Ph(a+1,s[a],m,p,v,this._getCellCompareValue(d),d))}}_shouldEnableDate(t){return!!t&&(!this.minDate||this._dateAdapter.compareDate(t,this.minDate)>=0)&&(!this.maxDate||this._dateAdapter.compareDate(t,this.maxDate)<=0)&&(!this.dateFilter||this.dateFilter(t))}_getDateInCurrentMonth(t){return t&&this._hasSameMonthAndYear(t,this.activeDate)?this._dateAdapter.getDate(t):null}_hasSameMonthAndYear(t,s){return!(!t||!s||this._dateAdapter.getMonth(t)!=this._dateAdapter.getMonth(s)||this._dateAdapter.getYear(t)!=this._dateAdapter.getYear(s))}_getCellCompareValue(t){if(t){const s=this._dateAdapter.getYear(t),a=this._dateAdapter.getMonth(t),c=this._dateAdapter.getDate(t);return new Date(s,a,c).getTime()}return null}_isRtl(){return this._dir&&"rtl"===this._dir.value}_setRanges(t){t instanceof ce?(this._rangeStart=this._getCellCompareValue(t.start),this._rangeEnd=this._getCellCompareValue(t.end),this._isRange=!0):(this._rangeStart=this._rangeEnd=this._getCellCompareValue(t),this._isRange=!1),this._comparisonRangeStart=this._getCellCompareValue(this.comparisonStart),this._comparisonRangeEnd=this._getCellCompareValue(this.comparisonEnd)}_canSelect(t){return!this.dateFilter||this.dateFilter(t)}}return i.\u0275fac=function(t){return new(t||i)(l.Y36(l.sBO),l.Y36(Q.sG,8),l.Y36(Q._A,8),l.Y36(be.Is,8),l.Y36(fu,8))},i.\u0275cmp=l.Xpm({type:i,selectors:[["mat-month-view"]],viewQuery:function(t,s){if(1&t&&l.Gf(Rr,5),2&t){let a;l.iGM(a=l.CRH())&&(s._matCalendarBody=a.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd"},outputs:{selectedChange:"selectedChange",_userSelection:"_userSelection",activeDateChange:"activeDateChange"},exportAs:["matMonthView"],features:[l.TTD],decls:7,vars:13,consts:[["role","grid",1,"mat-calendar-table"],[1,"mat-calendar-table-header"],["scope","col",4,"ngFor","ngForOf"],["aria-hidden","true","colspan","7",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"label","rows","todayValue","startValue","endValue","comparisonStart","comparisonEnd","previewStart","previewEnd","isRange","labelMinRequiredCells","activeCell","selectedValueChange","previewChange","keyup","keydown"],["scope","col"],[1,"mat-calendar-abbr"]],template:function(t,s){1&t&&(l.TgZ(0,"table",0),l.TgZ(1,"thead",1),l.TgZ(2,"tr"),l.YNc(3,KE,3,3,"th",2),l.qZA(),l.TgZ(4,"tr"),l._UZ(5,"th",3),l.qZA(),l.qZA(),l.TgZ(6,"tbody",4),l.NdJ("selectedValueChange",function(c){return s._dateSelected(c)})("previewChange",function(c){return s._previewChanged(c)})("keyup",function(c){return s._handleCalendarBodyKeyup(c)})("keydown",function(c){return s._handleCalendarBodyKeydown(c)}),l.qZA(),l.qZA()),2&t&&(l.xp6(3),l.Q6J("ngForOf",s._weekdays),l.xp6(3),l.Q6J("label",s._monthLabel)("rows",s._weeks)("todayValue",s._todayDate)("startValue",s._rangeStart)("endValue",s._rangeEnd)("comparisonStart",s._comparisonRangeStart)("comparisonEnd",s._comparisonRangeEnd)("previewStart",s._previewStart)("previewEnd",s._previewEnd)("isRange",s._isRange)("labelMinRequiredCells",3)("activeCell",s._dateAdapter.getDate(s.activeDate)-1))},directives:[J.sg,Rr],encapsulation:2,changeDetection:0}),i})(),L_=(()=>{class i{constructor(t,s,a){this._changeDetectorRef=t,this._dateAdapter=s,this._dir=a,this._rerenderSubscription=Yt.w.EMPTY,this.selectedChange=new l.vpe,this.yearSelected=new l.vpe,this.activeDateChange=new l.vpe,this._activeDate=this._dateAdapter.today()}get activeDate(){return this._activeDate}set activeDate(t){let s=this._activeDate;const a=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(a,this.minDate,this.maxDate),V_(this._dateAdapter,s,this._activeDate,this.minDate,this.maxDate)||this._init()}get selected(){return this._selected}set selected(t){this._selected=t instanceof ce?t:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t)),this._setSelectedYear(t)}get minDate(){return this._minDate}set minDate(t){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t))}get maxDate(){return this._maxDate}set maxDate(t){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t))}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe((0,Tn.O)(null)).subscribe(()=>this._init())}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_init(){this._todayYear=this._dateAdapter.getYear(this._dateAdapter.today());const s=this._dateAdapter.getYear(this._activeDate)-us(this._dateAdapter,this.activeDate,this.minDate,this.maxDate);this._years=[];for(let a=0,c=[];a<24;a++)c.push(s+a),4==c.length&&(this._years.push(c.map(d=>this._createCellForYear(d))),c=[]);this._changeDetectorRef.markForCheck()}_yearSelected(t){const s=t.value;this.yearSelected.emit(this._dateAdapter.createDate(s,0,1));let a=this._dateAdapter.getMonth(this.activeDate),c=this._dateAdapter.getNumDaysInMonth(this._dateAdapter.createDate(s,a,1));this.selectedChange.emit(this._dateAdapter.createDate(s,a,Math.min(this._dateAdapter.getDate(this.activeDate),c)))}_handleCalendarBodyKeydown(t){const s=this._activeDate,a=this._isRtl();switch(t.keyCode){case W.oh:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,a?1:-1);break;case W.SV:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,a?-1:1);break;case W.LH:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,-4);break;case W.JH:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,4);break;case W.Sd:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,-us(this._dateAdapter,this.activeDate,this.minDate,this.maxDate));break;case W.uR:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,24-us(this._dateAdapter,this.activeDate,this.minDate,this.maxDate)-1);break;case W.Ku:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,t.altKey?-240:-24);break;case W.VM:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,t.altKey?240:24);break;case W.K5:case W.L_:this._selectionKeyPressed=!0;break;default:return}this._dateAdapter.compareDate(s,this.activeDate)&&this.activeDateChange.emit(this.activeDate),this._focusActiveCell(),t.preventDefault()}_handleCalendarBodyKeyup(t){(t.keyCode===W.L_||t.keyCode===W.K5)&&(this._selectionKeyPressed&&this._yearSelected({value:this._dateAdapter.getYear(this._activeDate),event:t}),this._selectionKeyPressed=!1)}_getActiveCell(){return us(this._dateAdapter,this.activeDate,this.minDate,this.maxDate)}_focusActiveCell(){this._matCalendarBody._focusActiveCell()}_createCellForYear(t){const s=this._dateAdapter.createDate(t,0,1),a=this._dateAdapter.getYearName(s),c=this.dateClass?this.dateClass(s,"multi-year"):void 0;return new Ph(t,a,a,this._shouldEnableYear(t),c)}_shouldEnableYear(t){if(null==t||this.maxDate&&t>this._dateAdapter.getYear(this.maxDate)||this.minDate&&t<this._dateAdapter.getYear(this.minDate))return!1;if(!this.dateFilter)return!0;for(let a=this._dateAdapter.createDate(t,0,1);this._dateAdapter.getYear(a)==t;a=this._dateAdapter.addCalendarDays(a,1))if(this.dateFilter(a))return!0;return!1}_isRtl(){return this._dir&&"rtl"===this._dir.value}_setSelectedYear(t){if(this._selectedYear=null,t instanceof ce){const s=t.start||t.end;s&&(this._selectedYear=this._dateAdapter.getYear(s))}else t&&(this._selectedYear=this._dateAdapter.getYear(t))}}return i.\u0275fac=function(t){return new(t||i)(l.Y36(l.sBO),l.Y36(Q._A,8),l.Y36(be.Is,8))},i.\u0275cmp=l.Xpm({type:i,selectors:[["mat-multi-year-view"]],viewQuery:function(t,s){if(1&t&&l.Gf(Rr,5),2&t){let a;l.iGM(a=l.CRH())&&(s._matCalendarBody=a.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass"},outputs:{selectedChange:"selectedChange",yearSelected:"yearSelected",activeDateChange:"activeDateChange"},exportAs:["matMultiYearView"],decls:5,vars:7,consts:[["role","grid",1,"mat-calendar-table"],["aria-hidden","true",1,"mat-calendar-table-header"],["colspan","4",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"rows","todayValue","startValue","endValue","numCols","cellAspectRatio","activeCell","selectedValueChange","keyup","keydown"]],template:function(t,s){1&t&&(l.TgZ(0,"table",0),l.TgZ(1,"thead",1),l.TgZ(2,"tr"),l._UZ(3,"th",2),l.qZA(),l.qZA(),l.TgZ(4,"tbody",3),l.NdJ("selectedValueChange",function(c){return s._yearSelected(c)})("keyup",function(c){return s._handleCalendarBodyKeyup(c)})("keydown",function(c){return s._handleCalendarBodyKeydown(c)}),l.qZA(),l.qZA()),2&t&&(l.xp6(4),l.Q6J("rows",s._years)("todayValue",s._todayYear)("startValue",s._selectedYear)("endValue",s._selectedYear)("numCols",4)("cellAspectRatio",4/7)("activeCell",s._getActiveCell()))},directives:[Rr],encapsulation:2,changeDetection:0}),i})();function V_(i,e,t,s,a){const c=i.getYear(e),d=i.getYear(t),p=B_(i,s,a);return Math.floor((c-p)/24)===Math.floor((d-p)/24)}function us(i,e,t,s){return function(i,e){return(i%24+24)%24}(i.getYear(e)-B_(i,t,s))}function B_(i,e,t){let s=0;return t?s=i.getYear(t)-24+1:e&&(s=i.getYear(e)),s}let q_=(()=>{class i{constructor(t,s,a,c){this._changeDetectorRef=t,this._dateFormats=s,this._dateAdapter=a,this._dir=c,this._rerenderSubscription=Yt.w.EMPTY,this.selectedChange=new l.vpe,this.monthSelected=new l.vpe,this.activeDateChange=new l.vpe,this._activeDate=this._dateAdapter.today()}get activeDate(){return this._activeDate}set activeDate(t){let s=this._activeDate;const a=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(a,this.minDate,this.maxDate),this._dateAdapter.getYear(s)!==this._dateAdapter.getYear(this._activeDate)&&this._init()}get selected(){return this._selected}set selected(t){this._selected=t instanceof ce?t:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t)),this._setSelectedMonth(t)}get minDate(){return this._minDate}set minDate(t){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t))}get maxDate(){return this._maxDate}set maxDate(t){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t))}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe((0,Tn.O)(null)).subscribe(()=>this._init())}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_monthSelected(t){const s=t.value,a=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),s,1);this.monthSelected.emit(a);const c=this._dateAdapter.getNumDaysInMonth(a);this.selectedChange.emit(this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),s,Math.min(this._dateAdapter.getDate(this.activeDate),c)))}_handleCalendarBodyKeydown(t){const s=this._activeDate,a=this._isRtl();switch(t.keyCode){case W.oh:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,a?1:-1);break;case W.SV:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,a?-1:1);break;case W.LH:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,-4);break;case W.JH:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,4);break;case W.Sd:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,-this._dateAdapter.getMonth(this._activeDate));break;case W.uR:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,11-this._dateAdapter.getMonth(this._activeDate));break;case W.Ku:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,t.altKey?-10:-1);break;case W.VM:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,t.altKey?10:1);break;case W.K5:case W.L_:this._selectionKeyPressed=!0;break;default:return}this._dateAdapter.compareDate(s,this.activeDate)&&this.activeDateChange.emit(this.activeDate),this._focusActiveCell(),t.preventDefault()}_handleCalendarBodyKeyup(t){(t.keyCode===W.L_||t.keyCode===W.K5)&&(this._selectionKeyPressed&&this._monthSelected({value:this._dateAdapter.getMonth(this._activeDate),event:t}),this._selectionKeyPressed=!1)}_init(){this._setSelectedMonth(this.selected),this._todayMonth=this._getMonthInCurrentYear(this._dateAdapter.today()),this._yearLabel=this._dateAdapter.getYearName(this.activeDate);let t=this._dateAdapter.getMonthNames("short");this._months=[[0,1,2,3],[4,5,6,7],[8,9,10,11]].map(s=>s.map(a=>this._createCellForMonth(a,t[a]))),this._changeDetectorRef.markForCheck()}_focusActiveCell(){this._matCalendarBody._focusActiveCell()}_getMonthInCurrentYear(t){return t&&this._dateAdapter.getYear(t)==this._dateAdapter.getYear(this.activeDate)?this._dateAdapter.getMonth(t):null}_createCellForMonth(t,s){const a=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),t,1),c=this._dateAdapter.format(a,this._dateFormats.display.monthYearA11yLabel),d=this.dateClass?this.dateClass(a,"year"):void 0;return new Ph(t,s.toLocaleUpperCase(),c,this._shouldEnableMonth(t),d)}_shouldEnableMonth(t){const s=this._dateAdapter.getYear(this.activeDate);if(null==t||this._isYearAndMonthAfterMaxDate(s,t)||this._isYearAndMonthBeforeMinDate(s,t))return!1;if(!this.dateFilter)return!0;for(let c=this._dateAdapter.createDate(s,t,1);this._dateAdapter.getMonth(c)==t;c=this._dateAdapter.addCalendarDays(c,1))if(this.dateFilter(c))return!0;return!1}_isYearAndMonthAfterMaxDate(t,s){if(this.maxDate){const a=this._dateAdapter.getYear(this.maxDate),c=this._dateAdapter.getMonth(this.maxDate);return t>a||t===a&&s>c}return!1}_isYearAndMonthBeforeMinDate(t,s){if(this.minDate){const a=this._dateAdapter.getYear(this.minDate),c=this._dateAdapter.getMonth(this.minDate);return t<a||t===a&&s<c}return!1}_isRtl(){return this._dir&&"rtl"===this._dir.value}_setSelectedMonth(t){this._selectedMonth=t instanceof ce?this._getMonthInCurrentYear(t.start)||this._getMonthInCurrentYear(t.end):this._getMonthInCurrentYear(t)}}return i.\u0275fac=function(t){return new(t||i)(l.Y36(l.sBO),l.Y36(Q.sG,8),l.Y36(Q._A,8),l.Y36(be.Is,8))},i.\u0275cmp=l.Xpm({type:i,selectors:[["mat-year-view"]],viewQuery:function(t,s){if(1&t&&l.Gf(Rr,5),2&t){let a;l.iGM(a=l.CRH())&&(s._matCalendarBody=a.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass"},outputs:{selectedChange:"selectedChange",monthSelected:"monthSelected",activeDateChange:"activeDateChange"},exportAs:["matYearView"],decls:5,vars:9,consts:[["role","grid",1,"mat-calendar-table"],["aria-hidden","true",1,"mat-calendar-table-header"],["colspan","4",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"label","rows","todayValue","startValue","endValue","labelMinRequiredCells","numCols","cellAspectRatio","activeCell","selectedValueChange","keyup","keydown"]],template:function(t,s){1&t&&(l.TgZ(0,"table",0),l.TgZ(1,"thead",1),l.TgZ(2,"tr"),l._UZ(3,"th",2),l.qZA(),l.qZA(),l.TgZ(4,"tbody",3),l.NdJ("selectedValueChange",function(c){return s._monthSelected(c)})("keyup",function(c){return s._handleCalendarBodyKeyup(c)})("keydown",function(c){return s._handleCalendarBodyKeydown(c)}),l.qZA(),l.qZA()),2&t&&(l.xp6(4),l.Q6J("label",s._yearLabel)("rows",s._months)("todayValue",s._todayMonth)("startValue",s._selectedMonth)("endValue",s._selectedMonth)("labelMinRequiredCells",2)("numCols",4)("cellAspectRatio",4/7)("activeCell",s._dateAdapter.getMonth(s.activeDate)))},directives:[Rr],encapsulation:2,changeDetection:0}),i})(),g1=0,v1=(()=>{class i{constructor(t,s,a,c,d){this._intl=t,this.calendar=s,this._dateAdapter=a,this._dateFormats=c,this._buttonDescriptionId="mat-calendar-button-"+g1++,this.calendar.stateChanges.subscribe(()=>d.markForCheck())}get periodButtonText(){if("month"==this.calendar.currentView)return this._dateAdapter.format(this.calendar.activeDate,this._dateFormats.display.monthYearLabel).toLocaleUpperCase();if("year"==this.calendar.currentView)return this._dateAdapter.getYearName(this.calendar.activeDate);const s=this._dateAdapter.getYear(this.calendar.activeDate)-us(this._dateAdapter,this.calendar.activeDate,this.calendar.minDate,this.calendar.maxDate),a=s+24-1,c=this._dateAdapter.getYearName(this._dateAdapter.createDate(s,0,1)),d=this._dateAdapter.getYearName(this._dateAdapter.createDate(a,0,1));return this._intl.formatYearRange(c,d)}get periodButtonLabel(){return"month"==this.calendar.currentView?this._intl.switchToMultiYearViewLabel:this._intl.switchToMonthViewLabel}get prevButtonLabel(){return{month:this._intl.prevMonthLabel,year:this._intl.prevYearLabel,"multi-year":this._intl.prevMultiYearLabel}[this.calendar.currentView]}get nextButtonLabel(){return{month:this._intl.nextMonthLabel,year:this._intl.nextYearLabel,"multi-year":this._intl.nextMultiYearLabel}[this.calendar.currentView]}currentPeriodClicked(){this.calendar.currentView="month"==this.calendar.currentView?"multi-year":"month"}previousClicked(){this.calendar.activeDate="month"==this.calendar.currentView?this._dateAdapter.addCalendarMonths(this.calendar.activeDate,-1):this._dateAdapter.addCalendarYears(this.calendar.activeDate,"year"==this.calendar.currentView?-1:-24)}nextClicked(){this.calendar.activeDate="month"==this.calendar.currentView?this._dateAdapter.addCalendarMonths(this.calendar.activeDate,1):this._dateAdapter.addCalendarYears(this.calendar.activeDate,"year"==this.calendar.currentView?1:24)}previousEnabled(){return!this.calendar.minDate||!this.calendar.minDate||!this._isSameView(this.calendar.activeDate,this.calendar.minDate)}nextEnabled(){return!this.calendar.maxDate||!this._isSameView(this.calendar.activeDate,this.calendar.maxDate)}_isSameView(t,s){return"month"==this.calendar.currentView?this._dateAdapter.getYear(t)==this._dateAdapter.getYear(s)&&this._dateAdapter.getMonth(t)==this._dateAdapter.getMonth(s):"year"==this.calendar.currentView?this._dateAdapter.getYear(t)==this._dateAdapter.getYear(s):V_(this._dateAdapter,t,s,this.calendar.minDate,this.calendar.maxDate)}}return i.\u0275fac=function(t){return new(t||i)(l.Y36(as),l.Y36((0,l.Gpc)(()=>jh)),l.Y36(Q._A,8),l.Y36(Q.sG,8),l.Y36(l.sBO))},i.\u0275cmp=l.Xpm({type:i,selectors:[["mat-calendar-header"]],exportAs:["matCalendarHeader"],ngContentSelectors:N_,decls:10,vars:10,consts:[[1,"mat-calendar-header"],[1,"mat-calendar-controls"],["mat-button","","type","button","cdkAriaLive","polite",1,"mat-calendar-period-button",3,"click"],[1,"mat-calendar-arrow"],[1,"mat-calendar-spacer"],["mat-icon-button","","type","button",1,"mat-calendar-previous-button",3,"disabled","click"],["mat-icon-button","","type","button",1,"mat-calendar-next-button",3,"disabled","click"]],template:function(t,s){1&t&&(l.F$t(),l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"button",2),l.NdJ("click",function(){return s.currentPeriodClicked()}),l.TgZ(3,"span"),l._uU(4),l.qZA(),l._UZ(5,"div",3),l.qZA(),l._UZ(6,"div",4),l.Hsn(7),l.TgZ(8,"button",5),l.NdJ("click",function(){return s.previousClicked()}),l.qZA(),l.TgZ(9,"button",6),l.NdJ("click",function(){return s.nextClicked()}),l.qZA(),l.qZA(),l.qZA()),2&t&&(l.xp6(2),l.uIk("aria-label",s.periodButtonLabel)("aria-describedby",s._buttonDescriptionId),l.xp6(1),l.uIk("id",s._buttonDescriptionId),l.xp6(1),l.Oqu(s.periodButtonText),l.xp6(1),l.ekj("mat-calendar-invert","month"!==s.calendar.currentView),l.xp6(3),l.Q6J("disabled",!s.previousEnabled()),l.uIk("aria-label",s.prevButtonLabel),l.xp6(1),l.Q6J("disabled",!s.nextEnabled()),l.uIk("aria-label",s.nextButtonLabel))},directives:[In.lW,Cn.Qr],encapsulation:2,changeDetection:0}),i})(),jh=(()=>{class i{constructor(t,s,a,c){this._dateAdapter=s,this._dateFormats=a,this._changeDetectorRef=c,this._moveFocusOnNextTick=!1,this.startView="month",this.selectedChange=new l.vpe,this.yearSelected=new l.vpe,this.monthSelected=new l.vpe,this.viewChanged=new l.vpe(!0),this._userSelection=new l.vpe,this.stateChanges=new wt.xQ,this._intlChanges=t.changes.subscribe(()=>{c.markForCheck(),this.stateChanges.next()})}get startAt(){return this._startAt}set startAt(t){this._startAt=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t))}get selected(){return this._selected}set selected(t){this._selected=t instanceof ce?t:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t))}get minDate(){return this._minDate}set minDate(t){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t))}get maxDate(){return this._maxDate}set maxDate(t){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t))}get activeDate(){return this._clampedActiveDate}set activeDate(t){this._clampedActiveDate=this._dateAdapter.clampDate(t,this.minDate,this.maxDate),this.stateChanges.next(),this._changeDetectorRef.markForCheck()}get currentView(){return this._currentView}set currentView(t){const s=this._currentView!==t?t:null;this._currentView=t,this._moveFocusOnNextTick=!0,this._changeDetectorRef.markForCheck(),s&&this.viewChanged.emit(s)}ngAfterContentInit(){this._calendarHeaderPortal=new Sh(this.headerComponent||v1),this.activeDate=this.startAt||this._dateAdapter.today(),this._currentView=this.startView}ngAfterViewChecked(){this._moveFocusOnNextTick&&(this._moveFocusOnNextTick=!1,this.focusActiveCell())}ngOnDestroy(){this._intlChanges.unsubscribe(),this.stateChanges.complete()}ngOnChanges(t){const s=t.minDate||t.maxDate||t.dateFilter;if(s&&!s.firstChange){const a=this._getCurrentViewComponent();a&&(this._changeDetectorRef.detectChanges(),a._init())}this.stateChanges.next()}focusActiveCell(){this._getCurrentViewComponent()._focusActiveCell(!1)}updateTodaysDate(){this._getCurrentViewComponent()._init()}_dateSelected(t){const s=t.value;(this.selected instanceof ce||s&&!this._dateAdapter.sameDate(s,this.selected))&&this.selectedChange.emit(s),this._userSelection.emit(t)}_yearSelectedInMultiYearView(t){this.yearSelected.emit(t)}_monthSelectedInYearView(t){this.monthSelected.emit(t)}_goToDateInView(t,s){this.activeDate=t,this.currentView=s}_getCurrentViewComponent(){return this.monthView||this.yearView||this.multiYearView}}return i.\u0275fac=function(t){return new(t||i)(l.Y36(as),l.Y36(Q._A,8),l.Y36(Q.sG,8),l.Y36(l.sBO))},i.\u0275cmp=l.Xpm({type:i,selectors:[["mat-calendar"]],viewQuery:function(t,s){if(1&t&&(l.Gf(F_,5),l.Gf(q_,5),l.Gf(L_,5)),2&t){let a;l.iGM(a=l.CRH())&&(s.monthView=a.first),l.iGM(a=l.CRH())&&(s.yearView=a.first),l.iGM(a=l.CRH())&&(s.multiYearView=a.first)}},hostAttrs:[1,"mat-calendar"],inputs:{startView:"startView",startAt:"startAt",selected:"selected",minDate:"minDate",maxDate:"maxDate",headerComponent:"headerComponent",dateFilter:"dateFilter",dateClass:"dateClass",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd"},outputs:{selectedChange:"selectedChange",yearSelected:"yearSelected",monthSelected:"monthSelected",viewChanged:"viewChanged",_userSelection:"_userSelection"},exportAs:["matCalendar"],features:[l._Bn([P_]),l.TTD],decls:5,vars:5,consts:[[3,"cdkPortalOutlet"],["cdkMonitorSubtreeFocus","","tabindex","-1",1,"mat-calendar-content",3,"ngSwitch"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","comparisonStart","comparisonEnd","activeDateChange","_userSelection",4,"ngSwitchCase"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","activeDateChange","monthSelected","selectedChange",4,"ngSwitchCase"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","activeDateChange","yearSelected","selectedChange",4,"ngSwitchCase"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","comparisonStart","comparisonEnd","activeDateChange","_userSelection"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","activeDateChange","monthSelected","selectedChange"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","activeDateChange","yearSelected","selectedChange"]],template:function(t,s){1&t&&(l.YNc(0,JE,0,0,"ng-template",0),l.TgZ(1,"div",1),l.YNc(2,QE,1,8,"mat-month-view",2),l.YNc(3,WE,1,6,"mat-year-view",3),l.YNc(4,XE,1,6,"mat-multi-year-view",4),l.qZA()),2&t&&(l.Q6J("cdkPortalOutlet",s._calendarHeaderPortal),l.xp6(1),l.Q6J("ngSwitch",s.currentView),l.xp6(1),l.Q6J("ngSwitchCase","month"),l.xp6(1),l.Q6J("ngSwitchCase","year"),l.xp6(1),l.Q6J("ngSwitchCase","multi-year"))},directives:[is,Cn.kH,J.RF,J.n9,F_,q_,L_],styles:['.mat-calendar{display:block}.mat-calendar-header{padding:8px 8px 0 8px}.mat-calendar-content{padding:0 8px 8px 8px;outline:none}.mat-calendar-controls{display:flex;margin:5% calc(33% / 7 - 16px)}.mat-calendar-controls .mat-icon-button:hover .mat-button-focus-overlay{opacity:.04}.mat-calendar-spacer{flex:1 1 auto}.mat-calendar-period-button{min-width:0}.mat-calendar-arrow{display:inline-block;width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top-width:5px;border-top-style:solid;margin:0 0 0 5px;vertical-align:middle}.mat-calendar-arrow.mat-calendar-invert{transform:rotate(180deg)}[dir=rtl] .mat-calendar-arrow{margin:0 5px 0 0}.mat-calendar-previous-button,.mat-calendar-next-button{position:relative}.mat-calendar-previous-button::after,.mat-calendar-next-button::after{top:0;left:0;right:0;bottom:0;position:absolute;content:"";margin:15.5px;border:0 solid currentColor;border-top-width:2px}[dir=rtl] .mat-calendar-previous-button,[dir=rtl] .mat-calendar-next-button{transform:rotate(180deg)}.mat-calendar-previous-button::after{border-left-width:2px;transform:translateX(2px) rotate(-45deg)}.mat-calendar-next-button::after{border-right-width:2px;transform:translateX(-2px) rotate(45deg)}.mat-calendar-table{border-spacing:0;border-collapse:collapse;width:100%}.mat-calendar-table-header th{text-align:center;padding:0 0 8px 0}.mat-calendar-table-header-divider{position:relative;height:1px}.mat-calendar-table-header-divider::after{content:"";position:absolute;top:0;left:-8px;right:-8px;height:1px}.mat-calendar-abbr{text-decoration:none}\n'],encapsulation:2,changeDetection:0}),i})();const U_={transformPanel:(0,at.X$)("transformPanel",[(0,at.eR)("void => enter-dropdown",(0,at.jt)("120ms cubic-bezier(0, 0, 0.2, 1)",(0,at.F4)([(0,at.oB)({opacity:0,transform:"scale(1, 0.8)"}),(0,at.oB)({opacity:1,transform:"scale(1, 1)"})]))),(0,at.eR)("void => enter-dialog",(0,at.jt)("150ms cubic-bezier(0, 0, 0.2, 1)",(0,at.F4)([(0,at.oB)({opacity:0,transform:"scale(0.7)"}),(0,at.oB)({transform:"none",opacity:1})]))),(0,at.eR)("* => void",(0,at.jt)("100ms linear",(0,at.oB)({opacity:0})))]),fadeInCalendar:(0,at.X$)("fadeInCalendar",[(0,at.SB)("void",(0,at.oB)({opacity:0})),(0,at.SB)("enter",(0,at.oB)({opacity:1})),(0,at.eR)("void => *",(0,at.jt)("120ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)"))])};let y1=0;const j_=new l.OlP("mat-datepicker-scroll-strategy"),w1={provide:j_,deps:[ss],useFactory:function(i){return()=>i.scrollStrategies.reposition()}},b1=(0,Q.pj)(class{constructor(i){this._elementRef=i}});let S1=(()=>{class i extends b1{constructor(t,s,a,c,d,p){super(t),this._changeDetectorRef=s,this._globalModel=a,this._dateAdapter=c,this._rangeSelectionStrategy=d,this._subscriptions=new Yt.w,this._animationDone=new wt.xQ,this._actionsPortal=null,this._closeButtonText=p.closeCalendarLabel}ngOnInit(){this._model=this._actionsPortal?this._globalModel.clone():this._globalModel,this._animationState=this.datepicker.touchUi?"enter-dialog":"enter-dropdown"}ngAfterViewInit(){this._subscriptions.add(this.datepicker.stateChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})),this._calendar.focusActiveCell()}ngOnDestroy(){this._subscriptions.unsubscribe(),this._animationDone.complete()}_handleUserSelection(t){const s=this._model.selection,a=t.value,c=s instanceof ce;if(c&&this._rangeSelectionStrategy){const d=this._rangeSelectionStrategy.selectionFinished(a,s,t.event);this._model.updateSelection(d,this)}else a&&(c||!this._dateAdapter.sameDate(a,s))&&this._model.add(a);(!this._model||this._model.isComplete())&&!this._actionsPortal&&this.datepicker.close()}_startExitAnimation(){this._animationState="void",this._changeDetectorRef.markForCheck()}_getSelected(){return this._model.selection}_applyPendingSelection(){this._model!==this._globalModel&&this._globalModel.updateSelection(this._model.selection,this)}}return i.\u0275fac=function(t){return new(t||i)(l.Y36(l.SBq),l.Y36(l.sBO),l.Y36(Qn),l.Y36(Q._A),l.Y36(fu,8),l.Y36(as))},i.\u0275cmp=l.Xpm({type:i,selectors:[["mat-datepicker-content"]],viewQuery:function(t,s){if(1&t&&l.Gf(jh,5),2&t){let a;l.iGM(a=l.CRH())&&(s._calendar=a.first)}},hostAttrs:[1,"mat-datepicker-content"],hostVars:3,hostBindings:function(t,s){1&t&&l.WFA("@transformPanel.done",function(){return s._animationDone.next()}),2&t&&(l.d8E("@transformPanel",s._animationState),l.ekj("mat-datepicker-content-touch",s.datepicker.touchUi))},inputs:{color:"color"},exportAs:["matDatepickerContent"],features:[l.qOj],decls:5,vars:20,consts:[["cdkTrapFocus","",1,"mat-datepicker-content-container"],[3,"id","ngClass","startAt","startView","minDate","maxDate","dateFilter","headerComponent","selected","dateClass","comparisonStart","comparisonEnd","yearSelected","monthSelected","viewChanged","_userSelection"],[3,"cdkPortalOutlet"],["type","button","mat-raised-button","",1,"mat-datepicker-close-button",3,"color","focus","blur","click"]],template:function(t,s){1&t&&(l.TgZ(0,"div",0),l.TgZ(1,"mat-calendar",1),l.NdJ("yearSelected",function(c){return s.datepicker._selectYear(c)})("monthSelected",function(c){return s.datepicker._selectMonth(c)})("viewChanged",function(c){return s.datepicker._viewChanged(c)})("_userSelection",function(c){return s._handleUserSelection(c)}),l.qZA(),l.YNc(2,$E,0,0,"ng-template",2),l.TgZ(3,"button",3),l.NdJ("focus",function(){return s._closeButtonFocused=!0})("blur",function(){return s._closeButtonFocused=!1})("click",function(){return s.datepicker.close()}),l._uU(4),l.qZA(),l.qZA()),2&t&&(l.ekj("mat-datepicker-content-container-with-actions",s._actionsPortal),l.xp6(1),l.Q6J("id",s.datepicker.id)("ngClass",s.datepicker.panelClass)("startAt",s.datepicker.startAt)("startView",s.datepicker.startView)("minDate",s.datepicker._getMinDate())("maxDate",s.datepicker._getMaxDate())("dateFilter",s.datepicker._getDateFilter())("headerComponent",s.datepicker.calendarHeaderComponent)("selected",s._getSelected())("dateClass",s.datepicker.dateClass)("comparisonStart",s.comparisonStart)("comparisonEnd",s.comparisonEnd)("@fadeInCalendar","enter"),l.xp6(1),l.Q6J("cdkPortalOutlet",s._actionsPortal),l.xp6(1),l.ekj("cdk-visually-hidden",!s._closeButtonFocused),l.Q6J("color",s.color||"primary"),l.xp6(1),l.Oqu(s._closeButtonText))},directives:[Cn.mK,jh,J.mk,is,In.lW],styles:[".mat-datepicker-content{display:block;border-radius:4px}.mat-datepicker-content .mat-calendar{width:296px;height:354px}.mat-datepicker-content .mat-datepicker-close-button{position:absolute;top:100%;left:0;margin-top:8px}.ng-animating .mat-datepicker-content .mat-datepicker-close-button{display:none}.mat-datepicker-content-container{display:flex;flex-direction:column;justify-content:space-between}.mat-datepicker-content-touch{display:block;max-height:80vh;position:relative;overflow:visible}.mat-datepicker-content-touch .mat-datepicker-content-container{min-height:312px;max-height:788px;min-width:250px;max-width:750px}.mat-datepicker-content-touch .mat-calendar{width:100%;height:auto}@media all and (orientation: landscape){.mat-datepicker-content-touch .mat-datepicker-content-container{width:64vh;height:80vh}}@media all and (orientation: portrait){.mat-datepicker-content-touch .mat-datepicker-content-container{width:80vw;height:100vw}.mat-datepicker-content-touch .mat-datepicker-content-container-with-actions{height:115vw}}\n"],encapsulation:2,data:{animation:[U_.transformPanel,U_.fadeInCalendar]},changeDetection:0}),i})(),xi=(()=>{class i{constructor(t,s,a,c,d,p,m,v,_){this._overlay=s,this._ngZone=a,this._viewContainerRef=c,this._dateAdapter=p,this._dir=m,this._model=_,this._inputStateChanges=Yt.w.EMPTY,this.startView="month",this._touchUi=!1,this.xPosition="start",this.yPosition="below",this._restoreFocus=!0,this.yearSelected=new l.vpe,this.monthSelected=new l.vpe,this.viewChanged=new l.vpe(!0),this.openedStream=new l.vpe,this.closedStream=new l.vpe,this._opened=!1,this.id="mat-datepicker-"+y1++,this._focusedElementBeforeOpen=null,this._backdropHarnessClass=`${this.id}-backdrop`,this.stateChanges=new wt.xQ,this._scrollStrategy=d}get startAt(){return this._startAt||(this.datepickerInput?this.datepickerInput.getStartValue():null)}set startAt(t){this._startAt=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t))}get color(){return this._color||(this.datepickerInput?this.datepickerInput.getThemePalette():void 0)}set color(t){this._color=t}get touchUi(){return this._touchUi}set touchUi(t){this._touchUi=(0,Z.Ig)(t)}get disabled(){return void 0===this._disabled&&this.datepickerInput?this.datepickerInput.disabled:!!this._disabled}set disabled(t){const s=(0,Z.Ig)(t);s!==this._disabled&&(this._disabled=s,this.stateChanges.next(void 0))}get restoreFocus(){return this._restoreFocus}set restoreFocus(t){this._restoreFocus=(0,Z.Ig)(t)}get panelClass(){return this._panelClass}set panelClass(t){this._panelClass=(0,Z.du)(t)}get opened(){return this._opened}set opened(t){(0,Z.Ig)(t)?this.open():this.close()}_getMinDate(){return this.datepickerInput&&this.datepickerInput.min}_getMaxDate(){return this.datepickerInput&&this.datepickerInput.max}_getDateFilter(){return this.datepickerInput&&this.datepickerInput.dateFilter}ngOnChanges(t){const s=t.xPosition||t.yPosition;if(s&&!s.firstChange&&this._overlayRef){const a=this._overlayRef.getConfig().positionStrategy;a instanceof Nh&&(this._setConnectedPositions(a),this.opened&&this._overlayRef.updatePosition())}this.stateChanges.next(void 0)}ngOnDestroy(){this._destroyOverlay(),this.close(),this._inputStateChanges.unsubscribe(),this.stateChanges.complete()}select(t){this._model.add(t)}_selectYear(t){this.yearSelected.emit(t)}_selectMonth(t){this.monthSelected.emit(t)}_viewChanged(t){this.viewChanged.emit(t)}registerInput(t){return this._inputStateChanges.unsubscribe(),this.datepickerInput=t,this._inputStateChanges=t.stateChanges.subscribe(()=>this.stateChanges.next(void 0)),this._model}registerActions(t){this._actionsPortal=t}removeActions(t){t===this._actionsPortal&&(this._actionsPortal=null)}open(){this._opened||this.disabled||(this._focusedElementBeforeOpen=(0,Ct.ht)(),this._openOverlay(),this._opened=!0,this.openedStream.emit())}close(){if(!this._opened)return;if(this._componentRef){const s=this._componentRef.instance;s._startExitAnimation(),s._animationDone.pipe((0,du.q)(1)).subscribe(()=>this._destroyOverlay())}const t=()=>{this._opened&&(this._opened=!1,this.closedStream.emit(),this._focusedElementBeforeOpen=null)};this._restoreFocus&&this._focusedElementBeforeOpen&&"function"==typeof this._focusedElementBeforeOpen.focus?(this._focusedElementBeforeOpen.focus(),setTimeout(t)):t()}_applyPendingSelection(){var t,s;null===(s=null===(t=this._componentRef)||void 0===t?void 0:t.instance)||void 0===s||s._applyPendingSelection()}_forwardContentValues(t){t.datepicker=this,t.color=this.color,t._actionsPortal=this._actionsPortal}_openOverlay(){this._destroyOverlay();const t=this.touchUi,s=this.datepickerInput.getOverlayLabelId(),a=new Sh(S1,this._viewContainerRef),c=this._overlayRef=this._overlay.create(new Oh({positionStrategy:t?this._getDialogStrategy():this._getDropdownStrategy(),hasBackdrop:!0,backdropClass:[t?"cdk-overlay-dark-backdrop":"mat-overlay-transparent-backdrop",this._backdropHarnessClass],direction:this._dir,scrollStrategy:t?this._overlay.scrollStrategies.block():this._scrollStrategy(),panelClass:"mat-datepicker-"+(t?"dialog":"popup")})),d=c.overlayElement;d.setAttribute("role","dialog"),s&&d.setAttribute("aria-labelledby",s),t&&d.setAttribute("aria-modal","true"),this._getCloseStream(c).subscribe(p=>{p&&p.preventDefault(),this.close()}),this._componentRef=c.attach(a),this._forwardContentValues(this._componentRef.instance),t||this._ngZone.onStable.pipe((0,du.q)(1)).subscribe(()=>c.updatePosition())}_destroyOverlay(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=this._componentRef=null)}_getDialogStrategy(){return this._overlay.position().global().centerHorizontally().centerVertically()}_getDropdownStrategy(){const t=this._overlay.position().flexibleConnectedTo(this.datepickerInput.getConnectedOverlayOrigin()).withTransformOriginOn(".mat-datepicker-content").withFlexibleDimensions(!1).withViewportMargin(8).withLockedPosition();return this._setConnectedPositions(t)}_setConnectedPositions(t){const s="end"===this.xPosition?"end":"start",a="start"===s?"end":"start",c="above"===this.yPosition?"bottom":"top",d="top"===c?"bottom":"top";return t.withPositions([{originX:s,originY:d,overlayX:s,overlayY:c},{originX:s,originY:c,overlayX:s,overlayY:d},{originX:a,originY:d,overlayX:a,overlayY:c},{originX:a,originY:c,overlayX:a,overlayY:d}])}_getCloseStream(t){return(0,os.T)(t.backdropClick(),t.detachments(),t.keydownEvents().pipe((0,w_.h)(s=>s.keyCode===W.hY&&!(0,W.Vb)(s)||this.datepickerInput&&(0,W.Vb)(s,"altKey")&&s.keyCode===W.LH)))}}return i.\u0275fac=function(t){return new(t||i)(l.Y36(l.SBq),l.Y36(ss),l.Y36(l.R0b),l.Y36(l.s_b),l.Y36(j_),l.Y36(Q._A,8),l.Y36(be.Is,8),l.Y36(J.K0,8),l.Y36(Qn))},i.\u0275dir=l.lG2({type:i,inputs:{startView:"startView",xPosition:"xPosition",yPosition:"yPosition",startAt:"startAt",color:"color",touchUi:"touchUi",disabled:"disabled",restoreFocus:"restoreFocus",panelClass:"panelClass",opened:"opened",calendarHeaderComponent:"calendarHeaderComponent",dateClass:"dateClass"},outputs:{yearSelected:"yearSelected",monthSelected:"monthSelected",viewChanged:"viewChanged",openedStream:"opened",closedStream:"closed"},features:[l.TTD]}),i})(),I1=(()=>{class i extends xi{}return i.\u0275fac=function(){let e;return function(s){return(e||(e=l.n5z(i)))(s||i)}}(),i.\u0275cmp=l.Xpm({type:i,selectors:[["mat-datepicker"]],exportAs:["matDatepicker"],features:[l._Bn([P_,{provide:xi,useExisting:i}]),l.qOj],decls:0,vars:0,template:function(t,s){},encapsulation:2,changeDetection:0}),i})();class pu{constructor(e,t){this.target=e,this.targetElement=t,this.value=this.target.value}}let Y_=(()=>{class i{constructor(t,s,a){this._elementRef=t,this._dateAdapter=s,this._dateFormats=a,this.dateChange=new l.vpe,this.dateInput=new l.vpe,this.stateChanges=new wt.xQ,this._onTouched=()=>{},this._validatorOnChange=()=>{},this._cvaOnChange=()=>{},this._valueChangesSubscription=Yt.w.EMPTY,this._localeSubscription=Yt.w.EMPTY,this._parseValidator=()=>this._lastValueValid?null:{matDatepickerParse:{text:this._elementRef.nativeElement.value}},this._filterValidator=c=>{const d=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(c.value));return!d||this._matchesFilter(d)?null:{matDatepickerFilter:!0}},this._minValidator=c=>{const d=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(c.value)),p=this._getMinDate();return!p||!d||this._dateAdapter.compareDate(p,d)<=0?null:{matDatepickerMin:{min:p,actual:d}}},this._maxValidator=c=>{const d=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(c.value)),p=this._getMaxDate();return!p||!d||this._dateAdapter.compareDate(p,d)>=0?null:{matDatepickerMax:{max:p,actual:d}}},this._lastValueValid=!1,this._localeSubscription=s.localeChanges.subscribe(()=>{this._assignValueProgrammatically(this.value)})}get value(){return this._model?this._getValueFromModel(this._model.selection):this._pendingValue}set value(t){this._assignValueProgrammatically(t)}get disabled(){return!!this._disabled||this._parentDisabled()}set disabled(t){const s=(0,Z.Ig)(t),a=this._elementRef.nativeElement;this._disabled!==s&&(this._disabled=s,this.stateChanges.next(void 0)),s&&this._isInitialized&&a.blur&&a.blur()}_getValidators(){return[this._parseValidator,this._minValidator,this._maxValidator,this._filterValidator]}_registerModel(t){this._model=t,this._valueChangesSubscription.unsubscribe(),this._pendingValue&&this._assignValue(this._pendingValue),this._valueChangesSubscription=this._model.selectionChanged.subscribe(s=>{if(this._shouldHandleChangeEvent(s)){const a=this._getValueFromModel(s.selection);this._lastValueValid=this._isValidValue(a),this._cvaOnChange(a),this._onTouched(),this._formatValue(a),this.dateInput.emit(new pu(this,this._elementRef.nativeElement)),this.dateChange.emit(new pu(this,this._elementRef.nativeElement))}})}ngAfterViewInit(){this._isInitialized=!0}ngOnChanges(t){(function(i,e){const t=Object.keys(i);for(let s of t){const{previousValue:a,currentValue:c}=i[s];if(!e.isDateInstance(a)||!e.isDateInstance(c))return!0;if(!e.sameDate(a,c))return!0}return!1})(t,this._dateAdapter)&&this.stateChanges.next(void 0)}ngOnDestroy(){this._valueChangesSubscription.unsubscribe(),this._localeSubscription.unsubscribe(),this.stateChanges.complete()}registerOnValidatorChange(t){this._validatorOnChange=t}validate(t){return this._validator?this._validator(t):null}writeValue(t){this._assignValueProgrammatically(t)}registerOnChange(t){this._cvaOnChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t}_onKeydown(t){t.altKey&&t.keyCode===W.JH&&!this._elementRef.nativeElement.readOnly&&(this._openPopup(),t.preventDefault())}_onInput(t){const s=this._lastValueValid;let a=this._dateAdapter.parse(t,this._dateFormats.parse.dateInput);this._lastValueValid=this._isValidValue(a),a=this._dateAdapter.getValidDateOrNull(a),this._dateAdapter.sameDate(a,this.value)?(t&&!this.value&&this._cvaOnChange(a),s!==this._lastValueValid&&this._validatorOnChange()):(this._assignValue(a),this._cvaOnChange(a),this.dateInput.emit(new pu(this,this._elementRef.nativeElement)))}_onChange(){this.dateChange.emit(new pu(this,this._elementRef.nativeElement))}_onBlur(){this.value&&this._formatValue(this.value),this._onTouched()}_formatValue(t){this._elementRef.nativeElement.value=t?this._dateAdapter.format(t,this._dateFormats.display.dateInput):""}_assignValue(t){this._model?(this._assignValueToModel(t),this._pendingValue=null):this._pendingValue=t}_isValidValue(t){return!t||this._dateAdapter.isValid(t)}_parentDisabled(){return!1}_assignValueProgrammatically(t){t=this._dateAdapter.deserialize(t),this._lastValueValid=this._isValidValue(t),t=this._dateAdapter.getValidDateOrNull(t),this._assignValue(t),this._formatValue(t)}_matchesFilter(t){const s=this._getDateFilter();return!s||s(t)}}return i.\u0275fac=function(t){return new(t||i)(l.Y36(l.SBq),l.Y36(Q._A,8),l.Y36(Q.sG,8))},i.\u0275dir=l.lG2({type:i,inputs:{value:"value",disabled:"disabled"},outputs:{dateChange:"dateChange",dateInput:"dateInput"},features:[l.TTD]}),i})();const C1={provide:B.JU,useExisting:(0,l.Gpc)(()=>Yh),multi:!0},T1={provide:B.Cf,useExisting:(0,l.Gpc)(()=>Yh),multi:!0};let Yh=(()=>{class i extends Y_{constructor(t,s,a,c){super(t,s,a),this._formField=c,this._closedSubscription=Yt.w.EMPTY,this._validator=B.kI.compose(super._getValidators())}set matDatepicker(t){t&&(this._datepicker=t,this._closedSubscription=t.closedStream.subscribe(()=>this._onTouched()),this._registerModel(t.registerInput(this)))}get min(){return this._min}set min(t){const s=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t));this._dateAdapter.sameDate(s,this._min)||(this._min=s,this._validatorOnChange())}get max(){return this._max}set max(t){const s=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(t));this._dateAdapter.sameDate(s,this._max)||(this._max=s,this._validatorOnChange())}get dateFilter(){return this._dateFilter}set dateFilter(t){const s=this._matchesFilter(this.value);this._dateFilter=t,this._matchesFilter(this.value)!==s&&this._validatorOnChange()}getConnectedOverlayOrigin(){return this._formField?this._formField.getConnectedOverlayOrigin():this._elementRef}getOverlayLabelId(){return this._formField?this._formField.getLabelId():this._elementRef.nativeElement.getAttribute("aria-labelledby")}getThemePalette(){return this._formField?this._formField.color:void 0}getStartValue(){return this.value}ngOnDestroy(){super.ngOnDestroy(),this._closedSubscription.unsubscribe()}_openPopup(){this._datepicker&&this._datepicker.open()}_getValueFromModel(t){return t}_assignValueToModel(t){this._model&&this._model.updateSelection(t,this)}_getMinDate(){return this._min}_getMaxDate(){return this._max}_getDateFilter(){return this._dateFilter}_shouldHandleChangeEvent(t){return t.source!==this}}return i.\u0275fac=function(t){return new(t||i)(l.Y36(l.SBq),l.Y36(Q._A,8),l.Y36(Q.sG,8),l.Y36(an.G_,8))},i.\u0275dir=l.lG2({type:i,selectors:[["input","matDatepicker",""]],hostAttrs:[1,"mat-datepicker-input"],hostVars:6,hostBindings:function(t,s){1&t&&l.NdJ("input",function(c){return s._onInput(c.target.value)})("change",function(){return s._onChange()})("blur",function(){return s._onBlur()})("keydown",function(c){return s._onKeydown(c)}),2&t&&(l.Ikx("disabled",s.disabled),l.uIk("aria-haspopup",s._datepicker?"dialog":null)("aria-owns",(null==s._datepicker?null:s._datepicker.opened)&&s._datepicker.id||null)("min",s.min?s._dateAdapter.toIso8601(s.min):null)("max",s.max?s._dateAdapter.toIso8601(s.max):null)("data-mat-calendar",s._datepicker?s._datepicker.id:null))},inputs:{matDatepicker:"matDatepicker",min:"min",max:"max",dateFilter:["matDatepickerFilter","dateFilter"]},exportAs:["matDatepickerInput"],features:[l._Bn([C1,T1,{provide:su.Jk,useExisting:i}]),l.qOj]}),i})(),k1=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=l.lG2({type:i,selectors:[["","matDatepickerToggleIcon",""]]}),i})(),D1=(()=>{class i{constructor(t,s,a){this._intl=t,this._changeDetectorRef=s,this._stateChanges=Yt.w.EMPTY;const c=Number(a);this.tabIndex=c||0===c?c:null}get disabled(){return void 0===this._disabled&&this.datepicker?this.datepicker.disabled:!!this._disabled}set disabled(t){this._disabled=(0,Z.Ig)(t)}ngOnChanges(t){t.datepicker&&this._watchStateChanges()}ngOnDestroy(){this._stateChanges.unsubscribe()}ngAfterContentInit(){this._watchStateChanges()}_open(t){this.datepicker&&!this.disabled&&(this.datepicker.open(),t.stopPropagation())}_watchStateChanges(){const t=this.datepicker?this.datepicker.stateChanges:(0,Jn.of)(),s=this.datepicker&&this.datepicker.datepickerInput?this.datepicker.datepickerInput.stateChanges:(0,Jn.of)(),a=this.datepicker?(0,os.T)(this.datepicker.openedStream,this.datepicker.closedStream):(0,Jn.of)();this._stateChanges.unsubscribe(),this._stateChanges=(0,os.T)(this._intl.changes,t,s,a).subscribe(()=>this._changeDetectorRef.markForCheck())}}return i.\u0275fac=function(t){return new(t||i)(l.Y36(as),l.Y36(l.sBO),l.$8M("tabindex"))},i.\u0275cmp=l.Xpm({type:i,selectors:[["mat-datepicker-toggle"]],contentQueries:function(t,s,a){if(1&t&&l.Suo(a,k1,5),2&t){let c;l.iGM(c=l.CRH())&&(s._customIcon=c.first)}},viewQuery:function(t,s){if(1&t&&l.Gf(t1,5),2&t){let a;l.iGM(a=l.CRH())&&(s._button=a.first)}},hostAttrs:[1,"mat-datepicker-toggle"],hostVars:8,hostBindings:function(t,s){1&t&&l.NdJ("click",function(c){return s._open(c)}),2&t&&(l.uIk("tabindex",null)("data-mat-calendar",s.datepicker?s.datepicker.id:null),l.ekj("mat-datepicker-toggle-active",s.datepicker&&s.datepicker.opened)("mat-accent",s.datepicker&&"accent"===s.datepicker.color)("mat-warn",s.datepicker&&"warn"===s.datepicker.color))},inputs:{tabIndex:"tabIndex",disabled:"disabled",datepicker:["for","datepicker"],ariaLabel:["aria-label","ariaLabel"],disableRipple:"disableRipple"},exportAs:["matDatepickerToggle"],features:[l.TTD],ngContentSelectors:i1,decls:4,vars:6,consts:[["mat-icon-button","","type","button",3,"disabled","disableRipple"],["button",""],["class","mat-datepicker-toggle-default-icon","viewBox","0 0 24 24","width","24px","height","24px","fill","currentColor","focusable","false",4,"ngIf"],["viewBox","0 0 24 24","width","24px","height","24px","fill","currentColor","focusable","false",1,"mat-datepicker-toggle-default-icon"],["d","M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"]],template:function(t,s){1&t&&(l.F$t(n1),l.TgZ(0,"button",0,1),l.YNc(2,e1,2,0,"svg",2),l.Hsn(3),l.qZA()),2&t&&(l.Q6J("disabled",s.disabled)("disableRipple",s.disableRipple),l.uIk("aria-haspopup",s.datepicker?"dialog":null)("aria-label",s.ariaLabel||s._intl.openCalendarLabel)("tabindex",s.disabled?-1:s.tabIndex),l.xp6(2),l.Q6J("ngIf",!s._customIcon))},directives:[In.lW,J.O5],styles:[".mat-form-field-appearance-legacy .mat-form-field-prefix .mat-datepicker-toggle-default-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-datepicker-toggle-default-icon{width:1em}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-datepicker-toggle-default-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-datepicker-toggle-default-icon{display:block;width:1.5em;height:1.5em}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-datepicker-toggle-default-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-datepicker-toggle-default-icon{margin:auto}.cdk-high-contrast-active .mat-datepicker-toggle-default-icon{color:CanvasText}\n"],encapsulation:2,changeDetection:0}),i})(),O1=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({providers:[as,w1],imports:[[J.ez,In.ot,jE,Cn.rt,Ih,Q.BQ],xh]}),i})();function R1(i,e){1&i&&(l.TgZ(0,"mat-error"),l._uU(1," firstName is "),l.TgZ(2,"strong"),l._uU(3,"required"),l.qZA(),l.qZA())}function N1(i,e){1&i&&(l.TgZ(0,"mat-error"),l._uU(1," LastName is "),l.TgZ(2,"strong"),l._uU(3,"required"),l.qZA(),l.qZA())}function P1(i,e){1&i&&(l.TgZ(0,"mat-error"),l._uU(1," Email is "),l.TgZ(2,"strong"),l._uU(3,"required"),l.qZA(),l.qZA())}function F1(i,e){if(1&i){const t=l.EpF();l.TgZ(0,"mat-radio-button",27),l.NdJ("change",function(a){return l.CHM(t),l.oxw().radioChange(a)}),l._uU(1),l.qZA()}if(2&i){const t=e.$implicit;l.Q6J("value",e.index+1),l.xp6(1),l.Oqu(t)}}function L1(i,e){if(1&i&&(l.TgZ(0,"div"),l.TgZ(1,"mat-form-field",28),l.TgZ(2,"mat-label"),l._uU(3,"Date Of Birth"),l.qZA(),l._UZ(4,"input",29),l._UZ(5,"mat-datepicker-toggle",30),l._UZ(6,"mat-datepicker",null,31),l.qZA(),l.TgZ(8,"mat-form-field",4),l.TgZ(9,"mat-label"),l._uU(10,"Purpose"),l.qZA(),l._UZ(11,"textarea",32),l.qZA(),l.qZA()),2&i){const t=l.MAs(7);l.xp6(4),l.Q6J("matDatepicker",t),l.xp6(1),l.Q6J("for",t)}}function V1(i,e){1&i&&(l.TgZ(0,"mat-form-field",4),l.TgZ(1,"mat-label"),l._uU(2,"library Name"),l.qZA(),l._UZ(3,"input",33),l.qZA(),l.TgZ(4,"mat-form-field",4),l.TgZ(5,"mat-label"),l._uU(6,"Location"),l.qZA(),l._UZ(7,"input",34),l.qZA(),l.TgZ(8,"mat-form-field",4),l.TgZ(9,"mat-label"),l._uU(10,"Capacity"),l.qZA(),l._UZ(11,"input",35),l.qZA(),l.TgZ(12,"mat-form-field",4),l.TgZ(13,"mat-label"),l._uU(14,"Mobile Number"),l.qZA(),l._UZ(15,"input",36),l.qZA())}function B1(i,e){if(1&i){const t=l.EpF();l.TgZ(0,"label",37),l.TgZ(1,"input",38),l.NdJ("change",function(a){return l.CHM(t),l.oxw().readImage(a)}),l.qZA(),l.TgZ(2,"mat-icon",39),l._uU(3," cloud_download "),l.qZA(),l.TgZ(4,"span",40),l._uU(5),l.qZA(),l.qZA()}if(2&i){const t=l.oxw();l.xp6(5),l.hij(" ",1==t.role?"uplaod Photo id":"Owner ID proof"," ")}}function q1(i,e){if(1&i&&l._UZ(0,"img",46),2&i){const t=l.oxw().$implicit;l.Q6J("src",null==t?null:t.imageUrl,l.LSH)}}function U1(i,e){1&i&&l._UZ(0,"img",47)}function j1(i,e){if(1&i){const t=l.EpF();l.TgZ(0,"label",41),l.YNc(1,q1,1,1,"img",42),l.YNc(2,U1,1,0,"img",43),l.TgZ(3,"a",44),l.NdJ("click",function(){const c=l.CHM(t).index;return l.oxw().removeImage(c)}),l.TgZ(4,"mat-icon",45),l._uU(5,"close"),l.qZA(),l.qZA(),l.qZA()}if(2&i){const t=e.$implicit;l.xp6(1),l.Q6J("ngIf",t),l.xp6(1),l.Q6J("ngIf",!t)}}const Y1=function(){return{standalone:!0}};let G1=(()=>{class i{constructor(t){this.fb=t,this.role=1,this.roleArr=["User","Owner"],this.form=this.fb.group({firstName:["",B.kI.required],lastName:["",B.kI.required],email:["",B.kI.required],address:["",B.kI.required],purpose:["",B.kI.required],dob:["",B.kI.required],photoId:["",B.kI.required]}),this.isEditable=!1,this.photos=[],this.images=[],console.log(this.form.value)}ngOnInit(){}removeImage(t){console.log("remove button triggered"),this.photos.splice(t,1)}readImage(t){if(t.target.files&&t.target.files[0]){var s=new FileReader;const a=t.target.files[0];s.readAsDataURL(t.target.files[0]),s.onload=c=>{this.photos.push({file:a,imageUrl:c.target.result})}}}radioChange(t){console.log("hello there",t.value),1===t.value?(this.form.removeControl("libraryName"),this.form.removeControl("location"),this.form.removeControl("capacity"),this.form.removeControl("mobileNumber"),this.form.removeControl("ownersId"),this.form.addControl("photoId",new B.NI("",B.kI.required)),this.form.addControl("dob",new B.NI("",B.kI.required)),this.form.addControl("purpose",new B.NI("",B.kI.required))):(this.form.removeControl("photoId"),this.form.removeControl("dob"),this.form.removeControl("purpose"),this.form.addControl("libraryName",new B.NI("",B.kI.required)),this.form.addControl("location",new B.NI("",B.kI.required)),this.form.addControl("capacity",new B.NI("",B.kI.required)),this.form.addControl("mobileNumber",new B.NI("",B.kI.required)),this.form.addControl("ownersId",new B.NI("",B.kI.required))),console.log(this.form.value)}}return i.\u0275fac=function(t){return new(t||i)(l.Y36(B.qu))},i.\u0275cmp=l.Xpm({type:i,selectors:[["app-custom-stepper"]],decls:72,vars:14,consts:[["linear",""],["stepper",""],[3,"formGroup"],[3,"editable"],["appearance","fill",1,"full-width"],["type","email","matInput","","formControlName","firstName"],[4,"ngIf"],["color","primary","matSuffix",""],["type","email","matInput","","formControlName","lastName"],["type","email","matInput","","placeholder","Ex. pat@example.com","formControlName","email"],[1,"mt-2"],["mat-fab","","color","primary","matStepperNext",""],["matInput","","formControlName","address"],["aria-label","Select an option",3,"ngModel","ngModelOptions","ngModelChange"],["class","ms-4",3,"value","change",4,"ngFor","ngForOf"],[1,"mt-4","d-flex","justify-content-between"],["mat-fab","","color","primary","matStepperPrevious",""],["mat-fab","","color","primary","matStepperNext","",1,"ms-5"],[4,"ngIf","ngIfElse"],["roleCaseTwo",""],[1,"d-flex","align-items-center","flex-row","justify-content-center","flex-wrap","my-3"],[1,"d-flex","align-items-center"],["class","upload-image primary",4,"ngIf"],["class","position-relative",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between"],["mat-raised-button","","color","primary"],["mat-fab","","color","primary",3,"click"],[1,"ms-4",3,"value","change"],["color","accent","appearance","fill",1,"full-width"],["matInput","","formControlName","dob",3,"matDatepicker"],["matSuffix","",3,"for"],["picker1",""],["type","text","matInput","","formControlName","purpose"],["type","text","matInput","","formControlName","libraryName"],["type","text","matInput","","formControlName","location"],["type","text","matInput","","formControlName","capacity"],["type","text","matInput","","formControlName","mobileNumber"],[1,"upload-image","primary"],["type","file","hidden","",3,"change"],["color","primary",2,"font-size","40px","height","40px","width","40px"],[1,"text-center"],[1,"position-relative"],["alt","photos","class","uploaded-img",3,"src",4,"ngIf"],["src","assets/img/image-placeholder.svg","alt","photo",4,"ngIf"],["href","javascript:void(0)",1,"remove-img",3,"click"],["color",""],["alt","photos",1,"uploaded-img",3,"src"],["src","assets/img/image-placeholder.svg","alt","photo"]],template:function(t,s){if(1&t){const a=l.EpF();l.TgZ(0,"mat-stepper",0,1),l.TgZ(2,"form",2),l.TgZ(3,"mat-step",3),l.TgZ(4,"mat-form-field",4),l.TgZ(5,"mat-label"),l._uU(6,"First Name"),l.qZA(),l._UZ(7,"input",5),l.YNc(8,R1,4,0,"mat-error",6),l.TgZ(9,"mat-icon",7),l._uU(10,"account_circle"),l.qZA(),l.qZA(),l.TgZ(11,"mat-form-field",4),l.TgZ(12,"mat-label"),l._uU(13,"Last Name"),l.qZA(),l._UZ(14,"input",8),l.YNc(15,N1,4,0,"mat-error",6),l.TgZ(16,"mat-icon",7),l._uU(17,"account_circle"),l.qZA(),l.qZA(),l.TgZ(18,"mat-form-field",4),l.TgZ(19,"mat-label"),l._uU(20,"Email"),l.qZA(),l._UZ(21,"input",9),l.YNc(22,P1,4,0,"mat-error",6),l.TgZ(23,"mat-icon",7),l._uU(24,"email"),l.qZA(),l.qZA(),l.TgZ(25,"div",10),l.TgZ(26,"button",11),l.TgZ(27,"mat-icon"),l._uU(28,"navigate_next"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(29,"mat-step",3),l.TgZ(30,"mat-form-field",4),l.TgZ(31,"mat-label"),l._uU(32,"Address"),l.qZA(),l._UZ(33,"textarea",12),l.qZA(),l.TgZ(34,"mat-radio-group",13),l.NdJ("ngModelChange",function(d){return s.role=d}),l.TgZ(35,"mat-label"),l._uU(36,"Who Are You?"),l.qZA(),l._UZ(37,"br"),l.YNc(38,F1,2,2,"mat-radio-button",14),l.qZA(),l.TgZ(39,"div",15),l.TgZ(40,"button",16),l.TgZ(41,"mat-icon"),l._uU(42,"navigate_before"),l.qZA(),l.qZA(),l.TgZ(43,"button",17),l.TgZ(44,"mat-icon"),l._uU(45,"navigate_next"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(46,"mat-step"),l.YNc(47,L1,12,2,"div",18),l.YNc(48,V1,16,0,"ng-template",null,19,l.W1O),l.TgZ(50,"div",15),l.TgZ(51,"button",16),l.TgZ(52,"mat-icon"),l._uU(53,"navigate_before"),l.qZA(),l.qZA(),l.TgZ(54,"button",17),l.TgZ(55,"mat-icon"),l._uU(56,"navigate_next"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(57,"mat-step"),l.TgZ(58,"div"),l.TgZ(59,"div",20),l.TgZ(60,"div",21),l.YNc(61,B1,6,1,"label",22),l.YNc(62,j1,6,2,"label",23),l.qZA(),l.qZA(),l.qZA(),l.TgZ(63,"div",24),l.TgZ(64,"button",16),l.TgZ(65,"mat-icon"),l._uU(66,"navigate_before"),l.qZA(),l.qZA(),l.TgZ(67,"button",25),l._uU(68,"Submit"),l.qZA(),l.TgZ(69,"button",26),l.NdJ("click",function(){return l.CHM(a),l.MAs(1).reset()}),l.TgZ(70,"mat-icon"),l._uU(71,"replay"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&t){const a=l.MAs(49);let c,d,p;l.xp6(2),l.Q6J("formGroup",s.form),l.xp6(1),l.Q6J("editable",s.isEditable),l.xp6(5),l.Q6J("ngIf",(null==(c=s.form.get("firstName"))?null:c.touched)&&(null==(c=s.form.get("firstName"))?null:c.hasError("required"))),l.xp6(7),l.Q6J("ngIf",(null==(d=s.form.get("lastName"))?null:d.touched)&&(null==(d=s.form.get("lastName"))?null:d.hasError("required"))),l.xp6(7),l.Q6J("ngIf",(null==(p=s.form.get("email"))?null:p.touched)&&(null==(p=s.form.get("email"))?null:p.hasError("required"))),l.xp6(7),l.Q6J("editable",s.isEditable),l.xp6(5),l.Q6J("ngModel",s.role)("ngModelOptions",l.DdM(13,Y1)),l.xp6(4),l.Q6J("ngForOf",s.roleArr),l.xp6(9),l.Q6J("ngIf",1==s.role)("ngIfElse",a),l.xp6(14),l.Q6J("ngIf",!s.photos.length),l.xp6(1),l.Q6J("ngForOf",s.photos)}},directives:[a_,B._Y,B.JL,B.sg,o_,an.KE,an.hX,su.Nt,B.Fj,B.JJ,B.u,J.O5,es.Hw,an.R9,In.lW,TD,m_,B.On,J.sg,kD,an.TO,g_,Yh,D1,I1],styles:[".mat-step-header.mat-horizontal-stepper-header[_ngcontent-%COMP%]{display:none!important}.upload-image[_ngcontent-%COMP%]{border:2px dotted;border-radius:4px;display:flex;flex-direction:column;width:100px;padding:10px 10px 0;height:100px;align-items:center;cursor:pointer;margin:20px 0}.upload-image[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:10px}.uploaded-img[_ngcontent-%COMP%]{width:100px;height:100px;margin-left:15px;object-fit:cover;border-radius:4px}.remove-img[_ngcontent-%COMP%]{position:absolute;top:-20px;right:-20px}.mat-stepper-horizontal[_ngcontent-%COMP%]   .mat-horizontal-stepper-header-container[_ngcontent-%COMP%]{margin-bottom:10px!important}.mat-horizontal-stepper-header[_ngcontent-%COMP%]{padding:0 34px}"]}),i})(),H1=(()=>{class i{constructor(t){this.fb=t,this.form=this.fb.group({firstName:["",B.kI.required],lastName:["",B.kI.required],email:["",B.kI.required]}),this.step0=!0,this.step1=!1,this.role="1",this.step2=!1}ngOnInit(){}takeCommonInfoOfUser(){console.log(this.form.value),localStorage.setItem("commonInfo",JSON.stringify(this.form.value)),localStorage.getItem("commonInfo")&&(this.step0=!1,this.step1=!0)}updateRole(){localStorage.setItem("role",this.role),localStorage.getItem("role")&&(this.step1=!1),this.step2=!0}}return i.\u0275fac=function(t){return new(t||i)(l.Y36(B.qu))},i.\u0275cmp=l.Xpm({type:i,selectors:[["app-register"]],decls:1,vars:0,template:function(t,s){1&t&&l._UZ(0,"app-custom-stepper")},directives:[G1],styles:[".login-wrapper[_ngcontent-%COMP%]{height:100vh}.login-wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{height:100vh}.mat-radio-button[_ngcontent-%COMP%] ~ .mat-radio-button[_ngcontent-%COMP%]{margin-left:16px}"]}),i})();function z1(i,e){if(1&i){const t=l.EpF();l.TgZ(0,"div"),l.TgZ(1,"mat-form-field",11),l.TgZ(2,"mat-label"),l._uU(3,"Mobile Number"),l.qZA(),l.TgZ(4,"input",12),l.NdJ("ngModelChange",function(a){return l.CHM(t),l.oxw().phoneNumber=a}),l.qZA(),l.TgZ(5,"mat-icon",13),l._uU(6,"phone"),l.qZA(),l.qZA(),l.TgZ(7,"div",5),l.TgZ(8,"button",14),l.NdJ("click",function(){return l.CHM(t),l.oxw().getOtp()}),l._uU(9,"Continue"),l.qZA(),l.qZA(),l.qZA()}if(2&i){const t=l.oxw();l.xp6(4),l.Q6J("ngModel",t.phoneNumber)}}function Z1(i,e){1&i&&(l.TgZ(0,"div"),l._UZ(1,"app-otp-input"),l.qZA())}function K1(i,e){if(1&i&&l.YNc(0,Z1,2,0,"div",10),2&i){const t=l.oxw();l.Q6J("ngIf",!t.otpIsVerifiedNow)}}function J1(i,e){1&i&&(l.TgZ(0,"div"),l._UZ(1,"app-register"),l.qZA())}var Q1=Pk.N.firebase;let z_=(()=>{class i{constructor(t,s,a){this.fb=t,this.windowService=s,this.loginService=a,this.phoneNumber="",this.phoneSignIn=!1,this.isOTPSendedSuccessfully=!1,this.otpIsVerifiedNow=!1,this.windowRef=this.windowService.windowRef,this.loginService.isOTPVerified.subscribe(c=>{this.otpIsVerifiedNow=c})}getOtp(){this.reChaptchaVerifier=new ts.Z.auth.RecaptchaVerifier("recaptcha",{size:"invisible"}),ts.Z.auth().signInWithPhoneNumber(this.phoneNumber,this.reChaptchaVerifier).then(t=>{console.log(t),t&&(this.phoneNumber="",localStorage.setItem("verificationId",t.verificationId),this.isOTPSendedSuccessfully=!0)}).catch(t=>{alert(t.message)})}ngOnInit(){ts.Z.initializeApp(Q1)}submit(){}}return i.\u0275fac=function(t){return new(t||i)(l.Y36(B.qu),l.Y36(Fk),l.Y36(zy))},i.\u0275cmp=l.Xpm({type:i,selectors:[["app-login"]],decls:16,vars:4,consts:[[1,"login-wrapper"],[1,"login-overlay"],[1,"container","d-flex","justify-content-end","align-items-center"],[1,"py-5"],[1,"login-form"],[1,"text-center"],[1,"primary"],["src","assets/images/book_icon.jpg","alt","",1,"book_icon"],[4,"ngIf","ngIfElse"],["OTPContainer",""],[4,"ngIf"],["appearance","fill",1,"full-width"],["type","tel","matInput","","placeholder","",3,"ngModel","ngModelChange"],["color","primary","matSuffix",""],["mat-raised-button","","color","primary","type","submit","id","recaptcha",1,"py-1","px-5",3,"click"]],template:function(t,s){if(1&t&&(l.TgZ(0,"div",0),l._UZ(1,"div",1),l.TgZ(2,"div",2),l.TgZ(3,"div"),l.TgZ(4,"mat-card",3),l.TgZ(5,"div",4),l.TgZ(6,"div",5),l.TgZ(7,"mat-card-title"),l.TgZ(8,"span",6),l._uU(9,"Proceed to"),l.qZA(),l._uU(10),l.qZA(),l._UZ(11,"img",7),l.qZA(),l.YNc(12,z1,10,1,"div",8),l.YNc(13,K1,1,1,"ng-template",null,9,l.W1O),l.YNc(15,J1,2,0,"div",10),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&t){const a=l.MAs(14);l.xp6(10),l.hij(" ",1==s.otpIsVerifiedNow?"Register":"Login"," "),l.xp6(2),l.Q6J("ngIf",!s.isOTPSendedSuccessfully)("ngIfElse",a),l.xp6(3),l.Q6J("ngIf",s.otpIsVerifiedNow)}},directives:[_h.a8,_h.n5,J.O5,an.KE,an.hX,su.Nt,B.Fj,B.JJ,B.On,es.Hw,an.R9,In.lW,Yk,H1],styles:[""]}),i})();const W1=[{path:"login",component:z_},{path:"**",redirectTo:"login",component:z_}];let X1=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({imports:[[J.ez,Zy.Bz.forChild(W1),_h.QW,su.c,es.Ps,In.ot,B.u5,jk,B.UX,jD,O1,$y,DD,Q.XK]]}),i})()}}]);